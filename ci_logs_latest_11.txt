2026-02-14T13:14:27.2309406Z Current runner version: '2.331.0'
2026-02-14T13:14:27.2332340Z ##[group]Runner Image Provisioner
2026-02-14T13:14:27.2333176Z Hosted Compute Agent
2026-02-14T13:14:27.2333916Z Version: 20260123.484
2026-02-14T13:14:27.2334585Z Commit: 6bd6555ca37d84114959e1c76d2c01448ff61c5d
2026-02-14T13:14:27.2335284Z Build Date: 2026-01-23T19:41:17Z
2026-02-14T13:14:27.2335931Z Worker ID: {8b7355a3-c2f3-4d0b-aa59-91eb58a4035e}
2026-02-14T13:14:27.2336569Z Azure Region: centralus
2026-02-14T13:14:27.2337197Z ##[endgroup]
2026-02-14T13:14:27.2338675Z ##[group]Operating System
2026-02-14T13:14:27.2339242Z Ubuntu
2026-02-14T13:14:27.2339929Z 24.04.3
2026-02-14T13:14:27.2340343Z LTS
2026-02-14T13:14:27.2340773Z ##[endgroup]
2026-02-14T13:14:27.2341302Z ##[group]Runner Image
2026-02-14T13:14:27.2341846Z Image: ubuntu-24.04
2026-02-14T13:14:27.2342308Z Version: 20260209.23.1
2026-02-14T13:14:27.2343562Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20260209.23/images/ubuntu/Ubuntu2404-Readme.md
2026-02-14T13:14:27.2345173Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20260209.23
2026-02-14T13:14:27.2346148Z ##[endgroup]
2026-02-14T13:14:27.2347177Z ##[group]GITHUB_TOKEN Permissions
2026-02-14T13:14:27.2349216Z Contents: read
2026-02-14T13:14:27.2349821Z Metadata: read
2026-02-14T13:14:27.2350321Z Packages: read
2026-02-14T13:14:27.2350819Z ##[endgroup]
2026-02-14T13:14:27.2352814Z Secret source: Actions
2026-02-14T13:14:27.2353994Z Prepare workflow directory
2026-02-14T13:14:27.2843071Z Prepare all required actions
2026-02-14T13:14:27.2902522Z Getting action download info
2026-02-14T13:14:27.6243494Z Download action repository 'actions/checkout@v4' (SHA:34e114876b0b11c390a56381ad16ebd13914f8d5)
2026-02-14T13:14:27.7724214Z Download action repository 'actions/setup-python@v5' (SHA:a26af69be951a213d495a4c3e4e4022e16d87065)
2026-02-14T13:14:27.9903208Z Complete job name: Run Tests
2026-02-14T13:14:28.0421009Z ##[group]Checking docker version
2026-02-14T13:14:28.0434132Z ##[command]/usr/bin/docker version --format '{{.Server.APIVersion}}'
2026-02-14T13:14:28.1471448Z '1.52'
2026-02-14T13:14:28.1485225Z Docker daemon API version: '1.52'
2026-02-14T13:14:28.1485924Z ##[command]/usr/bin/docker version --format '{{.Client.APIVersion}}'
2026-02-14T13:14:28.1656677Z '1.52'
2026-02-14T13:14:28.1669711Z Docker client API version: '1.52'
2026-02-14T13:14:28.1674569Z ##[endgroup]
2026-02-14T13:14:28.1677604Z ##[group]Clean up resources from previous jobs
2026-02-14T13:14:28.1682836Z ##[command]/usr/bin/docker ps --all --quiet --no-trunc --filter "label=4d5903"
2026-02-14T13:14:28.1830265Z ##[command]/usr/bin/docker network prune --force --filter "label=4d5903"
2026-02-14T13:14:28.1962510Z ##[endgroup]
2026-02-14T13:14:28.1962970Z ##[group]Create local container network
2026-02-14T13:14:28.1972526Z ##[command]/usr/bin/docker network create --label 4d5903 github_network_dcbb7c02e27844fe82eb244bef7b63f4
2026-02-14T13:14:28.2480501Z 838d7374e38f9ad5511cf894d6f791523aa6b6b4654d5ee019097cdb963cfc48
2026-02-14T13:14:28.2570046Z ##[endgroup]
2026-02-14T13:14:28.2601215Z ##[group]Starting postgres service container
2026-02-14T13:14:28.2623546Z ##[command]/usr/bin/docker pull postgres:15
2026-02-14T13:14:28.7492152Z 15: Pulling from library/postgres
2026-02-14T13:14:29.2877385Z 45604b1409ee: Download complete
2026-02-14T13:14:29.3817129Z 0c8d55a45c0d: Pulling fs layer
2026-02-14T13:14:29.3818178Z 0ace4c983c3e: Pulling fs layer
2026-02-14T13:14:29.3818715Z 049b2237836a: Pulling fs layer
2026-02-14T13:14:29.3819212Z b64f280cfa2b: Pulling fs layer
2026-02-14T13:14:29.3819715Z 49b40a0a623d: Pulling fs layer
2026-02-14T13:14:29.3820238Z 7b098c79e38c: Pulling fs layer
2026-02-14T13:14:29.3821555Z ea5e741a30ce: Pulling fs layer
2026-02-14T13:14:29.3822268Z 2710e764d89a: Pulling fs layer
2026-02-14T13:14:29.3822564Z 7aa308802868: Pulling fs layer
2026-02-14T13:14:29.3822838Z 03cf9c337134: Pulling fs layer
2026-02-14T13:14:29.3823193Z e60549838c5a: Pulling fs layer
2026-02-14T13:14:29.3823849Z d64dbdf800a2: Pulling fs layer
2026-02-14T13:14:29.3824596Z c50a02fe2f5f: Pulling fs layer
2026-02-14T13:14:29.3825157Z 6771773ef0da: Pulling fs layer
2026-02-14T13:14:29.3910336Z 99548d060f18: Download complete
2026-02-14T13:14:29.4927353Z 03cf9c337134: Download complete
2026-02-14T13:14:29.5906752Z 49b40a0a623d: Download complete
2026-02-14T13:14:29.5909307Z 6771773ef0da: Download complete
2026-02-14T13:14:29.5915521Z 0ace4c983c3e: Download complete
2026-02-14T13:14:29.5922401Z 7b098c79e38c: Download complete
2026-02-14T13:14:29.5945881Z 7aa308802868: Download complete
2026-02-14T13:14:29.5952094Z ea5e741a30ce: Download complete
2026-02-14T13:14:29.5970057Z b64f280cfa2b: Download complete
2026-02-14T13:14:29.6879336Z c50a02fe2f5f: Download complete
2026-02-14T13:14:29.6889927Z 2710e764d89a: Download complete
2026-02-14T13:14:29.6893388Z 049b2237836a: Download complete
2026-02-14T13:14:29.6898674Z 0c8d55a45c0d: Download complete
2026-02-14T13:14:29.6903188Z d64dbdf800a2: Download complete
2026-02-14T13:14:30.1876331Z e60549838c5a: Download complete
2026-02-14T13:14:30.5873231Z 03cf9c337134: Pull complete
2026-02-14T13:14:30.5937493Z 0c8d55a45c0d: Pull complete
2026-02-14T13:14:30.6910949Z 2710e764d89a: Pull complete
2026-02-14T13:14:30.6917662Z d64dbdf800a2: Pull complete
2026-02-14T13:14:30.8886093Z 0ace4c983c3e: Pull complete
2026-02-14T13:14:30.8900525Z ea5e741a30ce: Pull complete
2026-02-14T13:14:30.8906701Z b64f280cfa2b: Pull complete
2026-02-14T13:14:30.8934283Z c50a02fe2f5f: Pull complete
2026-02-14T13:14:32.7757913Z 49b40a0a623d: Pull complete
2026-02-14T13:14:32.7762681Z 6771773ef0da: Pull complete
2026-02-14T13:14:32.7769100Z 7b098c79e38c: Pull complete
2026-02-14T13:14:32.7775194Z 7aa308802868: Pull complete
2026-02-14T13:14:32.7787521Z 049b2237836a: Pull complete
2026-02-14T13:14:32.7788112Z e60549838c5a: Pull complete
2026-02-14T13:14:32.7789625Z Digest: sha256:dafc4d8e8369da730a5ee9a320a0f0b3c6aa516f41244689c4493a27dc84472d
2026-02-14T13:14:32.7790601Z Status: Downloaded newer image for postgres:15
2026-02-14T13:14:32.7796374Z docker.io/library/postgres:15
2026-02-14T13:14:32.7861798Z ##[command]/usr/bin/docker create --name 0e96d73957f242b0b227fecdfc280946_postgres15_17495f --label 4d5903 --network github_network_dcbb7c02e27844fe82eb244bef7b63f4 --network-alias postgres -p 5432:5432 --health-cmd pg_isready --health-interval 10s --health-timeout 5s --health-retries 5 -e "POSTGRES_USER=postgres" -e "POSTGRES_PASSWORD=postgres" -e "POSTGRES_DB=job_search_test" -e GITHUB_ACTIONS=true -e CI=true postgres:15
2026-02-14T13:14:33.7409132Z 7a72240d52cf4f4693234325cd50ff7a005bbb3a3fb3a9c75f3839c97f6f4d15
2026-02-14T13:14:33.7434085Z ##[command]/usr/bin/docker start 7a72240d52cf4f4693234325cd50ff7a005bbb3a3fb3a9c75f3839c97f6f4d15
2026-02-14T13:14:33.9386457Z 7a72240d52cf4f4693234325cd50ff7a005bbb3a3fb3a9c75f3839c97f6f4d15
2026-02-14T13:14:33.9406892Z ##[command]/usr/bin/docker ps --all --filter id=7a72240d52cf4f4693234325cd50ff7a005bbb3a3fb3a9c75f3839c97f6f4d15 --filter status=running --no-trunc --format "{{.ID}} {{.Status}}"
2026-02-14T13:14:33.9698968Z 7a72240d52cf4f4693234325cd50ff7a005bbb3a3fb3a9c75f3839c97f6f4d15 Up Less than a second (health: starting)
2026-02-14T13:14:33.9722614Z ##[command]/usr/bin/docker port 7a72240d52cf4f4693234325cd50ff7a005bbb3a3fb3a9c75f3839c97f6f4d15
2026-02-14T13:14:33.9863225Z 5432/tcp -> 0.0.0.0:5432
2026-02-14T13:14:33.9864133Z 5432/tcp -> [::]:5432
2026-02-14T13:14:33.9920434Z ##[endgroup]
2026-02-14T13:14:33.9929495Z ##[group]Waiting for all services to be ready
2026-02-14T13:14:33.9942518Z ##[command]/usr/bin/docker inspect --format="{{if .Config.Healthcheck}}{{print .State.Health.Status}}{{end}}" 7a72240d52cf4f4693234325cd50ff7a005bbb3a3fb3a9c75f3839c97f6f4d15
2026-02-14T13:14:34.0084398Z starting
2026-02-14T13:14:34.0111764Z postgres service is starting, waiting 2 seconds before checking again.
2026-02-14T13:14:36.0114664Z ##[command]/usr/bin/docker inspect --format="{{if .Config.Healthcheck}}{{print .State.Health.Status}}{{end}}" 7a72240d52cf4f4693234325cd50ff7a005bbb3a3fb3a9c75f3839c97f6f4d15
2026-02-14T13:14:36.0233963Z starting
2026-02-14T13:14:36.0247483Z postgres service is starting, waiting 3 seconds before checking again.
2026-02-14T13:14:39.7095713Z ##[command]/usr/bin/docker inspect --format="{{if .Config.Healthcheck}}{{print .State.Health.Status}}{{end}}" 7a72240d52cf4f4693234325cd50ff7a005bbb3a3fb3a9c75f3839c97f6f4d15
2026-02-14T13:14:39.7220632Z starting
2026-02-14T13:14:39.7234787Z postgres service is starting, waiting 7 seconds before checking again.
2026-02-14T13:14:47.5400610Z ##[command]/usr/bin/docker inspect --format="{{if .Config.Healthcheck}}{{print .State.Health.Status}}{{end}}" 7a72240d52cf4f4693234325cd50ff7a005bbb3a3fb3a9c75f3839c97f6f4d15
2026-02-14T13:14:47.5527522Z healthy
2026-02-14T13:14:47.5544451Z postgres service is healthy.
2026-02-14T13:14:47.5545155Z ##[endgroup]
2026-02-14T13:14:47.5800923Z ##[group]Run actions/checkout@v4
2026-02-14T13:14:47.5864599Z with:
2026-02-14T13:14:47.5864961Z   repository: filmozolevskiy/job-etl-project
2026-02-14T13:14:47.5865600Z   token: ***
2026-02-14T13:14:47.5865896Z   ssh-strict: true
2026-02-14T13:14:47.5866184Z   ssh-user: git
2026-02-14T13:14:47.5866496Z   persist-credentials: true
2026-02-14T13:14:47.5866842Z   clean: true
2026-02-14T13:14:47.5867209Z   sparse-checkout-cone-mode: true
2026-02-14T13:14:47.5867670Z   fetch-depth: 1
2026-02-14T13:14:47.5868005Z   fetch-tags: false
2026-02-14T13:14:47.5868352Z   show-progress: true
2026-02-14T13:14:47.5868666Z   lfs: false
2026-02-14T13:14:47.5868927Z   submodules: false
2026-02-14T13:14:47.5869219Z   set-safe-directory: true
2026-02-14T13:14:47.5870264Z env:
2026-02-14T13:14:47.5871046Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:47.5871583Z ##[endgroup]
2026-02-14T13:14:47.6953551Z Syncing repository: filmozolevskiy/job-etl-project
2026-02-14T13:14:47.6955287Z ##[group]Getting Git version info
2026-02-14T13:14:47.6955713Z Working directory is '/home/runner/work/job-etl-project/job-etl-project'
2026-02-14T13:14:47.6956300Z [command]/usr/bin/git version
2026-02-14T13:14:47.6971456Z git version 2.52.0
2026-02-14T13:14:47.6998050Z ##[endgroup]
2026-02-14T13:14:47.7012322Z Temporarily overriding HOME='/home/runner/work/_temp/19789492-959e-4a56-be66-c76bb35867a1' before making global git config changes
2026-02-14T13:14:47.7013377Z Adding repository directory to the temporary git global config as a safe directory
2026-02-14T13:14:47.7018247Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/job-etl-project/job-etl-project
2026-02-14T13:14:47.7059545Z Deleting the contents of '/home/runner/work/job-etl-project/job-etl-project'
2026-02-14T13:14:47.7063034Z ##[group]Initializing the repository
2026-02-14T13:14:47.7067331Z [command]/usr/bin/git init /home/runner/work/job-etl-project/job-etl-project
2026-02-14T13:14:47.7187537Z hint: Using 'master' as the name for the initial branch. This default branch name
2026-02-14T13:14:47.7188422Z hint: will change to "main" in Git 3.0. To configure the initial branch name
2026-02-14T13:14:47.7188954Z hint: to use in all of your new repositories, which will suppress this warning,
2026-02-14T13:14:47.7189345Z hint: call:
2026-02-14T13:14:47.7189526Z hint:
2026-02-14T13:14:47.7189798Z hint: 	git config --global init.defaultBranch <name>
2026-02-14T13:14:47.7190121Z hint:
2026-02-14T13:14:47.7190421Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2026-02-14T13:14:47.7190931Z hint: 'development'. The just-created branch can be renamed via this command:
2026-02-14T13:14:47.7191323Z hint:
2026-02-14T13:14:47.7191510Z hint: 	git branch -m <name>
2026-02-14T13:14:47.7193061Z hint:
2026-02-14T13:14:47.7193863Z hint: Disable this message with "git config set advice.defaultBranchName false"
2026-02-14T13:14:47.7194856Z Initialized empty Git repository in /home/runner/work/job-etl-project/job-etl-project/.git/
2026-02-14T13:14:47.7204140Z [command]/usr/bin/git remote add origin https://github.com/filmozolevskiy/job-etl-project
2026-02-14T13:14:47.7243114Z ##[endgroup]
2026-02-14T13:14:47.7243980Z ##[group]Disabling automatic garbage collection
2026-02-14T13:14:47.7244349Z [command]/usr/bin/git config --local gc.auto 0
2026-02-14T13:14:47.7271316Z ##[endgroup]
2026-02-14T13:14:47.7271820Z ##[group]Setting up auth
2026-02-14T13:14:47.7278280Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2026-02-14T13:14:47.7308910Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2026-02-14T13:14:47.7679891Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2026-02-14T13:14:47.7711379Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2026-02-14T13:14:47.7946404Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2026-02-14T13:14:47.7977776Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2026-02-14T13:14:47.8211538Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2026-02-14T13:14:47.8247102Z ##[endgroup]
2026-02-14T13:14:47.8247678Z ##[group]Fetching the repository
2026-02-14T13:14:47.8255781Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +7265ec961fc8d95c8f5cd682966aec49c0020bdb:refs/remotes/pull/29/merge
2026-02-14T13:14:48.4470778Z From https://github.com/filmozolevskiy/job-etl-project
2026-02-14T13:14:48.4471594Z  * [new ref]         7265ec961fc8d95c8f5cd682966aec49c0020bdb -> pull/29/merge
2026-02-14T13:14:48.4505512Z ##[endgroup]
2026-02-14T13:14:48.4506119Z ##[group]Determining the checkout info
2026-02-14T13:14:48.4508376Z ##[endgroup]
2026-02-14T13:14:48.4513986Z [command]/usr/bin/git sparse-checkout disable
2026-02-14T13:14:48.4558256Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
2026-02-14T13:14:48.4585621Z ##[group]Checking out the ref
2026-02-14T13:14:48.4590218Z [command]/usr/bin/git checkout --progress --force refs/remotes/pull/29/merge
2026-02-14T13:14:48.4964560Z Note: switching to 'refs/remotes/pull/29/merge'.
2026-02-14T13:14:48.4965038Z 
2026-02-14T13:14:48.4965478Z You are in 'detached HEAD' state. You can look around, make experimental
2026-02-14T13:14:48.4966283Z changes and commit them, and you can discard any commits you make in this
2026-02-14T13:14:48.4966865Z state without impacting any branches by switching back to a branch.
2026-02-14T13:14:48.4967210Z 
2026-02-14T13:14:48.4967481Z If you want to create a new branch to retain commits you create, you may
2026-02-14T13:14:48.4968021Z do so (now or later) by using -c with the switch command. Example:
2026-02-14T13:14:48.4968334Z 
2026-02-14T13:14:48.4968457Z   git switch -c <new-branch-name>
2026-02-14T13:14:48.4968676Z 
2026-02-14T13:14:48.4968797Z Or undo this operation with:
2026-02-14T13:14:48.4969078Z 
2026-02-14T13:14:48.4969245Z   git switch -
2026-02-14T13:14:48.4969516Z 
2026-02-14T13:14:48.4970010Z Turn off this advice by setting config variable advice.detachedHead to false
2026-02-14T13:14:48.4970723Z 
2026-02-14T13:14:48.4971533Z HEAD is now at 7265ec9 Merge 199b0cdb3395f04c04fdae22fc84bfcbdd1a6557 into 15538d61e29046a4cda7dec520634bd0f2ac0c83
2026-02-14T13:14:48.4975138Z ##[endgroup]
2026-02-14T13:14:48.5011086Z [command]/usr/bin/git log -1 --format=%H
2026-02-14T13:14:48.5034029Z 7265ec961fc8d95c8f5cd682966aec49c0020bdb
2026-02-14T13:14:48.5257640Z ##[group]Run actions/setup-python@v5
2026-02-14T13:14:48.5257910Z with:
2026-02-14T13:14:48.5258086Z   python-version: 3.11
2026-02-14T13:14:48.5258286Z   check-latest: false
2026-02-14T13:14:48.5258623Z   token: ***
2026-02-14T13:14:48.5258804Z   update-environment: true
2026-02-14T13:14:48.5259030Z   allow-prereleases: false
2026-02-14T13:14:48.5259407Z   freethreaded: false
2026-02-14T13:14:48.5259587Z env:
2026-02-14T13:14:48.5260017Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:48.5260316Z ##[endgroup]
2026-02-14T13:14:48.7022649Z ##[group]Installed versions
2026-02-14T13:14:48.7146915Z Successfully set up CPython (3.11.14)
2026-02-14T13:14:48.7147737Z ##[endgroup]
2026-02-14T13:14:48.7269209Z ##[group]Run sudo apt-get update
2026-02-14T13:14:48.7269551Z [36;1msudo apt-get update[0m
2026-02-14T13:14:48.7269841Z [36;1msudo apt-get install -y postgresql-client[0m
2026-02-14T13:14:48.7431964Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:48.7432204Z env:
2026-02-14T13:14:48.7432705Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:48.7433086Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:48.7433511Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:48.7434078Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:48.7434443Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:48.7434814Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:48.7435201Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:48.7435494Z ##[endgroup]
2026-02-14T13:14:48.8167741Z Get:1 file:/etc/apt/apt-mirrors.txt Mirrorlist [144 B]
2026-02-14T13:14:48.8486977Z Get:6 https://packages.microsoft.com/repos/azure-cli noble InRelease [3564 B]
2026-02-14T13:14:48.8587893Z Get:7 https://packages.microsoft.com/ubuntu/24.04/prod noble InRelease [3600 B]
2026-02-14T13:14:48.9305610Z Get:8 https://packages.microsoft.com/repos/azure-cli noble/main amd64 Packages [2129 B]
2026-02-14T13:14:48.9555121Z Hit:2 http://azure.archive.ubuntu.com/ubuntu noble InRelease
2026-02-14T13:14:48.9566456Z Get:3 http://azure.archive.ubuntu.com/ubuntu noble-updates InRelease [126 kB]
2026-02-14T13:14:48.9604155Z Get:4 http://azure.archive.ubuntu.com/ubuntu noble-backports InRelease [126 kB]
2026-02-14T13:14:48.9630971Z Get:5 http://azure.archive.ubuntu.com/ubuntu noble-security InRelease [126 kB]
2026-02-14T13:14:48.9844351Z Get:9 https://packages.microsoft.com/ubuntu/24.04/prod noble/main all Packages [643 B]
2026-02-14T13:14:48.9957635Z Get:10 https://packages.microsoft.com/ubuntu/24.04/prod noble/main armhf Packages [11.4 kB]
2026-02-14T13:14:48.9998216Z Get:11 https://packages.microsoft.com/ubuntu/24.04/prod noble/main arm64 Packages [69.0 kB]
2026-02-14T13:14:49.0033981Z Get:12 https://packages.microsoft.com/ubuntu/24.04/prod noble/main amd64 Packages [89.5 kB]
2026-02-14T13:14:49.0896704Z Get:13 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 Packages [1742 kB]
2026-02-14T13:14:49.1020404Z Get:14 http://azure.archive.ubuntu.com/ubuntu noble-updates/main Translation-en [325 kB]
2026-02-14T13:14:49.1028009Z Get:15 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 Components [175 kB]
2026-02-14T13:14:49.1053009Z Get:16 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 c-n-f Metadata [16.5 kB]
2026-02-14T13:14:49.1070912Z Get:17 http://azure.archive.ubuntu.com/ubuntu noble-updates/universe amd64 Packages [1529 kB]
2026-02-14T13:14:49.1281403Z Get:18 http://azure.archive.ubuntu.com/ubuntu noble-updates/universe Translation-en [313 kB]
2026-02-14T13:14:49.1312781Z Get:19 http://azure.archive.ubuntu.com/ubuntu noble-updates/universe amd64 Components [386 kB]
2026-02-14T13:14:49.1314245Z Get:20 http://azure.archive.ubuntu.com/ubuntu noble-updates/universe amd64 c-n-f Metadata [31.9 kB]
2026-02-14T13:14:49.1315470Z Get:21 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted amd64 Packages [2594 kB]
2026-02-14T13:14:49.1459820Z Get:22 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted Translation-en [595 kB]
2026-02-14T13:14:49.1947458Z Get:23 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted amd64 Components [212 B]
2026-02-14T13:14:49.1958604Z Get:24 http://azure.archive.ubuntu.com/ubuntu noble-updates/multiverse amd64 Components [940 B]
2026-02-14T13:14:49.1972408Z Get:25 http://azure.archive.ubuntu.com/ubuntu noble-backports/main amd64 Components [7312 B]
2026-02-14T13:14:49.1986025Z Get:26 http://azure.archive.ubuntu.com/ubuntu noble-backports/universe amd64 Components [10.5 kB]
2026-02-14T13:14:49.1995879Z Get:27 http://azure.archive.ubuntu.com/ubuntu noble-backports/restricted amd64 Components [216 B]
2026-02-14T13:14:49.2004637Z Get:28 http://azure.archive.ubuntu.com/ubuntu noble-backports/multiverse amd64 Components [212 B]
2026-02-14T13:14:49.2489213Z Get:29 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 Packages [1448 kB]
2026-02-14T13:14:49.2575434Z Get:30 http://azure.archive.ubuntu.com/ubuntu noble-security/main Translation-en [234 kB]
2026-02-14T13:14:49.2598487Z Get:31 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 Components [21.5 kB]
2026-02-14T13:14:49.2622095Z Get:32 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 c-n-f Metadata [9892 B]
2026-02-14T13:14:49.2639679Z Get:33 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 Packages [930 kB]
2026-02-14T13:14:49.2698274Z Get:34 http://azure.archive.ubuntu.com/ubuntu noble-security/universe Translation-en [212 kB]
2026-02-14T13:14:49.2718066Z Get:35 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 Components [74.2 kB]
2026-02-14T13:14:49.2735413Z Get:36 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 c-n-f Metadata [19.9 kB]
2026-02-14T13:14:49.3209993Z Get:37 http://azure.archive.ubuntu.com/ubuntu noble-security/restricted amd64 Packages [2452 kB]
2026-02-14T13:14:49.3339503Z Get:38 http://azure.archive.ubuntu.com/ubuntu noble-security/restricted Translation-en [564 kB]
2026-02-14T13:14:49.3382069Z Get:39 http://azure.archive.ubuntu.com/ubuntu noble-security/restricted amd64 Components [212 B]
2026-02-14T13:14:49.3396625Z Get:40 http://azure.archive.ubuntu.com/ubuntu noble-security/multiverse amd64 Components [212 B]
2026-02-14T13:14:54.5035992Z Fetched 14.3 MB in 2s (8383 kB/s)
2026-02-14T13:14:55.2366738Z Reading package lists...
2026-02-14T13:14:55.2704334Z Reading package lists...
2026-02-14T13:14:55.4359749Z Building dependency tree...
2026-02-14T13:14:55.4367440Z Reading state information...
2026-02-14T13:14:55.6021889Z The following NEW packages will be installed:
2026-02-14T13:14:55.6023911Z   postgresql-client
2026-02-14T13:14:55.6194322Z 0 upgraded, 1 newly installed, 0 to remove and 18 not upgraded.
2026-02-14T13:14:55.6194868Z Need to get 11.6 kB of archives.
2026-02-14T13:14:55.6195209Z After this operation, 17.4 kB of additional disk space will be used.
2026-02-14T13:14:55.6195621Z Get:1 file:/etc/apt/apt-mirrors.txt Mirrorlist [144 B]
2026-02-14T13:14:55.6722465Z Get:2 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 postgresql-client all 16+257build1.1 [11.6 kB]
2026-02-14T13:14:55.9195899Z Fetched 11.6 kB in 0s (182 kB/s)
2026-02-14T13:14:55.9429999Z Selecting previously unselected package postgresql-client.
2026-02-14T13:14:55.9762811Z (Reading database ... 
2026-02-14T13:14:55.9763184Z (Reading database ... 5%
2026-02-14T13:14:55.9763507Z (Reading database ... 10%
2026-02-14T13:14:55.9764073Z (Reading database ... 15%
2026-02-14T13:14:55.9764405Z (Reading database ... 20%
2026-02-14T13:14:55.9764718Z (Reading database ... 25%
2026-02-14T13:14:55.9765049Z (Reading database ... 30%
2026-02-14T13:14:55.9765358Z (Reading database ... 35%
2026-02-14T13:14:55.9765672Z (Reading database ... 40%
2026-02-14T13:14:55.9766501Z (Reading database ... 45%
2026-02-14T13:14:55.9766751Z (Reading database ... 50%
2026-02-14T13:14:55.9873494Z (Reading database ... 55%
2026-02-14T13:14:56.0461016Z (Reading database ... 60%
2026-02-14T13:14:56.0957816Z (Reading database ... 65%
2026-02-14T13:14:56.1425379Z (Reading database ... 70%
2026-02-14T13:14:56.1917241Z (Reading database ... 75%
2026-02-14T13:14:56.3002437Z (Reading database ... 80%
2026-02-14T13:14:56.5479311Z (Reading database ... 85%
2026-02-14T13:14:56.7269120Z (Reading database ... 90%
2026-02-14T13:14:56.9085434Z (Reading database ... 95%
2026-02-14T13:14:56.9085694Z (Reading database ... 100%
2026-02-14T13:14:56.9086022Z (Reading database ... 218331 files and directories currently installed.)
2026-02-14T13:14:56.9128245Z Preparing to unpack .../postgresql-client_16+257build1.1_all.deb ...
2026-02-14T13:14:56.9152326Z Unpacking postgresql-client (16+257build1.1) ...
2026-02-14T13:14:56.9552836Z Setting up postgresql-client (16+257build1.1) ...
2026-02-14T13:14:57.7114268Z 
2026-02-14T13:14:57.7114684Z Running kernel seems to be up-to-date.
2026-02-14T13:14:57.7115062Z 
2026-02-14T13:14:57.7115232Z No services need to be restarted.
2026-02-14T13:14:57.7115506Z 
2026-02-14T13:14:57.7115664Z No containers need to be restarted.
2026-02-14T13:14:57.7115948Z 
2026-02-14T13:14:57.7116138Z No user sessions are running outdated binaries.
2026-02-14T13:14:57.7116484Z 
2026-02-14T13:14:57.7116800Z No VM guests are running outdated hypervisor (qemu) binaries on this host.
2026-02-14T13:14:58.5518292Z ##[group]Run until pg_isready -h 127.0.0.1 -p 5432 -U postgres; do
2026-02-14T13:14:58.5518787Z [36;1muntil pg_isready -h 127.0.0.1 -p 5432 -U postgres; do[0m
2026-02-14T13:14:58.5519147Z [36;1m  echo "Waiting for PostgreSQL..."[0m
2026-02-14T13:14:58.5519410Z [36;1m  sleep 2[0m
2026-02-14T13:14:58.5519595Z [36;1mdone[0m
2026-02-14T13:14:58.5571546Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:58.5571776Z env:
2026-02-14T13:14:58.5572339Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:58.5572733Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.5573151Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:58.5573546Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.5574462Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.5574836Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.5575243Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:58.5575552Z ##[endgroup]
2026-02-14T13:14:58.6264054Z 127.0.0.1:5432 - accepting connections
2026-02-14T13:14:58.6297726Z ##[group]Run set -e
2026-02-14T13:14:58.6297955Z [36;1mset -e[0m
2026-02-14T13:14:58.6298504Z [36;1mPGPASSWORD=postgres psql -h 127.0.0.1 -U postgres -d job_search_test -f docker/init/01_create_schemas.sql[0m
2026-02-14T13:14:58.6346749Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:58.6346977Z env:
2026-02-14T13:14:58.6347457Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:58.6347833Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.6348240Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:58.6348637Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.6348993Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.6349350Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.6349722Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:58.6350017Z ##[endgroup]
2026-02-14T13:14:58.7181658Z CREATE SCHEMA
2026-02-14T13:14:58.7184424Z CREATE SCHEMA
2026-02-14T13:14:58.7187640Z CREATE SCHEMA
2026-02-14T13:14:58.7212035Z DO
2026-02-14T13:14:58.7215377Z GRANT
2026-02-14T13:14:58.7218414Z GRANT
2026-02-14T13:14:58.7221649Z GRANT
2026-02-14T13:14:58.7262575Z ##[group]Run set -e
2026-02-14T13:14:58.7262797Z [36;1mset -e[0m
2026-02-14T13:14:58.7263227Z [36;1mPGPASSWORD=postgres psql -h 127.0.0.1 -U postgres -d job_search_test -f docker/init/02_create_tables.sql[0m
2026-02-14T13:14:58.7312041Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:58.7312264Z env:
2026-02-14T13:14:58.7312799Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:58.7313182Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.7313587Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:58.7314408Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.7314763Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.7315127Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.7315517Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:58.7315813Z ##[endgroup]
2026-02-14T13:14:58.7824405Z CREATE TABLE
2026-02-14T13:14:58.7849887Z COMMENT
2026-02-14T13:14:58.7850198Z CREATE TABLE
2026-02-14T13:14:58.7850497Z COMMENT
2026-02-14T13:14:58.7875558Z CREATE TABLE
2026-02-14T13:14:58.7878315Z COMMENT
2026-02-14T13:14:58.7926590Z CREATE TABLE
2026-02-14T13:14:58.7930284Z COMMENT
2026-02-14T13:14:58.7963466Z CREATE TABLE
2026-02-14T13:14:58.7966996Z COMMENT
2026-02-14T13:14:58.8002320Z CREATE TABLE
2026-02-14T13:14:58.8005941Z COMMENT
2026-02-14T13:14:58.8028740Z CREATE TABLE
2026-02-14T13:14:58.8032114Z COMMENT
2026-02-14T13:14:58.8068957Z CREATE TABLE
2026-02-14T13:14:58.8072395Z COMMENT
2026-02-14T13:14:58.8085517Z CREATE INDEX
2026-02-14T13:14:58.8097821Z CREATE INDEX
2026-02-14T13:14:58.8108490Z CREATE INDEX
2026-02-14T13:14:58.8119258Z CREATE INDEX
2026-02-14T13:14:58.8133869Z CREATE INDEX
2026-02-14T13:14:58.8145902Z CREATE INDEX
2026-02-14T13:14:58.8157295Z CREATE INDEX
2026-02-14T13:14:58.8168039Z CREATE INDEX
2026-02-14T13:14:58.8180997Z CREATE INDEX
2026-02-14T13:14:58.8193042Z CREATE INDEX
2026-02-14T13:14:58.8203574Z CREATE INDEX
2026-02-14T13:14:58.8215660Z CREATE INDEX
2026-02-14T13:14:58.8225428Z CREATE INDEX
2026-02-14T13:14:58.8236886Z CREATE INDEX
2026-02-14T13:14:58.8247731Z CREATE INDEX
2026-02-14T13:14:58.8258276Z CREATE INDEX
2026-02-14T13:14:58.8269092Z CREATE INDEX
2026-02-14T13:14:58.8280726Z CREATE INDEX
2026-02-14T13:14:58.8292499Z CREATE INDEX
2026-02-14T13:14:58.8309489Z DO
2026-02-14T13:14:58.8313410Z GRANT
2026-02-14T13:14:58.8317434Z GRANT
2026-02-14T13:14:58.8320667Z GRANT
2026-02-14T13:14:58.8324436Z GRANT
2026-02-14T13:14:58.8328103Z GRANT
2026-02-14T13:14:58.8331371Z GRANT
2026-02-14T13:14:58.8334216Z GRANT
2026-02-14T13:14:58.8337986Z GRANT
2026-02-14T13:14:58.8382698Z ##[group]Run set -e
2026-02-14T13:14:58.8382931Z [36;1mset -e[0m
2026-02-14T13:14:58.8383420Z [36;1mPGPASSWORD=postgres psql -h 127.0.0.1 -U postgres -d job_search_test -f docker/init/08_add_resume_cover_letter_tables.sql[0m
2026-02-14T13:14:58.8432488Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:58.8432712Z env:
2026-02-14T13:14:58.8433219Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:58.8433598Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.8434252Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:58.8434663Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.8435033Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.8435391Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.8435774Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:58.8436103Z ##[endgroup]
2026-02-14T13:14:58.8893429Z CREATE TABLE
2026-02-14T13:14:58.8897893Z COMMENT
2026-02-14T13:14:58.8929495Z CREATE TABLE
2026-02-14T13:14:58.8932862Z COMMENT
2026-02-14T13:14:58.8970934Z CREATE TABLE
2026-02-14T13:14:58.8974775Z COMMENT
2026-02-14T13:14:58.8985318Z CREATE INDEX
2026-02-14T13:14:58.8996363Z CREATE INDEX
2026-02-14T13:14:58.9007333Z CREATE INDEX
2026-02-14T13:14:58.9018256Z CREATE INDEX
2026-02-14T13:14:58.9028124Z CREATE INDEX
2026-02-14T13:14:58.9038672Z CREATE INDEX
2026-02-14T13:14:58.9048929Z CREATE INDEX
2026-02-14T13:14:58.9059299Z CREATE INDEX
2026-02-14T13:14:58.9076047Z DO
2026-02-14T13:14:58.9099511Z GRANT
2026-02-14T13:14:58.9102908Z GRANT
2026-02-14T13:14:58.9106030Z GRANT
2026-02-14T13:14:58.9143338Z ##[group]Run set -e
2026-02-14T13:14:58.9143809Z [36;1mset -e[0m
2026-02-14T13:14:58.9144134Z [36;1mecho "Running migration script..."[0m
2026-02-14T13:14:58.9144695Z [36;1mPGPASSWORD=postgres psql -h 127.0.0.1 -U postgres -d job_search_test -f docker/init/09_add_documents_section_flag.sql[0m
2026-02-14T13:14:58.9145421Z [36;1mecho "Verifying migration..."[0m
2026-02-14T13:14:58.9145743Z [36;1m# Verify migration succeeded - check both tables[0m
2026-02-14T13:14:58.9146736Z [36;1mRESUME_COUNT=$(PGPASSWORD=postgres psql -h 127.0.0.1 -U postgres -d job_search_test -t -A -c "SELECT COUNT(*) FROM information_schema.columns WHERE table_schema = 'marts' AND table_name = 'user_resumes' AND column_name = 'in_documents_section';")[0m
2026-02-14T13:14:58.9148397Z [36;1mCOVER_LETTER_COUNT=$(PGPASSWORD=postgres psql -h 127.0.0.1 -U postgres -d job_search_test -t -A -c "SELECT COUNT(*) FROM information_schema.columns WHERE table_schema = 'marts' AND table_name = 'user_cover_letters' AND column_name = 'in_documents_section';")[0m
2026-02-14T13:14:58.9149379Z [36;1mif [ "$RESUME_COUNT" -ne "1" ]; then[0m
2026-02-14T13:14:58.9149881Z [36;1m  echo "ERROR: Migration failed - in_documents_section column not found in user_resumes (count: $RESUME_COUNT)"[0m
2026-02-14T13:14:58.9150373Z [36;1m  exit 1[0m
2026-02-14T13:14:58.9150536Z [36;1mfi[0m
2026-02-14T13:14:58.9150732Z [36;1mif [ "$COVER_LETTER_COUNT" -ne "1" ]; then[0m
2026-02-14T13:14:58.9151274Z [36;1m  echo "ERROR: Migration failed - in_documents_section column not found in user_cover_letters (count: $COVER_LETTER_COUNT)"[0m
2026-02-14T13:14:58.9151793Z [36;1m  exit 1[0m
2026-02-14T13:14:58.9151958Z [36;1mfi[0m
2026-02-14T13:14:58.9152218Z [36;1mecho "Migration verification: Both columns exist successfully"[0m
2026-02-14T13:14:58.9200252Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:58.9200479Z env:
2026-02-14T13:14:58.9200945Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:58.9201334Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.9201751Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:58.9202156Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.9202508Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.9202864Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:58.9203215Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:58.9203508Z ##[endgroup]
2026-02-14T13:14:58.9272687Z Running migration script...
2026-02-14T13:14:58.9696925Z DO
2026-02-14T13:14:58.9724518Z DO
2026-02-14T13:14:58.9739018Z CREATE INDEX
2026-02-14T13:14:58.9750104Z CREATE INDEX
2026-02-14T13:14:58.9762625Z Verifying migration...
2026-02-14T13:14:59.0579927Z Migration verification: Both columns exist successfully
2026-02-14T13:14:59.0609253Z ##[group]Run set -e
2026-02-14T13:14:59.0609507Z [36;1mset -e[0m
2026-02-14T13:14:59.0610001Z [36;1mPGPASSWORD=postgres psql -h 127.0.0.1 -U postgres -d job_search_test -f docker/init/14_create_user_job_status_table.sql[0m
2026-02-14T13:14:59.0659693Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:59.0659943Z env:
2026-02-14T13:14:59.0660441Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:59.0660830Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.0661254Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:59.0661660Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.0662031Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.0662402Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.0662771Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:59.0663122Z ##[endgroup]
2026-02-14T13:14:59.1162648Z DO
2026-02-14T13:14:59.1167440Z COMMENT
2026-02-14T13:14:59.1179246Z CREATE INDEX
2026-02-14T13:14:59.1190438Z CREATE INDEX
2026-02-14T13:14:59.1201461Z CREATE INDEX
2026-02-14T13:14:59.1207450Z DO
2026-02-14T13:14:59.1210676Z GRANT
2026-02-14T13:14:59.1252095Z ##[group]Run set -e
2026-02-14T13:14:59.1252470Z [36;1mset -e[0m
2026-02-14T13:14:59.1252948Z [36;1mPGPASSWORD=postgres psql -h 127.0.0.1 -U postgres -d job_search_test -f docker/init/14_add_job_status_history_table.sql[0m
2026-02-14T13:14:59.1301382Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:59.1301604Z env:
2026-02-14T13:14:59.1302075Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:59.1302455Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.1302869Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:59.1303284Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.1303842Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.1304219Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.1304597Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:59.1304930Z ##[endgroup]
2026-02-14T13:14:59.1793438Z DO
2026-02-14T13:14:59.1798397Z COMMENT
2026-02-14T13:14:59.1801918Z COMMENT
2026-02-14T13:14:59.1804461Z COMMENT
2026-02-14T13:14:59.1807444Z COMMENT
2026-02-14T13:14:59.1810561Z COMMENT
2026-02-14T13:14:59.1824779Z CREATE INDEX
2026-02-14T13:14:59.1840619Z CREATE INDEX
2026-02-14T13:14:59.1848376Z CREATE INDEX
2026-02-14T13:14:59.1859026Z CREATE INDEX
2026-02-14T13:14:59.1869575Z CREATE INDEX
2026-02-14T13:14:59.1875824Z DO
2026-02-14T13:14:59.1878814Z GRANT
2026-02-14T13:14:59.1936210Z ##[group]Run set -e
2026-02-14T13:14:59.1936627Z [36;1mset -e[0m
2026-02-14T13:14:59.1937492Z [36;1mPGPASSWORD=postgres psql -h 127.0.0.1 -U postgres -d job_search_test -f docker/init/15_modify_job_notes_multi_note.sql[0m
2026-02-14T13:14:59.2010213Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:59.2010585Z env:
2026-02-14T13:14:59.2011557Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:59.2012254Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.2012975Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:59.2013954Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.2014655Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.2015328Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.2015998Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:59.2016618Z ##[endgroup]
2026-02-14T13:14:59.2487272Z psql:docker/init/15_modify_job_notes_multi_note.sql:25: NOTICE:  Dropped unique constraint unique_job_user_note
2026-02-14T13:14:59.2490977Z DO
2026-02-14T13:14:59.2499006Z CREATE FUNCTION
2026-02-14T13:14:59.2502731Z COMMENT
2026-02-14T13:14:59.2506575Z DO
2026-02-14T13:14:59.2511976Z ALTER TABLE
2026-02-14T13:14:59.2515595Z COMMENT
2026-02-14T13:14:59.2518733Z COMMENT
2026-02-14T13:14:59.2523138Z DELETE 0
2026-02-14T13:14:59.2526165Z DO
2026-02-14T13:14:59.2564780Z ##[group]Run set -e
2026-02-14T13:14:59.2565013Z [36;1mset -e[0m
2026-02-14T13:14:59.2565488Z [36;1mPGPASSWORD=postgres psql -h 127.0.0.1 -U postgres -d job_search_test -f docker/init/16_add_job_notes_indexes.sql[0m
2026-02-14T13:14:59.2614004Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:59.2614230Z env:
2026-02-14T13:14:59.2614698Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:59.2615083Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.2615508Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:59.2615915Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.2616267Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.2616629Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.2616980Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:59.2617279Z ##[endgroup]
2026-02-14T13:14:59.3060797Z CREATE INDEX
2026-02-14T13:14:59.3072114Z CREATE INDEX
2026-02-14T13:14:59.3084087Z CREATE INDEX
2026-02-14T13:14:59.3088141Z COMMENT
2026-02-14T13:14:59.3091386Z COMMENT
2026-02-14T13:14:59.3094903Z COMMENT
2026-02-14T13:14:59.3143910Z ##[group]Run set -e
2026-02-14T13:14:59.3144319Z [36;1mset -e[0m
2026-02-14T13:14:59.3145185Z [36;1mPGPASSWORD=postgres psql -h 127.0.0.1 -U postgres -d job_search_test -f docker/init/18_create_staging_slots_table.sql[0m
2026-02-14T13:14:59.3216605Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:59.3216977Z env:
2026-02-14T13:14:59.3217715Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:59.3218378Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.3219105Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:59.3219832Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.3220487Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.3221137Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.3221790Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:59.3222412Z ##[endgroup]
2026-02-14T13:14:59.3735625Z DO
2026-02-14T13:14:59.3739803Z COMMENT
2026-02-14T13:14:59.3746743Z INSERT 0 10
2026-02-14T13:14:59.3750859Z UPDATE 1
2026-02-14T13:14:59.3755083Z UPDATE 1
2026-02-14T13:14:59.3761108Z DO
2026-02-14T13:14:59.3764682Z GRANT
2026-02-14T13:14:59.3803484Z ##[group]Run set -e
2026-02-14T13:14:59.3803972Z [36;1mset -e[0m
2026-02-14T13:14:59.3804414Z [36;1mPGPASSWORD=postgres psql -h 127.0.0.1 -U postgres -d job_search_test -f docker/init/19_seed_admin_user.sql[0m
2026-02-14T13:14:59.3852734Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:59.3852961Z env:
2026-02-14T13:14:59.3853428Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:59.3854126Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.3854549Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:59.3854954Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.3855313Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.3855665Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.3856014Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:59.3856320Z ##[endgroup]
2026-02-14T13:14:59.4292636Z INSERT 0 1
2026-02-14T13:14:59.4297468Z INSERT 0 1
2026-02-14T13:14:59.4351662Z ##[group]Run set -e
2026-02-14T13:14:59.4351894Z [36;1mset -e[0m
2026-02-14T13:14:59.4352369Z [36;1mPGPASSWORD=postgres psql -h 127.0.0.1 -U postgres -d job_search_test -f docker/init/21_add_campaign_id_to_user_tables.sql[0m
2026-02-14T13:14:59.4399811Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:59.4400034Z env:
2026-02-14T13:14:59.4400492Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:59.4400869Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.4401272Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:59.4401692Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.4402040Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.4402389Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.4402742Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:59.4403075Z ##[endgroup]
2026-02-14T13:14:59.4904629Z psql:docker/init/21_add_campaign_id_to_user_tables.sql:52: NOTICE:  Added campaign_id column to user_job_status and populated existing records
2026-02-14T13:14:59.4905924Z DO
2026-02-14T13:14:59.4919568Z psql:docker/init/21_add_campaign_id_to_user_tables.sql:72: NOTICE:  Added FK constraint fk_user_job_status_campaign
2026-02-14T13:14:59.4920646Z DO
2026-02-14T13:14:59.4934604Z CREATE INDEX
2026-02-14T13:14:59.4998628Z psql:docker/init/21_add_campaign_id_to_user_tables.sql:162: NOTICE:  Added campaign_id column to job_notes and populated existing records
2026-02-14T13:14:59.5000066Z DO
2026-02-14T13:14:59.5010045Z psql:docker/init/21_add_campaign_id_to_user_tables.sql:182: NOTICE:  Added FK constraint fk_job_notes_campaign
2026-02-14T13:14:59.5010977Z DO
2026-02-14T13:14:59.5022440Z CREATE INDEX
2026-02-14T13:14:59.5026573Z COMMENT
2026-02-14T13:14:59.5041880Z COMMENT
2026-02-14T13:14:59.5072711Z ##[group]Run python -m pip install --upgrade pip
2026-02-14T13:14:59.5073078Z [36;1mpython -m pip install --upgrade pip[0m
2026-02-14T13:14:59.5073379Z [36;1mpip install -r requirements.txt[0m
2026-02-14T13:14:59.5120471Z shell: /usr/bin/bash -e {0}
2026-02-14T13:14:59.5120694Z env:
2026-02-14T13:14:59.5121152Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:14:59.5121526Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.5121930Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:14:59.5122360Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.5122726Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.5123083Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:14:59.5123435Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:14:59.5124078Z ##[endgroup]
2026-02-14T13:15:01.9493883Z Requirement already satisfied: pip in /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages (26.0.1)
2026-02-14T13:15:02.7046720Z Collecting Flask>=3.0.0 (from -r requirements.txt (line 2))
2026-02-14T13:15:02.7911603Z   Downloading flask-3.1.2-py3-none-any.whl.metadata (3.2 kB)
2026-02-14T13:15:02.8252554Z Collecting flask-cors>=4.0.0 (from -r requirements.txt (line 3))
2026-02-14T13:15:02.8390824Z   Downloading flask_cors-6.0.2-py3-none-any.whl.metadata (5.3 kB)
2026-02-14T13:15:02.8698579Z Collecting flask-jwt-extended>=4.6.0 (from -r requirements.txt (line 4))
2026-02-14T13:15:02.8845028Z   Downloading Flask_JWT_Extended-4.7.1-py2.py3-none-any.whl.metadata (3.8 kB)
2026-02-14T13:15:02.9977145Z Collecting psycopg2-binary>=2.9.9 (from -r requirements.txt (line 5))
2026-02-14T13:15:03.0120128Z   Downloading psycopg2_binary-2.9.11-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (4.9 kB)
2026-02-14T13:15:03.0451438Z Collecting requests>=2.31.0 (from -r requirements.txt (line 6))
2026-02-14T13:15:03.0588382Z   Downloading requests-2.32.5-py3-none-any.whl.metadata (4.9 kB)
2026-02-14T13:15:03.0846842Z Collecting python-dotenv>=1.0.0 (from -r requirements.txt (line 7))
2026-02-14T13:15:03.0985669Z   Downloading python_dotenv-1.2.1-py3-none-any.whl.metadata (25 kB)
2026-02-14T13:15:03.3682230Z Collecting sqlalchemy>=2.0.0 (from -r requirements.txt (line 8))
2026-02-14T13:15:03.3824218Z   Downloading sqlalchemy-2.0.46-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (9.5 kB)
2026-02-14T13:15:03.4956856Z Collecting pandas>=2.1.0 (from -r requirements.txt (line 9))
2026-02-14T13:15:03.5094534Z   Downloading pandas-3.0.0-cp311-cp311-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl.metadata (79 kB)
2026-02-14T13:15:03.6706997Z Collecting spacy>=3.7.0 (from -r requirements.txt (line 10))
2026-02-14T13:15:03.6850548Z   Downloading spacy-3.8.11-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (27 kB)
2026-02-14T13:15:04.1731616Z Collecting rapidfuzz>=3.0.0 (from -r requirements.txt (line 11))
2026-02-14T13:15:04.1870264Z   Downloading rapidfuzz-3.14.3-cp311-cp311-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl.metadata (12 kB)
2026-02-14T13:15:04.2359590Z Collecting bcrypt>=4.0.0 (from -r requirements.txt (line 12))
2026-02-14T13:15:04.2499083Z   Downloading bcrypt-5.0.0-cp39-abi3-manylinux_2_34_x86_64.whl.metadata (10 kB)
2026-02-14T13:15:04.2750127Z Collecting Flask-Login>=0.6.3 (from -r requirements.txt (line 13))
2026-02-14T13:15:04.2886219Z   Downloading Flask_Login-0.6.3-py3-none-any.whl.metadata (5.8 kB)
2026-02-14T13:15:04.3524165Z Collecting openai>=1.0.0 (from -r requirements.txt (line 14))
2026-02-14T13:15:04.3661171Z   Downloading openai-2.21.0-py3-none-any.whl.metadata (29 kB)
2026-02-14T13:15:04.3945125Z Collecting PyPDF2>=3.0.0 (from -r requirements.txt (line 15))
2026-02-14T13:15:04.4079816Z   Downloading pypdf2-3.0.1-py3-none-any.whl.metadata (6.8 kB)
2026-02-14T13:15:04.4329737Z Collecting python-docx>=1.1.0 (from -r requirements.txt (line 16))
2026-02-14T13:15:04.4462926Z   Downloading python_docx-1.2.0-py3-none-any.whl.metadata (2.0 kB)
2026-02-14T13:15:04.4824520Z Collecting pytest>=7.4.0 (from -r requirements.txt (line 19))
2026-02-14T13:15:04.4961730Z   Downloading pytest-9.0.2-py3-none-any.whl.metadata (7.6 kB)
2026-02-14T13:15:04.5222113Z Collecting pytest-cov>=4.1.0 (from -r requirements.txt (line 20))
2026-02-14T13:15:04.5368618Z   Downloading pytest_cov-7.0.0-py3-none-any.whl.metadata (31 kB)
2026-02-14T13:15:04.5665432Z Collecting pytest-mock>=3.12.0 (from -r requirements.txt (line 21))
2026-02-14T13:15:04.5799938Z   Downloading pytest_mock-3.15.1-py3-none-any.whl.metadata (3.9 kB)
2026-02-14T13:15:04.9234564Z Collecting ruff>=0.1.0 (from -r requirements.txt (line 22))
2026-02-14T13:15:04.9378019Z   Downloading ruff-0.15.1-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (26 kB)
2026-02-14T13:15:04.9693895Z Collecting PyGithub>=2.1.0 (from -r requirements.txt (line 23))
2026-02-14T13:15:04.9830792Z   Downloading pygithub-2.8.1-py3-none-any.whl.metadata (3.9 kB)
2026-02-14T13:15:05.0056203Z Collecting blinker>=1.9.0 (from Flask>=3.0.0->-r requirements.txt (line 2))
2026-02-14T13:15:05.0191167Z   Downloading blinker-1.9.0-py3-none-any.whl.metadata (1.6 kB)
2026-02-14T13:15:05.0449279Z Collecting click>=8.1.3 (from Flask>=3.0.0->-r requirements.txt (line 2))
2026-02-14T13:15:05.0592311Z   Downloading click-8.3.1-py3-none-any.whl.metadata (2.6 kB)
2026-02-14T13:15:05.0817340Z Collecting itsdangerous>=2.2.0 (from Flask>=3.0.0->-r requirements.txt (line 2))
2026-02-14T13:15:05.0952962Z   Downloading itsdangerous-2.2.0-py3-none-any.whl.metadata (1.9 kB)
2026-02-14T13:15:05.1200141Z Collecting jinja2>=3.1.2 (from Flask>=3.0.0->-r requirements.txt (line 2))
2026-02-14T13:15:05.1335424Z   Downloading jinja2-3.1.6-py3-none-any.whl.metadata (2.9 kB)
2026-02-14T13:15:05.1917368Z Collecting markupsafe>=2.1.1 (from Flask>=3.0.0->-r requirements.txt (line 2))
2026-02-14T13:15:05.2056550Z   Downloading markupsafe-3.0.3-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (2.7 kB)
2026-02-14T13:15:05.2344168Z Collecting werkzeug>=3.1.0 (from Flask>=3.0.0->-r requirements.txt (line 2))
2026-02-14T13:15:05.2478565Z   Downloading werkzeug-3.1.5-py3-none-any.whl.metadata (4.0 kB)
2026-02-14T13:15:05.2792266Z Collecting PyJWT<3.0,>=2.0 (from flask-jwt-extended>=4.6.0->-r requirements.txt (line 4))
2026-02-14T13:15:05.2928160Z   Downloading pyjwt-2.11.0-py3-none-any.whl.metadata (4.0 kB)
2026-02-14T13:15:05.3762871Z Collecting charset_normalizer<4,>=2 (from requests>=2.31.0->-r requirements.txt (line 6))
2026-02-14T13:15:05.3901303Z   Downloading charset_normalizer-3.4.4-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (37 kB)
2026-02-14T13:15:05.4162770Z Collecting idna<4,>=2.5 (from requests>=2.31.0->-r requirements.txt (line 6))
2026-02-14T13:15:05.4298744Z   Downloading idna-3.11-py3-none-any.whl.metadata (8.4 kB)
2026-02-14T13:15:05.4633098Z Collecting urllib3<3,>=1.21.1 (from requests>=2.31.0->-r requirements.txt (line 6))
2026-02-14T13:15:05.4768858Z   Downloading urllib3-2.6.3-py3-none-any.whl.metadata (6.9 kB)
2026-02-14T13:15:05.5063551Z Collecting certifi>=2017.4.17 (from requests>=2.31.0->-r requirements.txt (line 6))
2026-02-14T13:15:05.5201741Z   Downloading certifi-2026.1.4-py3-none-any.whl.metadata (2.5 kB)
2026-02-14T13:15:05.6928941Z Collecting greenlet>=1 (from sqlalchemy>=2.0.0->-r requirements.txt (line 8))
2026-02-14T13:15:05.7069425Z   Downloading greenlet-3.3.1-cp311-cp311-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl.metadata (3.7 kB)
2026-02-14T13:15:05.7346708Z Collecting typing-extensions>=4.6.0 (from sqlalchemy>=2.0.0->-r requirements.txt (line 8))
2026-02-14T13:15:05.7481998Z   Downloading typing_extensions-4.15.0-py3-none-any.whl.metadata (3.3 kB)
2026-02-14T13:15:05.9281738Z Collecting numpy>=1.26.0 (from pandas>=2.1.0->-r requirements.txt (line 9))
2026-02-14T13:15:05.9423162Z   Downloading numpy-2.4.2-cp311-cp311-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl.metadata (6.6 kB)
2026-02-14T13:15:05.9669376Z Collecting python-dateutil>=2.8.2 (from pandas>=2.1.0->-r requirements.txt (line 9))
2026-02-14T13:15:05.9804541Z   Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl.metadata (8.4 kB)
2026-02-14T13:15:06.0057889Z Collecting spacy-legacy<3.1.0,>=3.0.11 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.0193949Z   Downloading spacy_legacy-3.0.12-py2.py3-none-any.whl.metadata (2.8 kB)
2026-02-14T13:15:06.0432259Z Collecting spacy-loggers<2.0.0,>=1.0.0 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.0568936Z   Downloading spacy_loggers-1.0.5-py3-none-any.whl.metadata (23 kB)
2026-02-14T13:15:06.1534706Z Collecting murmurhash<1.1.0,>=0.28.0 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.1685261Z   Downloading murmurhash-1.0.15-cp311-cp311-manylinux1_x86_64.manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_5_x86_64.whl.metadata (2.3 kB)
2026-02-14T13:15:06.2133779Z Collecting cymem<2.1.0,>=2.0.2 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.2281852Z   Downloading cymem-2.0.13-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (9.7 kB)
2026-02-14T13:15:06.2703913Z Collecting preshed<3.1.0,>=3.0.2 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.2852145Z   Downloading preshed-3.0.12-cp311-cp311-manylinux1_x86_64.manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_5_x86_64.whl.metadata (2.5 kB)
2026-02-14T13:15:06.4717412Z Collecting thinc<8.4.0,>=8.3.4 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.4867437Z   Downloading thinc-8.3.10-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (15 kB)
2026-02-14T13:15:06.5170149Z Collecting wasabi<1.2.0,>=0.9.1 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.5305810Z   Downloading wasabi-1.1.3-py3-none-any.whl.metadata (28 kB)
2026-02-14T13:15:06.5834255Z Collecting srsly<3.0.0,>=2.4.3 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.5981736Z   Downloading srsly-2.5.2-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (19 kB)
2026-02-14T13:15:06.6237853Z Collecting catalogue<2.1.0,>=2.0.6 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.6374992Z   Downloading catalogue-2.0.10-py3-none-any.whl.metadata (14 kB)
2026-02-14T13:15:06.6611651Z Collecting weasel<0.5.0,>=0.4.2 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.6746498Z   Downloading weasel-0.4.3-py3-none-any.whl.metadata (4.6 kB)
2026-02-14T13:15:06.7007990Z Collecting typer-slim<1.0.0,>=0.3.0 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.7143085Z   Downloading typer_slim-0.23.1-py3-none-any.whl.metadata (4.2 kB)
2026-02-14T13:15:06.7516947Z Collecting tqdm<5.0.0,>=4.38.0 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.7662367Z   Downloading tqdm-4.67.3-py3-none-any.whl.metadata (57 kB)
2026-02-14T13:15:06.8874152Z Collecting pydantic!=1.8,!=1.8.1,<3.0.0,>=1.7.4 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.9011942Z   Downloading pydantic-2.12.5-py3-none-any.whl.metadata (90 kB)
2026-02-14T13:15:06.9101699Z Requirement already satisfied: setuptools in /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages (from spacy>=3.7.0->-r requirements.txt (line 10)) (79.0.1)
2026-02-14T13:15:06.9332736Z Collecting packaging>=20.0 (from spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.9466058Z   Downloading packaging-26.0-py3-none-any.whl.metadata (3.3 kB)
2026-02-14T13:15:06.9710698Z Collecting annotated-types>=0.6.0 (from pydantic!=1.8,!=1.8.1,<3.0.0,>=1.7.4->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:06.9844385Z   Downloading annotated_types-0.7.0-py3-none-any.whl.metadata (15 kB)
2026-02-14T13:15:07.6317624Z Collecting pydantic-core==2.41.5 (from pydantic!=1.8,!=1.8.1,<3.0.0,>=1.7.4->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:07.6457354Z   Downloading pydantic_core-2.41.5-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (7.3 kB)
2026-02-14T13:15:07.6703230Z Collecting typing-inspection>=0.4.2 (from pydantic!=1.8,!=1.8.1,<3.0.0,>=1.7.4->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:07.6841471Z   Downloading typing_inspection-0.4.2-py3-none-any.whl.metadata (2.6 kB)
2026-02-14T13:15:07.7434536Z Collecting blis<1.4.0,>=1.3.0 (from thinc<8.4.0,>=8.3.4->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:07.7575200Z   Downloading blis-1.3.3-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (7.5 kB)
2026-02-14T13:15:07.7839998Z Collecting confection<1.0.0,>=0.0.1 (from thinc<8.4.0,>=8.3.4->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:07.7978082Z   Downloading confection-0.1.5-py3-none-any.whl.metadata (19 kB)
2026-02-14T13:15:07.8376302Z Collecting typer>=0.23.1 (from typer-slim<1.0.0,>=0.3.0->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:07.8510769Z   Downloading typer-0.23.1-py3-none-any.whl.metadata (16 kB)
2026-02-14T13:15:07.8794936Z Collecting cloudpathlib<1.0.0,>=0.7.0 (from weasel<0.5.0,>=0.4.2->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:07.8929459Z   Downloading cloudpathlib-0.23.0-py3-none-any.whl.metadata (16 kB)
2026-02-14T13:15:07.9208025Z Collecting smart-open<8.0.0,>=5.2.1 (from weasel<0.5.0,>=0.4.2->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:07.9342036Z   Downloading smart_open-7.5.0-py3-none-any.whl.metadata (24 kB)
2026-02-14T13:15:08.0799986Z Collecting wrapt (from smart-open<8.0.0,>=5.2.1->weasel<0.5.0,>=0.4.2->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:08.0941183Z   Downloading wrapt-2.1.1-cp311-cp311-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl.metadata (7.4 kB)
2026-02-14T13:15:08.1272148Z Collecting anyio<5,>=3.5.0 (from openai>=1.0.0->-r requirements.txt (line 14))
2026-02-14T13:15:08.1409745Z   Downloading anyio-4.12.1-py3-none-any.whl.metadata (4.3 kB)
2026-02-14T13:15:08.1656457Z Collecting distro<2,>=1.7.0 (from openai>=1.0.0->-r requirements.txt (line 14))
2026-02-14T13:15:08.1796036Z   Downloading distro-1.9.0-py3-none-any.whl.metadata (6.8 kB)
2026-02-14T13:15:08.2074460Z Collecting httpx<1,>=0.23.0 (from openai>=1.0.0->-r requirements.txt (line 14))
2026-02-14T13:15:08.2209806Z   Downloading httpx-0.28.1-py3-none-any.whl.metadata (7.1 kB)
2026-02-14T13:15:08.2991169Z Collecting jiter<1,>=0.10.0 (from openai>=1.0.0->-r requirements.txt (line 14))
2026-02-14T13:15:08.3128886Z   Downloading jiter-0.13.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (5.2 kB)
2026-02-14T13:15:08.3395054Z Collecting sniffio (from openai>=1.0.0->-r requirements.txt (line 14))
2026-02-14T13:15:08.3533348Z   Downloading sniffio-1.3.1-py3-none-any.whl.metadata (3.9 kB)
2026-02-14T13:15:08.3896838Z Collecting httpcore==1.* (from httpx<1,>=0.23.0->openai>=1.0.0->-r requirements.txt (line 14))
2026-02-14T13:15:08.4037271Z   Downloading httpcore-1.0.9-py3-none-any.whl.metadata (21 kB)
2026-02-14T13:15:08.4270503Z Collecting h11>=0.16 (from httpcore==1.*->httpx<1,>=0.23.0->openai>=1.0.0->-r requirements.txt (line 14))
2026-02-14T13:15:08.4407846Z   Downloading h11-0.16.0-py3-none-any.whl.metadata (8.3 kB)
2026-02-14T13:15:08.7193510Z Collecting lxml>=3.1.0 (from python-docx>=1.1.0->-r requirements.txt (line 16))
2026-02-14T13:15:08.7333120Z   Downloading lxml-6.0.2-cp311-cp311-manylinux_2_26_x86_64.manylinux_2_28_x86_64.whl.metadata (3.6 kB)
2026-02-14T13:15:08.7572352Z Collecting iniconfig>=1.0.1 (from pytest>=7.4.0->-r requirements.txt (line 19))
2026-02-14T13:15:08.7708571Z   Downloading iniconfig-2.3.0-py3-none-any.whl.metadata (2.5 kB)
2026-02-14T13:15:08.7938548Z Collecting pluggy<2,>=1.5 (from pytest>=7.4.0->-r requirements.txt (line 19))
2026-02-14T13:15:08.8079226Z   Downloading pluggy-1.6.0-py3-none-any.whl.metadata (4.8 kB)
2026-02-14T13:15:08.8370154Z Collecting pygments>=2.7.2 (from pytest>=7.4.0->-r requirements.txt (line 19))
2026-02-14T13:15:08.8507542Z   Downloading pygments-2.19.2-py3-none-any.whl.metadata (2.5 kB)
2026-02-14T13:15:09.1842463Z Collecting coverage>=7.10.6 (from coverage[toml]>=7.10.6->pytest-cov>=4.1.0->-r requirements.txt (line 20))
2026-02-14T13:15:09.1983963Z   Downloading coverage-7.13.4-cp311-cp311-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl.metadata (8.5 kB)
2026-02-14T13:15:09.2402587Z Collecting pynacl>=1.4.0 (from PyGithub>=2.1.0->-r requirements.txt (line 23))
2026-02-14T13:15:09.2538824Z   Downloading pynacl-1.6.2-cp38-abi3-manylinux_2_34_x86_64.whl.metadata (10.0 kB)
2026-02-14T13:15:09.4394396Z Collecting cryptography>=3.4.0 (from pyjwt[crypto]>=2.4.0->PyGithub>=2.1.0->-r requirements.txt (line 23))
2026-02-14T13:15:09.4532340Z   Downloading cryptography-46.0.5-cp311-abi3-manylinux_2_34_x86_64.whl.metadata (5.7 kB)
2026-02-14T13:15:09.5591646Z Collecting cffi>=2.0.0 (from cryptography>=3.4.0->pyjwt[crypto]>=2.4.0->PyGithub>=2.1.0->-r requirements.txt (line 23))
2026-02-14T13:15:09.5728988Z   Downloading cffi-2.0.0-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (2.6 kB)
2026-02-14T13:15:09.5974488Z Collecting pycparser (from cffi>=2.0.0->cryptography>=3.4.0->pyjwt[crypto]>=2.4.0->PyGithub>=2.1.0->-r requirements.txt (line 23))
2026-02-14T13:15:09.6109152Z   Downloading pycparser-3.0-py3-none-any.whl.metadata (8.2 kB)
2026-02-14T13:15:09.6365731Z Collecting six>=1.5 (from python-dateutil>=2.8.2->pandas>=2.1.0->-r requirements.txt (line 9))
2026-02-14T13:15:09.6500151Z   Downloading six-1.17.0-py2.py3-none-any.whl.metadata (1.7 kB)
2026-02-14T13:15:09.6756996Z Collecting shellingham>=1.3.0 (from typer>=0.23.1->typer-slim<1.0.0,>=0.3.0->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:09.6891183Z   Downloading shellingham-1.5.4-py2.py3-none-any.whl.metadata (3.5 kB)
2026-02-14T13:15:09.7296221Z Collecting rich>=10.11.0 (from typer>=0.23.1->typer-slim<1.0.0,>=0.3.0->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:09.7432242Z   Downloading rich-14.3.2-py3-none-any.whl.metadata (18 kB)
2026-02-14T13:15:09.7652371Z Collecting annotated-doc>=0.0.2 (from typer>=0.23.1->typer-slim<1.0.0,>=0.3.0->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:09.7789512Z   Downloading annotated_doc-0.0.4-py3-none-any.whl.metadata (6.6 kB)
2026-02-14T13:15:09.8051906Z Collecting markdown-it-py>=2.2.0 (from rich>=10.11.0->typer>=0.23.1->typer-slim<1.0.0,>=0.3.0->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:09.8186300Z   Downloading markdown_it_py-4.0.0-py3-none-any.whl.metadata (7.3 kB)
2026-02-14T13:15:09.8438254Z Collecting mdurl~=0.1 (from markdown-it-py>=2.2.0->rich>=10.11.0->typer>=0.23.1->typer-slim<1.0.0,>=0.3.0->spacy>=3.7.0->-r requirements.txt (line 10))
2026-02-14T13:15:09.8573468Z   Downloading mdurl-0.1.2-py3-none-any.whl.metadata (1.6 kB)
2026-02-14T13:15:09.8845860Z Downloading flask-3.1.2-py3-none-any.whl (103 kB)
2026-02-14T13:15:09.9028743Z Downloading flask_cors-6.0.2-py3-none-any.whl (13 kB)
2026-02-14T13:15:09.9180517Z Downloading Flask_JWT_Extended-4.7.1-py2.py3-none-any.whl (22 kB)
2026-02-14T13:15:09.9341333Z Downloading pyjwt-2.11.0-py3-none-any.whl (28 kB)
2026-02-14T13:15:09.9496037Z Downloading psycopg2_binary-2.9.11-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (4.2 MB)
2026-02-14T13:15:10.0085489Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.2/4.2 MB 88.3 MB/s  0:00:00
2026-02-14T13:15:10.0225319Z Downloading requests-2.32.5-py3-none-any.whl (64 kB)
2026-02-14T13:15:10.0383583Z Downloading charset_normalizer-3.4.4-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (151 kB)
2026-02-14T13:15:10.0539982Z Downloading idna-3.11-py3-none-any.whl (71 kB)
2026-02-14T13:15:10.0695354Z Downloading urllib3-2.6.3-py3-none-any.whl (131 kB)
2026-02-14T13:15:10.0851800Z Downloading python_dotenv-1.2.1-py3-none-any.whl (21 kB)
2026-02-14T13:15:10.1029522Z Downloading sqlalchemy-2.0.46-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (3.3 MB)
2026-02-14T13:15:10.1226664Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.3/3.3 MB 177.4 MB/s  0:00:00
2026-02-14T13:15:10.1360922Z Downloading pandas-3.0.0-cp311-cp311-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl (11.2 MB)
2026-02-14T13:15:10.1903585Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 11.2/11.2 MB 213.0 MB/s  0:00:00
2026-02-14T13:15:10.2064733Z Downloading spacy-3.8.11-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (32.3 MB)
2026-02-14T13:15:10.3591313Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 32.3/32.3 MB 213.9 MB/s  0:00:00
2026-02-14T13:15:10.3734073Z Downloading catalogue-2.0.10-py3-none-any.whl (17 kB)
2026-02-14T13:15:10.3889603Z Downloading cymem-2.0.13-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (244 kB)
2026-02-14T13:15:10.4069499Z Downloading murmurhash-1.0.15-cp311-cp311-manylinux1_x86_64.manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_5_x86_64.whl (128 kB)
2026-02-14T13:15:10.4244937Z Downloading preshed-3.0.12-cp311-cp311-manylinux1_x86_64.manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_5_x86_64.whl (824 kB)
2026-02-14T13:15:10.4307470Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 824.7/824.7 kB 142.1 MB/s  0:00:00
2026-02-14T13:15:10.4442147Z Downloading pydantic-2.12.5-py3-none-any.whl (463 kB)
2026-02-14T13:15:10.4620917Z Downloading pydantic_core-2.41.5-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.1 MB)
2026-02-14T13:15:10.4786502Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 125.1 MB/s  0:00:00
2026-02-14T13:15:10.4924651Z Downloading spacy_legacy-3.0.12-py2.py3-none-any.whl (29 kB)
2026-02-14T13:15:10.5080011Z Downloading spacy_loggers-1.0.5-py3-none-any.whl (22 kB)
2026-02-14T13:15:10.5237397Z Downloading srsly-2.5.2-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (1.1 MB)
2026-02-14T13:15:10.5313533Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.1/1.1 MB 168.0 MB/s  0:00:00
2026-02-14T13:15:10.5477549Z Downloading thinc-8.3.10-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (4.1 MB)
2026-02-14T13:15:10.5658164Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.1/4.1 MB 243.0 MB/s  0:00:00
2026-02-14T13:15:10.5812329Z Downloading blis-1.3.3-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (11.4 MB)
2026-02-14T13:15:10.6327146Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 11.4/11.4 MB 225.5 MB/s  0:00:00
2026-02-14T13:15:10.6463551Z Downloading confection-0.1.5-py3-none-any.whl (35 kB)
2026-02-14T13:15:10.6621937Z Downloading numpy-2.4.2-cp311-cp311-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl (16.9 MB)
2026-02-14T13:15:10.7342947Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 16.9/16.9 MB 238.4 MB/s  0:00:00
2026-02-14T13:15:10.7481505Z Downloading tqdm-4.67.3-py3-none-any.whl (78 kB)
2026-02-14T13:15:10.7636346Z Downloading typer_slim-0.23.1-py3-none-any.whl (3.4 kB)
2026-02-14T13:15:10.7787774Z Downloading wasabi-1.1.3-py3-none-any.whl (27 kB)
2026-02-14T13:15:10.7939434Z Downloading weasel-0.4.3-py3-none-any.whl (50 kB)
2026-02-14T13:15:10.8095026Z Downloading cloudpathlib-0.23.0-py3-none-any.whl (62 kB)
2026-02-14T13:15:10.8251470Z Downloading smart_open-7.5.0-py3-none-any.whl (63 kB)
2026-02-14T13:15:10.8407741Z Downloading rapidfuzz-3.14.3-cp311-cp311-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl (3.2 MB)
2026-02-14T13:15:10.8561447Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.2/3.2 MB 239.9 MB/s  0:00:00
2026-02-14T13:15:10.8699365Z Downloading bcrypt-5.0.0-cp39-abi3-manylinux_2_34_x86_64.whl (278 kB)
2026-02-14T13:15:10.8862650Z Downloading Flask_Login-0.6.3-py3-none-any.whl (17 kB)
2026-02-14T13:15:10.9028093Z Downloading openai-2.21.0-py3-none-any.whl (1.1 MB)
2026-02-14T13:15:10.9098391Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.1/1.1 MB 174.0 MB/s  0:00:00
2026-02-14T13:15:10.9232505Z Downloading anyio-4.12.1-py3-none-any.whl (113 kB)
2026-02-14T13:15:10.9392985Z Downloading distro-1.9.0-py3-none-any.whl (20 kB)
2026-02-14T13:15:10.9549615Z Downloading httpx-0.28.1-py3-none-any.whl (73 kB)
2026-02-14T13:15:10.9703448Z Downloading httpcore-1.0.9-py3-none-any.whl (78 kB)
2026-02-14T13:15:10.9857592Z Downloading jiter-0.13.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (362 kB)
2026-02-14T13:15:11.0021829Z Downloading typing_extensions-4.15.0-py3-none-any.whl (44 kB)
2026-02-14T13:15:11.0175291Z Downloading pypdf2-3.0.1-py3-none-any.whl (232 kB)
2026-02-14T13:15:11.0336772Z Downloading python_docx-1.2.0-py3-none-any.whl (252 kB)
2026-02-14T13:15:11.0498973Z Downloading pytest-9.0.2-py3-none-any.whl (374 kB)
2026-02-14T13:15:11.0664954Z Downloading pluggy-1.6.0-py3-none-any.whl (20 kB)
2026-02-14T13:15:11.0816758Z Downloading pytest_cov-7.0.0-py3-none-any.whl (22 kB)
2026-02-14T13:15:11.0970009Z Downloading pytest_mock-3.15.1-py3-none-any.whl (10 kB)
2026-02-14T13:15:11.1127307Z Downloading ruff-0.15.1-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (11.1 MB)
2026-02-14T13:15:11.1643015Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 11.1/11.1 MB 221.9 MB/s  0:00:00
2026-02-14T13:15:11.1780436Z Downloading pygithub-2.8.1-py3-none-any.whl (432 kB)
2026-02-14T13:15:11.1951639Z Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)
2026-02-14T13:15:11.2104455Z Downloading blinker-1.9.0-py3-none-any.whl (8.5 kB)
2026-02-14T13:15:11.2256306Z Downloading certifi-2026.1.4-py3-none-any.whl (152 kB)
2026-02-14T13:15:11.2414415Z Downloading click-8.3.1-py3-none-any.whl (108 kB)
2026-02-14T13:15:11.2576847Z Downloading coverage-7.13.4-cp311-cp311-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl (252 kB)
2026-02-14T13:15:11.2736309Z Downloading greenlet-3.3.1-cp311-cp311-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl (590 kB)
2026-02-14T13:15:11.2791358Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 590.3/590.3 kB 104.2 MB/s  0:00:00
2026-02-14T13:15:11.2927799Z Downloading h11-0.16.0-py3-none-any.whl (37 kB)
2026-02-14T13:15:11.3079835Z Downloading iniconfig-2.3.0-py3-none-any.whl (7.5 kB)
2026-02-14T13:15:11.3232065Z Downloading itsdangerous-2.2.0-py3-none-any.whl (16 kB)
2026-02-14T13:15:11.3382473Z Downloading jinja2-3.1.6-py3-none-any.whl (134 kB)
2026-02-14T13:15:11.3540589Z Downloading lxml-6.0.2-cp311-cp311-manylinux_2_26_x86_64.manylinux_2_28_x86_64.whl (5.2 MB)
2026-02-14T13:15:11.3776159Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 5.2/5.2 MB 232.8 MB/s  0:00:00
2026-02-14T13:15:11.3912267Z Downloading markupsafe-3.0.3-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (22 kB)
2026-02-14T13:15:11.4066008Z Downloading packaging-26.0-py3-none-any.whl (74 kB)
2026-02-14T13:15:11.4221000Z Downloading pygments-2.19.2-py3-none-any.whl (1.2 MB)
2026-02-14T13:15:11.4304708Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 181.6 MB/s  0:00:00
2026-02-14T13:15:11.4460440Z Downloading cryptography-46.0.5-cp311-abi3-manylinux_2_34_x86_64.whl (4.5 MB)
2026-02-14T13:15:11.4699254Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.5/4.5 MB 202.8 MB/s  0:00:00
2026-02-14T13:15:11.4838779Z Downloading cffi-2.0.0-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (215 kB)
2026-02-14T13:15:11.5002991Z Downloading pynacl-1.6.2-cp38-abi3-manylinux_2_34_x86_64.whl (1.4 MB)
2026-02-14T13:15:11.5091866Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.4/1.4 MB 181.9 MB/s  0:00:00
2026-02-14T13:15:11.5235373Z Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
2026-02-14T13:15:11.5399929Z Downloading six-1.17.0-py2.py3-none-any.whl (11 kB)
2026-02-14T13:15:11.5562669Z Downloading typer-0.23.1-py3-none-any.whl (56 kB)
2026-02-14T13:15:11.5716346Z Downloading annotated_doc-0.0.4-py3-none-any.whl (5.3 kB)
2026-02-14T13:15:11.5871450Z Downloading rich-14.3.2-py3-none-any.whl (309 kB)
2026-02-14T13:15:11.6039165Z Downloading markdown_it_py-4.0.0-py3-none-any.whl (87 kB)
2026-02-14T13:15:11.6195284Z Downloading mdurl-0.1.2-py3-none-any.whl (10.0 kB)
2026-02-14T13:15:11.6354458Z Downloading shellingham-1.5.4-py2.py3-none-any.whl (9.8 kB)
2026-02-14T13:15:11.6506753Z Downloading typing_inspection-0.4.2-py3-none-any.whl (14 kB)
2026-02-14T13:15:11.6661115Z Downloading werkzeug-3.1.5-py3-none-any.whl (225 kB)
2026-02-14T13:15:11.6825777Z Downloading pycparser-3.0-py3-none-any.whl (48 kB)
2026-02-14T13:15:11.6979294Z Downloading sniffio-1.3.1-py3-none-any.whl (10 kB)
2026-02-14T13:15:11.7131669Z Downloading wrapt-2.1.1-cp311-cp311-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl (113 kB)
2026-02-14T13:15:12.0111591Z Installing collected packages: wrapt, wasabi, urllib3, typing-extensions, tqdm, spacy-loggers, spacy-legacy, sniffio, six, shellingham, ruff, rapidfuzz, python-dotenv, PyPDF2, PyJWT, pygments, pycparser, psycopg2-binary, pluggy, packaging, numpy, murmurhash, mdurl, markupsafe, lxml, jiter, itsdangerous, iniconfig, idna, h11, greenlet, distro, cymem, coverage, cloudpathlib, click, charset_normalizer, certifi, catalogue, blinker, bcrypt, annotated-types, annotated-doc, werkzeug, typing-inspection, srsly, sqlalchemy, smart-open, requests, python-docx, python-dateutil, pytest, pydantic-core, preshed, markdown-it-py, jinja2, httpcore, cffi, blis, anyio, rich, pytest-mock, pytest-cov, pynacl, pydantic, pandas, httpx, Flask, cryptography, typer, openai, Flask-Login, flask-jwt-extended, flask-cors, confection, typer-slim, thinc, PyGithub, weasel, spacy
2026-02-14T13:15:25.6963512Z 
2026-02-14T13:15:25.7001805Z Successfully installed Flask-3.1.2 Flask-Login-0.6.3 PyGithub-2.8.1 PyJWT-2.11.0 PyPDF2-3.0.1 annotated-doc-0.0.4 annotated-types-0.7.0 anyio-4.12.1 bcrypt-5.0.0 blinker-1.9.0 blis-1.3.3 catalogue-2.0.10 certifi-2026.1.4 cffi-2.0.0 charset_normalizer-3.4.4 click-8.3.1 cloudpathlib-0.23.0 confection-0.1.5 coverage-7.13.4 cryptography-46.0.5 cymem-2.0.13 distro-1.9.0 flask-cors-6.0.2 flask-jwt-extended-4.7.1 greenlet-3.3.1 h11-0.16.0 httpcore-1.0.9 httpx-0.28.1 idna-3.11 iniconfig-2.3.0 itsdangerous-2.2.0 jinja2-3.1.6 jiter-0.13.0 lxml-6.0.2 markdown-it-py-4.0.0 markupsafe-3.0.3 mdurl-0.1.2 murmurhash-1.0.15 numpy-2.4.2 openai-2.21.0 packaging-26.0 pandas-3.0.0 pluggy-1.6.0 preshed-3.0.12 psycopg2-binary-2.9.11 pycparser-3.0 pydantic-2.12.5 pydantic-core-2.41.5 pygments-2.19.2 pynacl-1.6.2 pytest-9.0.2 pytest-cov-7.0.0 pytest-mock-3.15.1 python-dateutil-2.9.0.post0 python-docx-1.2.0 python-dotenv-1.2.1 rapidfuzz-3.14.3 requests-2.32.5 rich-14.3.2 ruff-0.15.1 shellingham-1.5.4 six-1.17.0 smart-open-7.5.0 sniffio-1.3.1 spacy-3.8.11 spacy-legacy-3.0.12 spacy-loggers-1.0.5 sqlalchemy-2.0.46 srsly-2.5.2 thinc-8.3.10 tqdm-4.67.3 typer-0.23.1 typer-slim-0.23.1 typing-extensions-4.15.0 typing-inspection-0.4.2 urllib3-2.6.3 wasabi-1.1.3 weasel-0.4.3 werkzeug-3.1.5 wrapt-2.1.1
2026-02-14T13:15:26.5276972Z ##[group]Run pytest tests/ --ignore=tests/browser -v --cov=services --cov-report=term-missing
2026-02-14T13:15:26.5277625Z [36;1mpytest tests/ --ignore=tests/browser -v --cov=services --cov-report=term-missing[0m
2026-02-14T13:15:26.5326600Z shell: /usr/bin/bash -e {0}
2026-02-14T13:15:26.5326827Z env:
2026-02-14T13:15:26.5327304Z   TEST_DB_CONNECTION_STRING: ***127.0.0.1:5432/job_search_test
2026-02-14T13:15:26.5327691Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:15:26.5328098Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
2026-02-14T13:15:26.5328503Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:15:26.5328855Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:15:26.5329218Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
2026-02-14T13:15:26.5329586Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
2026-02-14T13:15:26.5329880Z ##[endgroup]
2026-02-14T13:15:27.4869718Z ============================= test session starts ==============================
2026-02-14T13:15:27.4870643Z platform linux -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.11.14/x64/bin/python
2026-02-14T13:15:27.4871195Z cachedir: .pytest_cache
2026-02-14T13:15:27.4871492Z rootdir: /home/runner/work/job-etl-project/job-etl-project
2026-02-14T13:15:27.4871845Z configfile: pyproject.toml
2026-02-14T13:15:27.4872105Z plugins: anyio-4.12.1, mock-3.15.1, cov-7.0.0
2026-02-14T13:15:31.1222912Z collecting ... collected 476 items
2026-02-14T13:15:31.1223356Z 
2026-02-14T13:15:31.1242115Z tests/integration/test_auth_integration.py::TestAuthIntegration::test_full_registration_and_login_flow SKIPPED [  0%]
2026-02-14T13:15:31.1254137Z tests/integration/test_auth_integration.py::TestAuthIntegration::test_registration_prevents_duplicate_username SKIPPED [  0%]
2026-02-14T13:15:31.1266826Z tests/integration/test_auth_integration.py::TestAuthIntegration::test_registration_prevents_duplicate_email SKIPPED [  0%]
2026-02-14T13:15:31.3697741Z tests/integration/test_bug_fixes.py::TestBug3Deduplication::test_extractor_skips_duplicate_jobs PASSED [  0%]
2026-02-14T13:15:31.5943936Z tests/integration/test_bug_fixes.py::TestBug3Deduplication::test_extractor_handles_mixed_duplicates PASSED [  1%]
2026-02-14T13:15:31.5958829Z tests/integration/test_bug_fixes.py::TestBug4FieldCasing::test_staging_model_normalizes_salary_period SKIPPED [  1%]
2026-02-14T13:15:31.5970417Z tests/integration/test_bug_fixes.py::TestBug4FieldCasing::test_staging_model_normalizes_employment_type SKIPPED [  1%]
2026-02-14T13:15:31.8125641Z tests/integration/test_bug_fixes.py::TestBug5UKCountryCode::test_ranker_uses_gb_not_uk PASSED [  1%]
2026-02-14T13:15:32.0323145Z tests/integration/test_bug_fixes.py::TestBug5UKCountryCode::test_campaign_stored_with_gb_country_code PASSED [  1%]
2026-02-14T13:15:32.0337705Z tests/integration/test_bug_fixes.py::TestBug7JobNotFound::test_job_retrievable_from_other_user_campaign SKIPPED [  2%]
2026-02-14T13:15:32.2568237Z tests/integration/test_bug_fixes.py::TestBug7JobNotFound::test_job_retrievable_from_own_campaign SKIPPED [  2%]
2026-02-14T13:15:32.4814614Z tests/integration/test_campaign_deletion.py::TestCampaignUniqueness::test_campaign_ids_are_unique PASSED [  2%]
2026-02-14T13:15:32.7020686Z tests/integration/test_campaign_deletion.py::TestCampaignUniqueness::test_campaign_ids_increment PASSED [  2%]
2026-02-14T13:15:32.9190869Z tests/integration/test_campaign_deletion.py::TestCampaignUniqueness::test_campaign_id_primary_key_constraint PASSED [  2%]
2026-02-14T13:15:33.3006788Z tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_delete_campaign_removes_rankings FAILED [  3%]
2026-02-14T13:15:33.5375392Z tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_delete_campaign_removes_fact_jobs FAILED [  3%]
2026-02-14T13:15:33.7730429Z tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_delete_campaign_removes_staging_jobs FAILED [  3%]
2026-02-14T13:15:34.0072457Z tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_delete_campaign_removes_etl_metrics FAILED [  3%]
2026-02-14T13:15:34.2518720Z tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_delete_campaign_comprehensive_cleanup FAILED [  3%]
2026-02-14T13:15:34.5593472Z tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_new_campaign_does_not_show_old_jobs FAILED [  4%]
2026-02-14T13:15:34.7988126Z tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_job_queries_only_show_existing_campaigns FAILED [  4%]
2026-02-14T13:15:35.0035301Z tests/integration/test_company_enrichment.py::TestCompanyEnrichmentFlow::test_companies_identified_from_staging_jobs SKIPPED [  4%]
2026-02-14T13:15:35.2040756Z tests/integration/test_company_enrichment.py::TestCompanyEnrichmentFlow::test_company_extracted_to_raw_layer SKIPPED [  4%]
2026-02-14T13:15:35.4096930Z tests/integration/test_company_enrichment.py::TestCompanyEnrichmentFlow::test_enrichment_queue_updated SKIPPED [  5%]
2026-02-14T13:15:35.6153972Z tests/integration/test_company_enrichment.py::TestCompanyEnrichmentFlow::test_normalize_companies_to_staging SKIPPED [  5%]
2026-02-14T13:15:35.8173979Z tests/integration/test_company_enrichment.py::TestCompanyEnrichmentFlow::test_companies_in_marts_dim_companies SKIPPED [  5%]
2026-02-14T13:15:36.0228745Z tests/integration/test_company_enrichment.py::TestCompanyEnrichmentFlow::test_complete_company_enrichment_flow SKIPPED [  5%]
2026-02-14T13:15:36.2333970Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_cooldown_after_successful_dag PASSED [  5%]
2026-02-14T13:15:36.4416964Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_cooldown_after_failed_dag PASSED [  6%]
2026-02-14T13:15:36.6458671Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_no_cooldown_before_first_run PASSED [  6%]
2026-02-14T13:15:36.8509865Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_cooldown_expires_after_one_hour PASSED [  6%]
2026-02-14T13:15:37.0565159Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_multiple_campaigns_independent_cooldown PASSED [  6%]
2026-02-14T13:15:37.3640931Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_concurrent_dag_triggers_same_campaign PASSED [  6%]
2026-02-14T13:15:37.5692912Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_dag_completion_with_no_jobs PASSED [  7%]
2026-02-14T13:15:37.7711638Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_page_refresh_preserves_cooldown PASSED [  7%]
2026-02-14T13:15:37.9779407Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_force_start_bypasses_cooldown PASSED [  7%]
2026-02-14T13:15:38.1898150Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_cooldown_calculation_edge_cases PASSED [  7%]
2026-02-14T13:15:38.4092115Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_status_derived_from_metrics PASSED [  7%]
2026-02-14T13:15:38.7149602Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_concurrent_triggers_different_users PASSED [  8%]
2026-02-14T13:15:38.9215281Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_cooldown_with_timezone_issues PASSED [  8%]
2026-02-14T13:15:39.1315222Z tests/integration/test_cooldown_logic.py::TestCooldownLogic::test_cooldown_reset_on_force_start PASSED [  8%]
2026-02-14T13:15:39.3339523Z tests/integration/test_cooldown_logic.py::TestTriggerLogicEdgeCases::test_invalid_campaign_id_handling PASSED [  8%]
2026-02-14T13:15:39.5405221Z tests/integration/test_cooldown_logic.py::TestTriggerLogicEdgeCases::test_missing_dag_run_id_handling PASSED [  9%]
2026-02-14T13:15:39.7551722Z tests/integration/test_cooldown_logic.py::TestTriggerLogicEdgeCases::test_concurrent_status_check_race_condition PASSED [  9%]
2026-02-14T13:15:39.9603254Z tests/integration/test_cooldown_logic.py::TestTriggerLogicEdgeCases::test_airflow_api_timeout_simulation PASSED [  9%]
2026-02-14T13:15:40.1659669Z tests/integration/test_cooldown_logic.py::TestTriggerLogicEdgeCases::test_airflow_connection_error_simulation PASSED [  9%]
2026-02-14T13:15:40.3739848Z tests/integration/test_cooldown_logic.py::TestTriggerLogicEdgeCases::test_response_validation PASSED [  9%]
2026-02-14T13:15:40.6171434Z tests/integration/test_cooldown_logic.py::TestTriggerLogicEdgeCases::test_campaign_ownership_validation PASSED [ 10%]
2026-02-14T13:15:41.5212881Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_success PASSED [ 10%]
2026-02-14T13:15:42.0549668Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_with_comments ERROR [ 10%]
2026-02-14T13:15:42.8505168Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_missing_resume_id PASSED [ 10%]
2026-02-14T13:15:43.3726875Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_invalid_resume_id ERROR [ 10%]
2026-02-14T13:15:44.1660781Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_not_json PASSED [ 11%]
2026-02-14T13:15:44.6947207Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_generation_error ERROR [ 11%]
2026-02-14T13:15:45.5006179Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_validation_error PASSED [ 11%]
2026-02-14T13:15:45.8060505Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_requires_login PASSED [ 11%]
2026-02-14T13:15:46.4437300Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_general_exception ERROR [ 11%]
2026-02-14T13:15:46.6542222Z tests/integration/test_dag_end_to_end.py::test_dag_end_to_end_full_pipeline SKIPPED [ 12%]
2026-02-14T13:15:46.6579887Z tests/integration/test_dag_task_order.py::TestDAGTaskOrder::test_dag_task_order_ensures_fact_jobs_before_ranking SKIPPED [ 12%]
2026-02-14T13:15:46.6603575Z tests/integration/test_dag_task_order.py::TestDAGTaskOrder::test_dag_topological_sort_places_rank_jobs_after_dbt_modelling SKIPPED [ 12%]
2026-02-14T13:15:46.8862183Z tests/integration/test_data_preservation.py::TestDataPreservation::test_fact_jobs_preserves_all_campaigns_on_single_campaign_dag SKIPPED [ 12%]
2026-02-14T13:15:47.1076585Z tests/integration/test_data_preservation.py::TestDataPreservation::test_staging_incremental_preserves_other_campaigns SKIPPED [ 13%]
2026-02-14T13:15:47.3249399Z tests/integration/test_data_preservation.py::TestDataPreservation::test_incremental_materialization_processes_only_new_records SKIPPED [ 13%]
2026-02-14T13:15:47.5430557Z tests/integration/test_data_preservation.py::TestDataPreservation::test_fact_jobs_incremental_without_campaign_filter SKIPPED [ 13%]
2026-02-14T13:15:47.7651869Z tests/integration/test_data_preservation.py::TestDataPreservation::test_ranking_upsert_preserves_other_campaigns SKIPPED [ 13%]
2026-02-14T13:15:47.9965055Z tests/integration/test_data_preservation.py::TestDataPreservation::test_ranking_upsert_updates_existing_rankings SKIPPED [ 13%]
2026-02-14T13:15:48.2265821Z tests/integration/test_document_edge_cases.py::TestDocumentEdgeCasesIntegration::test_resume_linked_to_multiple_jobs PASSED [ 14%]
2026-02-14T13:15:48.4531002Z tests/integration/test_document_edge_cases.py::TestDocumentEdgeCasesIntegration::test_delete_resume_linked_to_jobs PASSED [ 14%]
2026-02-14T13:15:48.6684227Z tests/integration/test_document_edge_cases.py::TestDocumentEdgeCasesIntegration::test_cover_letter_same_name_different_jobs PASSED [ 14%]
2026-02-14T13:15:48.8893799Z tests/integration/test_document_edge_cases.py::TestDocumentEdgeCasesIntegration::test_switch_from_inline_text_to_cover_letter_id PASSED [ 14%]
2026-02-14T13:15:49.1169825Z tests/integration/test_document_edge_cases.py::TestDocumentEdgeCasesIntegration::test_switch_from_cover_letter_id_to_inline_text PASSED [ 14%]
2026-02-14T13:15:49.3478573Z tests/integration/test_document_edge_cases.py::TestDocumentEdgeCasesIntegration::test_concurrent_updates_same_document PASSED [ 15%]
2026-02-14T13:15:49.5635744Z tests/integration/test_document_edge_cases.py::TestDocumentEdgeCasesIntegration::test_file_with_special_characters_in_name PASSED [ 15%]
2026-02-14T13:15:49.7860794Z tests/integration/test_document_edge_cases.py::TestDocumentEdgeCasesIntegration::test_very_long_cover_letter_text PASSED [ 15%]
2026-02-14T13:15:50.0049453Z tests/integration/test_document_edge_cases.py::TestDocumentEdgeCasesIntegration::test_multiple_resumes_same_name PASSED [ 15%]
2026-02-14T13:15:50.2223229Z tests/integration/test_document_edge_cases.py::TestDocumentEdgeCasesIntegration::test_get_documents_for_nonexistent_user PASSED [ 15%]
2026-02-14T13:15:50.4502969Z tests/integration/test_document_edge_cases.py::TestDocumentEdgeCasesIntegration::test_update_document_with_all_none_values PASSED [ 16%]
2026-02-14T13:15:50.6631907Z tests/integration/test_document_management.py::TestDocumentManagementIntegration::test_upload_resume_and_link_to_job PASSED [ 16%]
2026-02-14T13:15:50.8787343Z tests/integration/test_document_management.py::TestDocumentManagementIntegration::test_create_text_cover_letter_and_link PASSED [ 16%]
2026-02-14T13:15:51.0960986Z tests/integration/test_document_management.py::TestDocumentManagementIntegration::test_upload_cover_letter_file_and_link PASSED [ 16%]
2026-02-14T13:15:51.3104628Z tests/integration/test_document_management.py::TestDocumentManagementIntegration::test_update_job_application_document PASSED [ 17%]
2026-02-14T13:15:51.5245027Z tests/integration/test_document_management.py::TestDocumentManagementIntegration::test_delete_resume_removes_file PASSED [ 17%]
2026-02-14T13:15:51.7410926Z tests/integration/test_document_management.py::TestDocumentManagementIntegration::test_get_user_resumes_list PASSED [ 17%]
2026-02-14T13:15:51.9551255Z tests/integration/test_document_management.py::TestDocumentManagementIntegration::test_inline_cover_letter_text_workflow PASSED [ 17%]
2026-02-14T13:15:52.1706572Z tests/integration/test_document_management.py::TestDocumentManagementIntegration::test_mixed_document_types_workflow PASSED [ 17%]
2026-02-14T13:15:52.3822086Z tests/integration/test_document_management.py::TestDocumentManagementIntegration::test_get_user_cover_letters_filtered_by_job PASSED [ 18%]
2026-02-14T13:15:52.5951695Z tests/integration/test_document_management.py::TestDocumentManagementIntegration::test_documents_uploaded_from_job_details_not_in_documents_section PASSED [ 18%]
2026-02-14T13:15:52.8131093Z tests/integration/test_document_management.py::TestDocumentManagementIntegration::test_only_documents_section_documents_in_job_attachment_dropdowns PASSED [ 18%]
2026-02-14T13:15:53.3359052Z tests/integration/test_document_routes.py::TestDocumentRoutes::test_upload_resume_route_success PASSED [ 18%]
2026-02-14T13:15:53.8632939Z tests/integration/test_document_routes.py::TestDocumentRoutes::test_download_resume_route_success PASSED [ 18%]
2026-02-14T13:15:54.3883335Z tests/integration/test_document_routes.py::TestDocumentRoutes::test_download_cover_letter_inline_text PASSED [ 19%]
2026-02-14T13:15:54.9189826Z tests/integration/test_document_routes.py::TestDocumentRoutes::test_download_cover_letter_text_based PASSED [ 19%]
2026-02-14T13:15:55.4450886Z tests/integration/test_document_routes.py::TestDocumentRoutes::test_link_resume_to_job_route PASSED [ 19%]
2026-02-14T13:15:55.9614104Z tests/integration/test_document_routes.py::TestDocumentRoutes::test_update_application_documents_route PASSED [ 19%]
2026-02-14T13:15:56.4817302Z tests/integration/test_document_routes.py::TestDocumentRoutes::test_get_user_resumes_api PASSED [ 19%]
2026-02-14T13:15:57.0008451Z tests/integration/test_document_routes.py::TestDocumentRoutes::test_get_user_cover_letters_api PASSED [ 20%]
2026-02-14T13:15:57.5246717Z tests/integration/test_document_routes.py::TestDocumentRoutes::test_download_cover_letter_file_based PASSED [ 20%]
2026-02-14T13:15:58.0412278Z tests/integration/test_document_routes.py::TestDocumentRoutes::test_download_cover_letter_text_based_raises_error PASSED [ 20%]
2026-02-14T13:15:58.5663162Z tests/integration/test_document_routes.py::TestDocumentRoutes::test_cover_letter_download_handles_both_types PASSED [ 20%]
2026-02-14T13:15:58.7746664Z tests/integration/test_documents_page.py::TestDocumentsPage::test_upload_resume_from_documents_section PASSED [ 21%]
2026-02-14T13:15:58.9865981Z tests/integration/test_documents_page.py::TestDocumentsPage::test_upload_resume_from_job_details_not_in_documents_section PASSED [ 21%]
2026-02-14T13:15:59.1998304Z tests/integration/test_documents_page.py::TestDocumentsPage::test_delete_resume_from_documents_section PASSED [ 21%]
2026-02-14T13:15:59.4075096Z tests/integration/test_documents_page.py::TestDocumentsPage::test_create_cover_letter_from_documents_section PASSED [ 21%]
2026-02-14T13:15:59.6164627Z tests/integration/test_documents_page.py::TestDocumentsPage::test_create_cover_letter_from_job_details_not_in_documents_section PASSED [ 21%]
2026-02-14T13:15:59.8231323Z tests/integration/test_documents_page.py::TestDocumentsPage::test_delete_cover_letter_from_documents_section PASSED [ 22%]
2026-02-14T13:16:00.0388094Z tests/integration/test_documents_page.py::TestDocumentsPage::test_only_documents_section_resumes_appear_in_job_attachment PASSED [ 22%]
2026-02-14T13:16:00.2518848Z tests/integration/test_documents_page.py::TestDocumentsPage::test_only_documents_section_cover_letters_appear_in_job_attachment PASSED [ 22%]
2026-02-14T13:16:00.4623256Z tests/integration/test_documents_page.py::TestDocumentsPage::test_delete_nonexistent_resume PASSED [ 22%]
2026-02-14T13:16:00.6678382Z tests/integration/test_documents_page.py::TestDocumentsPage::test_delete_nonexistent_cover_letter PASSED [ 22%]
2026-02-14T13:16:00.8731414Z tests/integration/test_documents_page.py::TestDocumentsPage::test_get_resume_by_id_not_found PASSED [ 23%]
2026-02-14T13:16:01.0812682Z tests/integration/test_documents_page.py::TestDocumentsPage::test_get_cover_letter_by_id_not_found PASSED [ 23%]
2026-02-14T13:16:01.2880240Z tests/integration/test_documents_page.py::TestDocumentsPage::test_download_text_based_cover_letter_fails PASSED [ 23%]
2026-02-14T13:16:01.5000679Z tests/integration/test_documents_page.py::TestDocumentsPage::test_upload_resume_invalid_file_type PASSED [ 23%]
2026-02-14T13:16:01.7143887Z tests/integration/test_documents_page.py::TestDocumentsPage::test_upload_cover_letter_invalid_file_type PASSED [ 23%]
2026-02-14T13:16:01.9235182Z tests/integration/test_extract_normalize_rank.py::TestExtractNormalizeRankFlow::test_extract_jobs_to_raw_layer PASSED [ 24%]
2026-02-14T13:16:02.2031596Z tests/integration/test_extract_normalize_rank.py::TestExtractNormalizeRankFlow::test_normalize_jobs_to_staging SKIPPED [ 24%]
2026-02-14T13:16:02.4101625Z tests/integration/test_extract_normalize_rank.py::TestExtractNormalizeRankFlow::test_build_marts_and_rank_jobs SKIPPED [ 24%]
2026-02-14T13:16:02.6166245Z tests/integration/test_extract_normalize_rank.py::TestExtractNormalizeRankFlow::test_complete_flow_end_to_end SKIPPED [ 24%]
2026-02-14T13:16:02.8373577Z tests/integration/test_job_status_history_integration.py::TestJobStatusHistoryIntegration::test_record_job_found_creates_history PASSED [ 25%]
2026-02-14T13:16:03.0467914Z tests/integration/test_job_status_history_integration.py::TestJobStatusHistoryIntegration::test_record_ai_update_creates_history PASSED [ 25%]
2026-02-14T13:16:03.2552453Z tests/integration/test_job_status_history_integration.py::TestJobStatusHistoryIntegration::test_record_chatgpt_update_creates_history PASSED [ 25%]
2026-02-14T13:16:03.4960307Z tests/integration/test_job_status_history_integration.py::TestJobStatusHistoryIntegration::test_record_document_change_creates_history PASSED [ 25%]
2026-02-14T13:16:03.7371794Z tests/integration/test_job_status_history_integration.py::TestJobStatusHistoryIntegration::test_record_note_change_creates_history PASSED [ 25%]
2026-02-14T13:16:03.9911201Z tests/integration/test_job_status_history_integration.py::TestJobStatusHistoryIntegration::test_upsert_status_records_history PASSED [ 26%]
2026-02-14T13:16:04.2025246Z tests/integration/test_job_status_history_integration.py::TestJobStatusHistoryIntegration::test_get_user_status_history_returns_all_jobs PASSED [ 26%]
2026-02-14T13:16:04.4298816Z tests/integration/test_job_status_history_integration.py::TestJobStatusHistoryIntegration::test_get_job_status_history_returns_all_users PASSED [ 26%]
2026-02-14T13:16:04.6501613Z tests/integration/test_job_status_history_integration.py::TestJobStatusHistoryIntegration::test_history_metadata_stores_json_correctly PASSED [ 26%]
2026-02-14T13:16:05.4333498Z tests/integration/test_jwt_auth_api.py::test_auth_login_returns_token PASSED [ 26%]
2026-02-14T13:16:05.6805346Z tests/integration/test_jwt_auth_api.py::test_update_campaign_with_jwt_token FAILED [ 27%]
2026-02-14T13:16:05.9207293Z tests/integration/test_multi_note_integration.py::TestMultiNoteIntegration::test_add_multiple_notes PASSED [ 27%]
2026-02-14T13:16:06.3574389Z tests/integration/test_multi_note_integration.py::TestMultiNoteIntegration::test_notes_ordered_newest_first PASSED [ 27%]
2026-02-14T13:16:06.6070789Z tests/integration/test_multi_note_integration.py::TestMultiNoteIntegration::test_update_note PASSED [ 27%]
2026-02-14T13:16:06.8478768Z tests/integration/test_multi_note_integration.py::TestMultiNoteIntegration::test_delete_note PASSED [ 27%]
2026-02-14T13:16:07.0784263Z tests/integration/test_multi_note_integration.py::TestMultiNoteIntegration::test_note_count_in_job_listing PASSED [ 28%]
2026-02-14T13:16:07.3180980Z tests/integration/test_multi_note_integration.py::TestMultiNoteIntegration::test_authorization_user_cannot_access_other_users_notes PASSED [ 28%]
2026-02-14T13:16:07.5455854Z tests/integration/test_multi_note_integration.py::TestMultiNoteIntegration::test_is_modified_flag PASSED [ 28%]
2026-02-14T13:16:07.7628205Z tests/integration/test_multi_note_integration.py::TestMultiNoteIntegration::test_empty_note_list PASSED [ 28%]
2026-02-14T13:16:07.9856085Z tests/integration/test_multi_note_integration.py::TestMultiNoteIntegration::test_whitespace_stripping PASSED [ 28%]
2026-02-14T13:16:08.1979298Z tests/integration/test_ranker_validation.py::TestRankerValidation::test_ranker_validates_jobs_before_ranking PASSED [ 29%]
2026-02-14T13:16:08.4106074Z tests/integration/test_ranker_validation.py::TestRankerValidation::test_ranker_skips_jobs_not_in_fact_jobs PASSED [ 29%]
2026-02-14T13:16:08.6230054Z tests/integration/test_ranker_validation.py::TestRankerValidation::test_ranker_handles_mixed_valid_and_invalid_jobs PASSED [ 29%]
2026-02-14T13:16:08.8303989Z tests/integration/test_ranker_validation.py::TestRankerValidation::test_validation_query_works_correctly PASSED [ 29%]
2026-02-14T13:16:08.8323348Z tests/unit/test_airflow_client.py::TestAirflowClient::test_init_strips_trailing_slash PASSED [ 30%]
2026-02-14T13:16:08.8339317Z tests/unit/test_airflow_client.py::TestAirflowClient::test_init_sets_auth PASSED [ 30%]
2026-02-14T13:16:08.8443424Z tests/unit/test_airflow_client.py::TestAirflowClient::test_trigger_dag_success PASSED [ 30%]
2026-02-14T13:16:08.8496551Z tests/unit/test_airflow_client.py::TestAirflowClient::test_trigger_dag_without_conf PASSED [ 30%]
2026-02-14T13:16:08.8554426Z tests/unit/test_airflow_client.py::TestAirflowClient::test_trigger_dag_401_unauthorized PASSED [ 30%]
2026-02-14T13:16:08.8607842Z tests/unit/test_airflow_client.py::TestAirflowClient::test_trigger_dag_403_forbidden PASSED [ 31%]
2026-02-14T13:16:08.8660409Z tests/unit/test_airflow_client.py::TestAirflowClient::test_trigger_dag_404_not_found PASSED [ 31%]
2026-02-14T13:16:08.8709578Z tests/unit/test_airflow_client.py::TestAirflowClient::test_trigger_dag_timeout PASSED [ 31%]
2026-02-14T13:16:08.8755764Z tests/unit/test_airflow_client.py::TestAirflowClient::test_trigger_dag_connection_error PASSED [ 31%]
2026-02-14T13:16:08.8786692Z tests/unit/test_airflow_client.py::TestAirflowClient::test_get_dag_run_status_success PASSED [ 31%]
2026-02-14T13:16:08.8807790Z tests/unit/test_airflow_client.py::TestAirflowClient::test_get_dag_run_status_404_not_found PASSED [ 32%]
2026-02-14T13:16:08.8834415Z tests/unit/test_airflow_client.py::TestAirflowClient::test_get_dag_run_status_401_unauthorized PASSED [ 32%]
2026-02-14T13:16:08.8855656Z tests/unit/test_airflow_client.py::TestAirflowClient::test_get_dag_run_status_timeout PASSED [ 32%]
2026-02-14T13:16:08.8870574Z tests/unit/test_auth_service.py::TestAuthService::test_init_requires_user_service PASSED [ 32%]
2026-02-14T13:16:08.8890429Z tests/unit/test_auth_service.py::TestAuthService::test_init_with_valid_user_service PASSED [ 32%]
2026-02-14T13:16:08.8916558Z tests/unit/test_auth_service.py::TestAuthService::test_authenticate_user_success_by_username PASSED [ 33%]
2026-02-14T13:16:08.8944810Z tests/unit/test_auth_service.py::TestAuthService::test_authenticate_user_success_by_email PASSED [ 33%]
2026-02-14T13:16:08.8972857Z tests/unit/test_auth_service.py::TestAuthService::test_authenticate_user_invalid_username PASSED [ 33%]
2026-02-14T13:16:08.8997587Z tests/unit/test_auth_service.py::TestAuthService::test_authenticate_user_invalid_password PASSED [ 33%]
2026-02-14T13:16:08.9016849Z tests/unit/test_auth_service.py::TestAuthService::test_authenticate_user_empty_credentials PASSED [ 34%]
2026-02-14T13:16:08.9051009Z tests/unit/test_auth_service.py::TestAuthService::test_authenticate_user_handles_last_login_error PASSED [ 34%]
2026-02-14T13:16:08.9073824Z tests/unit/test_auth_service.py::TestAuthService::test_register_user_success PASSED [ 34%]
2026-02-14T13:16:08.9095750Z tests/unit/test_auth_service.py::TestAuthService::test_register_user_with_custom_role PASSED [ 34%]
2026-02-14T13:16:08.9115786Z tests/unit/test_auth_service.py::TestAuthService::test_is_admin_returns_true_for_admin PASSED [ 34%]
2026-02-14T13:16:08.9135160Z tests/unit/test_auth_service.py::TestAuthService::test_is_admin_returns_false_for_regular_user PASSED [ 35%]
2026-02-14T13:16:08.9155196Z tests/unit/test_auth_service.py::TestAuthService::test_is_admin_returns_false_for_missing_role PASSED [ 35%]
2026-02-14T13:16:08.9192228Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_all_tasks_success PASSED [ 35%]
2026-02-14T13:16:08.9230639Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_task_failed PASSED [ 35%]
2026-02-14T13:16:08.9266511Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_multiple_tasks_failed PASSED [ 35%]
2026-02-14T13:16:08.9301929Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_partial_completion PASSED [ 36%]
2026-02-14T13:16:08.9342830Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_no_metrics PASSED [ 36%]
2026-02-14T13:16:08.9380327Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_specific_dag_run PASSED [ 36%]
2026-02-14T13:16:08.9412919Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_database_error PASSED [ 36%]
2026-02-14T13:16:08.9448806Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_missing_critical_tasks_some_complete PASSED [ 36%]
2026-02-14T13:16:08.9490074Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_missing_critical_tasks_none_complete PASSED [ 37%]
2026-02-14T13:16:08.9528211Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_is_complete_flag_success PASSED [ 37%]
2026-02-14T13:16:08.9564256Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_is_complete_flag_error PASSED [ 37%]
2026-02-14T13:16:08.9600163Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_is_complete_flag_running PASSED [ 37%]
2026-02-14T13:16:08.9639814Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_is_complete_flag_pending PASSED [ 38%]
2026-02-14T13:16:08.9689983Z tests/unit/test_campaign_service.py::TestCampaignServiceStatusFromMetrics::test_get_status_most_recent_dag_run PASSED [ 38%]
2026-02-14T13:16:08.9714355Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherInitialization::test_init_with_valid_params PASSED [ 38%]
2026-02-14T13:16:08.9733961Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherInitialization::test_init_without_openai_raises_error PASSED [ 38%]
2026-02-14T13:16:08.9769839Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherInitialization::test_init_without_api_key_raises_error PASSED [ 38%]
2026-02-14T13:16:08.9792535Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherInitialization::test_init_with_invalid_batch_size_raises_error PASSED [ 39%]
2026-02-14T13:16:08.9817355Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_build_api_params_older_model PASSED [ 39%]
2026-02-14T13:16:08.9840550Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_build_api_params_newer_model PASSED [ 39%]
2026-02-14T13:16:08.9863411Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_build_api_params_reasoning_model PASSED [ 39%]
2026-02-14T13:16:08.9886757Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_build_api_params_batch PASSED [ 39%]
2026-02-14T13:16:08.9915857Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_extract_error_details_from_dict_body PASSED [ 40%]
2026-02-14T13:16:08.9942374Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_extract_error_details_from_string_body PASSED [ 40%]
2026-02-14T13:16:08.9965618Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_should_retry_without_json PASSED [ 40%]
2026-02-14T13:16:08.9990247Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_is_authentication_error PASSED [ 40%]
2026-02-14T13:16:09.0013867Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_parse_json_response_plain_json PASSED [ 40%]
2026-02-14T13:16:09.0037193Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_parse_json_response_markdown_wrapped PASSED [ 41%]
2026-02-14T13:16:09.0060633Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_extract_enrichment_from_result PASSED [ 41%]
2026-02-14T13:16:09.0092253Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_extract_enrichment_invalid_seniority PASSED [ 41%]
2026-02-14T13:16:09.0116033Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_extract_enrichment_invalid_remote_type PASSED [ 41%]
2026-02-14T13:16:09.0138678Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherHelperMethods::test_get_empty_enrichment PASSED [ 42%]
2026-02-14T13:16:09.0179816Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherAPICalls::test_call_openai_api_success PASSED [ 42%]
2026-02-14T13:16:09.0219884Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherAPICalls::test_call_openai_api_empty_response PASSED [ 42%]
2026-02-14T13:16:09.0282754Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherAPICalls::test_call_openai_api_retry_on_error PASSED [ 42%]
2026-02-14T13:16:09.0326328Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherAPICalls::test_call_openai_api_auth_error_no_retry PASSED [ 42%]
2026-02-14T13:16:09.0367891Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherEnrichment::test_enrich_job_success PASSED [ 43%]
2026-02-14T13:16:09.0413258Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherEnrichment::test_enrich_job_api_failure PASSED [ 43%]
2026-02-14T13:16:09.0456219Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherEnrichment::test_enrich_jobs_batch_success PASSED [ 43%]
2026-02-14T13:16:09.0499059Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherEnrichment::test_enrich_jobs_batch_fewer_results PASSED [ 43%]
2026-02-14T13:16:09.0530929Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherDatabaseOperations::test_get_jobs_to_enrich PASSED [ 43%]
2026-02-14T13:16:09.0564665Z tests/unit/test_chatgpt_enricher.py::TestChatGPTEnricherDatabaseOperations::test_update_job_enrichment PASSED [ 44%]
2026-02-14T13:16:09.0586111Z tests/unit/test_company_extractor.py::TestCompanyExtractorFuzzyMatching::test_select_best_match_single_result_above_threshold PASSED [ 44%]
2026-02-14T13:16:09.0606859Z tests/unit/test_company_extractor.py::TestCompanyExtractorFuzzyMatching::test_select_best_match_single_result_below_threshold PASSED [ 44%]
2026-02-14T13:16:09.0626669Z tests/unit/test_company_extractor.py::TestCompanyExtractorFuzzyMatching::test_select_best_match_multiple_results PASSED [ 44%]
2026-02-14T13:16:09.0645947Z tests/unit/test_company_extractor.py::TestCompanyExtractorFuzzyMatching::test_select_best_match_empty_list PASSED [ 44%]
2026-02-14T13:16:09.0665329Z tests/unit/test_company_extractor.py::TestCompanyExtractorFuzzyMatching::test_select_best_match_no_company_name PASSED [ 45%]
2026-02-14T13:16:09.0709616Z tests/unit/test_company_extractor.py::TestCompanyExtractorSQLInjection::test_get_companies_to_enrich_parameterized_query PASSED [ 45%]
2026-02-14T13:16:09.0749172Z tests/unit/test_company_extractor.py::TestCompanyExtractorSQLInjection::test_get_companies_to_enrich_invalid_limit PASSED [ 45%]
2026-02-14T13:16:09.0793426Z tests/unit/test_company_extractor.py::TestCompanyExtractorExistingCompanyCheck::test_get_companies_to_enrich_excludes_existing_companies PASSED [ 45%]
2026-02-14T13:16:09.0855786Z tests/unit/test_cover_letter_generator.py::TestCoverLetterGeneratorInitialization::test_init_success PASSED [ 46%]
2026-02-14T13:16:09.0899609Z tests/unit/test_cover_letter_generator.py::TestCoverLetterGeneratorInitialization::test_init_without_openai_raises_error PASSED [ 46%]
2026-02-14T13:16:09.0929404Z tests/unit/test_cover_letter_generator.py::TestCoverLetterGeneratorInitialization::test_init_without_database_raises_error PASSED [ 46%]
2026-02-14T13:16:09.0988976Z tests/unit/test_cover_letter_generator.py::TestCoverLetterGeneratorInitialization::test_init_without_api_key_raises_error PASSED [ 46%]
2026-02-14T13:16:09.1036725Z tests/unit/test_cover_letter_generator.py::TestBuildPrompt::test_build_prompt_basic PASSED [ 46%]
2026-02-14T13:16:09.1085101Z tests/unit/test_cover_letter_generator.py::TestBuildPrompt::test_build_prompt_with_user_comments PASSED [ 47%]
2026-02-14T13:16:09.1167578Z tests/unit/test_cover_letter_generator.py::TestCallChatGPTAPI::test_call_chatgpt_api_success PASSED [ 47%]
2026-02-14T13:16:12.1243254Z tests/unit/test_cover_letter_generator.py::TestCallChatGPTAPI::test_call_chatgpt_api_empty_response PASSED [ 47%]
2026-02-14T13:16:12.1304660Z tests/unit/test_cover_letter_generator.py::TestCallChatGPTAPI::test_call_chatgpt_api_authentication_error PASSED [ 47%]
2026-02-14T13:16:12.1381635Z tests/unit/test_cover_letter_generator.py::TestCallChatGPTAPI::test_call_chatgpt_api_retry_on_failure PASSED [ 47%]
2026-02-14T13:16:12.1450788Z tests/unit/test_cover_letter_generator.py::TestCallChatGPTAPI::test_call_chatgpt_api_max_retries_exceeded PASSED [ 48%]
2026-02-14T13:16:12.1541993Z tests/unit/test_cover_letter_generator.py::TestGenerateCoverLetter::test_generate_cover_letter_success PASSED [ 48%]
2026-02-14T13:16:12.1597945Z tests/unit/test_cover_letter_generator.py::TestGenerateCoverLetter::test_generate_cover_letter_job_not_found PASSED [ 48%]
2026-02-14T13:16:12.1650359Z tests/unit/test_cover_letter_generator.py::TestGenerateCoverLetter::test_generate_cover_letter_resume_extraction_fails PASSED [ 48%]
2026-02-14T13:16:12.1703558Z tests/unit/test_cover_letter_generator.py::TestGenerateCoverLetter::test_generate_cover_letter_empty_resume_text PASSED [ 48%]
2026-02-14T13:16:12.1775284Z tests/unit/test_cover_letter_generator.py::TestGenerateCoverLetter::test_generate_cover_letter_api_fails PASSED [ 49%]
2026-02-14T13:16:12.1856783Z tests/unit/test_cover_letter_generator.py::TestGenerateCoverLetter::test_generate_cover_letter_with_user_comments PASSED [ 49%]
2026-02-14T13:16:12.1869947Z tests/unit/test_cover_letter_service.py::TestCoverLetterService::test_init_requires_database PASSED [ 49%]
2026-02-14T13:16:12.1925131Z tests/unit/test_cover_letter_service.py::TestCoverLetterService::test_create_cover_letter_text_based PASSED [ 49%]
2026-02-14T13:16:12.1957559Z tests/unit/test_cover_letter_service.py::TestCoverLetterService::test_create_cover_letter_requires_text_or_file PASSED [ 50%]
2026-02-14T13:16:12.2006688Z tests/unit/test_cover_letter_service.py::TestCoverLetterService::test_upload_cover_letter_file_success PASSED [ 50%]
2026-02-14T13:16:12.2045806Z tests/unit/test_cover_letter_service.py::TestCoverLetterService::test_get_user_cover_letters PASSED [ 50%]
2026-02-14T13:16:12.2086569Z tests/unit/test_cover_letter_service.py::TestCoverLetterService::test_get_cover_letter_by_id_success PASSED [ 50%]
2026-02-14T13:16:12.2127016Z tests/unit/test_cover_letter_service.py::TestCoverLetterService::test_delete_cover_letter_text_based PASSED [ 50%]
2026-02-14T13:16:12.2166154Z tests/unit/test_cover_letter_service.py::TestCoverLetterService::test_get_user_cover_letters_with_job_filter PASSED [ 51%]
2026-02-14T13:16:12.2205517Z tests/unit/test_cover_letter_service.py::TestCoverLetterService::test_get_user_cover_letters_all_jobs PASSED [ 51%]
2026-02-14T13:16:12.2248283Z tests/unit/test_cover_letter_service.py::TestCoverLetterService::test_download_cover_letter_text_based_raises_error PASSED [ 51%]
2026-02-14T13:16:12.2280050Z tests/unit/test_cover_letter_service_edge_cases.py::TestCoverLetterServiceEdgeCases::test_create_cover_letter_empty_text PASSED [ 51%]
2026-02-14T13:16:12.2319152Z tests/unit/test_cover_letter_service_edge_cases.py::TestCoverLetterServiceEdgeCases::test_create_cover_letter_whitespace_only_text PASSED [ 51%]
2026-02-14T13:16:12.2358694Z tests/unit/test_cover_letter_service_edge_cases.py::TestCoverLetterServiceEdgeCases::test_create_cover_letter_very_long_text PASSED [ 52%]
2026-02-14T13:16:12.2398073Z tests/unit/test_cover_letter_service_edge_cases.py::TestCoverLetterServiceEdgeCases::test_create_cover_letter_special_characters PASSED [ 52%]
2026-02-14T13:16:12.2439030Z tests/unit/test_cover_letter_service_edge_cases.py::TestCoverLetterServiceEdgeCases::test_create_cover_letter_unicode_emojis PASSED [ 52%]
2026-02-14T13:16:12.2478719Z tests/unit/test_cover_letter_service_edge_cases.py::TestCoverLetterServiceEdgeCases::test_get_cover_letter_by_id_wrong_user PASSED [ 52%]
2026-02-14T13:16:12.2517763Z tests/unit/test_cover_letter_service_edge_cases.py::TestCoverLetterServiceEdgeCases::test_delete_cover_letter_not_owned PASSED [ 52%]
2026-02-14T13:16:12.2559935Z tests/unit/test_cover_letter_service_edge_cases.py::TestCoverLetterServiceEdgeCases::test_download_cover_letter_text_based_raises PASSED [ 53%]
2026-02-14T13:16:12.2602706Z tests/unit/test_cover_letter_service_edge_cases.py::TestCoverLetterServiceEdgeCases::test_download_cover_letter_file_not_on_disk PASSED [ 53%]
2026-02-14T13:16:12.2642344Z tests/unit/test_cover_letter_service_edge_cases.py::TestCoverLetterServiceEdgeCases::test_get_user_cover_letters_empty_result PASSED [ 53%]
2026-02-14T13:16:12.2681627Z tests/unit/test_cover_letter_service_edge_cases.py::TestCoverLetterServiceEdgeCases::test_create_cover_letter_same_name_different_jobs PASSED [ 53%]
2026-02-14T13:16:12.2751714Z tests/unit/test_cover_letter_service_edge_cases.py::TestCoverLetterServiceEdgeCases::test_upload_cover_letter_file_exactly_max_size PASSED [ 53%]
2026-02-14T13:16:12.2765702Z tests/unit/test_document_service.py::TestDocumentService::test_init_requires_database PASSED [ 54%]
2026-02-14T13:16:12.2804384Z tests/unit/test_document_service.py::TestDocumentService::test_link_documents_to_job_success PASSED [ 54%]
2026-02-14T13:16:12.2839418Z tests/unit/test_document_service.py::TestDocumentService::test_get_job_application_document_found PASSED [ 54%]
2026-02-14T13:16:12.2877556Z tests/unit/test_document_service.py::TestDocumentService::test_get_job_application_document_not_found PASSED [ 54%]
2026-02-14T13:16:12.2914070Z tests/unit/test_document_service.py::TestDocumentService::test_update_job_application_document_success PASSED [ 55%]
2026-02-14T13:16:12.2948756Z tests/unit/test_document_service.py::TestDocumentService::test_delete_job_application_document_success PASSED [ 55%]
2026-02-14T13:16:12.2983106Z tests/unit/test_document_service.py::TestDocumentService::test_delete_job_application_document_not_found PASSED [ 55%]
2026-02-14T13:16:12.3022709Z tests/unit/test_document_service.py::TestDocumentService::test_link_documents_with_inline_text PASSED [ 55%]
2026-02-14T13:16:12.3060358Z tests/unit/test_document_service.py::TestDocumentService::test_update_document_partial_update PASSED [ 55%]
2026-02-14T13:16:12.3099956Z tests/unit/test_document_service_edge_cases.py::TestDocumentServiceEdgeCases::test_link_documents_nonexistent_job PASSED [ 56%]
2026-02-14T13:16:12.3138038Z tests/unit/test_document_service_edge_cases.py::TestDocumentServiceEdgeCases::test_link_documents_both_resume_and_cover_letter PASSED [ 56%]
2026-02-14T13:16:12.3176553Z tests/unit/test_document_service_edge_cases.py::TestDocumentServiceEdgeCases::test_link_documents_inline_text_and_cover_letter_id PASSED [ 56%]
2026-02-14T13:16:12.3214637Z tests/unit/test_document_service_edge_cases.py::TestDocumentServiceEdgeCases::test_update_document_clear_resume PASSED [ 56%]
2026-02-14T13:16:12.3252169Z tests/unit/test_document_service_edge_cases.py::TestDocumentServiceEdgeCases::test_update_document_clear_cover_letter PASSED [ 56%]
2026-02-14T13:16:12.3286959Z tests/unit/test_document_service_edge_cases.py::TestDocumentServiceEdgeCases::test_get_document_nonexistent_job PASSED [ 57%]
2026-02-14T13:16:12.3323541Z tests/unit/test_document_service_edge_cases.py::TestDocumentServiceEdgeCases::test_get_document_different_user PASSED [ 57%]
2026-02-14T13:16:12.3359984Z tests/unit/test_document_service_edge_cases.py::TestDocumentServiceEdgeCases::test_update_document_not_found PASSED [ 57%]
2026-02-14T13:16:12.3395215Z tests/unit/test_document_service_edge_cases.py::TestDocumentServiceEdgeCases::test_delete_document_not_found PASSED [ 57%]
2026-02-14T13:16:12.3430020Z tests/unit/test_document_service_edge_cases.py::TestDocumentServiceEdgeCases::test_delete_document_wrong_user PASSED [ 57%]
2026-02-14T13:16:12.3469913Z tests/unit/test_document_service_edge_cases.py::TestDocumentServiceEdgeCases::test_link_documents_all_fields_none PASSED [ 58%]
2026-02-14T13:16:12.3507367Z tests/unit/test_document_service_edge_cases.py::TestDocumentServiceEdgeCases::test_update_document_very_long_notes PASSED [ 58%]
2026-02-14T13:16:12.3551170Z tests/unit/test_document_service_edge_cases.py::TestDocumentServiceEdgeCases::test_link_documents_special_characters_in_job_id PASSED [ 58%]
2026-02-14T13:16:12.6255873Z tests/unit/test_job_enricher.py::TestJobEnricherSkillsExtraction::test_extract_skills_basic_technical_skills PASSED [ 58%]
2026-02-14T13:16:12.7460563Z tests/unit/test_job_enricher.py::TestJobEnricherSkillsExtraction::test_extract_skills_case_insensitive PASSED [ 59%]
2026-02-14T13:16:12.8664719Z tests/unit/test_job_enricher.py::TestJobEnricherSkillsExtraction::test_extract_skills_word_boundaries PASSED [ 59%]
2026-02-14T13:16:12.9860947Z tests/unit/test_job_enricher.py::TestJobEnricherSkillsExtraction::test_extract_skills_empty_description PASSED [ 59%]
2026-02-14T13:16:13.1069202Z tests/unit/test_job_enricher.py::TestJobEnricherSkillsExtraction::test_extract_skills_no_matches PASSED [ 59%]
2026-02-14T13:16:13.2272373Z tests/unit/test_job_enricher.py::TestJobEnricherSkillsExtraction::test_extract_skills_with_title PASSED [ 59%]
2026-02-14T13:16:13.3474563Z tests/unit/test_job_enricher.py::TestJobEnricherSkillsExtraction::test_extract_skills_multiple_occurrences PASSED [ 60%]
2026-02-14T13:16:13.4681523Z tests/unit/test_job_enricher.py::TestJobEnricherSkillsExtraction::test_extract_skills_sorted PASSED [ 60%]
2026-02-14T13:16:13.5891635Z tests/unit/test_job_enricher.py::TestJobEnricherSkillsExtraction::test_extract_skills_category_based_iteration PASSED [ 60%]
2026-02-14T13:16:13.7102529Z tests/unit/test_job_enricher.py::TestJobEnricherSkillsExtraction::test_extract_skills_multi_word_skills PASSED [ 60%]
2026-02-14T13:16:13.8312584Z tests/unit/test_job_enricher.py::TestJobEnricherSkillsExtraction::test_extract_skills_alternative_names PASSED [ 60%]
2026-02-14T13:16:13.9507093Z tests/unit/test_job_enricher.py::TestJobEnricherSeniorityExtraction::test_extract_seniority_intern PASSED [ 61%]
2026-02-14T13:16:14.0700213Z tests/unit/test_job_enricher.py::TestJobEnricherSeniorityExtraction::test_extract_seniority_junior PASSED [ 61%]
2026-02-14T13:16:14.1897891Z tests/unit/test_job_enricher.py::TestJobEnricherSeniorityExtraction::test_extract_seniority_mid PASSED [ 61%]
2026-02-14T13:16:14.3100188Z tests/unit/test_job_enricher.py::TestJobEnricherSeniorityExtraction::test_extract_seniority_senior PASSED [ 61%]
2026-02-14T13:16:14.4285769Z tests/unit/test_job_enricher.py::TestJobEnricherSeniorityExtraction::test_extract_seniority_lead PASSED [ 61%]
2026-02-14T13:16:14.5478188Z tests/unit/test_job_enricher.py::TestJobEnricherSeniorityExtraction::test_extract_seniority_executive PASSED [ 62%]
2026-02-14T13:16:14.6830086Z tests/unit/test_job_enricher.py::TestJobEnricherSeniorityExtraction::test_extract_seniority_no_match PASSED [ 62%]
2026-02-14T13:16:14.8033528Z tests/unit/test_job_enricher.py::TestJobEnricherSeniorityExtraction::test_extract_seniority_empty_title PASSED [ 62%]
2026-02-14T13:16:14.9228719Z tests/unit/test_job_enricher.py::TestJobEnricherSeniorityExtraction::test_extract_seniority_case_insensitive PASSED [ 62%]
2026-02-14T13:16:15.0421366Z tests/unit/test_job_enricher.py::TestJobEnricherSeniorityExtraction::test_extract_seniority_with_description PASSED [ 63%]
2026-02-14T13:16:15.1612451Z tests/unit/test_job_enricher.py::TestJobEnricherSeniorityExtraction::test_extract_seniority_title_priority PASSED [ 63%]
2026-02-14T13:16:15.2810235Z tests/unit/test_job_enricher.py::TestJobEnricherSeniorityExtraction::test_extract_seniority_internship_vs_intern PASSED [ 63%]
2026-02-14T13:16:15.4268362Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_complete PASSED [ 63%]
2026-02-14T13:16:15.5485637Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_no_seniority PASSED [ 63%]
2026-02-14T13:16:15.6681429Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_empty_description PASSED [ 64%]
2026-02-14T13:16:15.7896339Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_ignores_non_salary_numbers PASSED [ 64%]
2026-02-14T13:16:15.9122425Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_extracts_decimal_hourly_salary PASSED [ 64%]
2026-02-14T13:16:16.0354294Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_ignores_financial_market_amounts PASSED [ 64%]
2026-02-14T13:16:16.1572506Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_extracts_per_annum_salary_range PASSED [ 64%]
2026-02-14T13:16:16.2824677Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_ignores_unrelated_per_week_context PASSED [ 65%]
2026-02-14T13:16:16.4048176Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_detects_cad_currency PASSED [ 65%]
2026-02-14T13:16:16.5269731Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_detects_gbp_currency PASSED [ 65%]
2026-02-14T13:16:16.6484837Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_extracts_hourly_range_with_slash_hr PASSED [ 65%]
2026-02-14T13:16:16.7697568Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_defaults_currency_to_country_ca PASSED [ 65%]
2026-02-14T13:16:16.8912258Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_defaults_currency_to_country_us PASSED [ 66%]
2026-02-14T13:16:17.0152813Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_extracts_canadian_dollar_prefix PASSED [ 66%]
2026-02-14T13:16:17.1370496Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_extracts_decimal_salary_ranges PASSED [ 66%]
2026-02-14T13:16:17.2581483Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_extracts_salary_with_location_prefix PASSED [ 66%]
2026-02-14T13:16:17.3802912Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_extracts_salary_with_cad_suffix PASSED [ 67%]
2026-02-14T13:16:17.5024807Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_excludes_sign_on_bonus PASSED [ 67%]
2026-02-14T13:16:17.6243849Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_extracts_with_doe_suffix PASSED [ 67%]
2026-02-14T13:16:17.7458170Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichment::test_enrich_job_extracts_with_double_dash_and_annually PASSED [ 67%]
2026-02-14T13:16:17.8650417Z tests/unit/test_job_enricher.py::TestJobEnricherInitialization::test_init_with_valid_params PASSED [ 67%]
2026-02-14T13:16:17.8665481Z tests/unit/test_job_enricher.py::TestJobEnricherInitialization::test_init_without_database PASSED [ 68%]
2026-02-14T13:16:17.8683508Z tests/unit/test_job_enricher.py::TestJobEnricherInitialization::test_init_with_invalid_batch_size PASSED [ 68%]
2026-02-14T13:16:17.9873353Z tests/unit/test_job_enricher.py::TestJobEnricherInitialization::test_init_loads_nlp_model PASSED [ 68%]
2026-02-14T13:16:18.1690977Z tests/unit/test_job_enricher.py::TestJobEnricherDatabaseOperations::test_get_jobs_to_enrich PASSED [ 68%]
2026-02-14T13:16:18.2889750Z tests/unit/test_job_enricher.py::TestJobEnricherDatabaseOperations::test_update_job_enrichment PASSED [ 68%]
2026-02-14T13:16:18.4119315Z tests/unit/test_job_enricher.py::TestJobEnricherRemoteTypeExtraction::test_extract_remote_type_remote PASSED [ 69%]
2026-02-14T13:16:18.5342560Z tests/unit/test_job_enricher.py::TestJobEnricherRemoteTypeExtraction::test_extract_remote_type_hybrid PASSED [ 69%]
2026-02-14T13:16:18.6535799Z tests/unit/test_job_enricher.py::TestJobEnricherRemoteTypeExtraction::test_extract_remote_type_onsite PASSED [ 69%]
2026-02-14T13:16:18.7724146Z tests/unit/test_job_enricher.py::TestJobEnricherRemoteTypeExtraction::test_extract_remote_type_no_match PASSED [ 69%]
2026-02-14T13:16:18.8925849Z tests/unit/test_job_enricher.py::TestJobEnricherRemoteTypeExtraction::test_extract_remote_type_empty_input PASSED [ 69%]
2026-02-14T13:16:19.0119348Z tests/unit/test_job_enricher.py::TestJobEnricherRemoteTypeExtraction::test_extract_remote_type_hybrid_working_environment PASSED [ 70%]
2026-02-14T13:16:19.1319763Z tests/unit/test_job_enricher.py::TestJobEnricherRemoteTypeExtraction::test_extract_remote_type_both_remote_and_onsite PASSED [ 70%]
2026-02-14T13:16:19.2555870Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichmentStatus::test_enrich_jobs_with_status_tracking PASSED [ 70%]
2026-02-14T13:16:19.3760583Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichmentStatus::test_enrich_jobs_partial_enrichment PASSED [ 70%]
2026-02-14T13:16:19.4984358Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichmentStatus::test_enrich_jobs_marks_salary_enriched_when_salary_exists PASSED [ 71%]
2026-02-14T13:16:19.6245762Z tests/unit/test_job_enricher.py::TestJobEnricherEnrichmentStatus::test_enrich_jobs_handles_malformed_enrichment_status PASSED [ 71%]
2026-02-14T13:16:19.6260340Z tests/unit/test_job_note_service.py::TestJobNoteService::test_init_requires_database PASSED [ 71%]
2026-02-14T13:16:19.6297260Z tests/unit/test_job_note_service.py::TestJobNoteService::test_get_notes_empty_list PASSED [ 71%]
2026-02-14T13:16:19.6332502Z tests/unit/test_job_note_service.py::TestJobNoteService::test_get_notes_returns_list PASSED [ 71%]
2026-02-14T13:16:19.6368679Z tests/unit/test_job_note_service.py::TestJobNoteService::test_get_notes_detects_modified_notes PASSED [ 72%]
2026-02-14T13:16:19.6407087Z tests/unit/test_job_note_service.py::TestJobNoteService::test_get_note_by_id_not_found PASSED [ 72%]
2026-02-14T13:16:19.6442761Z tests/unit/test_job_note_service.py::TestJobNoteService::test_get_note_by_id_found PASSED [ 72%]
2026-02-14T13:16:19.6488217Z tests/unit/test_job_note_service.py::TestJobNoteService::test_add_note_success PASSED [ 72%]
2026-02-14T13:16:19.6534665Z tests/unit/test_job_note_service.py::TestJobNoteService::test_add_note_strips_whitespace PASSED [ 72%]
2026-02-14T13:16:19.6576355Z tests/unit/test_job_note_service.py::TestJobNoteService::test_add_note_handles_exceptions PASSED [ 73%]
2026-02-14T13:16:19.6625240Z tests/unit/test_job_note_service.py::TestJobNoteService::test_add_note_fails_when_no_result PASSED [ 73%]
2026-02-14T13:16:19.6664280Z tests/unit/test_job_note_service.py::TestJobNoteService::test_update_note_success PASSED [ 73%]
2026-02-14T13:16:19.6701394Z tests/unit/test_job_note_service.py::TestJobNoteService::test_update_note_strips_whitespace PASSED [ 73%]
2026-02-14T13:16:19.6737661Z tests/unit/test_job_note_service.py::TestJobNoteService::test_update_note_not_found PASSED [ 73%]
2026-02-14T13:16:19.6774654Z tests/unit/test_job_note_service.py::TestJobNoteService::test_update_note_handles_exceptions PASSED [ 74%]
2026-02-14T13:16:19.6813789Z tests/unit/test_job_note_service.py::TestJobNoteService::test_delete_note_success PASSED [ 74%]
2026-02-14T13:16:19.6851516Z tests/unit/test_job_note_service.py::TestJobNoteService::test_delete_note_not_found PASSED [ 74%]
2026-02-14T13:16:19.6889160Z tests/unit/test_job_note_service.py::TestJobNoteService::test_delete_note_handles_exceptions PASSED [ 74%]
2026-02-14T13:16:19.6912453Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_remote_type_match_multiple_preferences_exact PASSED [ 75%]
2026-02-14T13:16:19.6937445Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_remote_type_match_multiple_preferences_hybrid PASSED [ 75%]
2026-02-14T13:16:19.6960515Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_remote_type_match_multiple_preferences_partial PASSED [ 75%]
2026-02-14T13:16:19.6983373Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_remote_type_match_no_preference PASSED [ 75%]
2026-02-14T13:16:19.7006674Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_seniority_match_multiple_preferences_exact PASSED [ 75%]
2026-02-14T13:16:19.7036284Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_seniority_match_multiple_preferences_adjacent PASSED [ 76%]
2026-02-14T13:16:19.7059299Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_seniority_match_multiple_preferences_two_levels_apart PASSED [ 76%]
2026-02-14T13:16:19.7081751Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_seniority_match_no_preference PASSED [ 76%]
2026-02-14T13:16:19.7104924Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_company_size_match_multiple_preferences_exact PASSED [ 76%]
2026-02-14T13:16:19.7130444Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_company_size_match_multiple_preferences_numeric_exact PASSED [ 76%]
2026-02-14T13:16:19.7153439Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_company_size_match_multiple_preferences_close PASSED [ 77%]
2026-02-14T13:16:19.7176221Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_company_size_match_no_preference PASSED [ 77%]
2026-02-14T13:16:19.7199198Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_employment_type_match_multiple_preferences_exact PASSED [ 77%]
2026-02-14T13:16:19.7223355Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_employment_type_match_multiple_preferences_comma_list PASSED [ 77%]
2026-02-14T13:16:19.7245223Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_employment_type_match_multiple_job_types PASSED [ 77%]
2026-02-14T13:16:19.7267173Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_employment_type_match_partial PASSED [ 78%]
2026-02-14T13:16:19.7290095Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_employment_type_match_no_preference PASSED [ 78%]
2026-02-14T13:16:19.7312181Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_remote_type_match_with_remote_work_type PASSED [ 78%]
2026-02-14T13:16:19.7334385Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_remote_type_match_onsite_default PASSED [ 78%]
2026-02-14T13:16:19.7355873Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_seniority_match_empty_string PASSED [ 78%]
2026-02-14T13:16:19.7378838Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_company_size_match_range_format PASSED [ 79%]
2026-02-14T13:16:19.7400864Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_all_methods_handle_missing_job_data PASSED [ 79%]
2026-02-14T13:16:19.7422557Z tests/unit/test_job_ranker.py::TestJobRankerMultiplePreferences::test_score_comma_separated_parsing PASSED [ 79%]
2026-02-14T13:16:19.7467582Z tests/unit/test_job_ranker.py::TestJobRankerValidation::test_validate_job_exists_returns_true_when_job_exists PASSED [ 79%]
2026-02-14T13:16:19.7511940Z tests/unit/test_job_ranker.py::TestJobRankerValidation::test_validate_job_exists_returns_false_when_job_not_exists PASSED [ 80%]
2026-02-14T13:16:19.7555883Z tests/unit/test_job_ranker.py::TestJobRankerValidation::test_validate_job_exists_returns_false_when_no_result PASSED [ 80%]
2026-02-14T13:16:19.7618123Z tests/unit/test_job_ranker.py::TestJobRankerValidation::test_rank_jobs_for_campaign_skips_invalid_jobs PASSED [ 80%]
2026-02-14T13:16:19.7671280Z tests/unit/test_job_ranker.py::TestJobRankerValidation::test_rank_jobs_for_campaign_handles_all_invalid_jobs PASSED [ 80%]
2026-02-14T13:16:19.7684796Z tests/unit/test_job_service.py::TestJobService::test_init_requires_database PASSED [ 80%]
2026-02-14T13:16:19.7720355Z tests/unit/test_job_service.py::TestJobService::test_get_jobs_for_campaign_filters_rejected_by_default PASSED [ 81%]
2026-02-14T13:16:19.7766072Z tests/unit/test_job_service.py::TestJobService::test_get_jobs_for_campaign_includes_rejected_when_requested PASSED [ 81%]
2026-02-14T13:16:19.7802028Z tests/unit/test_job_service.py::TestJobService::test_get_jobs_for_user_filters_rejected_by_default PASSED [ 81%]
2026-02-14T13:16:19.7837537Z tests/unit/test_job_service.py::TestJobService::test_get_jobs_for_user_includes_rejected_when_requested PASSED [ 81%]
2026-02-14T13:16:19.7866131Z tests/unit/test_job_service.py::TestJobService::test_get_jobs_for_campaign_negative_limit_raises_error PASSED [ 81%]
2026-02-14T13:16:19.7894733Z tests/unit/test_job_service.py::TestJobService::test_get_jobs_for_campaign_negative_offset_raises_error PASSED [ 82%]
2026-02-14T13:16:19.7921077Z tests/unit/test_job_service.py::TestJobService::test_get_jobs_for_user_negative_limit_raises_error PASSED [ 82%]
2026-02-14T13:16:19.7949736Z tests/unit/test_job_service.py::TestJobService::test_get_jobs_for_user_negative_offset_raises_error PASSED [ 82%]
2026-02-14T13:16:19.7984860Z tests/unit/test_job_service.py::TestJobService::test_get_jobs_for_campaign_returns_jobs PASSED [ 82%]
2026-02-14T13:16:19.8020516Z tests/unit/test_job_service.py::TestJobService::test_get_jobs_for_user_returns_jobs PASSED [ 82%]
2026-02-14T13:16:19.8034334Z tests/unit/test_job_status_service.py::TestJobStatusService::test_init_requires_database PASSED [ 83%]
2026-02-14T13:16:19.8069660Z tests/unit/test_job_status_service.py::TestJobStatusService::test_get_status_not_found PASSED [ 83%]
2026-02-14T13:16:19.8106012Z tests/unit/test_job_status_service.py::TestJobStatusService::test_get_status_found PASSED [ 83%]
2026-02-14T13:16:19.8152777Z tests/unit/test_job_status_service.py::TestJobStatusService::test_upsert_status_valid_status PASSED [ 83%]
2026-02-14T13:16:19.8181154Z tests/unit/test_job_status_service.py::TestJobStatusService::test_upsert_status_invalid_status PASSED [ 84%]
2026-02-14T13:16:19.8263001Z tests/unit/test_job_status_service.py::TestJobStatusService::test_upsert_status_all_valid_statuses PASSED [ 84%]
2026-02-14T13:16:19.8301173Z tests/unit/test_job_status_service.py::TestJobStatusService::test_upsert_status_handles_exceptions PASSED [ 84%]
2026-02-14T13:16:19.8336609Z tests/unit/test_job_status_service.py::TestJobStatusService::test_record_status_history PASSED [ 84%]
2026-02-14T13:16:19.8371676Z tests/unit/test_job_status_service.py::TestJobStatusService::test_record_job_found PASSED [ 84%]
2026-02-14T13:16:19.8409415Z tests/unit/test_job_status_service.py::TestJobStatusService::test_record_ai_update PASSED [ 85%]
2026-02-14T13:16:19.8444308Z tests/unit/test_job_status_service.py::TestJobStatusService::test_record_document_change PASSED [ 85%]
2026-02-14T13:16:19.8479878Z tests/unit/test_job_status_service.py::TestJobStatusService::test_record_note_change PASSED [ 85%]
2026-02-14T13:16:19.8515109Z tests/unit/test_job_status_service.py::TestJobStatusService::test_get_status_history PASSED [ 85%]
2026-02-14T13:16:19.8551727Z tests/unit/test_job_status_service.py::TestJobStatusService::test_get_user_status_history PASSED [ 85%]
2026-02-14T13:16:19.8587040Z tests/unit/test_job_status_service.py::TestJobStatusService::test_get_job_status_history PASSED [ 86%]
2026-02-14T13:16:19.8634470Z tests/unit/test_job_status_service.py::TestJobStatusService::test_upsert_status_records_history_on_change PASSED [ 86%]
2026-02-14T13:16:19.8663838Z tests/unit/test_job_status_service.py::TestJobStatusService::test_get_status_history_invalid_limit PASSED [ 86%]
2026-02-14T13:16:19.8692380Z tests/unit/test_job_status_service.py::TestJobStatusService::test_get_user_status_history_invalid_limit PASSED [ 86%]
2026-02-14T13:16:19.8720725Z tests/unit/test_job_status_service.py::TestJobStatusService::test_get_user_status_history_invalid_offset PASSED [ 86%]
2026-02-14T13:16:19.8748825Z tests/unit/test_job_status_service.py::TestJobStatusService::test_get_job_status_history_invalid_limit PASSED [ 87%]
2026-02-14T13:16:19.8762322Z tests/unit/test_resume_service.py::TestResumeService::test_init_requires_database PASSED [ 87%]
2026-02-14T13:16:19.8795595Z tests/unit/test_resume_service.py::TestResumeService::test_validate_file_valid_pdf PASSED [ 87%]
2026-02-14T13:16:19.8828066Z tests/unit/test_resume_service.py::TestResumeService::test_validate_file_valid_docx PASSED [ 87%]
2026-02-14T13:16:19.8860468Z tests/unit/test_resume_service.py::TestResumeService::test_validate_file_no_file PASSED [ 88%]
2026-02-14T13:16:19.8899310Z tests/unit/test_resume_service.py::TestResumeService::test_validate_file_too_large PASSED [ 88%]
2026-02-14T13:16:19.8931656Z tests/unit/test_resume_service.py::TestResumeService::test_validate_file_invalid_extension PASSED [ 88%]
2026-02-14T13:16:19.8982727Z tests/unit/test_resume_service.py::TestResumeService::test_upload_resume_success PASSED [ 88%]
2026-02-14T13:16:19.9022735Z tests/unit/test_resume_service.py::TestResumeService::test_get_user_resumes PASSED [ 88%]
2026-02-14T13:16:19.9062536Z tests/unit/test_resume_service.py::TestResumeService::test_get_resume_by_id_success PASSED [ 89%]
2026-02-14T13:16:19.9104059Z tests/unit/test_resume_service.py::TestResumeService::test_get_resume_by_id_not_found PASSED [ 89%]
2026-02-14T13:16:19.9146210Z tests/unit/test_resume_service.py::TestResumeService::test_delete_resume_success PASSED [ 89%]
2026-02-14T13:16:19.9188713Z tests/unit/test_resume_service.py::TestResumeService::test_download_resume_success PASSED [ 89%]
2026-02-14T13:16:19.9223910Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_validate_file_empty_file PASSED [ 89%]
2026-02-14T13:16:19.9255527Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_validate_file_no_extension PASSED [ 90%]
2026-02-14T13:16:19.9303809Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_validate_file_exactly_max_size PASSED [ 90%]
2026-02-14T13:16:19.9337061Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_validate_file_one_byte_over_limit PASSED [ 90%]
2026-02-14T13:16:19.9368252Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_validate_file_special_characters_in_filename PASSED [ 90%]
2026-02-14T13:16:19.9399294Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_validate_file_path_traversal_attempt PASSED [ 90%]
2026-02-14T13:16:19.9430381Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_validate_file_very_long_filename PASSED [ 91%]
2026-02-14T13:16:19.9461864Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_validate_file_wrong_extension_correct_mime PASSED [ 91%]
2026-02-14T13:16:19.9517399Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_upload_resume_duplicate_name PASSED [ 91%]
2026-02-14T13:16:19.9557694Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_get_resume_by_id_wrong_user PASSED [ 91%]
2026-02-14T13:16:19.9596611Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_delete_resume_not_owned_by_user PASSED [ 92%]
2026-02-14T13:16:19.9641255Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_download_resume_file_not_on_disk PASSED [ 92%]
2026-02-14T13:16:19.9691623Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_upload_resume_storage_failure_rollback PASSED [ 92%]
2026-02-14T13:16:19.9742091Z tests/unit/test_resume_service_edge_cases.py::TestResumeServiceEdgeCases::test_upload_resume_empty_name PASSED [ 92%]
2026-02-14T13:16:19.9771214Z tests/unit/test_resume_text_extractor.py::TestExtractPdfText::test_extract_pdf_text_success PASSED [ 92%]
2026-02-14T13:16:19.9806812Z tests/unit/test_resume_text_extractor.py::TestExtractPdfText::test_extract_pdf_text_multiple_pages PASSED [ 93%]
2026-02-14T13:16:19.9838037Z tests/unit/test_resume_text_extractor.py::TestExtractPdfText::test_extract_pdf_text_no_text PASSED [ 93%]
2026-02-14T13:16:19.9854214Z tests/unit/test_resume_text_extractor.py::TestExtractPdfText::test_extract_pdf_text_pypdf2_not_installed PASSED [ 93%]
2026-02-14T13:16:19.9876589Z tests/unit/test_resume_text_extractor.py::TestExtractPdfText::test_extract_pdf_text_error_handling PASSED [ 93%]
2026-02-14T13:16:19.9903581Z tests/unit/test_resume_text_extractor.py::TestExtractDocxText::test_extract_docx_text_success PASSED [ 93%]
2026-02-14T13:16:19.9938755Z tests/unit/test_resume_text_extractor.py::TestExtractDocxText::test_extract_docx_text_with_tables PASSED [ 94%]
2026-02-14T13:16:19.9961823Z tests/unit/test_resume_text_extractor.py::TestExtractDocxText::test_extract_docx_text_no_text PASSED [ 94%]
2026-02-14T13:16:19.9978067Z tests/unit/test_resume_text_extractor.py::TestExtractDocxText::test_extract_docx_text_python_docx_not_installed PASSED [ 94%]
2026-02-14T13:16:19.9997595Z tests/unit/test_resume_text_extractor.py::TestExtractDocxText::test_extract_docx_text_error_handling PASSED [ 94%]
2026-02-14T13:16:20.0051264Z tests/unit/test_resume_text_extractor.py::TestExtractTextFromResume::test_extract_text_from_resume_pdf_success PASSED [ 94%]
2026-02-14T13:16:20.0102983Z tests/unit/test_resume_text_extractor.py::TestExtractTextFromResume::test_extract_text_from_resume_docx_success PASSED [ 95%]
2026-02-14T13:16:20.0152712Z tests/unit/test_resume_text_extractor.py::TestExtractTextFromResume::test_extract_text_from_resume_not_found PASSED [ 95%]
2026-02-14T13:16:20.0212992Z tests/unit/test_resume_text_extractor.py::TestExtractTextFromResume::test_extract_text_from_resume_no_file_path PASSED [ 95%]
2026-02-14T13:16:20.0261735Z tests/unit/test_resume_text_extractor.py::TestExtractTextFromResume::test_extract_text_from_resume_file_not_found PASSED [ 95%]
2026-02-14T13:16:20.0312469Z tests/unit/test_resume_text_extractor.py::TestExtractTextFromResume::test_extract_text_from_resume_unsupported_format PASSED [ 96%]
2026-02-14T13:16:20.0358236Z tests/unit/test_staging_management.py::test_get_all_slots PASSED         [ 96%]
2026-02-14T13:16:20.0404411Z tests/unit/test_staging_management.py::test_get_slot_by_id PASSED        [ 96%]
2026-02-14T13:16:20.0447722Z tests/unit/test_staging_management.py::test_update_slot_status PASSED    [ 96%]
2026-02-14T13:16:20.0491615Z tests/unit/test_staging_management.py::test_release_slot PASSED          [ 96%]
2026-02-14T13:16:20.0505468Z tests/unit/test_user_service.py::TestUserService::test_init_requires_database PASSED [ 97%]
2026-02-14T13:16:20.3208567Z tests/unit/test_user_service.py::TestUserService::test_hash_password PASSED [ 97%]
2026-02-14T13:16:20.8584404Z tests/unit/test_user_service.py::TestUserService::test_verify_password_correct PASSED [ 97%]
2026-02-14T13:16:21.3965157Z tests/unit/test_user_service.py::TestUserService::test_verify_password_incorrect PASSED [ 97%]
2026-02-14T13:16:21.3996710Z tests/unit/test_user_service.py::TestUserService::test_create_user_validation_empty_username PASSED [ 97%]
2026-02-14T13:16:21.4025651Z tests/unit/test_user_service.py::TestUserService::test_create_user_validation_empty_email PASSED [ 98%]
2026-02-14T13:16:21.4057206Z tests/unit/test_user_service.py::TestUserService::test_create_user_validation_short_password PASSED [ 98%]
2026-02-14T13:16:21.4086352Z tests/unit/test_user_service.py::TestUserService::test_create_user_validation_invalid_role PASSED [ 98%]
2026-02-14T13:16:21.4119445Z tests/unit/test_user_service.py::TestUserService::test_create_user_checks_username_exists PASSED [ 98%]
2026-02-14T13:16:21.4154205Z tests/unit/test_user_service.py::TestUserService::test_create_user_checks_email_exists PASSED [ 98%]
2026-02-14T13:16:21.6878617Z tests/unit/test_user_service.py::TestUserService::test_create_user_success PASSED [ 99%]
2026-02-14T13:16:21.6916618Z tests/unit/test_user_service.py::TestUserService::test_get_user_by_username_not_found PASSED [ 99%]
2026-02-14T13:16:21.6955089Z tests/unit/test_user_service.py::TestUserService::test_get_user_by_email_not_found PASSED [ 99%]
2026-02-14T13:16:21.6990757Z tests/unit/test_user_service.py::TestUserService::test_get_user_by_id_not_found PASSED [ 99%]
2026-02-14T13:16:23.7604681Z tests/unit/test_user_service.py::TestUserService::test_verify_password_handles_exceptions PASSED [100%]
2026-02-14T13:16:23.7605340Z 
2026-02-14T13:16:23.7605616Z ==================================== ERRORS ====================================
2026-02-14T13:16:23.7606464Z _ ERROR at setup of TestCoverLetterGenerationRoute.test_generate_cover_letter_with_comments _
2026-02-14T13:16:23.7607134Z 
2026-02-14T13:16:23.7607298Z test_client = <FlaskClient <Flask 'app'>>
2026-02-14T13:16:23.7608836Z authenticated_user = {'created_at': datetime.datetime(2026, 2, 14, 13, 15, 41, 906702), 'email': 'test_gen@example.com', 'last_login': None, 'password_hash': '$2b$12$q5/4p2NCl8EoQRmOMNMZAepnE37ZVSJtS4p/iPZSKI0hulKnKO8c6', ...}
2026-02-14T13:16:23.7610237Z 
2026-02-14T13:16:23.7610371Z     @pytest.fixture
2026-02-14T13:16:23.7610797Z     def auth_headers(test_client, authenticated_user):
2026-02-14T13:16:23.7611405Z         """Create JWT auth headers for the test user."""
2026-02-14T13:16:23.7611912Z         response = test_client.post(
2026-02-14T13:16:23.7612341Z             "/api/auth/login",
2026-02-14T13:16:23.7613008Z             json={"username": authenticated_user["username"], "password": "test_password_123"},
2026-02-14T13:16:23.7613961Z         )
2026-02-14T13:16:23.7614283Z >       assert response.status_code == 200
2026-02-14T13:16:23.7614765Z E       assert 500 == 200
2026-02-14T13:16:23.7615421Z E        +  where 500 = <WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]>.status_code
2026-02-14T13:16:23.7616030Z 
2026-02-14T13:16:23.7616356Z tests/integration/test_cover_letter_generation_ui.py:92: AssertionError
2026-02-14T13:16:23.7617160Z ---------------------------- Captured stderr setup -----------------------------
2026-02-14T13:16:23.7617981Z Warning: Statement in 01_create_schemas.sql failed: syntax error at or near "it"
2026-02-14T13:16:23.7618692Z LINE 1: create it separately if needed
2026-02-14T13:16:23.7619378Z                ^
2026-02-14T13:16:23.7619582Z 
2026-02-14T13:16:23.7619871Z ------------------------------ Captured log setup ------------------------------
2026-02-14T13:16:23.7620776Z ERROR    blueprints.auth:auth.py:92 Login error: server closed the connection unexpectedly
2026-02-14T13:16:23.7621840Z 	This probably means the server terminated abnormally
2026-02-14T13:16:23.7622397Z 	before or while processing the request.
2026-02-14T13:16:23.7623219Z _ ERROR at setup of TestCoverLetterGenerationRoute.test_generate_cover_letter_invalid_resume_id _
2026-02-14T13:16:23.7624100Z 
2026-02-14T13:16:23.7624267Z test_client = <FlaskClient <Flask 'app'>>
2026-02-14T13:16:23.7625756Z authenticated_user = {'created_at': datetime.datetime(2026, 2, 14, 13, 15, 43, 234575), 'email': 'test_gen@example.com', 'last_login': None, 'password_hash': '$2b$12$Yvsf5RQOtrlesFp/0NPjXuoJPXs52asyJhsL4NUqMArvT8Imoyve.', ...}
2026-02-14T13:16:23.7627170Z 
2026-02-14T13:16:23.7627302Z     @pytest.fixture
2026-02-14T13:16:23.7627730Z     def auth_headers(test_client, authenticated_user):
2026-02-14T13:16:23.7628311Z         """Create JWT auth headers for the test user."""
2026-02-14T13:16:23.7628835Z         response = test_client.post(
2026-02-14T13:16:23.7629275Z             "/api/auth/login",
2026-02-14T13:16:23.7629951Z             json={"username": authenticated_user["username"], "password": "test_password_123"},
2026-02-14T13:16:23.7630648Z         )
2026-02-14T13:16:23.7630936Z >       assert response.status_code == 200
2026-02-14T13:16:23.7631357Z E       assert 500 == 200
2026-02-14T13:16:23.7631971Z E        +  where 500 = <WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]>.status_code
2026-02-14T13:16:23.7632576Z 
2026-02-14T13:16:23.7632953Z tests/integration/test_cover_letter_generation_ui.py:92: AssertionError
2026-02-14T13:16:23.7633961Z ---------------------------- Captured stderr setup -----------------------------
2026-02-14T13:16:23.7634819Z Warning: Statement in 01_create_schemas.sql failed: syntax error at or near "it"
2026-02-14T13:16:23.7635517Z LINE 1: create it separately if needed
2026-02-14T13:16:23.7635931Z                ^
2026-02-14T13:16:23.7636110Z 
2026-02-14T13:16:23.7636396Z ------------------------------ Captured log setup ------------------------------
2026-02-14T13:16:23.7637293Z ERROR    blueprints.auth:auth.py:92 Login error: server closed the connection unexpectedly
2026-02-14T13:16:23.7638118Z 	This probably means the server terminated abnormally
2026-02-14T13:16:23.7638661Z 	before or while processing the request.
2026-02-14T13:16:23.7639500Z _ ERROR at setup of TestCoverLetterGenerationRoute.test_generate_cover_letter_generation_error _
2026-02-14T13:16:23.7640204Z 
2026-02-14T13:16:23.7640370Z test_client = <FlaskClient <Flask 'app'>>
2026-02-14T13:16:23.7641845Z authenticated_user = {'created_at': datetime.datetime(2026, 2, 14, 13, 15, 44, 551169), 'email': 'test_gen@example.com', 'last_login': None, 'password_hash': '$2b$12$oCDiZdhfoSDH/q9rs3ukIeOqmVBZRl53KJtvMT8Tdzt1Oh616/M0S', ...}
2026-02-14T13:16:23.7643181Z 
2026-02-14T13:16:23.7643320Z     @pytest.fixture
2026-02-14T13:16:23.7643942Z     def auth_headers(test_client, authenticated_user):
2026-02-14T13:16:23.7644524Z         """Create JWT auth headers for the test user."""
2026-02-14T13:16:23.7645042Z         response = test_client.post(
2026-02-14T13:16:23.7645470Z             "/api/auth/login",
2026-02-14T13:16:23.7646136Z             json={"username": authenticated_user["username"], "password": "test_password_123"},
2026-02-14T13:16:23.7646847Z         )
2026-02-14T13:16:23.7647153Z >       assert response.status_code == 200
2026-02-14T13:16:23.7647595Z E       assert 500 == 200
2026-02-14T13:16:23.7648242Z E        +  where 500 = <WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]>.status_code
2026-02-14T13:16:23.7648852Z 
2026-02-14T13:16:23.7649190Z tests/integration/test_cover_letter_generation_ui.py:92: AssertionError
2026-02-14T13:16:23.7650235Z ---------------------------- Captured stderr setup -----------------------------
2026-02-14T13:16:23.7651075Z Warning: Statement in 01_create_schemas.sql failed: syntax error at or near "it"
2026-02-14T13:16:23.7651746Z LINE 1: create it separately if needed
2026-02-14T13:16:23.7652138Z                ^
2026-02-14T13:16:23.7652477Z 
2026-02-14T13:16:23.7652749Z ------------------------------ Captured log setup ------------------------------
2026-02-14T13:16:23.7653803Z ERROR    blueprints.auth:auth.py:92 Login error: server closed the connection unexpectedly
2026-02-14T13:16:23.7654641Z 	This probably means the server terminated abnormally
2026-02-14T13:16:23.7655193Z 	before or while processing the request.
2026-02-14T13:16:23.7656027Z _ ERROR at setup of TestCoverLetterGenerationRoute.test_generate_cover_letter_general_exception _
2026-02-14T13:16:23.7656746Z 
2026-02-14T13:16:23.7656906Z test_client = <FlaskClient <Flask 'app'>>
2026-02-14T13:16:23.7658484Z authenticated_user = {'created_at': datetime.datetime(2026, 2, 14, 13, 15, 46, 283045), 'email': 'test_gen@example.com', 'last_login': None, 'password_hash': '$2b$12$vH0JSQjAtEmLGGrUrtcCTecPbvMi0x3xWMHYduWAQxDy24H4Wfb3O', ...}
2026-02-14T13:16:23.7659924Z 
2026-02-14T13:16:23.7660055Z     @pytest.fixture
2026-02-14T13:16:23.7660459Z     def auth_headers(test_client, authenticated_user):
2026-02-14T13:16:23.7661008Z         """Create JWT auth headers for the test user."""
2026-02-14T13:16:23.7661499Z         response = test_client.post(
2026-02-14T13:16:23.7661895Z             "/api/auth/login",
2026-02-14T13:16:23.7662533Z             json={"username": authenticated_user["username"], "password": "test_password_123"},
2026-02-14T13:16:23.7663251Z         )
2026-02-14T13:16:23.7663557Z >       assert response.status_code == 200
2026-02-14T13:16:23.7664183Z E       assert 500 == 200
2026-02-14T13:16:23.7664824Z E        +  where 500 = <WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]>.status_code
2026-02-14T13:16:23.7665424Z 
2026-02-14T13:16:23.7665767Z tests/integration/test_cover_letter_generation_ui.py:92: AssertionError
2026-02-14T13:16:23.7666548Z ---------------------------- Captured stderr setup -----------------------------
2026-02-14T13:16:23.7667350Z Warning: Statement in 01_create_schemas.sql failed: syntax error at or near "it"
2026-02-14T13:16:23.7668052Z LINE 1: create it separately if needed
2026-02-14T13:16:23.7668473Z                ^
2026-02-14T13:16:23.7668669Z 
2026-02-14T13:16:23.7668965Z ------------------------------ Captured log setup ------------------------------
2026-02-14T13:16:23.7669855Z ERROR    blueprints.auth:auth.py:92 Login error: server closed the connection unexpectedly
2026-02-14T13:16:23.7670659Z 	This probably means the server terminated abnormally
2026-02-14T13:16:23.7671214Z 	before or while processing the request.
2026-02-14T13:16:23.7671723Z =================================== FAILURES ===================================
2026-02-14T13:16:23.7672493Z __________ TestCampaignDeletion.test_delete_campaign_removes_rankings __________
2026-02-14T13:16:23.7673055Z 
2026-02-14T13:16:23.7673563Z self = <tests.integration.test_campaign_deletion.TestCampaignDeletion object at 0x7f30913c4c50>
2026-02-14T13:16:23.7675026Z campaign_service = <services.campaign_management.campaign_service.CampaignService object at 0x7f307ae118d0>
2026-02-14T13:16:23.7676421Z test_database = '***127.0.0.1:5432/job_search_test'
2026-02-14T13:16:23.7676886Z test_user = 11
2026-02-14T13:16:23.7677060Z 
2026-02-14T13:16:23.7677484Z     def test_delete_campaign_removes_rankings(self, campaign_service, test_database, test_user):
2026-02-14T13:16:23.7678357Z         """Test that deleting a campaign removes rankings."""
2026-02-14T13:16:23.7678931Z         db = PostgreSQLDatabase(test_database)
2026-02-14T13:16:23.7679353Z     
2026-02-14T13:16:23.7679628Z         # Create campaign
2026-02-14T13:16:23.7680045Z         campaign_id = campaign_service.create_campaign(
2026-02-14T13:16:23.7680516Z             campaign_name="Test Campaign",
2026-02-14T13:16:23.7680917Z             query="Software Engineer",
2026-02-14T13:16:23.7681483Z             country="us",
2026-02-14T13:16:23.7681799Z             user_id=test_user,
2026-02-14T13:16:23.7682096Z         )
2026-02-14T13:16:23.7682308Z     
2026-02-14T13:16:23.7682540Z         # Insert a ranking
2026-02-14T13:16:23.7683025Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7683368Z             cur.execute(
2026-02-14T13:16:23.7683882Z                 """
2026-02-14T13:16:23.7684281Z                 INSERT INTO marts.dim_ranking
2026-02-14T13:16:23.7685028Z                 (jsearch_job_id, campaign_id, rank_score, ranked_at, ranked_date, dwh_load_timestamp, dwh_source_system)
2026-02-14T13:16:23.7685916Z                 VALUES ('test_job_123', %s, 85.5, NOW(), CURRENT_DATE, NOW(), 'test')
2026-02-14T13:16:23.7686428Z                 """,
2026-02-14T13:16:23.7686704Z                 (campaign_id,),
2026-02-14T13:16:23.7687009Z             )
2026-02-14T13:16:23.7687243Z     
2026-02-14T13:16:23.7687466Z         # Verify ranking exists
2026-02-14T13:16:23.7687798Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7688130Z             cur.execute(
2026-02-14T13:16:23.7688631Z                 "SELECT COUNT(*) FROM marts.dim_ranking WHERE campaign_id = %s", (campaign_id,)
2026-02-14T13:16:23.7689193Z             )
2026-02-14T13:16:23.7689469Z             count_before = cur.fetchone()[0]
2026-02-14T13:16:23.7689969Z             assert count_before == 1, "Ranking should exist before deletion"
2026-02-14T13:16:23.7690459Z     
2026-02-14T13:16:23.7690691Z         # Delete campaign
2026-02-14T13:16:23.7691052Z >       campaign_service.delete_campaign(campaign_id)
2026-02-14T13:16:23.7691382Z 
2026-02-14T13:16:23.7691546Z tests/integration/test_campaign_deletion.py:183: 
2026-02-14T13:16:23.7692112Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2026-02-14T13:16:23.7692459Z 
2026-02-14T13:16:23.7692879Z self = <services.campaign_management.campaign_service.CampaignService object at 0x7f307ae118d0>
2026-02-14T13:16:23.7693560Z campaign_id = 6
2026-02-14T13:16:23.7693919Z 
2026-02-14T13:16:23.7694126Z     def delete_campaign(self, campaign_id: int) -> str:
2026-02-14T13:16:23.7694590Z         """Delete a campaign and all related data.
2026-02-14T13:16:23.7694958Z     
2026-02-14T13:16:23.7695331Z         This method ensures complete cleanup of campaign-related data:
2026-02-14T13:16:23.7695957Z         - Rankings (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7696569Z         - Fact jobs (manually deleted since dbt table may not have FK)
2026-02-14T13:16:23.7697191Z         - ETL metrics (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7697855Z         - User job status (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7698708Z         - Job notes (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7699300Z         - Staging jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7699745Z         - Raw jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7700257Z         - ChatGPT enrichments (deleted via join to staging jobs)
2026-02-14T13:16:23.7700708Z     
2026-02-14T13:16:23.7700922Z         Args:
2026-02-14T13:16:23.7701197Z             campaign_id: Campaign ID to delete
2026-02-14T13:16:23.7701558Z     
2026-02-14T13:16:23.7701770Z         Returns:
2026-02-14T13:16:23.7702034Z             Deleted campaign name
2026-02-14T13:16:23.7702342Z     
2026-02-14T13:16:23.7702544Z         Raises:
2026-02-14T13:16:23.7702826Z             ValueError: If campaign not found
2026-02-14T13:16:23.7703185Z         """
2026-02-14T13:16:23.7703454Z         # Get campaign name for return value
2026-02-14T13:16:23.7703996Z         with self.db.get_cursor() as cur:
2026-02-14T13:16:23.7704428Z             cur.execute(GET_CAMPAIGN_NAME, (campaign_id,))
2026-02-14T13:16:23.7704863Z             result = cur.fetchone()
2026-02-14T13:16:23.7705171Z     
2026-02-14T13:16:23.7705395Z             if not result:
2026-02-14T13:16:23.7705958Z                 raise ValueError(f"Campaign {campaign_id} not found")
2026-02-14T13:16:23.7706404Z     
2026-02-14T13:16:23.7706641Z             campaign_name = result[0]
2026-02-14T13:16:23.7706966Z     
2026-02-14T13:16:23.7707345Z             # Manual cleanup for tables without FK constraints or CASCADE DELETE
2026-02-14T13:16:23.7708234Z             # This ensures data is removed even if FK constraints aren't set up yet
2026-02-14T13:16:23.7708917Z             # Handle missing tables gracefully (e.g., fact_jobs created by dbt)
2026-02-14T13:16:23.7709612Z             # Use savepoints to handle errors without aborting the entire transaction
2026-02-14T13:16:23.7710144Z     
2026-02-14T13:16:23.7710374Z             fact_jobs_deleted = 0
2026-02-14T13:16:23.7710714Z             staging_jobs_deleted = 0
2026-02-14T13:16:23.7711066Z             enrichments_deleted = 0
2026-02-14T13:16:23.7711416Z             raw_jobs_deleted = 0
2026-02-14T13:16:23.7711714Z     
2026-02-14T13:16:23.7712071Z             # Delete fact_jobs for this campaign (dbt table, may not exist)
2026-02-14T13:16:23.7712646Z >           cur.execute("SAVEPOINT before_fact_jobs_delete")
2026-02-14T13:16:23.7713409Z E           psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:23.7714163Z 
2026-02-14T13:16:23.7714503Z services/campaign_management/campaign_service.py:583: NoActiveSqlTransaction
2026-02-14T13:16:23.7715209Z ---------------------------- Captured stderr setup -----------------------------
2026-02-14T13:16:23.7715903Z Warning: Statement in 01_create_schemas.sql failed: syntax error at or near "it"
2026-02-14T13:16:23.7716488Z LINE 1: create it separately if needed
2026-02-14T13:16:23.7716835Z                ^
2026-02-14T13:16:23.7716984Z 
2026-02-14T13:16:23.7717305Z _________ TestCampaignDeletion.test_delete_campaign_removes_fact_jobs __________
2026-02-14T13:16:23.7717778Z 
2026-02-14T13:16:23.7718198Z self = <tests.integration.test_campaign_deletion.TestCampaignDeletion object at 0x7f30913c5f50>
2026-02-14T13:16:23.7719271Z campaign_service = <services.campaign_management.campaign_service.CampaignService object at 0x7f307a802850>
2026-02-14T13:16:23.7720388Z test_database = '***127.0.0.1:5432/job_search_test'
2026-02-14T13:16:23.7720802Z test_user = 12
2026-02-14T13:16:23.7720968Z 
2026-02-14T13:16:23.7721366Z     def test_delete_campaign_removes_fact_jobs(self, campaign_service, test_database, test_user):
2026-02-14T13:16:23.7722120Z         """Test that deleting a campaign removes fact_jobs."""
2026-02-14T13:16:23.7722597Z         db = PostgreSQLDatabase(test_database)
2026-02-14T13:16:23.7722975Z     
2026-02-14T13:16:23.7723201Z         # Create campaign
2026-02-14T13:16:23.7723577Z         campaign_id = campaign_service.create_campaign(
2026-02-14T13:16:23.7724187Z             campaign_name="Test Campaign",
2026-02-14T13:16:23.7724572Z             query="Software Engineer",
2026-02-14T13:16:23.7724922Z             country="us",
2026-02-14T13:16:23.7725218Z             user_id=test_user,
2026-02-14T13:16:23.7725525Z         )
2026-02-14T13:16:23.7725739Z     
2026-02-14T13:16:23.7726160Z         # Create fact_jobs table if it doesn't exist (it's created by dbt normally)
2026-02-14T13:16:23.7726726Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7727198Z             # Drop and recreate to ensure proper schema with all columns
2026-02-14T13:16:23.7727805Z             cur.execute("DROP TABLE IF EXISTS marts.fact_jobs CASCADE")
2026-02-14T13:16:23.7728278Z             cur.execute(
2026-02-14T13:16:23.7728556Z                 """
2026-02-14T13:16:23.7728846Z                 CREATE TABLE marts.fact_jobs (
2026-02-14T13:16:23.7729232Z                     jsearch_job_id varchar,
2026-02-14T13:16:23.7729591Z                     campaign_id integer,
2026-02-14T13:16:23.7729942Z                     job_title varchar,
2026-02-14T13:16:23.7730284Z                     job_summary text,
2026-02-14T13:16:23.7730637Z                     employer_name varchar,
2026-02-14T13:16:23.7731008Z                     job_location varchar,
2026-02-14T13:16:23.7731563Z                     employment_type varchar,
2026-02-14T13:16:23.7731994Z                     job_posted_at_datetime_utc timestamp,
2026-02-14T13:16:23.7732411Z                     apply_options jsonb,
2026-02-14T13:16:23.7732934Z                     job_apply_link varchar,
2026-02-14T13:16:23.7733301Z                     extracted_skills jsonb,
2026-02-14T13:16:23.7733838Z                     job_min_salary numeric,
2026-02-14T13:16:23.7734205Z                     job_max_salary numeric,
2026-02-14T13:16:23.7734592Z                     job_salary_period varchar,
2026-02-14T13:16:23.7734996Z                     job_salary_currency varchar,
2026-02-14T13:16:23.7735407Z                     remote_work_type varchar,
2026-02-14T13:16:23.7735811Z                     seniority_level varchar,
2026-02-14T13:16:23.7736187Z                     company_key varchar,
2026-02-14T13:16:23.7736552Z                     dwh_load_date date,
2026-02-14T13:16:23.7736931Z                     dwh_load_timestamp timestamp,
2026-02-14T13:16:23.7737365Z                     dwh_source_system varchar,
2026-02-14T13:16:23.7737800Z                     PRIMARY KEY (jsearch_job_id, campaign_id)
2026-02-14T13:16:23.7738211Z                 )
2026-02-14T13:16:23.7738458Z                 """
2026-02-14T13:16:23.7738698Z             )
2026-02-14T13:16:23.7739032Z             # Create dim_companies table (required by job queries)
2026-02-14T13:16:23.7739488Z             cur.execute(
2026-02-14T13:16:23.7739764Z                 """
2026-02-14T13:16:23.7740099Z                 CREATE TABLE IF NOT EXISTS marts.dim_companies (
2026-02-14T13:16:23.7740584Z                     company_key varchar PRIMARY KEY,
2026-02-14T13:16:23.7740997Z                     company_name varchar,
2026-02-14T13:16:23.7741372Z                     company_size varchar,
2026-02-14T13:16:23.7741730Z                     rating numeric,
2026-02-14T13:16:23.7742076Z                     company_link varchar,
2026-02-14T13:16:23.7742445Z                     logo varchar
2026-02-14T13:16:23.7742739Z                 )
2026-02-14T13:16:23.7742982Z                 """
2026-02-14T13:16:23.7743215Z             )
2026-02-14T13:16:23.7743571Z             # Create user_job_status table (required by job queries)
2026-02-14T13:16:23.7744192Z             cur.execute(
2026-02-14T13:16:23.7744471Z                 """
2026-02-14T13:16:23.7744811Z                 CREATE TABLE IF NOT EXISTS marts.user_job_status (
2026-02-14T13:16:23.7745304Z                     user_job_status_id SERIAL PRIMARY KEY,
2026-02-14T13:16:23.7745735Z                     jsearch_job_id varchar NOT NULL,
2026-02-14T13:16:23.7746240Z                     user_id integer NOT NULL,
2026-02-14T13:16:23.7746971Z                     status varchar NOT NULL,
2026-02-14T13:16:23.7765054Z                     created_at timestamp DEFAULT CURRENT_TIMESTAMP,
2026-02-14T13:16:23.7765655Z                     updated_at timestamp DEFAULT CURRENT_TIMESTAMP,
2026-02-14T13:16:23.7766296Z                     CONSTRAINT unique_user_job_status UNIQUE (user_id, jsearch_job_id)
2026-02-14T13:16:23.7766811Z                 )
2026-02-14T13:16:23.7767056Z                 """
2026-02-14T13:16:23.7767304Z             )
2026-02-14T13:16:23.7767618Z             # Create job_notes table (required by job queries)
2026-02-14T13:16:23.7768051Z             cur.execute(
2026-02-14T13:16:23.7768319Z                 """
2026-02-14T13:16:23.7768643Z                 CREATE TABLE IF NOT EXISTS marts.job_notes (
2026-02-14T13:16:23.7769095Z                     note_id SERIAL PRIMARY KEY,
2026-02-14T13:16:23.7769532Z                     jsearch_job_id varchar NOT NULL,
2026-02-14T13:16:23.7769941Z                     user_id integer NOT NULL,
2026-02-14T13:16:23.7770308Z                     note_text text,
2026-02-14T13:16:23.7770723Z                     created_at timestamp DEFAULT CURRENT_TIMESTAMP,
2026-02-14T13:16:23.7771232Z                     updated_at timestamp DEFAULT CURRENT_TIMESTAMP,
2026-02-14T13:16:23.7772039Z                     CONSTRAINT unique_job_user_note UNIQUE (jsearch_job_id, user_id)
2026-02-14T13:16:23.7772557Z                 )
2026-02-14T13:16:23.7772795Z                 """
2026-02-14T13:16:23.7773022Z             )
2026-02-14T13:16:23.7773247Z     
2026-02-14T13:16:23.7773806Z         # Insert a fact_job
2026-02-14T13:16:23.7774440Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7774705Z             cur.execute(
2026-02-14T13:16:23.7774900Z                 """
2026-02-14T13:16:23.7775107Z                 INSERT INTO marts.fact_jobs
2026-02-14T13:16:23.7775677Z                 (jsearch_job_id, campaign_id, job_title, employer_name, job_location, dwh_load_date, dwh_load_timestamp, dwh_source_system)
2026-02-14T13:16:23.7776444Z                 VALUES ('test_job_123', %s, 'Software Engineer', 'Test Company', 'Remote', CURRENT_DATE, NOW(), 'test')
2026-02-14T13:16:23.7776893Z                 """,
2026-02-14T13:16:23.7777086Z                 (campaign_id,),
2026-02-14T13:16:23.7777295Z             )
2026-02-14T13:16:23.7777457Z     
2026-02-14T13:16:23.7777629Z         # Verify fact_job exists
2026-02-14T13:16:23.7777852Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7778088Z             cur.execute(
2026-02-14T13:16:23.7778416Z                 "SELECT COUNT(*) FROM marts.fact_jobs WHERE campaign_id = %s", (campaign_id,)
2026-02-14T13:16:23.7778789Z             )
2026-02-14T13:16:23.7778969Z             count_before = cur.fetchone()[0]
2026-02-14T13:16:23.7779307Z             assert count_before == 1, "Fact job should exist before deletion"
2026-02-14T13:16:23.7779631Z     
2026-02-14T13:16:23.7779784Z         # Delete campaign
2026-02-14T13:16:23.7780035Z >       campaign_service.delete_campaign(campaign_id)
2026-02-14T13:16:23.7780246Z 
2026-02-14T13:16:23.7780364Z tests/integration/test_campaign_deletion.py:299: 
2026-02-14T13:16:23.7780692Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2026-02-14T13:16:23.7780916Z 
2026-02-14T13:16:23.7781196Z self = <services.campaign_management.campaign_service.CampaignService object at 0x7f307a802850>
2026-02-14T13:16:23.7781646Z campaign_id = 7
2026-02-14T13:16:23.7781752Z 
2026-02-14T13:16:23.7781887Z     def delete_campaign(self, campaign_id: int) -> str:
2026-02-14T13:16:23.7782203Z         """Delete a campaign and all related data.
2026-02-14T13:16:23.7782453Z     
2026-02-14T13:16:23.7782698Z         This method ensures complete cleanup of campaign-related data:
2026-02-14T13:16:23.7783122Z         - Rankings (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7783527Z         - Fact jobs (manually deleted since dbt table may not have FK)
2026-02-14T13:16:23.7784102Z         - ETL metrics (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7784548Z         - User job status (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7784966Z         - Job notes (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7785337Z         - Staging jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7785639Z         - Raw jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7785975Z         - ChatGPT enrichments (deleted via join to staging jobs)
2026-02-14T13:16:23.7786269Z     
2026-02-14T13:16:23.7786418Z         Args:
2026-02-14T13:16:23.7786610Z             campaign_id: Campaign ID to delete
2026-02-14T13:16:23.7786843Z     
2026-02-14T13:16:23.7786987Z         Returns:
2026-02-14T13:16:23.7787162Z             Deleted campaign name
2026-02-14T13:16:23.7787369Z     
2026-02-14T13:16:23.7787505Z         Raises:
2026-02-14T13:16:23.7787693Z             ValueError: If campaign not found
2026-02-14T13:16:23.7787927Z         """
2026-02-14T13:16:23.7788106Z         # Get campaign name for return value
2026-02-14T13:16:23.7788356Z         with self.db.get_cursor() as cur:
2026-02-14T13:16:23.7788643Z             cur.execute(GET_CAMPAIGN_NAME, (campaign_id,))
2026-02-14T13:16:23.7788929Z             result = cur.fetchone()
2026-02-14T13:16:23.7789137Z     
2026-02-14T13:16:23.7789499Z             if not result:
2026-02-14T13:16:23.7789771Z                 raise ValueError(f"Campaign {campaign_id} not found")
2026-02-14T13:16:23.7790064Z     
2026-02-14T13:16:23.7790222Z             campaign_name = result[0]
2026-02-14T13:16:23.7790552Z     
2026-02-14T13:16:23.7790803Z             # Manual cleanup for tables without FK constraints or CASCADE DELETE
2026-02-14T13:16:23.7791261Z             # This ensures data is removed even if FK constraints aren't set up yet
2026-02-14T13:16:23.7791699Z             # Handle missing tables gracefully (e.g., fact_jobs created by dbt)
2026-02-14T13:16:23.7792148Z             # Use savepoints to handle errors without aborting the entire transaction
2026-02-14T13:16:23.7792491Z     
2026-02-14T13:16:23.7792646Z             fact_jobs_deleted = 0
2026-02-14T13:16:23.7792875Z             staging_jobs_deleted = 0
2026-02-14T13:16:23.7793102Z             enrichments_deleted = 0
2026-02-14T13:16:23.7793333Z             raw_jobs_deleted = 0
2026-02-14T13:16:23.7793534Z     
2026-02-14T13:16:23.7793954Z             # Delete fact_jobs for this campaign (dbt table, may not exist)
2026-02-14T13:16:23.7794329Z >           cur.execute("SAVEPOINT before_fact_jobs_delete")
2026-02-14T13:16:23.7794819Z E           psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:23.7795203Z 
2026-02-14T13:16:23.7795421Z services/campaign_management/campaign_service.py:583: NoActiveSqlTransaction
2026-02-14T13:16:23.7795877Z ---------------------------- Captured stderr setup -----------------------------
2026-02-14T13:16:23.7796329Z Warning: Statement in 01_create_schemas.sql failed: syntax error at or near "it"
2026-02-14T13:16:23.7796702Z LINE 1: create it separately if needed
2026-02-14T13:16:23.7796933Z                ^
2026-02-14T13:16:23.7797034Z 
2026-02-14T13:16:23.7797271Z ________ TestCampaignDeletion.test_delete_campaign_removes_staging_jobs ________
2026-02-14T13:16:23.7797571Z 
2026-02-14T13:16:23.7797840Z self = <tests.integration.test_campaign_deletion.TestCampaignDeletion object at 0x7f30913c4210>
2026-02-14T13:16:23.7798511Z campaign_service = <services.campaign_management.campaign_service.CampaignService object at 0x7f307a90f8d0>
2026-02-14T13:16:23.7799232Z test_database = '***127.0.0.1:5432/job_search_test'
2026-02-14T13:16:23.7799508Z test_user = 13
2026-02-14T13:16:23.7799613Z 
2026-02-14T13:16:23.7799893Z     def test_delete_campaign_removes_staging_jobs(self, campaign_service, test_database, test_user):
2026-02-14T13:16:23.7800401Z         """Test that deleting a campaign removes staging jobs."""
2026-02-14T13:16:23.7800724Z         db = PostgreSQLDatabase(test_database)
2026-02-14T13:16:23.7800975Z     
2026-02-14T13:16:23.7801131Z         # Create campaign
2026-02-14T13:16:23.7801383Z         campaign_id = campaign_service.create_campaign(
2026-02-14T13:16:23.7801682Z             campaign_name="Test Campaign",
2026-02-14T13:16:23.7801929Z             query="Software Engineer",
2026-02-14T13:16:23.7802170Z             country="us",
2026-02-14T13:16:23.7802363Z             user_id=test_user,
2026-02-14T13:16:23.7802565Z         )
2026-02-14T13:16:23.7802706Z     
2026-02-14T13:16:23.7803049Z         # Create staging.jsearch_job_postings table if it doesn't exist (it's created by dbt normally)
2026-02-14T13:16:23.7803479Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7803951Z             cur.execute(
2026-02-14T13:16:23.7804149Z                 """
2026-02-14T13:16:23.7804413Z                 CREATE TABLE IF NOT EXISTS staging.jsearch_job_postings (
2026-02-14T13:16:23.7804792Z                     jsearch_job_postings_key bigint PRIMARY KEY,
2026-02-14T13:16:23.7805085Z                     jsearch_job_id varchar,
2026-02-14T13:16:23.7805331Z                     campaign_id integer,
2026-02-14T13:16:23.7805565Z                     job_title varchar,
2026-02-14T13:16:23.7805811Z                     employer_name varchar,
2026-02-14T13:16:23.7806049Z                     job_location varchar,
2026-02-14T13:16:23.7806422Z                     dwh_load_date date,
2026-02-14T13:16:23.7806675Z                     dwh_load_timestamp timestamp,
2026-02-14T13:16:23.7806947Z                     dwh_source_system varchar
2026-02-14T13:16:23.7807169Z                 )
2026-02-14T13:16:23.7807464Z                 """
2026-02-14T13:16:23.7807620Z             )
2026-02-14T13:16:23.7807770Z     
2026-02-14T13:16:23.7807923Z         # Insert a staging job
2026-02-14T13:16:23.7808161Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7808388Z             cur.execute(
2026-02-14T13:16:23.7808563Z                 """
2026-02-14T13:16:23.7808773Z                 INSERT INTO staging.jsearch_job_postings
2026-02-14T13:16:23.7809234Z                 (jsearch_job_postings_key, jsearch_job_id, campaign_id, job_title, employer_name, job_location,
2026-02-14T13:16:23.7809731Z                  dwh_load_date, dwh_load_timestamp, dwh_source_system)
2026-02-14T13:16:23.7810150Z                 VALUES (1, 'test_job_123', %s, 'Software Engineer', 'Test Company', 'Remote',
2026-02-14T13:16:23.7810535Z                         CURRENT_DATE, NOW(), 'test')
2026-02-14T13:16:23.7810777Z                 """,
2026-02-14T13:16:23.7810950Z                 (campaign_id,),
2026-02-14T13:16:23.7811153Z             )
2026-02-14T13:16:23.7811299Z     
2026-02-14T13:16:23.7811460Z         # Verify staging job exists
2026-02-14T13:16:23.7811687Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7811916Z             cur.execute(
2026-02-14T13:16:23.7812231Z                 "SELECT COUNT(*) FROM staging.jsearch_job_postings WHERE campaign_id = %s",
2026-02-14T13:16:23.7812604Z                 (campaign_id,),
2026-02-14T13:16:23.7812795Z             )
2026-02-14T13:16:23.7812978Z             count_before = cur.fetchone()[0]
2026-02-14T13:16:23.7813324Z             assert count_before == 1, "Staging job should exist before deletion"
2026-02-14T13:16:23.7813912Z     
2026-02-14T13:16:23.7814135Z         # Delete campaign
2026-02-14T13:16:23.7814393Z >       campaign_service.delete_campaign(campaign_id)
2026-02-14T13:16:23.7814605Z 
2026-02-14T13:16:23.7814722Z tests/integration/test_campaign_deletion.py:362: 
2026-02-14T13:16:23.7815038Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2026-02-14T13:16:23.7815270Z 
2026-02-14T13:16:23.7815538Z self = <services.campaign_management.campaign_service.CampaignService object at 0x7f307a90f8d0>
2026-02-14T13:16:23.7815970Z campaign_id = 8
2026-02-14T13:16:23.7816075Z 
2026-02-14T13:16:23.7816198Z     def delete_campaign(self, campaign_id: int) -> str:
2026-02-14T13:16:23.7816507Z         """Delete a campaign and all related data.
2026-02-14T13:16:23.7816745Z     
2026-02-14T13:16:23.7816987Z         This method ensures complete cleanup of campaign-related data:
2026-02-14T13:16:23.7817400Z         - Rankings (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7817800Z         - Fact jobs (manually deleted since dbt table may not have FK)
2026-02-14T13:16:23.7818203Z         - ETL metrics (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7818619Z         - User job status (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7819039Z         - Job notes (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7819395Z         - Staging jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7819694Z         - Raw jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7820022Z         - ChatGPT enrichments (deleted via join to staging jobs)
2026-02-14T13:16:23.7820309Z     
2026-02-14T13:16:23.7820453Z         Args:
2026-02-14T13:16:23.7820634Z             campaign_id: Campaign ID to delete
2026-02-14T13:16:23.7820866Z     
2026-02-14T13:16:23.7821001Z         Returns:
2026-02-14T13:16:23.7821181Z             Deleted campaign name
2026-02-14T13:16:23.7821382Z     
2026-02-14T13:16:23.7821518Z         Raises:
2026-02-14T13:16:23.7821697Z             ValueError: If campaign not found
2026-02-14T13:16:23.7822061Z         """
2026-02-14T13:16:23.7822237Z         # Get campaign name for return value
2026-02-14T13:16:23.7822493Z         with self.db.get_cursor() as cur:
2026-02-14T13:16:23.7822772Z             cur.execute(GET_CAMPAIGN_NAME, (campaign_id,))
2026-02-14T13:16:23.7823151Z             result = cur.fetchone()
2026-02-14T13:16:23.7823363Z     
2026-02-14T13:16:23.7823508Z             if not result:
2026-02-14T13:16:23.7823889Z                 raise ValueError(f"Campaign {campaign_id} not found")
2026-02-14T13:16:23.7824173Z     
2026-02-14T13:16:23.7824342Z             campaign_name = result[0]
2026-02-14T13:16:23.7824552Z     
2026-02-14T13:16:23.7824811Z             # Manual cleanup for tables without FK constraints or CASCADE DELETE
2026-02-14T13:16:23.7825261Z             # This ensures data is removed even if FK constraints aren't set up yet
2026-02-14T13:16:23.7825694Z             # Handle missing tables gracefully (e.g., fact_jobs created by dbt)
2026-02-14T13:16:23.7826155Z             # Use savepoints to handle errors without aborting the entire transaction
2026-02-14T13:16:23.7826494Z     
2026-02-14T13:16:23.7826650Z             fact_jobs_deleted = 0
2026-02-14T13:16:23.7826865Z             staging_jobs_deleted = 0
2026-02-14T13:16:23.7827101Z             enrichments_deleted = 0
2026-02-14T13:16:23.7827324Z             raw_jobs_deleted = 0
2026-02-14T13:16:23.7827517Z     
2026-02-14T13:16:23.7827751Z             # Delete fact_jobs for this campaign (dbt table, may not exist)
2026-02-14T13:16:23.7828116Z >           cur.execute("SAVEPOINT before_fact_jobs_delete")
2026-02-14T13:16:23.7828601Z E           psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:23.7828973Z 
2026-02-14T13:16:23.7829177Z services/campaign_management/campaign_service.py:583: NoActiveSqlTransaction
2026-02-14T13:16:23.7829638Z ---------------------------- Captured stderr setup -----------------------------
2026-02-14T13:16:23.7830094Z Warning: Statement in 01_create_schemas.sql failed: syntax error at or near "it"
2026-02-14T13:16:23.7830466Z LINE 1: create it separately if needed
2026-02-14T13:16:23.7830691Z                ^
2026-02-14T13:16:23.7830791Z 
2026-02-14T13:16:23.7830992Z ________ TestCampaignDeletion.test_delete_campaign_removes_etl_metrics _________
2026-02-14T13:16:23.7831300Z 
2026-02-14T13:16:23.7831566Z self = <tests.integration.test_campaign_deletion.TestCampaignDeletion object at 0x7f30913c7b90>
2026-02-14T13:16:23.7832238Z campaign_service = <services.campaign_management.campaign_service.CampaignService object at 0x7f307a6b0610>
2026-02-14T13:16:23.7832966Z test_database = '***127.0.0.1:5432/job_search_test'
2026-02-14T13:16:23.7833227Z test_user = 14
2026-02-14T13:16:23.7833340Z 
2026-02-14T13:16:23.7833702Z     def test_delete_campaign_removes_etl_metrics(self, campaign_service, test_database, test_user):
2026-02-14T13:16:23.7834194Z         """Test that deleting a campaign removes ETL metrics."""
2026-02-14T13:16:23.7834524Z         db = PostgreSQLDatabase(test_database)
2026-02-14T13:16:23.7834771Z     
2026-02-14T13:16:23.7834927Z         # Create campaign
2026-02-14T13:16:23.7835176Z         campaign_id = campaign_service.create_campaign(
2026-02-14T13:16:23.7835463Z             campaign_name="Test Campaign",
2026-02-14T13:16:23.7835721Z             query="Software Engineer",
2026-02-14T13:16:23.7835946Z             country="us",
2026-02-14T13:16:23.7836141Z             user_id=test_user,
2026-02-14T13:16:23.7836341Z         )
2026-02-14T13:16:23.7836489Z     
2026-02-14T13:16:23.7836640Z         # Insert ETL metrics
2026-02-14T13:16:23.7836853Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7837075Z             cur.execute(
2026-02-14T13:16:23.7837253Z                 """
2026-02-14T13:16:23.7837455Z                 INSERT INTO marts.etl_run_metrics
2026-02-14T13:16:23.7837808Z                 (run_id, dag_run_id, campaign_id, task_name, task_status, run_timestamp,
2026-02-14T13:16:23.7838382Z                  rows_processed_raw, rows_processed_staging, rows_processed_marts,
2026-02-14T13:16:23.7838745Z                  processing_duration_seconds)
2026-02-14T13:16:23.7839119Z                 VALUES ('test_run_1', 'dag_run_1', %s, 'extract_job_postings', 'success', NOW(),
2026-02-14T13:16:23.7839598Z                         10, 10, 10, 5.5)
2026-02-14T13:16:23.7839814Z                 """,
2026-02-14T13:16:23.7840000Z                 (campaign_id,),
2026-02-14T13:16:23.7840194Z             )
2026-02-14T13:16:23.7840345Z     
2026-02-14T13:16:23.7840504Z         # Verify ETL metrics exist
2026-02-14T13:16:23.7840729Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7840946Z             cur.execute(
2026-02-14T13:16:23.7841296Z                 "SELECT COUNT(*) FROM marts.etl_run_metrics WHERE campaign_id = %s", (campaign_id,)
2026-02-14T13:16:23.7841667Z             )
2026-02-14T13:16:23.7841847Z             count_before = cur.fetchone()[0]
2026-02-14T13:16:23.7842192Z             assert count_before >= 1, "ETL metrics should exist before deletion"
2026-02-14T13:16:23.7842513Z     
2026-02-14T13:16:23.7842670Z         # Delete campaign
2026-02-14T13:16:23.7842907Z >       campaign_service.delete_campaign(campaign_id)
2026-02-14T13:16:23.7843118Z 
2026-02-14T13:16:23.7843234Z tests/integration/test_campaign_deletion.py:408: 
2026-02-14T13:16:23.7843550Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2026-02-14T13:16:23.7844022Z 
2026-02-14T13:16:23.7844298Z self = <services.campaign_management.campaign_service.CampaignService object at 0x7f307a6b0610>
2026-02-14T13:16:23.7844737Z campaign_id = 9
2026-02-14T13:16:23.7844841Z 
2026-02-14T13:16:23.7844965Z     def delete_campaign(self, campaign_id: int) -> str:
2026-02-14T13:16:23.7845265Z         """Delete a campaign and all related data.
2026-02-14T13:16:23.7845502Z     
2026-02-14T13:16:23.7845740Z         This method ensures complete cleanup of campaign-related data:
2026-02-14T13:16:23.7846154Z         - Rankings (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7846555Z         - Fact jobs (manually deleted since dbt table may not have FK)
2026-02-14T13:16:23.7846952Z         - ETL metrics (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7847370Z         - User job status (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7847792Z         - Job notes (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7848162Z         - Staging jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7848469Z         - Raw jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7848801Z         - ChatGPT enrichments (deleted via join to staging jobs)
2026-02-14T13:16:23.7849084Z     
2026-02-14T13:16:23.7849231Z         Args:
2026-02-14T13:16:23.7849414Z             campaign_id: Campaign ID to delete
2026-02-14T13:16:23.7849651Z     
2026-02-14T13:16:23.7849790Z         Returns:
2026-02-14T13:16:23.7849967Z             Deleted campaign name
2026-02-14T13:16:23.7850169Z     
2026-02-14T13:16:23.7850310Z         Raises:
2026-02-14T13:16:23.7850490Z             ValueError: If campaign not found
2026-02-14T13:16:23.7850724Z         """
2026-02-14T13:16:23.7850898Z         # Get campaign name for return value
2026-02-14T13:16:23.7851154Z         with self.db.get_cursor() as cur:
2026-02-14T13:16:23.7851442Z             cur.execute(GET_CAMPAIGN_NAME, (campaign_id,))
2026-02-14T13:16:23.7851719Z             result = cur.fetchone()
2026-02-14T13:16:23.7851927Z     
2026-02-14T13:16:23.7852073Z             if not result:
2026-02-14T13:16:23.7852340Z                 raise ValueError(f"Campaign {campaign_id} not found")
2026-02-14T13:16:23.7852621Z     
2026-02-14T13:16:23.7852783Z             campaign_name = result[0]
2026-02-14T13:16:23.7852989Z     
2026-02-14T13:16:23.7853249Z             # Manual cleanup for tables without FK constraints or CASCADE DELETE
2026-02-14T13:16:23.7853965Z             # This ensures data is removed even if FK constraints aren't set up yet
2026-02-14T13:16:23.7854645Z             # Handle missing tables gracefully (e.g., fact_jobs created by dbt)
2026-02-14T13:16:23.7855120Z             # Use savepoints to handle errors without aborting the entire transaction
2026-02-14T13:16:23.7855467Z     
2026-02-14T13:16:23.7855733Z             fact_jobs_deleted = 0
2026-02-14T13:16:23.7855953Z             staging_jobs_deleted = 0
2026-02-14T13:16:23.7856188Z             enrichments_deleted = 0
2026-02-14T13:16:23.7856409Z             raw_jobs_deleted = 0
2026-02-14T13:16:23.7856610Z     
2026-02-14T13:16:23.7856850Z             # Delete fact_jobs for this campaign (dbt table, may not exist)
2026-02-14T13:16:23.7857237Z >           cur.execute("SAVEPOINT before_fact_jobs_delete")
2026-02-14T13:16:23.7857728Z E           psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:23.7858105Z 
2026-02-14T13:16:23.7858310Z services/campaign_management/campaign_service.py:583: NoActiveSqlTransaction
2026-02-14T13:16:23.7858775Z ---------------------------- Captured stderr setup -----------------------------
2026-02-14T13:16:23.7859232Z Warning: Statement in 01_create_schemas.sql failed: syntax error at or near "it"
2026-02-14T13:16:23.7859630Z LINE 1: create it separately if needed
2026-02-14T13:16:23.7859867Z                ^
2026-02-14T13:16:23.7859970Z 
2026-02-14T13:16:23.7860174Z _______ TestCampaignDeletion.test_delete_campaign_comprehensive_cleanup ________
2026-02-14T13:16:23.7860472Z 
2026-02-14T13:16:23.7860747Z self = <tests.integration.test_campaign_deletion.TestCampaignDeletion object at 0x7f30913d74d0>
2026-02-14T13:16:23.7861417Z campaign_service = <services.campaign_management.campaign_service.CampaignService object at 0x7f307a9b1610>
2026-02-14T13:16:23.7862099Z test_database = '***127.0.0.1:5432/job_search_test'
2026-02-14T13:16:23.7862355Z test_user = 15
2026-02-14T13:16:23.7862456Z 
2026-02-14T13:16:23.7862574Z     def test_delete_campaign_comprehensive_cleanup(
2026-02-14T13:16:23.7862890Z         self, campaign_service, test_database, test_user
2026-02-14T13:16:23.7863154Z     ):
2026-02-14T13:16:23.7863378Z         """Test comprehensive cleanup when deleting a campaign."""
2026-02-14T13:16:23.7863963Z         db = PostgreSQLDatabase(test_database)
2026-02-14T13:16:23.7864208Z     
2026-02-14T13:16:23.7864368Z         # Create campaign
2026-02-14T13:16:23.7864611Z         campaign_id = campaign_service.create_campaign(
2026-02-14T13:16:23.7864894Z             campaign_name="Test Campaign",
2026-02-14T13:16:23.7865141Z             query="Software Engineer",
2026-02-14T13:16:23.7865364Z             country="us",
2026-02-14T13:16:23.7865559Z             user_id=test_user,
2026-02-14T13:16:23.7865750Z         )
2026-02-14T13:16:23.7865895Z     
2026-02-14T13:16:23.7866141Z         # Create tables if they don't exist (they're created by dbt normally)
2026-02-14T13:16:23.7866480Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7866704Z             # Create staging table
2026-02-14T13:16:23.7866924Z             cur.execute(
2026-02-14T13:16:23.7867112Z                 """
2026-02-14T13:16:23.7867359Z                 CREATE TABLE IF NOT EXISTS staging.jsearch_job_postings (
2026-02-14T13:16:23.7867723Z                     jsearch_job_postings_key bigint PRIMARY KEY,
2026-02-14T13:16:23.7868016Z                     jsearch_job_id varchar,
2026-02-14T13:16:23.7868263Z                     campaign_id integer,
2026-02-14T13:16:23.7868493Z                     job_title varchar,
2026-02-14T13:16:23.7868726Z                     employer_name varchar,
2026-02-14T13:16:23.7868967Z                     job_location varchar,
2026-02-14T13:16:23.7869195Z                     dwh_load_date date,
2026-02-14T13:16:23.7869447Z                     dwh_load_timestamp timestamp,
2026-02-14T13:16:23.7869706Z                     dwh_source_system varchar
2026-02-14T13:16:23.7869934Z                 )
2026-02-14T13:16:23.7870085Z                 """
2026-02-14T13:16:23.7870246Z             )
2026-02-14T13:16:23.7870417Z             # Create fact_jobs table
2026-02-14T13:16:23.7870999Z             cur.execute(
2026-02-14T13:16:23.7871196Z                 """
2026-02-14T13:16:23.7871418Z                 CREATE TABLE IF NOT EXISTS marts.fact_jobs (
2026-02-14T13:16:23.7871708Z                     jsearch_job_id varchar,
2026-02-14T13:16:23.7872055Z                     campaign_id integer,
2026-02-14T13:16:23.7872288Z                     job_title varchar,
2026-02-14T13:16:23.7872507Z                     job_summary text,
2026-02-14T13:16:23.7872748Z                     employer_name varchar,
2026-02-14T13:16:23.7872978Z                     job_location varchar,
2026-02-14T13:16:23.7873219Z                     employment_type varchar,
2026-02-14T13:16:23.7873484Z                     job_posted_at_datetime_utc timestamp,
2026-02-14T13:16:23.7873967Z                     apply_options jsonb,
2026-02-14T13:16:23.7874207Z                     job_apply_link varchar,
2026-02-14T13:16:23.7874443Z                     extracted_skills jsonb,
2026-02-14T13:16:23.7874688Z                     job_min_salary numeric,
2026-02-14T13:16:23.7874917Z                     job_max_salary numeric,
2026-02-14T13:16:23.7875163Z                     job_salary_period varchar,
2026-02-14T13:16:23.7875413Z                     job_salary_currency varchar,
2026-02-14T13:16:23.7875674Z                     remote_work_type varchar,
2026-02-14T13:16:23.7875916Z                     seniority_level varchar,
2026-02-14T13:16:23.7876162Z                     company_key varchar,
2026-02-14T13:16:23.7876393Z                     dwh_load_date date,
2026-02-14T13:16:23.7876633Z                     dwh_load_timestamp timestamp,
2026-02-14T13:16:23.7876895Z                     dwh_source_system varchar,
2026-02-14T13:16:23.7877168Z                     PRIMARY KEY (jsearch_job_id, campaign_id)
2026-02-14T13:16:23.7877430Z                 )
2026-02-14T13:16:23.7877584Z                 """
2026-02-14T13:16:23.7877749Z             )
2026-02-14T13:16:23.7877969Z             # Create chatgpt_enrichments table if it doesn't exist
2026-02-14T13:16:23.7878254Z             cur.execute(
2026-02-14T13:16:23.7878431Z                 """
2026-02-14T13:16:23.7878669Z                 CREATE TABLE IF NOT EXISTS staging.chatgpt_enrichments (
2026-02-14T13:16:23.7879034Z                     jsearch_job_postings_key bigint PRIMARY KEY,
2026-02-14T13:16:23.7879329Z                     chatgpt_enriched_at timestamp,
2026-02-14T13:16:23.7879605Z                     chatgpt_enrichment_status jsonb,
2026-02-14T13:16:23.7879861Z                     dwh_load_date date,
2026-02-14T13:16:23.7880100Z                     dwh_load_timestamp timestamp
2026-02-14T13:16:23.7880328Z                 )
2026-02-14T13:16:23.7880487Z                 """
2026-02-14T13:16:23.7880649Z             )
2026-02-14T13:16:23.7880793Z     
2026-02-14T13:16:23.7880958Z         # Insert data in all related tables
2026-02-14T13:16:23.7881197Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7881411Z             # Raw job
2026-02-14T13:16:23.7881586Z             cur.execute(
2026-02-14T13:16:23.7881767Z                 """
2026-02-14T13:16:23.7881962Z                 INSERT INTO raw.jsearch_job_postings
2026-02-14T13:16:23.7882343Z                 (jsearch_job_postings_key, raw_payload, dwh_load_date, dwh_load_timestamp,
2026-02-14T13:16:23.7882728Z                  dwh_source_system, campaign_id)
2026-02-14T13:16:23.7883049Z                 VALUES (1, '{}'::jsonb, CURRENT_DATE, NOW(), 'test', %s)
2026-02-14T13:16:23.7883333Z                 """,
2026-02-14T13:16:23.7883507Z                 (campaign_id,),
2026-02-14T13:16:23.7883924Z             )
2026-02-14T13:16:23.7884075Z     
2026-02-14T13:16:23.7884225Z             # Staging job
2026-02-14T13:16:23.7884410Z             cur.execute(
2026-02-14T13:16:23.7884584Z                 """
2026-02-14T13:16:23.7884778Z                 INSERT INTO staging.jsearch_job_postings
2026-02-14T13:16:23.7885188Z                 (jsearch_job_postings_key, jsearch_job_id, campaign_id, job_title, employer_name,
2026-02-14T13:16:23.7885805Z                  job_location, dwh_load_date, dwh_load_timestamp, dwh_source_system)
2026-02-14T13:16:23.7886271Z                 VALUES (1, 'test_job_123', %s, 'Software Engineer', 'Test Company', 'Remote',
2026-02-14T13:16:23.7886747Z                         CURRENT_DATE, NOW(), 'test')
2026-02-14T13:16:23.7886986Z                 """,
2026-02-14T13:16:23.7887160Z                 (campaign_id,),
2026-02-14T13:16:23.7887350Z             )
2026-02-14T13:16:23.7887497Z     
2026-02-14T13:16:23.7887660Z             # Staging ChatGPT enrichment
2026-02-14T13:16:23.7887881Z             cur.execute(
2026-02-14T13:16:23.7888059Z                 """
2026-02-14T13:16:23.7888261Z                 INSERT INTO staging.chatgpt_enrichments
2026-02-14T13:16:23.7888652Z                 (jsearch_job_postings_key, chatgpt_enriched_at, chatgpt_enrichment_status,
2026-02-14T13:16:23.7889037Z                  dwh_load_date, dwh_load_timestamp)
2026-02-14T13:16:23.7889349Z                 VALUES (1, NOW(), '{}'::jsonb, CURRENT_DATE, NOW())
2026-02-14T13:16:23.7889620Z                 """
2026-02-14T13:16:23.7889779Z             )
2026-02-14T13:16:23.7889924Z     
2026-02-14T13:16:23.7890060Z             # Fact job
2026-02-14T13:16:23.7890235Z             cur.execute(
2026-02-14T13:16:23.7890415Z                 """
2026-02-14T13:16:23.7890601Z                 INSERT INTO marts.fact_jobs
2026-02-14T13:16:23.7890936Z                 (jsearch_job_id, campaign_id, job_title, employer_name, job_location,
2026-02-14T13:16:23.7891344Z                  dwh_load_date, dwh_load_timestamp, dwh_source_system)
2026-02-14T13:16:23.7891740Z                 VALUES ('test_job_123', %s, 'Software Engineer', 'Test Company', 'Remote',
2026-02-14T13:16:23.7892108Z                         CURRENT_DATE, NOW(), 'test')
2026-02-14T13:16:23.7892342Z                 """,
2026-02-14T13:16:23.7892510Z                 (campaign_id,),
2026-02-14T13:16:23.7892707Z             )
2026-02-14T13:16:23.7892851Z     
2026-02-14T13:16:23.7892998Z             # Ranking
2026-02-14T13:16:23.7893169Z             cur.execute(
2026-02-14T13:16:23.7893345Z                 """
2026-02-14T13:16:23.7893525Z                 INSERT INTO marts.dim_ranking
2026-02-14T13:16:23.7893968Z                 (jsearch_job_id, campaign_id, rank_score, ranked_at, ranked_date,
2026-02-14T13:16:23.7894335Z                  dwh_load_timestamp, dwh_source_system)
2026-02-14T13:16:23.7894673Z                 VALUES ('test_job_123', %s, 85.5, NOW(), CURRENT_DATE, NOW(), 'test')
2026-02-14T13:16:23.7894992Z                 """,
2026-02-14T13:16:23.7895161Z                 (campaign_id,),
2026-02-14T13:16:23.7895350Z             )
2026-02-14T13:16:23.7895494Z     
2026-02-14T13:16:23.7895644Z         # Delete campaign
2026-02-14T13:16:23.7895872Z >       campaign_service.delete_campaign(campaign_id)
2026-02-14T13:16:23.7896075Z 
2026-02-14T13:16:23.7896188Z tests/integration/test_campaign_deletion.py:551: 
2026-02-14T13:16:23.7896506Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2026-02-14T13:16:23.7896725Z 
2026-02-14T13:16:23.7896993Z self = <services.campaign_management.campaign_service.CampaignService object at 0x7f307a9b1610>
2026-02-14T13:16:23.7897455Z campaign_id = 10
2026-02-14T13:16:23.7897564Z 
2026-02-14T13:16:23.7897683Z     def delete_campaign(self, campaign_id: int) -> str:
2026-02-14T13:16:23.7897982Z         """Delete a campaign and all related data.
2026-02-14T13:16:23.7898215Z     
2026-02-14T13:16:23.7898454Z         This method ensures complete cleanup of campaign-related data:
2026-02-14T13:16:23.7898860Z         - Rankings (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7899242Z         - Fact jobs (manually deleted since dbt table may not have FK)
2026-02-14T13:16:23.7899634Z         - ETL metrics (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7900048Z         - User job status (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7900579Z         - Job notes (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7900930Z         - Staging jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7901223Z         - Raw jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7901544Z         - ChatGPT enrichments (deleted via join to staging jobs)
2026-02-14T13:16:23.7901973Z     
2026-02-14T13:16:23.7902114Z         Args:
2026-02-14T13:16:23.7902291Z             campaign_id: Campaign ID to delete
2026-02-14T13:16:23.7902522Z     
2026-02-14T13:16:23.7902657Z         Returns:
2026-02-14T13:16:23.7902834Z             Deleted campaign name
2026-02-14T13:16:23.7903031Z     
2026-02-14T13:16:23.7903172Z         Raises:
2026-02-14T13:16:23.7903352Z             ValueError: If campaign not found
2026-02-14T13:16:23.7903585Z         """
2026-02-14T13:16:23.7903984Z         # Get campaign name for return value
2026-02-14T13:16:23.7904238Z         with self.db.get_cursor() as cur:
2026-02-14T13:16:23.7904520Z             cur.execute(GET_CAMPAIGN_NAME, (campaign_id,))
2026-02-14T13:16:23.7904813Z             result = cur.fetchone()
2026-02-14T13:16:23.7905024Z     
2026-02-14T13:16:23.7905165Z             if not result:
2026-02-14T13:16:23.7905427Z                 raise ValueError(f"Campaign {campaign_id} not found")
2026-02-14T13:16:23.7905713Z     
2026-02-14T13:16:23.7905873Z             campaign_name = result[0]
2026-02-14T13:16:23.7906083Z     
2026-02-14T13:16:23.7906329Z             # Manual cleanup for tables without FK constraints or CASCADE DELETE
2026-02-14T13:16:23.7906771Z             # This ensures data is removed even if FK constraints aren't set up yet
2026-02-14T13:16:23.7907209Z             # Handle missing tables gracefully (e.g., fact_jobs created by dbt)
2026-02-14T13:16:23.7907652Z             # Use savepoints to handle errors without aborting the entire transaction
2026-02-14T13:16:23.7907987Z     
2026-02-14T13:16:23.7908148Z             fact_jobs_deleted = 0
2026-02-14T13:16:23.7908367Z             staging_jobs_deleted = 0
2026-02-14T13:16:23.7908596Z             enrichments_deleted = 0
2026-02-14T13:16:23.7908821Z             raw_jobs_deleted = 0
2026-02-14T13:16:23.7909013Z     
2026-02-14T13:16:23.7909247Z             # Delete fact_jobs for this campaign (dbt table, may not exist)
2026-02-14T13:16:23.7909616Z >           cur.execute("SAVEPOINT before_fact_jobs_delete")
2026-02-14T13:16:23.7910100Z E           psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:23.7910474Z 
2026-02-14T13:16:23.7910679Z services/campaign_management/campaign_service.py:583: NoActiveSqlTransaction
2026-02-14T13:16:23.7911131Z ---------------------------- Captured stderr setup -----------------------------
2026-02-14T13:16:23.7911578Z Warning: Statement in 01_create_schemas.sql failed: syntax error at or near "it"
2026-02-14T13:16:23.7911947Z LINE 1: create it separately if needed
2026-02-14T13:16:23.7912171Z                ^
2026-02-14T13:16:23.7912270Z 
2026-02-14T13:16:23.7912472Z ________ TestCampaignDeletion.test_new_campaign_does_not_show_old_jobs _________
2026-02-14T13:16:23.7912774Z 
2026-02-14T13:16:23.7913039Z self = <tests.integration.test_campaign_deletion.TestCampaignDeletion object at 0x7f30913d7a50>
2026-02-14T13:16:23.7913815Z campaign_service = <services.campaign_management.campaign_service.CampaignService object at 0x7f307a744ad0>
2026-02-14T13:16:23.7914415Z job_service = <services.jobs.job_service.JobService object at 0x7f307a6e2690>
2026-02-14T13:16:23.7914950Z test_database = '***127.0.0.1:5432/job_search_test'
2026-02-14T13:16:23.7915211Z test_user = 16
2026-02-14T13:16:23.7915310Z 
2026-02-14T13:16:23.7915425Z     def test_new_campaign_does_not_show_old_jobs(
2026-02-14T13:16:23.7915758Z         self, campaign_service, job_service, test_database, test_user
2026-02-14T13:16:23.7916062Z     ):
2026-02-14T13:16:23.7916317Z         """Test that a new campaign doesn't show jobs from a deleted campaign."""
2026-02-14T13:16:23.7916689Z         db = PostgreSQLDatabase(test_database)
2026-02-14T13:16:23.7917048Z     
2026-02-14T13:16:23.7917211Z         # Create first campaign
2026-02-14T13:16:23.7917470Z         campaign_id_1 = campaign_service.create_campaign(
2026-02-14T13:16:23.7917759Z             campaign_name="Campaign 1",
2026-02-14T13:16:23.7918107Z             query="Software Engineer",
2026-02-14T13:16:23.7918327Z             country="us",
2026-02-14T13:16:23.7918526Z             user_id=test_user,
2026-02-14T13:16:23.7918718Z         )
2026-02-14T13:16:23.7918865Z     
2026-02-14T13:16:23.7919135Z         # Create fact_jobs and dim_companies tables (ensure company_key column exists)
2026-02-14T13:16:23.7919504Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7919857Z             # Create fact_jobs table if it doesn't exist (with all columns used by queries)
2026-02-14T13:16:23.7920227Z             cur.execute(
2026-02-14T13:16:23.7920413Z                 """
2026-02-14T13:16:23.7920626Z                 CREATE TABLE IF NOT EXISTS marts.fact_jobs (
2026-02-14T13:16:23.7920916Z                     jsearch_job_id varchar,
2026-02-14T13:16:23.7921155Z                     campaign_id integer,
2026-02-14T13:16:23.7921390Z                     job_title varchar,
2026-02-14T13:16:23.7921610Z                     job_summary text,
2026-02-14T13:16:23.7921846Z                     employer_name varchar,
2026-02-14T13:16:23.7922079Z                     job_location varchar,
2026-02-14T13:16:23.7922321Z                     employment_type varchar,
2026-02-14T13:16:23.7922585Z                     job_posted_at_datetime_utc timestamp,
2026-02-14T13:16:23.7922846Z                     apply_options jsonb,
2026-02-14T13:16:23.7923080Z                     job_apply_link varchar,
2026-02-14T13:16:23.7923314Z                     extracted_skills jsonb,
2026-02-14T13:16:23.7923548Z                     job_min_salary numeric,
2026-02-14T13:16:23.7924003Z                     job_max_salary numeric,
2026-02-14T13:16:23.7924251Z                     job_salary_period varchar,
2026-02-14T13:16:23.7924506Z                     job_salary_currency varchar,
2026-02-14T13:16:23.7924763Z                     remote_work_type varchar,
2026-02-14T13:16:23.7925008Z                     seniority_level varchar,
2026-02-14T13:16:23.7925241Z                     company_key varchar,
2026-02-14T13:16:23.7925479Z                     dwh_load_date date,
2026-02-14T13:16:23.7925718Z                     dwh_load_timestamp timestamp,
2026-02-14T13:16:23.7925982Z                     dwh_source_system varchar,
2026-02-14T13:16:23.7926253Z                     PRIMARY KEY (jsearch_job_id, campaign_id)
2026-02-14T13:16:23.7926521Z                 )
2026-02-14T13:16:23.7926675Z                 """
2026-02-14T13:16:23.7926839Z             )
2026-02-14T13:16:23.7927037Z             # Add company_key column if it doesn't exist
2026-02-14T13:16:23.7927291Z             cur.execute(
2026-02-14T13:16:23.7927470Z                 """
2026-02-14T13:16:23.7927632Z                 DO $$
2026-02-14T13:16:23.7927806Z                 BEGIN
2026-02-14T13:16:23.7927987Z                     IF NOT EXISTS (
2026-02-14T13:16:23.7928249Z                         SELECT 1 FROM information_schema.columns
2026-02-14T13:16:23.7928540Z                         WHERE table_schema = 'marts'
2026-02-14T13:16:23.7928810Z                         AND table_name = 'fact_jobs'
2026-02-14T13:16:23.7929087Z                         AND column_name = 'company_key'
2026-02-14T13:16:23.7929330Z                     ) THEN
2026-02-14T13:16:23.7929614Z                         ALTER TABLE marts.fact_jobs ADD COLUMN company_key varchar;
2026-02-14T13:16:23.7929931Z                     END IF;
2026-02-14T13:16:23.7930129Z                 END $$;
2026-02-14T13:16:23.7930301Z                 """
2026-02-14T13:16:23.7930461Z             )
2026-02-14T13:16:23.7930682Z             # Create dim_companies table (required by job queries)
2026-02-14T13:16:23.7930977Z             cur.execute(
2026-02-14T13:16:23.7931157Z                 """
2026-02-14T13:16:23.7931496Z                 CREATE TABLE IF NOT EXISTS marts.dim_companies (
2026-02-14T13:16:23.7931809Z                     company_key varchar PRIMARY KEY,
2026-02-14T13:16:23.7932069Z                     company_name varchar,
2026-02-14T13:16:23.7932317Z                     company_size varchar,
2026-02-14T13:16:23.7932656Z                     rating numeric,
2026-02-14T13:16:23.7932876Z                     company_link varchar,
2026-02-14T13:16:23.7933099Z                     logo varchar
2026-02-14T13:16:23.7933293Z                 )
2026-02-14T13:16:23.7933452Z                 """
2026-02-14T13:16:23.7933779Z             )
2026-02-14T13:16:23.7934054Z             # Create user_job_status table (required by job queries)
2026-02-14T13:16:23.7934344Z             cur.execute(
2026-02-14T13:16:23.7934522Z                 """
2026-02-14T13:16:23.7934737Z                 CREATE TABLE IF NOT EXISTS marts.user_job_status (
2026-02-14T13:16:23.7935068Z                     user_job_status_id SERIAL PRIMARY KEY,
2026-02-14T13:16:23.7935360Z                     jsearch_job_id varchar NOT NULL,
2026-02-14T13:16:23.7935626Z                     user_id integer NOT NULL,
2026-02-14T13:16:23.7935880Z                     status varchar NOT NULL,
2026-02-14T13:16:23.7936163Z                     created_at timestamp DEFAULT CURRENT_TIMESTAMP,
2026-02-14T13:16:23.7936511Z                     updated_at timestamp DEFAULT CURRENT_TIMESTAMP,
2026-02-14T13:16:23.7936905Z                     CONSTRAINT unique_user_job_status UNIQUE (user_id, jsearch_job_id)
2026-02-14T13:16:23.7937247Z                 )
2026-02-14T13:16:23.7937400Z                 """
2026-02-14T13:16:23.7937560Z             )
2026-02-14T13:16:23.7937764Z             # Create job_notes table (required by job queries)
2026-02-14T13:16:23.7938049Z             cur.execute(
2026-02-14T13:16:23.7938238Z                 """
2026-02-14T13:16:23.7938453Z                 CREATE TABLE IF NOT EXISTS marts.job_notes (
2026-02-14T13:16:23.7938748Z                     note_id SERIAL PRIMARY KEY,
2026-02-14T13:16:23.7939014Z                     jsearch_job_id varchar NOT NULL,
2026-02-14T13:16:23.7939278Z                     user_id integer NOT NULL,
2026-02-14T13:16:23.7939514Z                     note_text text,
2026-02-14T13:16:23.7939780Z                     created_at timestamp DEFAULT CURRENT_TIMESTAMP,
2026-02-14T13:16:23.7940117Z                     updated_at timestamp DEFAULT CURRENT_TIMESTAMP,
2026-02-14T13:16:23.7940498Z                     CONSTRAINT unique_job_user_note UNIQUE (jsearch_job_id, user_id)
2026-02-14T13:16:23.7940832Z                 )
2026-02-14T13:16:23.7940985Z                 """
2026-02-14T13:16:23.7941145Z             )
2026-02-14T13:16:23.7941290Z     
2026-02-14T13:16:23.7941463Z         # Insert job data for first campaign
2026-02-14T13:16:23.7941707Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7941925Z             # Fact job
2026-02-14T13:16:23.7942100Z             cur.execute(
2026-02-14T13:16:23.7942278Z                 """
2026-02-14T13:16:23.7942461Z                 INSERT INTO marts.fact_jobs
2026-02-14T13:16:23.7942808Z                 (jsearch_job_id, campaign_id, job_title, employer_name, job_location,
2026-02-14T13:16:23.7943217Z                  dwh_load_date, dwh_load_timestamp, dwh_source_system)
2026-02-14T13:16:23.7943590Z                 VALUES ('old_job_123', %s, 'Old Job', 'Old Company', 'Remote',
2026-02-14T13:16:23.7944115Z                         CURRENT_DATE, NOW(), 'test')
2026-02-14T13:16:23.7944353Z                 """,
2026-02-14T13:16:23.7944535Z                 (campaign_id_1,),
2026-02-14T13:16:23.7944736Z             )
2026-02-14T13:16:23.7944891Z             # Ranking
2026-02-14T13:16:23.7945069Z             cur.execute(
2026-02-14T13:16:23.7945245Z                 """
2026-02-14T13:16:23.7945445Z                 INSERT INTO marts.dim_ranking
2026-02-14T13:16:23.7945769Z                 (jsearch_job_id, campaign_id, rank_score, ranked_at, ranked_date,
2026-02-14T13:16:23.7946132Z                  dwh_load_timestamp, dwh_source_system)
2026-02-14T13:16:23.7946599Z                 VALUES ('old_job_123', %s, 85.5, NOW(), CURRENT_DATE, NOW(), 'test')
2026-02-14T13:16:23.7946932Z                 """,
2026-02-14T13:16:23.7947101Z                 (campaign_id_1,),
2026-02-14T13:16:23.7947302Z             )
2026-02-14T13:16:23.7947553Z     
2026-02-14T13:16:23.7947706Z         # Delete first campaign
2026-02-14T13:16:23.7947963Z >       campaign_service.delete_campaign(campaign_id_1)
2026-02-14T13:16:23.7948167Z 
2026-02-14T13:16:23.7948295Z tests/integration/test_campaign_deletion.py:709: 
2026-02-14T13:16:23.7948615Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2026-02-14T13:16:23.7948832Z 
2026-02-14T13:16:23.7949101Z self = <services.campaign_management.campaign_service.CampaignService object at 0x7f307a744ad0>
2026-02-14T13:16:23.7949534Z campaign_id = 11
2026-02-14T13:16:23.7949638Z 
2026-02-14T13:16:23.7949760Z     def delete_campaign(self, campaign_id: int) -> str:
2026-02-14T13:16:23.7950065Z         """Delete a campaign and all related data.
2026-02-14T13:16:23.7950314Z     
2026-02-14T13:16:23.7950554Z         This method ensures complete cleanup of campaign-related data:
2026-02-14T13:16:23.7950961Z         - Rankings (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7951352Z         - Fact jobs (manually deleted since dbt table may not have FK)
2026-02-14T13:16:23.7951748Z         - ETL metrics (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7952167Z         - User job status (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7952603Z         - Job notes (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7952953Z         - Staging jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7953242Z         - Raw jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7953570Z         - ChatGPT enrichments (deleted via join to staging jobs)
2026-02-14T13:16:23.7953973Z     
2026-02-14T13:16:23.7954109Z         Args:
2026-02-14T13:16:23.7954302Z             campaign_id: Campaign ID to delete
2026-02-14T13:16:23.7954529Z     
2026-02-14T13:16:23.7954671Z         Returns:
2026-02-14T13:16:23.7954845Z             Deleted campaign name
2026-02-14T13:16:23.7955047Z     
2026-02-14T13:16:23.7955189Z         Raises:
2026-02-14T13:16:23.7955374Z             ValueError: If campaign not found
2026-02-14T13:16:23.7955601Z         """
2026-02-14T13:16:23.7955775Z         # Get campaign name for return value
2026-02-14T13:16:23.7956024Z         with self.db.get_cursor() as cur:
2026-02-14T13:16:23.7956307Z             cur.execute(GET_CAMPAIGN_NAME, (campaign_id,))
2026-02-14T13:16:23.7956595Z             result = cur.fetchone()
2026-02-14T13:16:23.7956802Z     
2026-02-14T13:16:23.7956958Z             if not result:
2026-02-14T13:16:23.7957217Z                 raise ValueError(f"Campaign {campaign_id} not found")
2026-02-14T13:16:23.7957503Z     
2026-02-14T13:16:23.7957660Z             campaign_name = result[0]
2026-02-14T13:16:23.7957876Z     
2026-02-14T13:16:23.7958124Z             # Manual cleanup for tables without FK constraints or CASCADE DELETE
2026-02-14T13:16:23.7958574Z             # This ensures data is removed even if FK constraints aren't set up yet
2026-02-14T13:16:23.7959021Z             # Handle missing tables gracefully (e.g., fact_jobs created by dbt)
2026-02-14T13:16:23.7959464Z             # Use savepoints to handle errors without aborting the entire transaction
2026-02-14T13:16:23.7959805Z     
2026-02-14T13:16:23.7959953Z             fact_jobs_deleted = 0
2026-02-14T13:16:23.7960175Z             staging_jobs_deleted = 0
2026-02-14T13:16:23.7960397Z             enrichments_deleted = 0
2026-02-14T13:16:23.7960622Z             raw_jobs_deleted = 0
2026-02-14T13:16:23.7960816Z     
2026-02-14T13:16:23.7961050Z             # Delete fact_jobs for this campaign (dbt table, may not exist)
2026-02-14T13:16:23.7961419Z >           cur.execute("SAVEPOINT before_fact_jobs_delete")
2026-02-14T13:16:23.7962011Z E           psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:23.7962400Z 
2026-02-14T13:16:23.7962602Z services/campaign_management/campaign_service.py:583: NoActiveSqlTransaction
2026-02-14T13:16:23.7963056Z ---------------------------- Captured stderr setup -----------------------------
2026-02-14T13:16:23.7963845Z Warning: Statement in 01_create_schemas.sql failed: syntax error at or near "it"
2026-02-14T13:16:23.7964265Z LINE 1: create it separately if needed
2026-02-14T13:16:23.7964492Z                ^
2026-02-14T13:16:23.7964594Z 
2026-02-14T13:16:23.7964805Z ______ TestCampaignDeletion.test_job_queries_only_show_existing_campaigns ______
2026-02-14T13:16:23.7965107Z 
2026-02-14T13:16:23.7965374Z self = <tests.integration.test_campaign_deletion.TestCampaignDeletion object at 0x7f30913d4e90>
2026-02-14T13:16:23.7966054Z campaign_service = <services.campaign_management.campaign_service.CampaignService object at 0x7f307a7756d0>
2026-02-14T13:16:23.7966662Z job_service = <services.jobs.job_service.JobService object at 0x7f307a776590>
2026-02-14T13:16:23.7967207Z test_database = '***127.0.0.1:5432/job_search_test'
2026-02-14T13:16:23.7967459Z test_user = 17
2026-02-14T13:16:23.7967564Z 
2026-02-14T13:16:23.7967686Z     def test_job_queries_only_show_existing_campaigns(
2026-02-14T13:16:23.7968044Z         self, campaign_service, job_service, test_database, test_user
2026-02-14T13:16:23.7968343Z     ):
2026-02-14T13:16:23.7968590Z         """Test that job queries only return jobs for existing campaigns."""
2026-02-14T13:16:23.7968937Z         db = PostgreSQLDatabase(test_database)
2026-02-14T13:16:23.7969179Z     
2026-02-14T13:16:23.7969328Z         # Create campaign
2026-02-14T13:16:23.7969572Z         campaign_id = campaign_service.create_campaign(
2026-02-14T13:16:23.7969855Z             campaign_name="Test Campaign",
2026-02-14T13:16:23.7970102Z             query="Software Engineer",
2026-02-14T13:16:23.7970338Z             country="us",
2026-02-14T13:16:23.7970535Z             user_id=test_user,
2026-02-14T13:16:23.7970742Z         )
2026-02-14T13:16:23.7970883Z     
2026-02-14T13:16:23.7971166Z         # Create fact_jobs and dim_companies tables (ensure company_key column exists)
2026-02-14T13:16:23.7971533Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7971896Z             # Create fact_jobs table if it doesn't exist (with all columns used by queries)
2026-02-14T13:16:23.7972263Z             cur.execute(
2026-02-14T13:16:23.7972449Z                 """
2026-02-14T13:16:23.7972666Z                 CREATE TABLE IF NOT EXISTS marts.fact_jobs (
2026-02-14T13:16:23.7972952Z                     jsearch_job_id varchar,
2026-02-14T13:16:23.7973198Z                     campaign_id integer,
2026-02-14T13:16:23.7973428Z                     job_title varchar,
2026-02-14T13:16:23.7973766Z                     job_summary text,
2026-02-14T13:16:23.7973998Z                     employer_name varchar,
2026-02-14T13:16:23.7974241Z                     job_location varchar,
2026-02-14T13:16:23.7974487Z                     employment_type varchar,
2026-02-14T13:16:23.7974763Z                     job_posted_at_datetime_utc timestamp,
2026-02-14T13:16:23.7975032Z                     apply_options jsonb,
2026-02-14T13:16:23.7975273Z                     job_apply_link varchar,
2026-02-14T13:16:23.7975515Z                     extracted_skills jsonb,
2026-02-14T13:16:23.7975747Z                     job_min_salary numeric,
2026-02-14T13:16:23.7975976Z                     job_max_salary numeric,
2026-02-14T13:16:23.7976212Z                     job_salary_period varchar,
2026-02-14T13:16:23.7976469Z                     job_salary_currency varchar,
2026-02-14T13:16:23.7976720Z                     remote_work_type varchar,
2026-02-14T13:16:23.7976970Z                     seniority_level varchar,
2026-02-14T13:16:23.7977204Z                     company_key varchar,
2026-02-14T13:16:23.7977439Z                     dwh_load_date date,
2026-02-14T13:16:23.7977685Z                     dwh_load_timestamp timestamp,
2026-02-14T13:16:23.7978071Z                     dwh_source_system varchar,
2026-02-14T13:16:23.7978358Z                     PRIMARY KEY (jsearch_job_id, campaign_id)
2026-02-14T13:16:23.7978617Z                 )
2026-02-14T13:16:23.7978780Z                 """
2026-02-14T13:16:23.7979051Z             )
2026-02-14T13:16:23.7979251Z             # Add company_key column if it doesn't exist
2026-02-14T13:16:23.7979507Z             cur.execute(
2026-02-14T13:16:23.7979686Z                 """
2026-02-14T13:16:23.7979854Z                 DO $$
2026-02-14T13:16:23.7980019Z                 BEGIN
2026-02-14T13:16:23.7980205Z                     IF NOT EXISTS (
2026-02-14T13:16:23.7980463Z                         SELECT 1 FROM information_schema.columns
2026-02-14T13:16:23.7980760Z                         WHERE table_schema = 'marts'
2026-02-14T13:16:23.7981022Z                         AND table_name = 'fact_jobs'
2026-02-14T13:16:23.7981300Z                         AND column_name = 'company_key'
2026-02-14T13:16:23.7981551Z                     ) THEN
2026-02-14T13:16:23.7981833Z                         ALTER TABLE marts.fact_jobs ADD COLUMN company_key varchar;
2026-02-14T13:16:23.7982167Z                     END IF;
2026-02-14T13:16:23.7982351Z                 END $$;
2026-02-14T13:16:23.7982527Z                 """
2026-02-14T13:16:23.7982682Z             )
2026-02-14T13:16:23.7982907Z             # Create dim_companies table (required by job queries)
2026-02-14T13:16:23.7983197Z             cur.execute(
2026-02-14T13:16:23.7983376Z                 """
2026-02-14T13:16:23.7983591Z                 CREATE TABLE IF NOT EXISTS marts.dim_companies (
2026-02-14T13:16:23.7984131Z                     company_key varchar PRIMARY KEY,
2026-02-14T13:16:23.7984399Z                     company_name varchar,
2026-02-14T13:16:23.7984640Z                     company_size varchar,
2026-02-14T13:16:23.7984875Z                     rating numeric,
2026-02-14T13:16:23.7985094Z                     company_link varchar,
2026-02-14T13:16:23.7985328Z                     logo varchar
2026-02-14T13:16:23.7985519Z                 )
2026-02-14T13:16:23.7985680Z                 """
2026-02-14T13:16:23.7985834Z             )
2026-02-14T13:16:23.7985987Z     
2026-02-14T13:16:23.7986134Z         # Insert job data
2026-02-14T13:16:23.7986343Z         with db.get_cursor() as cur:
2026-02-14T13:16:23.7986560Z             # Fact job
2026-02-14T13:16:23.7986738Z             cur.execute(
2026-02-14T13:16:23.7986918Z                 """
2026-02-14T13:16:23.7987003Z                 INSERT INTO marts.fact_jobs
2026-02-14T13:16:23.7987182Z                 (jsearch_job_id, campaign_id, job_title, employer_name, job_location,
2026-02-14T13:16:23.7987319Z                  dwh_load_date, dwh_load_timestamp, dwh_source_system)
2026-02-14T13:16:23.7987475Z                 VALUES ('test_job_123', %s, 'Test Job', 'Test Company', 'Remote',
2026-02-14T13:16:23.7987561Z                         CURRENT_DATE, NOW(), 'test')
2026-02-14T13:16:23.7987623Z                 """,
2026-02-14T13:16:23.7987706Z                 (campaign_id,),
2026-02-14T13:16:23.7987764Z             )
2026-02-14T13:16:23.7987827Z             # Ranking
2026-02-14T13:16:23.7987898Z             cur.execute(
2026-02-14T13:16:23.7987957Z                 """
2026-02-14T13:16:23.7988045Z                 INSERT INTO marts.dim_ranking
2026-02-14T13:16:23.7988206Z                 (jsearch_job_id, campaign_id, rank_score, ranked_at, ranked_date,
2026-02-14T13:16:23.7988310Z                  dwh_load_timestamp, dwh_source_system)
2026-02-14T13:16:23.7988471Z                 VALUES ('test_job_123', %s, 85.5, NOW(), CURRENT_DATE, NOW(), 'test')
2026-02-14T13:16:23.7988532Z                 """,
2026-02-14T13:16:23.7988610Z                 (campaign_id,),
2026-02-14T13:16:23.7988669Z             )
2026-02-14T13:16:23.7988727Z     
2026-02-14T13:16:23.7988844Z         # Verify jobs are returned for existing campaign
2026-02-14T13:16:23.7989020Z         jobs = job_service.get_jobs_for_campaign(campaign_id, user_id=test_user)
2026-02-14T13:16:23.7989292Z         assert len(jobs) == 1, "Should return job for existing campaign"
2026-02-14T13:16:23.7989355Z     
2026-02-14T13:16:23.7989433Z         # Delete campaign
2026-02-14T13:16:23.7989546Z >       campaign_service.delete_campaign(campaign_id)
2026-02-14T13:16:23.7989652Z 
2026-02-14T13:16:23.7989766Z tests/integration/test_campaign_deletion.py:833: 
2026-02-14T13:16:23.7989988Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2026-02-14T13:16:23.7989993Z 
2026-02-14T13:16:23.7990303Z self = <services.campaign_management.campaign_service.CampaignService object at 0x7f307a7756d0>
2026-02-14T13:16:23.7990454Z campaign_id = 12
2026-02-14T13:16:23.7990459Z 
2026-02-14T13:16:23.7990658Z     def delete_campaign(self, campaign_id: int) -> str:
2026-02-14T13:16:23.7990953Z         """Delete a campaign and all related data.
2026-02-14T13:16:23.7991068Z     
2026-02-14T13:16:23.7991262Z         This method ensures complete cleanup of campaign-related data:
2026-02-14T13:16:23.7991502Z         - Rankings (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7991686Z         - Fact jobs (manually deleted since dbt table may not have FK)
2026-02-14T13:16:23.7991885Z         - ETL metrics (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7992177Z         - User job status (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7992380Z         - Job notes (deleted via CASCADE DELETE if FK constraint exists)
2026-02-14T13:16:23.7992528Z         - Staging jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7992738Z         - Raw jobs (deleted via campaign_id filter)
2026-02-14T13:16:23.7992910Z         - ChatGPT enrichments (deleted via join to staging jobs)
2026-02-14T13:16:23.7993005Z     
2026-02-14T13:16:23.7993085Z         Args:
2026-02-14T13:16:23.7993324Z             campaign_id: Campaign ID to delete
2026-02-14T13:16:23.8007419Z     
2026-02-14T13:16:23.8007580Z         Returns:
2026-02-14T13:16:23.8007746Z             Deleted campaign name
2026-02-14T13:16:23.8007819Z     
2026-02-14T13:16:23.8007885Z         Raises:
2026-02-14T13:16:23.8007993Z             ValueError: If campaign not found
2026-02-14T13:16:23.8008064Z         """
2026-02-14T13:16:23.8008173Z         # Get campaign name for return value
2026-02-14T13:16:23.8008266Z         with self.db.get_cursor() as cur:
2026-02-14T13:16:23.8008399Z             cur.execute(GET_CAMPAIGN_NAME, (campaign_id,))
2026-02-14T13:16:23.8008515Z             result = cur.fetchone()
2026-02-14T13:16:23.8008601Z     
2026-02-14T13:16:23.8008675Z             if not result:
2026-02-14T13:16:23.8008832Z                 raise ValueError(f"Campaign {campaign_id} not found")
2026-02-14T13:16:23.8008894Z     
2026-02-14T13:16:23.8008977Z             campaign_name = result[0]
2026-02-14T13:16:23.8009036Z     
2026-02-14T13:16:23.8009226Z             # Manual cleanup for tables without FK constraints or CASCADE DELETE
2026-02-14T13:16:23.8009415Z             # This ensures data is removed even if FK constraints aren't set up yet
2026-02-14T13:16:23.8009583Z             # Handle missing tables gracefully (e.g., fact_jobs created by dbt)
2026-02-14T13:16:23.8009782Z             # Use savepoints to handle errors without aborting the entire transaction
2026-02-14T13:16:23.8009848Z     
2026-02-14T13:16:23.8009930Z             fact_jobs_deleted = 0
2026-02-14T13:16:23.8010014Z             staging_jobs_deleted = 0
2026-02-14T13:16:23.8010092Z             enrichments_deleted = 0
2026-02-14T13:16:23.8010171Z             raw_jobs_deleted = 0
2026-02-14T13:16:23.8010231Z     
2026-02-14T13:16:23.8010397Z             # Delete fact_jobs for this campaign (dbt table, may not exist)
2026-02-14T13:16:23.8010524Z >           cur.execute("SAVEPOINT before_fact_jobs_delete")
2026-02-14T13:16:23.8010810Z E           psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:23.8010817Z 
2026-02-14T13:16:23.8011219Z services/campaign_management/campaign_service.py:583: NoActiveSqlTransaction
2026-02-14T13:16:23.8011395Z ---------------------------- Captured stderr setup -----------------------------
2026-02-14T13:16:23.8011602Z Warning: Statement in 01_create_schemas.sql failed: syntax error at or near "it"
2026-02-14T13:16:23.8011805Z LINE 1: create it separately if needed
2026-02-14T13:16:23.8011870Z                ^
2026-02-14T13:16:23.8011875Z 
2026-02-14T13:16:23.8012043Z _____________________ test_update_campaign_with_jwt_token ______________________
2026-02-14T13:16:23.8012048Z 
2026-02-14T13:16:23.8012151Z test_client = <FlaskClient <Flask 'app'>>
2026-02-14T13:16:23.8012445Z test_database = '***127.0.0.1:5432/job_search_test'
2026-02-14T13:16:23.8012457Z 
2026-02-14T13:16:23.8012639Z     def test_update_campaign_with_jwt_token(test_client, test_database):
2026-02-14T13:16:23.8012771Z         """Campaign update works with JWT identity string."""
2026-02-14T13:16:23.8012911Z >       access_token, user_id, _, _ = _register_user(test_client)
2026-02-14T13:16:23.8013012Z                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-02-14T13:16:23.8013017Z 
2026-02-14T13:16:23.8013124Z tests/integration/test_jwt_auth_api.py:91: 
2026-02-14T13:16:23.8013250Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
2026-02-14T13:16:23.8013258Z 
2026-02-14T13:16:23.8013358Z test_client = <FlaskClient <Flask 'app'>>
2026-02-14T13:16:23.8013363Z 
2026-02-14T13:16:23.8013452Z     def _register_user(test_client):
2026-02-14T13:16:23.8013565Z         username = f"jwt_user_{uuid.uuid4().hex[:8]}"
2026-02-14T13:16:23.8013869Z         email = f"{username}@example.com"
2026-02-14T13:16:23.8013966Z         password = "test_password_123"
2026-02-14T13:16:23.8014028Z     
2026-02-14T13:16:23.8014119Z         response = test_client.post(
2026-02-14T13:16:23.8014196Z             "/api/auth/register",
2026-02-14T13:16:23.8014260Z             json={
2026-02-14T13:16:23.8014345Z                 "username": username,
2026-02-14T13:16:23.8014433Z                 "email": email,
2026-02-14T13:16:23.8014515Z                 "password": password,
2026-02-14T13:16:23.8014607Z                 "password_confirm": password,
2026-02-14T13:16:23.8014676Z             },
2026-02-14T13:16:23.8014739Z         )
2026-02-14T13:16:23.8014838Z >       assert response.status_code == 201
2026-02-14T13:16:23.8014912Z E       assert 500 == 201
2026-02-14T13:16:23.8015154Z E        +  where 500 = <WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]>.status_code
2026-02-14T13:16:23.8015160Z 
2026-02-14T13:16:23.8015303Z tests/integration/test_jwt_auth_api.py:64: AssertionError
2026-02-14T13:16:23.8015468Z ---------------------------- Captured stderr setup -----------------------------
2026-02-14T13:16:23.8015675Z Warning: Statement in 01_create_schemas.sql failed: syntax error at or near "it"
2026-02-14T13:16:23.8015763Z LINE 1: create it separately if needed
2026-02-14T13:16:23.8015825Z                ^
2026-02-14T13:16:23.8015829Z 
2026-02-14T13:16:23.8015993Z ------------------------------ Captured log call -------------------------------
2026-02-14T13:16:23.8016256Z ERROR    blueprints.auth:auth.py:49 Registration error: server closed the connection unexpectedly
2026-02-14T13:16:23.8016382Z 	This probably means the server terminated abnormally
2026-02-14T13:16:23.8016482Z 	before or while processing the request.
2026-02-14T13:16:23.8016602Z =============================== warnings summary ===============================
2026-02-14T13:16:23.8016878Z ../../../../../opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/PyPDF2/__init__.py:21
2026-02-14T13:16:23.8017424Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/PyPDF2/__init__.py:21: DeprecationWarning: PyPDF2 is deprecated. Please move to the pypdf library instead.
2026-02-14T13:16:23.8017494Z     warnings.warn(
2026-02-14T13:16:23.8017499Z 
2026-02-14T13:16:23.8018001Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_success
2026-02-14T13:16:23.8018406Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_missing_resume_id
2026-02-14T13:16:23.8018765Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_not_json
2026-02-14T13:16:23.8019252Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_validation_error
2026-02-14T13:16:23.8019433Z tests/integration/test_jwt_auth_api.py::test_auth_login_returns_token
2026-02-14T13:16:23.8020168Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/jwt/api_jwt.py:153: InsecureKeyLengthWarning: The HMAC key is 15 bytes long, which is below the minimum recommended length of 32 bytes for SHA256. See RFC 7518 Section 3.2.
2026-02-14T13:16:23.8020249Z     return self._jws.encode(
2026-02-14T13:16:23.8020255Z 
2026-02-14T13:16:23.8020617Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_success
2026-02-14T13:16:23.8021004Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_missing_resume_id
2026-02-14T13:16:23.8021363Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_not_json
2026-02-14T13:16:23.8021746Z tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_validation_error
2026-02-14T13:16:23.8022470Z   /opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/jwt/api_jwt.py:371: InsecureKeyLengthWarning: The HMAC key is 15 bytes long, which is below the minimum recommended length of 32 bytes for SHA256. See RFC 7518 Section 3.2.
2026-02-14T13:16:23.8022556Z     decoded = self.decode_complete(
2026-02-14T13:16:23.8022561Z 
2026-02-14T13:16:23.8022763Z -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
2026-02-14T13:16:23.8022892Z ================================ tests coverage ================================
2026-02-14T13:16:23.8023064Z _______________ coverage: platform linux, python 3.11.14-final-0 _______________
2026-02-14T13:16:23.8023068Z 
2026-02-14T13:16:23.8023211Z Name                                                  Stmts   Miss  Cover   Missing
2026-02-14T13:16:23.8023359Z -----------------------------------------------------------------------------------
2026-02-14T13:16:23.8023507Z services/__init__.py                                      0      0   100%
2026-02-14T13:16:23.8023927Z services/airflow_client/__init__.py                       2      0   100%
2026-02-14T13:16:23.8024185Z services/airflow_client/airflow_client.py                81     15    81%   50-64, 74, 140-141, 154-157
2026-02-14T13:16:23.8024336Z services/auth/__init__.py                                 3      0   100%
2026-02-14T13:16:23.8024499Z services/auth/auth_service.py                            32      0   100%
2026-02-14T13:16:23.8024651Z services/auth/queries.py                                  6      0   100%
2026-02-14T13:16:23.8024855Z services/auth/user_service.py                           110     39    65%   89-92, 130, 176-178, 190-239
2026-02-14T13:16:23.8025031Z services/campaign_management/__init__.py                  2      0   100%
2026-02-14T13:16:23.8025689Z services/campaign_management/campaign_service.py        317    166    48%   51, 63-72, 98-110, 128-137, 188, 190, 192, 194, 201, 292-342, 353-454, 471-510, 525-538, 568, 584-654, 681, 700-706, 717-734, 746-751, 763-770, 866-872, 920-923, 941, 972-973, 995-996, 1021-1025
2026-02-14T13:16:23.8025858Z services/campaign_management/queries.py                  15      0   100%
2026-02-14T13:16:23.8026021Z services/documents/__init__.py                            7      0   100%
2026-02-14T13:16:23.8026342Z services/documents/cover_letter_generator.py            122     15    88%   12-13, 38, 46, 101, 103, 105, 107, 204, 225-226, 314-315, 328, 349
2026-02-14T13:16:23.8026978Z services/documents/cover_letter_service.py              212     82    61%   84, 92, 97, 123-128, 177, 180, 183-184, 220, 248, 251, 254-255, 278-286, 318, 321-323, 339-356, 378, 381-382, 408-424, 451, 455-461, 498-500, 518-537
2026-02-14T13:16:23.8027382Z services/documents/document_service.py                   97     16    84%   78, 81, 84-85, 109-111, 135, 138-140, 198, 201-202, 211, 225-227
2026-02-14T13:16:23.8027545Z services/documents/queries.py                            17      0   100%
2026-02-14T13:16:23.8027947Z services/documents/resume_service.py                    180     54    70%   121-129, 184, 187, 190-191, 225-226, 246, 249-251, 277, 280-281, 298-311, 338, 345-349, 379-381, 399-415
2026-02-14T13:16:23.8028228Z services/documents/resume_text_extractor.py              97     15    85%   19-20, 25-26, 69, 79, 84, 97, 102-105, 145-147
2026-02-14T13:16:23.8028514Z services/documents/storage_service.py                    71     16    77%   111-112, 131, 155-157, 174, 177-179, 195, 200-202, 216-217
2026-02-14T13:16:23.8028672Z services/enricher/__init__.py                             3      0   100%
2026-02-14T13:16:23.8029892Z services/enricher/chatgpt_enricher.py                   785    429    45%   22-23, 51-57, 116, 245-248, 251-266, 269, 356, 400-401, 408-409, 423-426, 434-437, 495, 585-587, 611, 618, 624-629, 653-657, 673-805, 821, 847-854, 859, 861-865, 880, 882, 936, 975-978, 985-987, 995-997, 1004-1066, 1082-1113, 1146-1153, 1158, 1160-1164, 1184, 1186, 1239, 1244-1248, 1327-1346, 1356-1358, 1371, 1377-1379, 1387, 1392-1399, 1412, 1415-1417, 1428-1437, 1449-1533, 1558-1600, 1621-1703, 1715-1800, 1815-1840, 1858-1903
2026-02-14T13:16:23.8030063Z services/enricher/chatgpt_queries.py                      3      0   100%
2026-02-14T13:16:23.8030631Z services/enricher/job_enricher.py                       364     79    78%   15-16, 73-76, 81, 86, 95-97, 187-201, 313, 424, 437-438, 523, 545, 565, 572, 575-578, 620, 665-666, 675, 677, 679-682, 684-687, 704-705, 709, 813-829, 866, 876-882, 966-969, 990-1010
2026-02-14T13:16:23.8030800Z services/enricher/queries.py                              4      0   100%
2026-02-14T13:16:23.8030971Z services/enricher/remote_patterns.py                      1      0   100%
2026-02-14T13:16:23.8031147Z services/enricher/seniority_patterns.py                   1      0   100%
2026-02-14T13:16:23.8031338Z services/enricher/technical_skills.py                     8      1    88%   310
2026-02-14T13:16:23.8031528Z services/enrichment_analysis/__init__.py                  2      2     0%   8-10
2026-02-14T13:16:23.8031731Z services/enrichment_analysis/enrichment_analyzer.py     250    250     0%   7-753
2026-02-14T13:16:23.8031926Z services/enrichment_analysis/queries.py                   7      7     0%   8-195
2026-02-14T13:16:23.8032082Z services/extractor/__init__.py                            5      0   100%
2026-02-14T13:16:23.8032322Z services/extractor/base_client.py                        52     35    33%   53-71, 75-83, 91, 111, 126-134, 140-148
2026-02-14T13:16:23.8032690Z services/extractor/company_extractor.py                 145     81    44%   52, 54, 88-91, 110-111, 125-211, 270-277, 287-310, 314, 318, 322-323, 327-328, 340-368
2026-02-14T13:16:23.8032909Z services/extractor/glassdoor_client.py                   28     18    36%   42, 67-88, 104-106
2026-02-14T13:16:23.8033273Z services/extractor/job_extractor.py                     124     34    73%   53, 55, 57, 107-108, 112-113, 121-123, 139, 147-150, 160, 180, 238-240, 247-249, 259-279
2026-02-14T13:16:23.8033493Z services/extractor/jsearch_client.py                     39     29    26%   42, 67-88, 119-139
2026-02-14T13:16:23.8033865Z services/extractor/queries.py                            12      0   100%
2026-02-14T13:16:23.8034080Z services/jobs/__init__.py                                 4      0   100%
2026-02-14T13:16:23.8034278Z services/jobs/job_note_service.py                        85      2    98%   69, 109
2026-02-14T13:16:23.8034608Z services/jobs/job_service.py                             75     21    72%   70, 115, 134-144, 156-173
2026-02-14T13:16:23.8034899Z services/jobs/job_status_service.py                     165     19    88%   128, 184-187, 238, 243-247, 365-366, 382-383, 429-430, 472-473
2026-02-14T13:16:23.8035058Z services/jobs/queries.py                                 15      0   100%
2026-02-14T13:16:23.8035318Z services/notifier/__init__.py                             4      0   100%
2026-02-14T13:16:23.8035533Z services/notifier/base_notifier.py                       42     31    26%   30, 46, 62-110, 129-164
2026-02-14T13:16:23.8035744Z services/notifier/email_notifier.py                      46     33    28%   52-63, 78-112
2026-02-14T13:16:23.8036010Z services/notifier/notification_coordinator.py            62     49    21%   46-53, 62-69, 86-97, 109-133, 142-165
2026-02-14T13:16:23.8036169Z services/notifier/queries.py                              2      0   100%
2026-02-14T13:16:23.8036325Z services/ranker/__init__.py                               2      0   100%
2026-02-14T13:16:23.8037284Z services/ranker/job_ranker.py                           510    184    64%   51, 64-71, 211-231, 286, 290-295, 313, 320-333, 350, 356, 363, 388, 394-395, 407, 409, 411, 413, 415, 426-452, 467-468, 473-489, 502, 516-533, 560, 571-573, 581-583, 596-599, 602, 608-611, 614, 621-626, 630, 633-636, 662-663, 670-673, 724-726, 746, 750, 778, 788, 796-804, 807, 816-823, 867, 912, 919, 924, 930, 973-974, 981-986, 1029-1045, 1060-1064, 1178-1199
2026-02-14T13:16:23.8037444Z services/ranker/queries.py                                5      0   100%
2026-02-14T13:16:23.8037596Z services/shared/__init__.py                               3      0   100%
2026-02-14T13:16:23.8037775Z services/shared/database.py                              51      3    94%   50-51, 94
2026-02-14T13:16:23.8037969Z services/shared/metrics_recorder.py                      36     25    31%   40-42, 85-166
2026-02-14T13:16:23.8038165Z services/shared/structured_logging.py                    28     28     0%   7-99
2026-02-14T13:16:23.8038334Z services/staging_management/__init__.py                   2      0   100%
2026-02-14T13:16:23.8038498Z services/staging_management/queries.py                    5      0   100%
2026-02-14T13:16:23.8038755Z services/staging_management/staging_service.py           80     40    50%   37, 69, 95-98, 132-165, 173-182
2026-02-14T13:16:23.8038910Z -----------------------------------------------------------------------------------
2026-02-14T13:16:23.8039019Z TOTAL                                                  4426   1818    59%
2026-02-14T13:16:23.8039114Z Coverage HTML written to dir htmlcov
2026-02-14T13:16:24.0516954Z =========================== short test summary info ============================
2026-02-14T13:16:24.0518277Z FAILED tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_delete_campaign_removes_rankings - psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.0520249Z FAILED tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_delete_campaign_removes_fact_jobs - psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.0522029Z FAILED tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_delete_campaign_removes_staging_jobs - psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.0523524Z FAILED tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_delete_campaign_removes_etl_metrics - psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.0525368Z FAILED tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_delete_campaign_comprehensive_cleanup - psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.0527150Z FAILED tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_new_campaign_does_not_show_old_jobs - psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.0528647Z FAILED tests/integration/test_campaign_deletion.py::TestCampaignDeletion::test_job_queries_only_show_existing_campaigns - psycopg2.errors.NoActiveSqlTransaction: SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.0529854Z FAILED tests/integration/test_jwt_auth_api.py::test_update_campaign_with_jwt_token - assert 500 == 201
2026-02-14T13:16:24.0530460Z  +  where 500 = <WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]>.status_code
2026-02-14T13:16:24.0531266Z ERROR tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_with_comments - assert 500 == 200
2026-02-14T13:16:24.0532064Z  +  where 500 = <WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]>.status_code
2026-02-14T13:16:24.0532866Z ERROR tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_invalid_resume_id - assert 500 == 200
2026-02-14T13:16:24.0533772Z  +  where 500 = <WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]>.status_code
2026-02-14T13:16:24.0534556Z ERROR tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_generation_error - assert 500 == 200
2026-02-14T13:16:24.0535329Z  +  where 500 = <WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]>.status_code
2026-02-14T13:16:24.0536114Z ERROR tests/integration/test_cover_letter_generation_ui.py::TestCoverLetterGenerationRoute::test_generate_cover_letter_general_exception - assert 500 == 200
2026-02-14T13:16:24.0536913Z  +  where 500 = <WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]>.status_code
2026-02-14T13:16:24.0537396Z ====== 8 failed, 439 passed, 25 skipped, 10 warnings, 4 errors in 56.29s =======
2026-02-14T13:16:24.2727082Z ##[error]Process completed with exit code 1.
2026-02-14T13:16:24.2813203Z Post job cleanup.
2026-02-14T13:16:24.3768942Z [command]/usr/bin/git version
2026-02-14T13:16:24.3806967Z git version 2.52.0
2026-02-14T13:16:24.3857217Z Temporarily overriding HOME='/home/runner/work/_temp/8a536980-badb-4513-97a7-a189401554a7' before making global git config changes
2026-02-14T13:16:24.3858637Z Adding repository directory to the temporary git global config as a safe directory
2026-02-14T13:16:24.3863557Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/job-etl-project/job-etl-project
2026-02-14T13:16:24.3900302Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2026-02-14T13:16:24.3935540Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2026-02-14T13:16:24.4180468Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2026-02-14T13:16:24.4202249Z http.https://github.com/.extraheader
2026-02-14T13:16:24.4214938Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2026-02-14T13:16:24.4247856Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2026-02-14T13:16:24.4484328Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2026-02-14T13:16:24.4516222Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2026-02-14T13:16:24.4875297Z Print service container logs: 0e96d73957f242b0b227fecdfc280946_postgres15_17495f
2026-02-14T13:16:24.4879536Z ##[command]/usr/bin/docker logs --details 7a72240d52cf4f4693234325cd50ff7a005bbb3a3fb3a9c75f3839c97f6f4d15
2026-02-14T13:16:24.5010753Z  The files belonging to this database system will be owned by user "postgres".
2026-02-14T13:16:24.5011522Z  This user must also own the server process.
2026-02-14T13:16:24.5014695Z  initdb: warning: enabling "trust" authentication for local connections
2026-02-14T13:16:24.5015322Z  
2026-02-14T13:16:24.5015725Z  The database cluster will be initialized with locale "en_US.utf8".
2026-02-14T13:16:24.5016767Z  The default database encoding has accordingly been set to "UTF8".
2026-02-14T13:16:24.5017468Z  The default text search configuration will be set to "english".
2026-02-14T13:16:24.5017989Z  
2026-02-14T13:16:24.5018267Z  Data page checksums are disabled.
2026-02-14T13:16:24.5018630Z  
2026-02-14T13:16:24.5019122Z  fixing permissions on existing directory /var/lib/postgresql/data ... ok
2026-02-14T13:16:24.5019780Z  creating subdirectories ... ok
2026-02-14T13:16:24.5020300Z  selecting dynamic shared memory implementation ... posix
2026-02-14T13:16:24.5020869Z  selecting default max_connections ... 100
2026-02-14T13:16:24.5021341Z  selecting default shared_buffers ... 128MB
2026-02-14T13:16:24.5021805Z  selecting default time zone ... Etc/UTC
2026-02-14T13:16:24.5022259Z  creating configuration files ... ok
2026-02-14T13:16:24.5022700Z  running bootstrap script ... ok
2026-02-14T13:16:24.5023196Z  performing post-bootstrap initialization ... ok
2026-02-14T13:16:24.5023872Z  syncing data to disk ... ok
2026-02-14T13:16:24.5024899Z  initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
2026-02-14T13:16:24.5025942Z  
2026-02-14T13:16:24.5026186Z  
2026-02-14T13:16:24.5026554Z  Success. You can now start the database server using:
2026-02-14T13:16:24.5027041Z  
2026-02-14T13:16:24.5027428Z      pg_ctl -D /var/lib/postgresql/data -l logfile start
2026-02-14T13:16:24.5028647Z  2026-02-14 13:14:34.910 UTC [1] LOG:  starting PostgreSQL 15.16 (Debian 15.16-1.pgdg13+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 14.2.0-19) 14.2.0, 64-bit
2026-02-14T13:16:24.5029919Z  2026-02-14 13:14:34.911 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
2026-02-14T13:16:24.5030521Z  
2026-02-14T13:16:24.5031681Z  waiting for server to start....2026-02-14 13:14:34.604 UTC [48] LOG:  starting PostgreSQL 15.16 (Debian 15.16-1.pgdg13+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 14.2.0-19) 14.2.0, 64-bit
2026-02-14T13:16:24.5033314Z  2026-02-14 13:14:34.605 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
2026-02-14T13:16:24.5034457Z  2026-02-14 13:14:34.608 UTC [51] LOG:  database system was shut down at 2026-02-14 13:14:34 UTC
2026-02-14T13:16:24.5035352Z  2026-02-14 13:14:34.612 UTC [48] LOG:  database system is ready to accept connections
2026-02-14T13:16:24.5036013Z   done
2026-02-14T13:16:24.5036296Z  server started
2026-02-14T13:16:24.5036611Z  CREATE DATABASE
2026-02-14T13:16:24.5036902Z  
2026-02-14T13:16:24.5037161Z  
2026-02-14T13:16:24.5037674Z  /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
2026-02-14T13:16:24.5038335Z  
2026-02-14T13:16:24.5038727Z  2026-02-14 13:14:34.790 UTC [48] LOG:  received fast shutdown request
2026-02-14T13:16:24.5039574Z  waiting for server to shut down....2026-02-14 13:14:34.791 UTC [48] LOG:  aborting any active transactions
2026-02-14T13:16:24.5040754Z  2026-02-14 13:14:34.793 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
2026-02-14T13:16:24.5041679Z  2026-02-14 13:14:34.793 UTC [49] LOG:  shutting down
2026-02-14T13:16:24.5042305Z  2026-02-14 13:14:34.794 UTC [49] LOG:  checkpoint starting: shutdown immediate
2026-02-14T13:16:24.5044469Z  2026-02-14 13:14:34.811 UTC [49] LOG:  checkpoint complete: wrote 922 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.014 s, sync=0.002 s, total=0.018 s; sync files=301, longest=0.001 s, average=0.001 s; distance=4239 kB, estimate=4239 kB
2026-02-14T13:16:24.5046266Z  2026-02-14 13:14:34.817 UTC [48] LOG:  database system is shut down
2026-02-14T13:16:24.5046808Z   done
2026-02-14T13:16:24.5047069Z  server stopped
2026-02-14T13:16:24.5047350Z  
2026-02-14T13:16:24.5047738Z  PostgreSQL init process complete; ready for start up.
2026-02-14T13:16:24.5048256Z  
2026-02-14T13:16:24.5048761Z  2026-02-14 13:14:34.911 UTC [1] LOG:  listening on IPv6 address "::", port 5432
2026-02-14T13:16:24.5049645Z  2026-02-14 13:14:34.912 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
2026-02-14T13:16:24.5050861Z  2026-02-14 13:14:34.915 UTC [64] LOG:  database system was shut down at 2026-02-14 13:14:34 UTC
2026-02-14T13:16:24.5051745Z  2026-02-14 13:14:34.919 UTC [1] LOG:  database system is ready to accept connections
2026-02-14T13:16:24.5052522Z  2026-02-14 13:14:44.001 UTC [75] FATAL:  role "root" does not exist
2026-02-14T13:16:24.5053196Z  2026-02-14 13:14:54.067 UTC [83] FATAL:  role "root" does not exist
2026-02-14T13:16:24.5054002Z  2026-02-14 13:15:04.130 UTC [105] FATAL:  role "root" does not exist
2026-02-14T13:16:24.5054652Z  2026-02-14 13:15:14.199 UTC [114] FATAL:  role "root" does not exist
2026-02-14T13:16:24.5055313Z  2026-02-14 13:15:24.264 UTC [122] FATAL:  role "root" does not exist
2026-02-14T13:16:24.5055805Z  2026-02-14 13:15:31.160 UTC [125] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.5056417Z  2026-02-14 13:15:31.160 UTC [125] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.5056847Z  	DO $$
2026-02-14T13:16:24.5057115Z  	BEGIN
2026-02-14T13:16:24.5057529Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.5058166Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.5058752Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.5059337Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.5059817Z  	    END IF;
2026-02-14T13:16:24.5060093Z  	END $$;
2026-02-14T13:16:24.5060649Z  2026-02-14 13:15:31.169 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5062647Z  2026-02-14 13:15:31.169 UTC [125] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.5064755Z  2026-02-14 13:15:31.170 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5066135Z  2026-02-14 13:15:31.170 UTC [125] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.5067497Z  2026-02-14 13:15:31.170 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5068787Z  2026-02-14 13:15:31.170 UTC [125] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.5070066Z  2026-02-14 13:15:31.171 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5071294Z  2026-02-14 13:15:31.171 UTC [125] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.5072019Z  2026-02-14 13:15:31.171 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5072731Z  2026-02-14 13:15:31.171 UTC [125] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.5073453Z  2026-02-14 13:15:31.172 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5074640Z  2026-02-14 13:15:31.172 UTC [125] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.5075405Z  2026-02-14 13:15:31.172 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5076106Z  2026-02-14 13:15:31.172 UTC [125] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.5076797Z  2026-02-14 13:15:31.173 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5077465Z  2026-02-14 13:15:31.173 UTC [125] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.5078251Z  2026-02-14 13:15:31.173 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5078977Z  2026-02-14 13:15:31.173 UTC [125] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.5079697Z  2026-02-14 13:15:31.174 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5080386Z  2026-02-14 13:15:31.174 UTC [125] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.5081085Z  2026-02-14 13:15:31.174 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5081838Z  2026-02-14 13:15:31.174 UTC [125] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.5082588Z  2026-02-14 13:15:31.175 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5083367Z  2026-02-14 13:15:31.175 UTC [125] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.5084402Z  2026-02-14 13:15:31.175 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5085210Z  2026-02-14 13:15:31.175 UTC [125] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.5086433Z  2026-02-14 13:15:31.176 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5087534Z  2026-02-14 13:15:31.176 UTC [125] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.5088454Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.5089236Z  2026-02-14 13:15:31.176 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5090323Z  2026-02-14 13:15:31.176 UTC [125] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.5091196Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.5091975Z  2026-02-14 13:15:31.177 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5093041Z  2026-02-14 13:15:31.177 UTC [125] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.5094090Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.5094616Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.5095319Z  2026-02-14 13:15:31.177 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5096518Z  2026-02-14 13:15:31.177 UTC [125] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.5097753Z  2026-02-14 13:15:31.178 UTC [125] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.5099180Z  2026-02-14 13:15:31.178 UTC [125] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.5100630Z  2026-02-14 13:15:31.179 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5101757Z  2026-02-14 13:15:31.179 UTC [125] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_chatgpt_enrichments_enriched_at 
2026-02-14T13:16:24.5102677Z  	    ON staging.chatgpt_enrichments(chatgpt_enriched_at);
2026-02-14T13:16:24.5103469Z  2026-02-14 13:15:31.179 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5104973Z  2026-02-14 13:15:31.179 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.5106321Z  2026-02-14 13:15:31.180 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5108197Z  2026-02-14 13:15:31.180 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.jsearch_job_postings_key IS 'Foreign key to staging.jsearch_job_postings (UNIQUE - one enrichment per job)';
2026-02-14T13:16:24.5109818Z  2026-02-14 13:15:31.180 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5110881Z  2026-02-14 13:15:31.180 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.5111683Z  2026-02-14 13:15:31.181 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5112532Z  2026-02-14 13:15:31.181 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.5113378Z  2026-02-14 13:15:31.181 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5114975Z  2026-02-14 13:15:31.181 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.5116458Z  2026-02-14 13:15:31.182 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5118330Z  2026-02-14 13:15:31.182 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.5120171Z  2026-02-14 13:15:31.182 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5121936Z  2026-02-14 13:15:31.182 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.5123888Z  2026-02-14 13:15:31.183 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5125356Z  2026-02-14 13:15:31.183 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5126859Z  2026-02-14 13:15:31.183 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5128351Z  2026-02-14 13:15:31.183 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5129760Z  2026-02-14 13:15:31.184 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5131555Z  2026-02-14 13:15:31.184 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.5133447Z  2026-02-14 13:15:31.184 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5135351Z  2026-02-14 13:15:31.184 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.5137310Z  2026-02-14 13:15:31.184 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5138763Z  2026-02-14 13:15:31.184 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enriched_at IS 'Timestamp when ChatGPT enrichment was completed';
2026-02-14T13:16:24.5140193Z  2026-02-14 13:15:31.185 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5142417Z  2026-02-14 13:15:31.185 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_status IS 'JSONB tracking which fields were successfully extracted: {"summary": boolean, "skills": boolean, "location": boolean, "seniority": boolean, "remote_type": boolean, "salary": boolean}';
2026-02-14T13:16:24.5145017Z  2026-02-14 13:15:31.185 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5146418Z  2026-02-14 13:15:31.185 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_date IS 'Technical column: date when record was loaded';
2026-02-14T13:16:24.5147840Z  2026-02-14 13:15:31.186 UTC [125] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5149258Z  2026-02-14 13:15:31.186 UTC [125] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_timestamp IS 'Technical column: timestamp when record was loaded';
2026-02-14T13:16:24.5150799Z  2026-02-14 13:15:31.189 UTC [125] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.5152455Z  2026-02-14 13:15:31.189 UTC [125] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.5154070Z  2026-02-14 13:15:31.238 UTC [126] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.5154951Z  2026-02-14 13:15:31.396 UTC [130] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.5155787Z  2026-02-14 13:15:31.396 UTC [130] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.5156368Z  	DO $$
2026-02-14T13:16:24.5156621Z  	BEGIN
2026-02-14T13:16:24.5157021Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.5157669Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.5158258Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.5158847Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.5159339Z  	    END IF;
2026-02-14T13:16:24.5159617Z  	END $$;
2026-02-14T13:16:24.5160184Z  2026-02-14 13:15:31.405 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5162192Z  2026-02-14 13:15:31.405 UTC [130] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.5164319Z  2026-02-14 13:15:31.406 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5165753Z  2026-02-14 13:15:31.406 UTC [130] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.5167139Z  2026-02-14 13:15:31.406 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5168501Z  2026-02-14 13:15:31.406 UTC [130] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.5169884Z  2026-02-14 13:15:31.407 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5171311Z  2026-02-14 13:15:31.407 UTC [130] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.5172824Z  2026-02-14 13:15:31.407 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5174315Z  2026-02-14 13:15:31.407 UTC [130] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.5175717Z  2026-02-14 13:15:31.407 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5177150Z  2026-02-14 13:15:31.407 UTC [130] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.5178531Z  2026-02-14 13:15:31.408 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5180033Z  2026-02-14 13:15:31.408 UTC [130] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.5181308Z  2026-02-14 13:15:31.408 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5182532Z  2026-02-14 13:15:31.408 UTC [130] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.5183921Z  2026-02-14 13:15:31.409 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5185217Z  2026-02-14 13:15:31.409 UTC [130] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.5186508Z  2026-02-14 13:15:31.409 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5187879Z  2026-02-14 13:15:31.409 UTC [130] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.5189230Z  2026-02-14 13:15:31.410 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5190643Z  2026-02-14 13:15:31.410 UTC [130] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.5192140Z  2026-02-14 13:15:31.410 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5193767Z  2026-02-14 13:15:31.410 UTC [130] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.5195204Z  2026-02-14 13:15:31.411 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5196734Z  2026-02-14 13:15:31.411 UTC [130] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.5198281Z  2026-02-14 13:15:31.411 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5199415Z  2026-02-14 13:15:31.411 UTC [130] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.5200301Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.5201072Z  2026-02-14 13:15:31.412 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5202209Z  2026-02-14 13:15:31.412 UTC [130] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.5203083Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.5204006Z  2026-02-14 13:15:31.412 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5205068Z  2026-02-14 13:15:31.412 UTC [130] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.5205931Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.5206461Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.5207149Z  2026-02-14 13:15:31.413 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5208456Z  2026-02-14 13:15:31.413 UTC [130] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.5209669Z  2026-02-14 13:15:31.413 UTC [130] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.5210939Z  2026-02-14 13:15:31.413 UTC [130] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.5212193Z  2026-02-14 13:15:31.414 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5213315Z  2026-02-14 13:15:31.414 UTC [130] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_chatgpt_enrichments_enriched_at 
2026-02-14T13:16:24.5214365Z  	    ON staging.chatgpt_enrichments(chatgpt_enriched_at);
2026-02-14T13:16:24.5215303Z  2026-02-14 13:15:31.415 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5216629Z  2026-02-14 13:15:31.415 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.5217979Z  2026-02-14 13:15:31.415 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5219602Z  2026-02-14 13:15:31.415 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.jsearch_job_postings_key IS 'Foreign key to staging.jsearch_job_postings (UNIQUE - one enrichment per job)';
2026-02-14T13:16:24.5221285Z  2026-02-14 13:15:31.416 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5222740Z  2026-02-14 13:15:31.416 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.5224309Z  2026-02-14 13:15:31.416 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5225801Z  2026-02-14 13:15:31.416 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.5227287Z  2026-02-14 13:15:31.417 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5228839Z  2026-02-14 13:15:31.417 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.5230376Z  2026-02-14 13:15:31.417 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5232348Z  2026-02-14 13:15:31.417 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.5234370Z  2026-02-14 13:15:31.418 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5236270Z  2026-02-14 13:15:31.418 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.5238041Z  2026-02-14 13:15:31.418 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5239464Z  2026-02-14 13:15:31.418 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5240898Z  2026-02-14 13:15:31.419 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5242323Z  2026-02-14 13:15:31.419 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5243863Z  2026-02-14 13:15:31.419 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5245846Z  2026-02-14 13:15:31.419 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.5247673Z  2026-02-14 13:15:31.420 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5249412Z  2026-02-14 13:15:31.420 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.5251149Z  2026-02-14 13:15:31.420 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5252567Z  2026-02-14 13:15:31.420 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enriched_at IS 'Timestamp when ChatGPT enrichment was completed';
2026-02-14T13:16:24.5254349Z  2026-02-14 13:15:31.421 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5256663Z  2026-02-14 13:15:31.421 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_status IS 'JSONB tracking which fields were successfully extracted: {"summary": boolean, "skills": boolean, "location": boolean, "seniority": boolean, "remote_type": boolean, "salary": boolean}';
2026-02-14T13:16:24.5258964Z  2026-02-14 13:15:31.421 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5260380Z  2026-02-14 13:15:31.421 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_date IS 'Technical column: date when record was loaded';
2026-02-14T13:16:24.5261703Z  2026-02-14 13:15:31.421 UTC [130] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5263099Z  2026-02-14 13:15:31.421 UTC [130] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_timestamp IS 'Technical column: timestamp when record was loaded';
2026-02-14T13:16:24.5264711Z  2026-02-14 13:15:31.425 UTC [130] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.5266239Z  2026-02-14 13:15:31.425 UTC [130] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.5267695Z  2026-02-14 13:15:31.470 UTC [131] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.5268552Z  2026-02-14 13:15:31.623 UTC [135] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.5269344Z  2026-02-14 13:15:31.623 UTC [135] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.5269935Z  	DO $$
2026-02-14T13:16:24.5270204Z  	BEGIN
2026-02-14T13:16:24.5270644Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.5271412Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.5272038Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.5272670Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.5273185Z  	    END IF;
2026-02-14T13:16:24.5273465Z  	END $$;
2026-02-14T13:16:24.5274176Z  2026-02-14 13:15:31.632 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5276115Z  2026-02-14 13:15:31.632 UTC [135] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.5278176Z  2026-02-14 13:15:31.632 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5279591Z  2026-02-14 13:15:31.632 UTC [135] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.5280987Z  2026-02-14 13:15:31.633 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5282531Z  2026-02-14 13:15:31.633 UTC [135] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.5284061Z  2026-02-14 13:15:31.633 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5285440Z  2026-02-14 13:15:31.633 UTC [135] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.5286792Z  2026-02-14 13:15:31.634 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5288136Z  2026-02-14 13:15:31.634 UTC [135] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.5289484Z  2026-02-14 13:15:31.634 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5291171Z  2026-02-14 13:15:31.634 UTC [135] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.5292637Z  2026-02-14 13:15:31.635 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5294083Z  2026-02-14 13:15:31.635 UTC [135] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.5295432Z  2026-02-14 13:15:31.635 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5296647Z  2026-02-14 13:15:31.635 UTC [135] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.5297844Z  2026-02-14 13:15:31.636 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5299121Z  2026-02-14 13:15:31.636 UTC [135] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.5300334Z  2026-02-14 13:15:31.636 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5301051Z  2026-02-14 13:15:31.636 UTC [135] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.5301900Z  2026-02-14 13:15:31.637 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5302728Z  2026-02-14 13:15:31.637 UTC [135] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.5304256Z  2026-02-14 13:15:31.637 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5305681Z  2026-02-14 13:15:31.637 UTC [135] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.5307116Z  2026-02-14 13:15:31.638 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5308568Z  2026-02-14 13:15:31.638 UTC [135] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.5309998Z  2026-02-14 13:15:31.638 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5311090Z  2026-02-14 13:15:31.638 UTC [135] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.5311987Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.5312755Z  2026-02-14 13:15:31.639 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5313968Z  2026-02-14 13:15:31.639 UTC [135] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.5314861Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.5315650Z  2026-02-14 13:15:31.639 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5316927Z  2026-02-14 13:15:31.639 UTC [135] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.5317833Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.5318375Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.5319108Z  2026-02-14 13:15:31.640 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5320263Z  2026-02-14 13:15:31.640 UTC [135] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.5321465Z  2026-02-14 13:15:31.640 UTC [135] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.5322758Z  2026-02-14 13:15:31.640 UTC [135] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.5324313Z  2026-02-14 13:15:31.641 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5325369Z  2026-02-14 13:15:31.641 UTC [135] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_chatgpt_enrichments_enriched_at 
2026-02-14T13:16:24.5326269Z  	    ON staging.chatgpt_enrichments(chatgpt_enriched_at);
2026-02-14T13:16:24.5327045Z  2026-02-14 13:15:31.641 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5328361Z  2026-02-14 13:15:31.641 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.5329678Z  2026-02-14 13:15:31.642 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5331319Z  2026-02-14 13:15:31.642 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.jsearch_job_postings_key IS 'Foreign key to staging.jsearch_job_postings (UNIQUE - one enrichment per job)';
2026-02-14T13:16:24.5332972Z  2026-02-14 13:15:31.642 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5334559Z  2026-02-14 13:15:31.642 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.5335999Z  2026-02-14 13:15:31.643 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5337487Z  2026-02-14 13:15:31.643 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.5338931Z  2026-02-14 13:15:31.643 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5340280Z  2026-02-14 13:15:31.643 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.5341645Z  2026-02-14 13:15:31.644 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5343423Z  2026-02-14 13:15:31.644 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.5344832Z  2026-02-14 13:15:31.644 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5346489Z  2026-02-14 13:15:31.644 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.5348275Z  2026-02-14 13:15:31.645 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5349700Z  2026-02-14 13:15:31.645 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5351166Z  2026-02-14 13:15:31.645 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5352865Z  2026-02-14 13:15:31.645 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5354231Z  2026-02-14 13:15:31.646 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5355230Z  2026-02-14 13:15:31.646 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.5356212Z  2026-02-14 13:15:31.646 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5357168Z  2026-02-14 13:15:31.646 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.5358259Z  2026-02-14 13:15:31.647 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5359075Z  2026-02-14 13:15:31.647 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enriched_at IS 'Timestamp when ChatGPT enrichment was completed';
2026-02-14T13:16:24.5359847Z  2026-02-14 13:15:31.647 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5361081Z  2026-02-14 13:15:31.647 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_status IS 'JSONB tracking which fields were successfully extracted: {"summary": boolean, "skills": boolean, "location": boolean, "seniority": boolean, "remote_type": boolean, "salary": boolean}';
2026-02-14T13:16:24.5362298Z  2026-02-14 13:15:31.648 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5363042Z  2026-02-14 13:15:31.648 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_date IS 'Technical column: date when record was loaded';
2026-02-14T13:16:24.5364157Z  2026-02-14 13:15:31.648 UTC [135] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5365622Z  2026-02-14 13:15:31.648 UTC [135] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_timestamp IS 'Technical column: timestamp when record was loaded';
2026-02-14T13:16:24.5368023Z  2026-02-14 13:15:31.652 UTC [135] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.5369624Z  2026-02-14 13:15:31.652 UTC [135] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.5371148Z  2026-02-14 13:15:31.693 UTC [136] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.5372105Z  2026-02-14 13:15:31.838 UTC [140] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.5372897Z  2026-02-14 13:15:31.838 UTC [140] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.5373486Z  	DO $$
2026-02-14T13:16:24.5373865Z  	BEGIN
2026-02-14T13:16:24.5374305Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.5374975Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.5375566Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.5376174Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.5376653Z  	    END IF;
2026-02-14T13:16:24.5376933Z  	END $$;
2026-02-14T13:16:24.5377497Z  2026-02-14 13:15:31.847 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5379437Z  2026-02-14 13:15:31.847 UTC [140] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.5381367Z  2026-02-14 13:15:31.848 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5382929Z  2026-02-14 13:15:31.848 UTC [140] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.5384492Z  2026-02-14 13:15:31.848 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5385813Z  2026-02-14 13:15:31.848 UTC [140] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.5387095Z  2026-02-14 13:15:31.849 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5388388Z  2026-02-14 13:15:31.849 UTC [140] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.5389917Z  2026-02-14 13:15:31.849 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5391242Z  2026-02-14 13:15:31.849 UTC [140] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.5392567Z  2026-02-14 13:15:31.850 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5394102Z  2026-02-14 13:15:31.850 UTC [140] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.5395499Z  2026-02-14 13:15:31.850 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5396778Z  2026-02-14 13:15:31.850 UTC [140] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.5398043Z  2026-02-14 13:15:31.851 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5399293Z  2026-02-14 13:15:31.851 UTC [140] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.5400525Z  2026-02-14 13:15:31.851 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5401844Z  2026-02-14 13:15:31.851 UTC [140] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.5403166Z  2026-02-14 13:15:31.852 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5404576Z  2026-02-14 13:15:31.852 UTC [140] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.5405820Z  2026-02-14 13:15:31.852 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5407204Z  2026-02-14 13:15:31.852 UTC [140] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.5408560Z  2026-02-14 13:15:31.853 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5409961Z  2026-02-14 13:15:31.853 UTC [140] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.5411363Z  2026-02-14 13:15:31.853 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5412783Z  2026-02-14 13:15:31.853 UTC [140] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.5414355Z  2026-02-14 13:15:31.854 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5415585Z  2026-02-14 13:15:31.854 UTC [140] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.5416707Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.5417777Z  2026-02-14 13:15:31.854 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5451338Z  2026-02-14 13:15:31.854 UTC [140] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.5452348Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.5453195Z  2026-02-14 13:15:31.855 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5454542Z  2026-02-14 13:15:31.855 UTC [140] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.5455683Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.5456240Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.5456946Z  2026-02-14 13:15:31.855 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5458334Z  2026-02-14 13:15:31.855 UTC [140] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.5459580Z  2026-02-14 13:15:31.855 UTC [140] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.5460861Z  2026-02-14 13:15:31.855 UTC [140] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.5462043Z  2026-02-14 13:15:31.856 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5463064Z  2026-02-14 13:15:31.856 UTC [140] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_chatgpt_enrichments_enriched_at 
2026-02-14T13:16:24.5464106Z  	    ON staging.chatgpt_enrichments(chatgpt_enriched_at);
2026-02-14T13:16:24.5464849Z  2026-02-14 13:15:31.857 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5466259Z  2026-02-14 13:15:31.857 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.5467660Z  2026-02-14 13:15:31.857 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5469412Z  2026-02-14 13:15:31.857 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.jsearch_job_postings_key IS 'Foreign key to staging.jsearch_job_postings (UNIQUE - one enrichment per job)';
2026-02-14T13:16:24.5471178Z  2026-02-14 13:15:31.858 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5472659Z  2026-02-14 13:15:31.858 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.5474534Z  2026-02-14 13:15:31.858 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5476063Z  2026-02-14 13:15:31.858 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.5477573Z  2026-02-14 13:15:31.859 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5479097Z  2026-02-14 13:15:31.859 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.5480639Z  2026-02-14 13:15:31.859 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5482568Z  2026-02-14 13:15:31.859 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.5485437Z  2026-02-14 13:15:31.860 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5487192Z  2026-02-14 13:15:31.860 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.5489019Z  2026-02-14 13:15:31.860 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5490630Z  2026-02-14 13:15:31.860 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5492028Z  2026-02-14 13:15:31.861 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5493405Z  2026-02-14 13:15:31.861 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5494959Z  2026-02-14 13:15:31.861 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5496729Z  2026-02-14 13:15:31.861 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.5498698Z  2026-02-14 13:15:31.862 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5500377Z  2026-02-14 13:15:31.862 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.5501974Z  2026-02-14 13:15:31.862 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5503453Z  2026-02-14 13:15:31.862 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enriched_at IS 'Timestamp when ChatGPT enrichment was completed';
2026-02-14T13:16:24.5505050Z  2026-02-14 13:15:31.863 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5507341Z  2026-02-14 13:15:31.863 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_status IS 'JSONB tracking which fields were successfully extracted: {"summary": boolean, "skills": boolean, "location": boolean, "seniority": boolean, "remote_type": boolean, "salary": boolean}';
2026-02-14T13:16:24.5509602Z  2026-02-14 13:15:31.863 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5510915Z  2026-02-14 13:15:31.863 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_date IS 'Technical column: date when record was loaded';
2026-02-14T13:16:24.5512238Z  2026-02-14 13:15:31.864 UTC [140] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5513848Z  2026-02-14 13:15:31.864 UTC [140] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_timestamp IS 'Technical column: timestamp when record was loaded';
2026-02-14T13:16:24.5515343Z  2026-02-14 13:15:31.867 UTC [140] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.5516915Z  2026-02-14 13:15:31.867 UTC [140] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.5518420Z  2026-02-14 13:15:31.908 UTC [141] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.5519297Z  2026-02-14 13:15:32.059 UTC [145] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.5520084Z  2026-02-14 13:15:32.059 UTC [145] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.5520674Z  	DO $$
2026-02-14T13:16:24.5520934Z  	BEGIN
2026-02-14T13:16:24.5521355Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.5521975Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.5522541Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.5523152Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.5523762Z  	    END IF;
2026-02-14T13:16:24.5524055Z  	END $$;
2026-02-14T13:16:24.5524630Z  2026-02-14 13:15:32.068 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5526774Z  2026-02-14 13:15:32.068 UTC [145] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.5528730Z  2026-02-14 13:15:32.069 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5530048Z  2026-02-14 13:15:32.069 UTC [145] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.5531364Z  2026-02-14 13:15:32.069 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5532837Z  2026-02-14 13:15:32.069 UTC [145] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.5534261Z  2026-02-14 13:15:32.070 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5535090Z  2026-02-14 13:15:32.070 UTC [145] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.5535833Z  2026-02-14 13:15:32.070 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5536556Z  2026-02-14 13:15:32.070 UTC [145] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.5537259Z  2026-02-14 13:15:32.071 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5538024Z  2026-02-14 13:15:32.071 UTC [145] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.5538784Z  2026-02-14 13:15:32.071 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5539475Z  2026-02-14 13:15:32.071 UTC [145] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.5540156Z  2026-02-14 13:15:32.072 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5540824Z  2026-02-14 13:15:32.072 UTC [145] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.5541483Z  2026-02-14 13:15:32.072 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5542194Z  2026-02-14 13:15:32.072 UTC [145] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.5542919Z  2026-02-14 13:15:32.073 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5543799Z  2026-02-14 13:15:32.073 UTC [145] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.5545124Z  2026-02-14 13:15:32.073 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5546477Z  2026-02-14 13:15:32.073 UTC [145] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.5547842Z  2026-02-14 13:15:32.074 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5549268Z  2026-02-14 13:15:32.074 UTC [145] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.5550746Z  2026-02-14 13:15:32.074 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5552228Z  2026-02-14 13:15:32.074 UTC [145] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.5553992Z  2026-02-14 13:15:32.075 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5555084Z  2026-02-14 13:15:32.075 UTC [145] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.5555947Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.5556687Z  2026-02-14 13:15:32.075 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5557722Z  2026-02-14 13:15:32.075 UTC [145] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.5558563Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.5559335Z  2026-02-14 13:15:32.076 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5560641Z  2026-02-14 13:15:32.076 UTC [145] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.5561503Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.5561954Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.5562361Z  2026-02-14 13:15:32.076 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5562991Z  2026-02-14 13:15:32.076 UTC [145] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.5563783Z  2026-02-14 13:15:32.077 UTC [145] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.5564996Z  2026-02-14 13:15:32.077 UTC [145] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.5565943Z  2026-02-14 13:15:32.078 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5566638Z  2026-02-14 13:15:32.078 UTC [145] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_chatgpt_enrichments_enriched_at 
2026-02-14T13:16:24.5567656Z  	    ON staging.chatgpt_enrichments(chatgpt_enriched_at);
2026-02-14T13:16:24.5568394Z  2026-02-14 13:15:32.078 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5569679Z  2026-02-14 13:15:32.078 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.5571003Z  2026-02-14 13:15:32.079 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5572698Z  2026-02-14 13:15:32.079 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.jsearch_job_postings_key IS 'Foreign key to staging.jsearch_job_postings (UNIQUE - one enrichment per job)';
2026-02-14T13:16:24.5574459Z  2026-02-14 13:15:32.079 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5575891Z  2026-02-14 13:15:32.079 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.5577251Z  2026-02-14 13:15:32.080 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5578519Z  2026-02-14 13:15:32.080 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.5579554Z  2026-02-14 13:15:32.080 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5580529Z  2026-02-14 13:15:32.080 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.5581623Z  2026-02-14 13:15:32.081 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5583508Z  2026-02-14 13:15:32.081 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.5585927Z  2026-02-14 13:15:32.081 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5587648Z  2026-02-14 13:15:32.081 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.5588809Z  2026-02-14 13:15:32.082 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5589575Z  2026-02-14 13:15:32.082 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5590325Z  2026-02-14 13:15:32.082 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5591206Z  2026-02-14 13:15:32.082 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5591954Z  2026-02-14 13:15:32.083 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5592923Z  2026-02-14 13:15:32.083 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.5594317Z  2026-02-14 13:15:32.083 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5596011Z  2026-02-14 13:15:32.083 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.5597756Z  2026-02-14 13:15:32.084 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5599163Z  2026-02-14 13:15:32.084 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enriched_at IS 'Timestamp when ChatGPT enrichment was completed';
2026-02-14T13:16:24.5600570Z  2026-02-14 13:15:32.084 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5602107Z  2026-02-14 13:15:32.084 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_status IS 'JSONB tracking which fields were successfully extracted: {"summary": boolean, "skills": boolean, "location": boolean, "seniority": boolean, "remote_type": boolean, "salary": boolean}';
2026-02-14T13:16:24.5604339Z  2026-02-14 13:15:32.084 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5605666Z  2026-02-14 13:15:32.084 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_date IS 'Technical column: date when record was loaded';
2026-02-14T13:16:24.5607019Z  2026-02-14 13:15:32.085 UTC [145] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5608436Z  2026-02-14 13:15:32.085 UTC [145] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_timestamp IS 'Technical column: timestamp when record was loaded';
2026-02-14T13:16:24.5609913Z  2026-02-14 13:15:32.088 UTC [145] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.5611471Z  2026-02-14 13:15:32.088 UTC [145] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.5612953Z  2026-02-14 13:15:32.132 UTC [146] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.5613979Z  2026-02-14 13:15:32.283 UTC [150] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.5614769Z  2026-02-14 13:15:32.283 UTC [150] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.5615362Z  	DO $$
2026-02-14T13:16:24.5615624Z  	BEGIN
2026-02-14T13:16:24.5615896Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.5616530Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.5617325Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.5617944Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.5618435Z  	    END IF;
2026-02-14T13:16:24.5618711Z  	END $$;
2026-02-14T13:16:24.5619277Z  2026-02-14 13:15:32.293 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5621240Z  2026-02-14 13:15:32.293 UTC [150] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.5623366Z  2026-02-14 13:15:32.293 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5624910Z  2026-02-14 13:15:32.293 UTC [150] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.5626288Z  2026-02-14 13:15:32.294 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5627565Z  2026-02-14 13:15:32.294 UTC [150] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.5628843Z  2026-02-14 13:15:32.294 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5630148Z  2026-02-14 13:15:32.294 UTC [150] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.5631432Z  2026-02-14 13:15:32.295 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5632733Z  2026-02-14 13:15:32.295 UTC [150] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.5634192Z  2026-02-14 13:15:32.295 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5635362Z  2026-02-14 13:15:32.295 UTC [150] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.5636543Z  2026-02-14 13:15:32.296 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5637831Z  2026-02-14 13:15:32.296 UTC [150] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.5639092Z  2026-02-14 13:15:32.296 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5640321Z  2026-02-14 13:15:32.296 UTC [150] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.5641566Z  2026-02-14 13:15:32.297 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5642872Z  2026-02-14 13:15:32.297 UTC [150] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.5644360Z  2026-02-14 13:15:32.297 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5645627Z  2026-02-14 13:15:32.297 UTC [150] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.5646887Z  2026-02-14 13:15:32.298 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5648280Z  2026-02-14 13:15:32.298 UTC [150] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.5649670Z  2026-02-14 13:15:32.298 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5651085Z  2026-02-14 13:15:32.298 UTC [150] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.5652150Z  2026-02-14 13:15:32.299 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5652960Z  2026-02-14 13:15:32.299 UTC [150] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.5654057Z  2026-02-14 13:15:32.299 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5655155Z  2026-02-14 13:15:32.299 UTC [150] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.5656046Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.5657014Z  2026-02-14 13:15:32.300 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5658088Z  2026-02-14 13:15:32.300 UTC [150] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.5658961Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.5659643Z  2026-02-14 13:15:32.300 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5660243Z  2026-02-14 13:15:32.300 UTC [150] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.5660735Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.5661045Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.5661437Z  2026-02-14 13:15:32.301 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5662061Z  2026-02-14 13:15:32.301 UTC [150] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.5663188Z  2026-02-14 13:15:32.301 UTC [150] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.5664578Z  2026-02-14 13:15:32.301 UTC [150] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.5665565Z  2026-02-14 13:15:32.302 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5666410Z  2026-02-14 13:15:32.302 UTC [150] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_chatgpt_enrichments_enriched_at 
2026-02-14T13:16:24.5666915Z  	    ON staging.chatgpt_enrichments(chatgpt_enriched_at);
2026-02-14T13:16:24.5667344Z  2026-02-14 13:15:32.303 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5668065Z  2026-02-14 13:15:32.303 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.5668798Z  2026-02-14 13:15:32.303 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5670281Z  2026-02-14 13:15:32.303 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.jsearch_job_postings_key IS 'Foreign key to staging.jsearch_job_postings (UNIQUE - one enrichment per job)';
2026-02-14T13:16:24.5671931Z  2026-02-14 13:15:32.304 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5673333Z  2026-02-14 13:15:32.304 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.5674907Z  2026-02-14 13:15:32.304 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5676337Z  2026-02-14 13:15:32.304 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.5677694Z  2026-02-14 13:15:32.305 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5679051Z  2026-02-14 13:15:32.305 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.5680550Z  2026-02-14 13:15:32.305 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5682423Z  2026-02-14 13:15:32.305 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.5684372Z  2026-02-14 13:15:32.306 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5685913Z  2026-02-14 13:15:32.306 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.5687795Z  2026-02-14 13:15:32.306 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5689396Z  2026-02-14 13:15:32.306 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5690536Z  2026-02-14 13:15:32.307 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5691303Z  2026-02-14 13:15:32.307 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5692055Z  2026-02-14 13:15:32.307 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5693040Z  2026-02-14 13:15:32.307 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.5694263Z  2026-02-14 13:15:32.308 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5695229Z  2026-02-14 13:15:32.308 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.5696179Z  2026-02-14 13:15:32.308 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5696950Z  2026-02-14 13:15:32.308 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enriched_at IS 'Timestamp when ChatGPT enrichment was completed';
2026-02-14T13:16:24.5697714Z  2026-02-14 13:15:32.309 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5698938Z  2026-02-14 13:15:32.309 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_status IS 'JSONB tracking which fields were successfully extracted: {"summary": boolean, "skills": boolean, "location": boolean, "seniority": boolean, "remote_type": boolean, "salary": boolean}';
2026-02-14T13:16:24.5700160Z  2026-02-14 13:15:32.309 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5700895Z  2026-02-14 13:15:32.309 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_date IS 'Technical column: date when record was loaded';
2026-02-14T13:16:24.5701624Z  2026-02-14 13:15:32.310 UTC [150] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5702387Z  2026-02-14 13:15:32.310 UTC [150] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_timestamp IS 'Technical column: timestamp when record was loaded';
2026-02-14T13:16:24.5703201Z  2026-02-14 13:15:32.313 UTC [150] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.5704291Z  2026-02-14 13:15:32.313 UTC [150] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.5705120Z  2026-02-14 13:15:32.345 UTC [152] ERROR:  SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.5705780Z  2026-02-14 13:15:32.345 UTC [152] STATEMENT:  SAVEPOINT before_fact_jobs_delete
2026-02-14T13:16:24.5706267Z  2026-02-14 13:15:32.357 UTC [151] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.5706759Z  2026-02-14 13:15:32.507 UTC [155] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.5707193Z  2026-02-14 13:15:32.507 UTC [155] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.5707514Z  	DO $$
2026-02-14T13:16:24.5707667Z  	BEGIN
2026-02-14T13:16:24.5707901Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.5708273Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.5708596Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.5709042Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.5709311Z  	    END IF;
2026-02-14T13:16:24.5709465Z  	END $$;
2026-02-14T13:16:24.5709788Z  2026-02-14 13:15:32.517 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5710869Z  2026-02-14 13:15:32.517 UTC [155] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.5711936Z  2026-02-14 13:15:32.517 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5712692Z  2026-02-14 13:15:32.517 UTC [155] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.5713436Z  2026-02-14 13:15:32.518 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5714501Z  2026-02-14 13:15:32.518 UTC [155] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.5715223Z  2026-02-14 13:15:32.518 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5715945Z  2026-02-14 13:15:32.518 UTC [155] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.5716651Z  2026-02-14 13:15:32.519 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5717373Z  2026-02-14 13:15:32.519 UTC [155] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.5718088Z  2026-02-14 13:15:32.519 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5718837Z  2026-02-14 13:15:32.519 UTC [155] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.5719604Z  2026-02-14 13:15:32.520 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5720302Z  2026-02-14 13:15:32.520 UTC [155] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.5720985Z  2026-02-14 13:15:32.520 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5721650Z  2026-02-14 13:15:32.520 UTC [155] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.5722312Z  2026-02-14 13:15:32.521 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5723016Z  2026-02-14 13:15:32.521 UTC [155] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.5723934Z  2026-02-14 13:15:32.521 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5724636Z  2026-02-14 13:15:32.521 UTC [155] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.5725471Z  2026-02-14 13:15:32.522 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5726227Z  2026-02-14 13:15:32.522 UTC [155] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.5726972Z  2026-02-14 13:15:32.522 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5727734Z  2026-02-14 13:15:32.522 UTC [155] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.5728507Z  2026-02-14 13:15:32.523 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5729399Z  2026-02-14 13:15:32.523 UTC [155] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.5730181Z  2026-02-14 13:15:32.523 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5730773Z  2026-02-14 13:15:32.523 UTC [155] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.5731283Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.5731702Z  2026-02-14 13:15:32.523 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5732288Z  2026-02-14 13:15:32.523 UTC [155] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.5732784Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.5733213Z  2026-02-14 13:15:32.524 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5734137Z  2026-02-14 13:15:32.524 UTC [155] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.5735078Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.5735583Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.5736276Z  2026-02-14 13:15:32.524 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5737458Z  2026-02-14 13:15:32.524 UTC [155] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.5738709Z  2026-02-14 13:15:32.525 UTC [155] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.5740038Z  2026-02-14 13:15:32.525 UTC [155] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.5741200Z  2026-02-14 13:15:32.526 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5742192Z  2026-02-14 13:15:32.526 UTC [155] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_chatgpt_enrichments_enriched_at 
2026-02-14T13:16:24.5742973Z  	    ON staging.chatgpt_enrichments(chatgpt_enriched_at);
2026-02-14T13:16:24.5743880Z  2026-02-14 13:15:32.526 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5745222Z  2026-02-14 13:15:32.526 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.5746602Z  2026-02-14 13:15:32.527 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5748226Z  2026-02-14 13:15:32.527 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.jsearch_job_postings_key IS 'Foreign key to staging.jsearch_job_postings (UNIQUE - one enrichment per job)';
2026-02-14T13:16:24.5749784Z  2026-02-14 13:15:32.527 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5751053Z  2026-02-14 13:15:32.527 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.5752690Z  2026-02-14 13:15:32.528 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5754448Z  2026-02-14 13:15:32.528 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.5755918Z  2026-02-14 13:15:32.528 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5757284Z  2026-02-14 13:15:32.528 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.5758723Z  2026-02-14 13:15:32.529 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5760805Z  2026-02-14 13:15:32.529 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.5762682Z  2026-02-14 13:15:32.529 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5764549Z  2026-02-14 13:15:32.529 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.5766297Z  2026-02-14 13:15:32.530 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5767720Z  2026-02-14 13:15:32.530 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5769126Z  2026-02-14 13:15:32.530 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5770483Z  2026-02-14 13:15:32.530 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5771552Z  2026-02-14 13:15:32.531 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5772520Z  2026-02-14 13:15:32.531 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.5773481Z  2026-02-14 13:15:32.531 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5774635Z  2026-02-14 13:15:32.531 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.5775580Z  2026-02-14 13:15:32.532 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5776359Z  2026-02-14 13:15:32.532 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enriched_at IS 'Timestamp when ChatGPT enrichment was completed';
2026-02-14T13:16:24.5777121Z  2026-02-14 13:15:32.532 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5778354Z  2026-02-14 13:15:32.532 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_status IS 'JSONB tracking which fields were successfully extracted: {"summary": boolean, "skills": boolean, "location": boolean, "seniority": boolean, "remote_type": boolean, "salary": boolean}';
2026-02-14T13:16:24.5779565Z  2026-02-14 13:15:32.533 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5780296Z  2026-02-14 13:15:32.533 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_date IS 'Technical column: date when record was loaded';
2026-02-14T13:16:24.5781036Z  2026-02-14 13:15:32.533 UTC [155] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5781946Z  2026-02-14 13:15:32.533 UTC [155] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_timestamp IS 'Technical column: timestamp when record was loaded';
2026-02-14T13:16:24.5782765Z  2026-02-14 13:15:32.537 UTC [155] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.5783841Z  2026-02-14 13:15:32.537 UTC [155] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.5784663Z  2026-02-14 13:15:32.568 UTC [157] ERROR:  SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.5785129Z  2026-02-14 13:15:32.568 UTC [157] STATEMENT:  SAVEPOINT before_fact_jobs_delete
2026-02-14T13:16:24.5785734Z  2026-02-14 13:15:32.579 UTC [156] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.5786218Z  2026-02-14 13:15:32.728 UTC [160] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.5786650Z  2026-02-14 13:15:32.728 UTC [160] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.5786984Z  	DO $$
2026-02-14T13:16:24.5787131Z  	BEGIN
2026-02-14T13:16:24.5787368Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.5787730Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.5788054Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.5788382Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.5788647Z  	    END IF;
2026-02-14T13:16:24.5788808Z  	END $$;
2026-02-14T13:16:24.5789128Z  2026-02-14 13:15:32.737 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5790201Z  2026-02-14 13:15:32.737 UTC [160] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.5791265Z  2026-02-14 13:15:32.737 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5792022Z  2026-02-14 13:15:32.737 UTC [160] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.5792767Z  2026-02-14 13:15:32.738 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5793467Z  2026-02-14 13:15:32.738 UTC [160] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.5794372Z  2026-02-14 13:15:32.738 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5795090Z  2026-02-14 13:15:32.738 UTC [160] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.5795806Z  2026-02-14 13:15:32.739 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5796515Z  2026-02-14 13:15:32.739 UTC [160] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.5797216Z  2026-02-14 13:15:32.739 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5797968Z  2026-02-14 13:15:32.739 UTC [160] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.5798712Z  2026-02-14 13:15:32.740 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5799401Z  2026-02-14 13:15:32.740 UTC [160] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.5800103Z  2026-02-14 13:15:32.740 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5800903Z  2026-02-14 13:15:32.740 UTC [160] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.5801584Z  2026-02-14 13:15:32.741 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5802286Z  2026-02-14 13:15:32.741 UTC [160] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.5803001Z  2026-02-14 13:15:32.741 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5803852Z  2026-02-14 13:15:32.741 UTC [160] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.5804541Z  2026-02-14 13:15:32.742 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5805421Z  2026-02-14 13:15:32.742 UTC [160] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.5806173Z  2026-02-14 13:15:32.742 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5806939Z  2026-02-14 13:15:32.742 UTC [160] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.5807704Z  2026-02-14 13:15:32.743 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5808481Z  2026-02-14 13:15:32.743 UTC [160] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.5809245Z  2026-02-14 13:15:32.743 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5809844Z  2026-02-14 13:15:32.743 UTC [160] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.5810340Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.5810767Z  2026-02-14 13:15:32.744 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5811345Z  2026-02-14 13:15:32.744 UTC [160] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.5811829Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.5812248Z  2026-02-14 13:15:32.744 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5812830Z  2026-02-14 13:15:32.744 UTC [160] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.5813316Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.5813759Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.5814206Z  2026-02-14 13:15:32.745 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5814839Z  2026-02-14 13:15:32.745 UTC [160] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.5815520Z  2026-02-14 13:15:32.745 UTC [160] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.5816249Z  2026-02-14 13:15:32.745 UTC [160] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.5816917Z  2026-02-14 13:15:32.746 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5817495Z  2026-02-14 13:15:32.746 UTC [160] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_chatgpt_enrichments_enriched_at 
2026-02-14T13:16:24.5817983Z  	    ON staging.chatgpt_enrichments(chatgpt_enriched_at);
2026-02-14T13:16:24.5818406Z  2026-02-14 13:15:32.746 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5819133Z  2026-02-14 13:15:32.746 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.5819967Z  2026-02-14 13:15:32.747 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5820854Z  2026-02-14 13:15:32.747 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.jsearch_job_postings_key IS 'Foreign key to staging.jsearch_job_postings (UNIQUE - one enrichment per job)';
2026-02-14T13:16:24.5821734Z  2026-02-14 13:15:32.747 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5822522Z  2026-02-14 13:15:32.747 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.5823312Z  2026-02-14 13:15:32.748 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5824455Z  2026-02-14 13:15:32.748 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.5825292Z  2026-02-14 13:15:32.748 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5826057Z  2026-02-14 13:15:32.748 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.5826822Z  2026-02-14 13:15:32.749 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5827840Z  2026-02-14 13:15:32.749 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.5828842Z  2026-02-14 13:15:32.749 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5829802Z  2026-02-14 13:15:32.749 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.5830768Z  2026-02-14 13:15:32.750 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5831536Z  2026-02-14 13:15:32.750 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5832290Z  2026-02-14 13:15:32.750 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5833043Z  2026-02-14 13:15:32.750 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5834019Z  2026-02-14 13:15:32.751 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5835021Z  2026-02-14 13:15:32.751 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.5836010Z  2026-02-14 13:15:32.751 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5836959Z  2026-02-14 13:15:32.751 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.5837893Z  2026-02-14 13:15:32.752 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5838652Z  2026-02-14 13:15:32.752 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enriched_at IS 'Timestamp when ChatGPT enrichment was completed';
2026-02-14T13:16:24.5839424Z  2026-02-14 13:15:32.752 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5840776Z  2026-02-14 13:15:32.752 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_status IS 'JSONB tracking which fields were successfully extracted: {"summary": boolean, "skills": boolean, "location": boolean, "seniority": boolean, "remote_type": boolean, "salary": boolean}';
2026-02-14T13:16:24.5841992Z  2026-02-14 13:15:32.753 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5842730Z  2026-02-14 13:15:32.753 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_date IS 'Technical column: date when record was loaded';
2026-02-14T13:16:24.5843467Z  2026-02-14 13:15:32.753 UTC [160] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5844368Z  2026-02-14 13:15:32.753 UTC [160] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_timestamp IS 'Technical column: timestamp when record was loaded';
2026-02-14T13:16:24.5845295Z  2026-02-14 13:15:32.757 UTC [160] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.5846151Z  2026-02-14 13:15:32.757 UTC [160] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.5847012Z  2026-02-14 13:15:32.786 UTC [162] ERROR:  duplicate key value violates unique constraint "job_campaigns_pkey"
2026-02-14T13:16:24.5847534Z  2026-02-14 13:15:32.786 UTC [162] DETAIL:  Key (campaign_id)=(5) already exists.
2026-02-14T13:16:24.5847895Z  2026-02-14 13:15:32.786 UTC [162] STATEMENT:  
2026-02-14T13:16:24.5848169Z  	                    INSERT INTO marts.job_campaigns
2026-02-14T13:16:24.5848687Z  	                    (campaign_id, user_id, campaign_name, query, country, created_at, updated_at, total_run_count, last_run_status)
2026-02-14T13:16:24.5849289Z  	                    VALUES (5, 10, 'Duplicate', 'test', 'us', NOW(), NOW(), 0, 'pending')
2026-02-14T13:16:24.5849618Z  	                    
2026-02-14T13:16:24.5849940Z  2026-02-14 13:15:32.787 UTC [162] ERROR:  SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.5850410Z  2026-02-14 13:15:32.787 UTC [162] STATEMENT:  SAVEPOINT before_fact_jobs_delete
2026-02-14T13:16:24.5850882Z  2026-02-14 13:15:32.799 UTC [161] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.5851378Z  2026-02-14 13:15:32.945 UTC [165] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.5851815Z  2026-02-14 13:15:32.945 UTC [165] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.5852131Z  	DO $$
2026-02-14T13:16:24.5852282Z  	BEGIN
2026-02-14T13:16:24.5852515Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.5852881Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.5853219Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.5853544Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.5853911Z  	    END IF;
2026-02-14T13:16:24.5854071Z  	END $$;
2026-02-14T13:16:24.5854385Z  2026-02-14 13:15:32.954 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5855457Z  2026-02-14 13:15:32.954 UTC [165] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.5856523Z  2026-02-14 13:15:32.954 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5857280Z  2026-02-14 13:15:32.954 UTC [165] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.5858026Z  2026-02-14 13:15:32.955 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5858737Z  2026-02-14 13:15:32.955 UTC [165] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.5859546Z  2026-02-14 13:15:32.955 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5860262Z  2026-02-14 13:15:32.955 UTC [165] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.5860968Z  2026-02-14 13:15:32.956 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5861671Z  2026-02-14 13:15:32.956 UTC [165] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.5862377Z  2026-02-14 13:15:32.956 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5863131Z  2026-02-14 13:15:32.956 UTC [165] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.5864079Z  2026-02-14 13:15:32.957 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5864820Z  2026-02-14 13:15:32.957 UTC [165] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.5866107Z  2026-02-14 13:15:32.957 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5867048Z  2026-02-14 13:15:32.957 UTC [165] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.5867727Z  2026-02-14 13:15:32.958 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5868454Z  2026-02-14 13:15:32.958 UTC [165] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.5869189Z  2026-02-14 13:15:32.958 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5869888Z  2026-02-14 13:15:32.958 UTC [165] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.5870580Z  2026-02-14 13:15:32.958 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5871342Z  2026-02-14 13:15:32.958 UTC [165] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.5872130Z  2026-02-14 13:15:32.959 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5872891Z  2026-02-14 13:15:32.959 UTC [165] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.5873758Z  2026-02-14 13:15:32.959 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5874542Z  2026-02-14 13:15:32.959 UTC [165] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.5875315Z  2026-02-14 13:15:32.960 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5875913Z  2026-02-14 13:15:32.960 UTC [165] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.5876411Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.5876837Z  2026-02-14 13:15:32.960 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5877427Z  2026-02-14 13:15:32.960 UTC [165] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.5877911Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.5878338Z  2026-02-14 13:15:32.961 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5878934Z  2026-02-14 13:15:32.961 UTC [165] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.5879428Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.5879867Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.5880265Z  2026-02-14 13:15:32.961 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5880895Z  2026-02-14 13:15:32.961 UTC [165] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.5881571Z  2026-02-14 13:15:32.962 UTC [165] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.5882291Z  2026-02-14 13:15:32.962 UTC [165] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.5883059Z  2026-02-14 13:15:32.963 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5883730Z  2026-02-14 13:15:32.963 UTC [165] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_chatgpt_enrichments_enriched_at 
2026-02-14T13:16:24.5884227Z  	    ON staging.chatgpt_enrichments(chatgpt_enriched_at);
2026-02-14T13:16:24.5884663Z  2026-02-14 13:15:32.963 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5885383Z  2026-02-14 13:15:32.963 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.5886105Z  2026-02-14 13:15:32.964 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5886995Z  2026-02-14 13:15:32.964 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.jsearch_job_postings_key IS 'Foreign key to staging.jsearch_job_postings (UNIQUE - one enrichment per job)';
2026-02-14T13:16:24.5887876Z  2026-02-14 13:15:32.964 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5888657Z  2026-02-14 13:15:32.964 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.5889432Z  2026-02-14 13:15:32.965 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5890257Z  2026-02-14 13:15:32.965 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.5891078Z  2026-02-14 13:15:32.965 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5891856Z  2026-02-14 13:15:32.965 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.5892615Z  2026-02-14 13:15:32.966 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5893854Z  2026-02-14 13:15:32.966 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.5895008Z  2026-02-14 13:15:32.966 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5895979Z  2026-02-14 13:15:32.966 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.5896929Z  2026-02-14 13:15:32.967 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5897685Z  2026-02-14 13:15:32.967 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5898443Z  2026-02-14 13:15:32.967 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5899189Z  2026-02-14 13:15:32.967 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5900064Z  2026-02-14 13:15:32.968 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5901031Z  2026-02-14 13:15:32.968 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.5901987Z  2026-02-14 13:15:32.968 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5902921Z  2026-02-14 13:15:32.968 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.5904165Z  2026-02-14 13:15:32.969 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5904931Z  2026-02-14 13:15:32.969 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enriched_at IS 'Timestamp when ChatGPT enrichment was completed';
2026-02-14T13:16:24.5905708Z  2026-02-14 13:15:32.969 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5906934Z  2026-02-14 13:15:32.969 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_status IS 'JSONB tracking which fields were successfully extracted: {"summary": boolean, "skills": boolean, "location": boolean, "seniority": boolean, "remote_type": boolean, "salary": boolean}';
2026-02-14T13:16:24.5908149Z  2026-02-14 13:15:32.970 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5908878Z  2026-02-14 13:15:32.970 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_date IS 'Technical column: date when record was loaded';
2026-02-14T13:16:24.5909611Z  2026-02-14 13:15:32.970 UTC [165] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5910383Z  2026-02-14 13:15:32.970 UTC [165] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_timestamp IS 'Technical column: timestamp when record was loaded';
2026-02-14T13:16:24.5911190Z  2026-02-14 13:15:32.974 UTC [165] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.5912061Z  2026-02-14 13:15:32.974 UTC [165] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.5912864Z  2026-02-14 13:15:33.005 UTC [167] ERROR:  SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.5913323Z  2026-02-14 13:15:33.005 UTC [167] STATEMENT:  SAVEPOINT before_fact_jobs_delete
2026-02-14T13:16:24.5913890Z  2026-02-14 13:15:33.180 UTC [166] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.5914372Z  2026-02-14 13:15:33.327 UTC [170] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.5914806Z  2026-02-14 13:15:33.327 UTC [170] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.5915126Z  	DO $$
2026-02-14T13:16:24.5915268Z  	BEGIN
2026-02-14T13:16:24.5915506Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.5915867Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.5916190Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.5916523Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.5916793Z  	    END IF;
2026-02-14T13:16:24.5916947Z  	END $$;
2026-02-14T13:16:24.5917266Z  2026-02-14 13:15:33.336 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5918334Z  2026-02-14 13:15:33.336 UTC [170] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.5919520Z  2026-02-14 13:15:33.336 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5920277Z  2026-02-14 13:15:33.336 UTC [170] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.5921026Z  2026-02-14 13:15:33.337 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5921736Z  2026-02-14 13:15:33.337 UTC [170] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.5922443Z  2026-02-14 13:15:33.337 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5923264Z  2026-02-14 13:15:33.337 UTC [170] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.5924065Z  2026-02-14 13:15:33.338 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5924784Z  2026-02-14 13:15:33.338 UTC [170] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.5925490Z  2026-02-14 13:15:33.338 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5926243Z  2026-02-14 13:15:33.338 UTC [170] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.5926997Z  2026-02-14 13:15:33.339 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5927691Z  2026-02-14 13:15:33.339 UTC [170] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.5928380Z  2026-02-14 13:15:33.339 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5929053Z  2026-02-14 13:15:33.339 UTC [170] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.5929723Z  2026-02-14 13:15:33.340 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5930433Z  2026-02-14 13:15:33.340 UTC [170] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.5931151Z  2026-02-14 13:15:33.340 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5931859Z  2026-02-14 13:15:33.340 UTC [170] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.5932545Z  2026-02-14 13:15:33.341 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5933297Z  2026-02-14 13:15:33.341 UTC [170] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.5934148Z  2026-02-14 13:15:33.341 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5934906Z  2026-02-14 13:15:33.341 UTC [170] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.5935671Z  2026-02-14 13:15:33.342 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5936450Z  2026-02-14 13:15:33.342 UTC [170] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.5937222Z  2026-02-14 13:15:33.342 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5937825Z  2026-02-14 13:15:33.342 UTC [170] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.5938321Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.5938855Z  2026-02-14 13:15:33.343 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5939437Z  2026-02-14 13:15:33.343 UTC [170] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.5939919Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.5940339Z  2026-02-14 13:15:33.343 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5940928Z  2026-02-14 13:15:33.343 UTC [170] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.5941415Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.5941823Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.5942217Z  2026-02-14 13:15:33.344 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5942845Z  2026-02-14 13:15:33.344 UTC [170] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.5943514Z  2026-02-14 13:15:33.344 UTC [170] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.5944427Z  2026-02-14 13:15:33.344 UTC [170] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.5945093Z  2026-02-14 13:15:33.345 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5945662Z  2026-02-14 13:15:33.345 UTC [170] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_chatgpt_enrichments_enriched_at 
2026-02-14T13:16:24.5946154Z  	    ON staging.chatgpt_enrichments(chatgpt_enriched_at);
2026-02-14T13:16:24.5946577Z  2026-02-14 13:15:33.346 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5947299Z  2026-02-14 13:15:33.346 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.5948022Z  2026-02-14 13:15:33.346 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5948914Z  2026-02-14 13:15:33.346 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.jsearch_job_postings_key IS 'Foreign key to staging.jsearch_job_postings (UNIQUE - one enrichment per job)';
2026-02-14T13:16:24.5949783Z  2026-02-14 13:15:33.347 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5950556Z  2026-02-14 13:15:33.347 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.5951323Z  2026-02-14 13:15:33.347 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5952137Z  2026-02-14 13:15:33.347 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.5952962Z  2026-02-14 13:15:33.348 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5953827Z  2026-02-14 13:15:33.348 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.5954593Z  2026-02-14 13:15:33.348 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5955607Z  2026-02-14 13:15:33.348 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.5956624Z  2026-02-14 13:15:33.349 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5957587Z  2026-02-14 13:15:33.349 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.5958665Z  2026-02-14 13:15:33.349 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5959424Z  2026-02-14 13:15:33.349 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5960172Z  2026-02-14 13:15:33.350 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5960920Z  2026-02-14 13:15:33.350 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.5961683Z  2026-02-14 13:15:33.350 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5962744Z  2026-02-14 13:15:33.350 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.5963800Z  2026-02-14 13:15:33.351 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5964747Z  2026-02-14 13:15:33.351 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.5965681Z  2026-02-14 13:15:33.351 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5966440Z  2026-02-14 13:15:33.351 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enriched_at IS 'Timestamp when ChatGPT enrichment was completed';
2026-02-14T13:16:24.5967202Z  2026-02-14 13:15:33.352 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5968424Z  2026-02-14 13:15:33.352 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_status IS 'JSONB tracking which fields were successfully extracted: {"summary": boolean, "skills": boolean, "location": boolean, "seniority": boolean, "remote_type": boolean, "salary": boolean}';
2026-02-14T13:16:24.5969630Z  2026-02-14 13:15:33.352 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5970356Z  2026-02-14 13:15:33.352 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_date IS 'Technical column: date when record was loaded';
2026-02-14T13:16:24.5971088Z  2026-02-14 13:15:33.353 UTC [170] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5971889Z  2026-02-14 13:15:33.353 UTC [170] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_timestamp IS 'Technical column: timestamp when record was loaded';
2026-02-14T13:16:24.5972695Z  2026-02-14 13:15:33.356 UTC [170] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.5973560Z  2026-02-14 13:15:33.356 UTC [170] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.5974469Z  2026-02-14 13:15:33.393 UTC [172] ERROR:  SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.5974938Z  2026-02-14 13:15:33.393 UTC [172] STATEMENT:  SAVEPOINT before_fact_jobs_delete
2026-02-14T13:16:24.5975413Z  2026-02-14 13:15:33.429 UTC [171] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.5975889Z  2026-02-14 13:15:33.564 UTC [175] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.5976315Z  2026-02-14 13:15:33.564 UTC [175] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.5976637Z  	DO $$
2026-02-14T13:16:24.5976776Z  	BEGIN
2026-02-14T13:16:24.5977004Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.5977361Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.5977684Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.5978126Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.5978392Z  	    END IF;
2026-02-14T13:16:24.5978544Z  	END $$;
2026-02-14T13:16:24.5978860Z  2026-02-14 13:15:33.573 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5979921Z  2026-02-14 13:15:33.573 UTC [175] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.5980998Z  2026-02-14 13:15:33.573 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5981860Z  2026-02-14 13:15:33.573 UTC [175] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.5982609Z  2026-02-14 13:15:33.574 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5983311Z  2026-02-14 13:15:33.574 UTC [175] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.5984122Z  2026-02-14 13:15:33.574 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5984835Z  2026-02-14 13:15:33.574 UTC [175] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.5985535Z  2026-02-14 13:15:33.575 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5986238Z  2026-02-14 13:15:33.575 UTC [175] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.5986949Z  2026-02-14 13:15:33.575 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5987703Z  2026-02-14 13:15:33.575 UTC [175] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.5988459Z  2026-02-14 13:15:33.576 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5989149Z  2026-02-14 13:15:33.576 UTC [175] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.5989837Z  2026-02-14 13:15:33.576 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5990504Z  2026-02-14 13:15:33.576 UTC [175] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.5991177Z  2026-02-14 13:15:33.577 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5991895Z  2026-02-14 13:15:33.577 UTC [175] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.5992612Z  2026-02-14 13:15:33.577 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5992979Z  2026-02-14 13:15:33.577 UTC [175] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.5993198Z  2026-02-14 13:15:33.578 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5993736Z  2026-02-14 13:15:33.578 UTC [175] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.5993954Z  2026-02-14 13:15:33.578 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5994409Z  2026-02-14 13:15:33.578 UTC [175] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.5994739Z  2026-02-14 13:15:33.579 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5995209Z  2026-02-14 13:15:33.579 UTC [175] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.5995428Z  2026-02-14 13:15:33.579 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5995699Z  2026-02-14 13:15:33.579 UTC [175] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.5995818Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.5996031Z  2026-02-14 13:15:33.580 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5996387Z  2026-02-14 13:15:33.580 UTC [175] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.5996511Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.5996727Z  2026-02-14 13:15:33.580 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5996991Z  2026-02-14 13:15:33.580 UTC [175] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.5997117Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.5997201Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.5997413Z  2026-02-14 13:15:33.581 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.5997713Z  2026-02-14 13:15:33.581 UTC [175] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.5997977Z  2026-02-14 13:15:33.582 UTC [175] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.5998328Z  2026-02-14 13:15:33.582 UTC [175] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.5998543Z  2026-02-14 13:15:33.583 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5998803Z  2026-02-14 13:15:33.583 UTC [175] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_chatgpt_enrichments_enriched_at 
2026-02-14T13:16:24.5998928Z  	    ON staging.chatgpt_enrichments(chatgpt_enriched_at);
2026-02-14T13:16:24.5999129Z  2026-02-14 13:15:33.583 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.5999532Z  2026-02-14 13:15:33.583 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.5999744Z  2026-02-14 13:15:33.583 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6000317Z  2026-02-14 13:15:33.583 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.jsearch_job_postings_key IS 'Foreign key to staging.jsearch_job_postings (UNIQUE - one enrichment per job)';
2026-02-14T13:16:24.6000527Z  2026-02-14 13:15:33.584 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6000995Z  2026-02-14 13:15:33.584 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6001194Z  2026-02-14 13:15:33.584 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6001706Z  2026-02-14 13:15:33.584 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6001912Z  2026-02-14 13:15:33.585 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6002378Z  2026-02-14 13:15:33.585 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6002584Z  2026-02-14 13:15:33.585 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6003367Z  2026-02-14 13:15:33.585 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6003569Z  2026-02-14 13:15:33.586 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6004320Z  2026-02-14 13:15:33.586 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6004636Z  2026-02-14 13:15:33.587 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6005081Z  2026-02-14 13:15:33.587 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6005289Z  2026-02-14 13:15:33.587 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6005723Z  2026-02-14 13:15:33.587 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6005929Z  2026-02-14 13:15:33.588 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6006578Z  2026-02-14 13:15:33.588 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6006784Z  2026-02-14 13:15:33.588 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6007417Z  2026-02-14 13:15:33.588 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6007628Z  2026-02-14 13:15:33.588 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6008082Z  2026-02-14 13:15:33.588 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enriched_at IS 'Timestamp when ChatGPT enrichment was completed';
2026-02-14T13:16:24.6008291Z  2026-02-14 13:15:33.589 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6009204Z  2026-02-14 13:15:33.589 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_status IS 'JSONB tracking which fields were successfully extracted: {"summary": boolean, "skills": boolean, "location": boolean, "seniority": boolean, "remote_type": boolean, "salary": boolean}';
2026-02-14T13:16:24.6009421Z  2026-02-14 13:15:33.589 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6009849Z  2026-02-14 13:15:33.589 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_date IS 'Technical column: date when record was loaded';
2026-02-14T13:16:24.6010051Z  2026-02-14 13:15:33.590 UTC [175] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6010509Z  2026-02-14 13:15:33.590 UTC [175] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_timestamp IS 'Technical column: timestamp when record was loaded';
2026-02-14T13:16:24.6010753Z  2026-02-14 13:15:33.593 UTC [175] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6011256Z  2026-02-14 13:15:33.593 UTC [175] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6011464Z  2026-02-14 13:15:33.628 UTC [177] ERROR:  SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.6011634Z  2026-02-14 13:15:33.628 UTC [177] STATEMENT:  SAVEPOINT before_fact_jobs_delete
2026-02-14T13:16:24.6011949Z  2026-02-14 13:15:33.663 UTC [176] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6012122Z  2026-02-14 13:15:33.801 UTC [180] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6012280Z  2026-02-14 13:15:33.801 UTC [180] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6012348Z  	DO $$
2026-02-14T13:16:24.6012406Z  	BEGIN
2026-02-14T13:16:24.6012559Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6012678Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6012798Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6012991Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6013051Z  	    END IF;
2026-02-14T13:16:24.6013116Z  	END $$;
2026-02-14T13:16:24.6013340Z  2026-02-14 13:15:33.810 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6014189Z  2026-02-14 13:15:33.810 UTC [180] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6014413Z  2026-02-14 13:15:33.810 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6014836Z  2026-02-14 13:15:33.810 UTC [180] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6015061Z  2026-02-14 13:15:33.811 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6015442Z  2026-02-14 13:15:33.811 UTC [180] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6015658Z  2026-02-14 13:15:33.811 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6016051Z  2026-02-14 13:15:33.811 UTC [180] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6016265Z  2026-02-14 13:15:33.812 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6016647Z  2026-02-14 13:15:33.812 UTC [180] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6016865Z  2026-02-14 13:15:33.812 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6017290Z  2026-02-14 13:15:33.812 UTC [180] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6017514Z  2026-02-14 13:15:33.813 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6017887Z  2026-02-14 13:15:33.813 UTC [180] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6018097Z  2026-02-14 13:15:33.813 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6018444Z  2026-02-14 13:15:33.813 UTC [180] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6018657Z  2026-02-14 13:15:33.814 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6019043Z  2026-02-14 13:15:33.814 UTC [180] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6019262Z  2026-02-14 13:15:33.814 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6019628Z  2026-02-14 13:15:33.814 UTC [180] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6019989Z  2026-02-14 13:15:33.815 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6020429Z  2026-02-14 13:15:33.815 UTC [180] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6020641Z  2026-02-14 13:15:33.815 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6021089Z  2026-02-14 13:15:33.815 UTC [180] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6021302Z  2026-02-14 13:15:33.816 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6021862Z  2026-02-14 13:15:33.816 UTC [180] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6022079Z  2026-02-14 13:15:33.816 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6022358Z  2026-02-14 13:15:33.816 UTC [180] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6022473Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6022693Z  2026-02-14 13:15:33.816 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6022948Z  2026-02-14 13:15:33.816 UTC [180] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6023061Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6023277Z  2026-02-14 13:15:33.817 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6023542Z  2026-02-14 13:15:33.817 UTC [180] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6023758Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6023849Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6024066Z  2026-02-14 13:15:33.817 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6024363Z  2026-02-14 13:15:33.817 UTC [180] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6024629Z  2026-02-14 13:15:33.818 UTC [180] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6024973Z  2026-02-14 13:15:33.818 UTC [180] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6025185Z  2026-02-14 13:15:33.819 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6025442Z  2026-02-14 13:15:33.819 UTC [180] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_chatgpt_enrichments_enriched_at 
2026-02-14T13:16:24.6025562Z  	    ON staging.chatgpt_enrichments(chatgpt_enriched_at);
2026-02-14T13:16:24.6025774Z  2026-02-14 13:15:33.819 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6026177Z  2026-02-14 13:15:33.819 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6026382Z  2026-02-14 13:15:33.820 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6026961Z  2026-02-14 13:15:33.820 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.jsearch_job_postings_key IS 'Foreign key to staging.jsearch_job_postings (UNIQUE - one enrichment per job)';
2026-02-14T13:16:24.6027163Z  2026-02-14 13:15:33.820 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6027633Z  2026-02-14 13:15:33.820 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6027842Z  2026-02-14 13:15:33.821 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6028465Z  2026-02-14 13:15:33.821 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6028674Z  2026-02-14 13:15:33.821 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6029125Z  2026-02-14 13:15:33.821 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6029327Z  2026-02-14 13:15:33.822 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6030134Z  2026-02-14 13:15:33.822 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6030340Z  2026-02-14 13:15:33.822 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6031014Z  2026-02-14 13:15:33.822 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6031227Z  2026-02-14 13:15:33.823 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6031685Z  2026-02-14 13:15:33.823 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6031892Z  2026-02-14 13:15:33.823 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6032333Z  2026-02-14 13:15:33.823 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6032541Z  2026-02-14 13:15:33.824 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6033198Z  2026-02-14 13:15:33.824 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6033400Z  2026-02-14 13:15:33.824 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6034141Z  2026-02-14 13:15:33.824 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6034363Z  2026-02-14 13:15:33.825 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6034824Z  2026-02-14 13:15:33.825 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enriched_at IS 'Timestamp when ChatGPT enrichment was completed';
2026-02-14T13:16:24.6035036Z  2026-02-14 13:15:33.825 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6035954Z  2026-02-14 13:15:33.825 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_status IS 'JSONB tracking which fields were successfully extracted: {"summary": boolean, "skills": boolean, "location": boolean, "seniority": boolean, "remote_type": boolean, "salary": boolean}';
2026-02-14T13:16:24.6036156Z  2026-02-14 13:15:33.826 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6036585Z  2026-02-14 13:15:33.826 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_date IS 'Technical column: date when record was loaded';
2026-02-14T13:16:24.6036788Z  2026-02-14 13:15:33.826 UTC [180] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6037373Z  2026-02-14 13:15:33.826 UTC [180] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_timestamp IS 'Technical column: timestamp when record was loaded';
2026-02-14T13:16:24.6037633Z  2026-02-14 13:15:33.830 UTC [180] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6038141Z  2026-02-14 13:15:33.830 UTC [180] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6038340Z  2026-02-14 13:15:33.862 UTC [182] ERROR:  SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.6038506Z  2026-02-14 13:15:33.862 UTC [182] STATEMENT:  SAVEPOINT before_fact_jobs_delete
2026-02-14T13:16:24.6038713Z  2026-02-14 13:15:33.897 UTC [181] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6038994Z  2026-02-14 13:15:34.035 UTC [185] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6039147Z  2026-02-14 13:15:34.035 UTC [185] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6039207Z  	DO $$
2026-02-14T13:16:24.6039275Z  	BEGIN
2026-02-14T13:16:24.6039430Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6039541Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6039671Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6039786Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6039846Z  	    END IF;
2026-02-14T13:16:24.6039905Z  	END $$;
2026-02-14T13:16:24.6040132Z  2026-02-14 13:15:34.044 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6040867Z  2026-02-14 13:15:34.044 UTC [185] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6041092Z  2026-02-14 13:15:34.044 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6041525Z  2026-02-14 13:15:34.044 UTC [185] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6068152Z  2026-02-14 13:15:34.045 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6068625Z  2026-02-14 13:15:34.045 UTC [185] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6068886Z  2026-02-14 13:15:34.045 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6069302Z  2026-02-14 13:15:34.045 UTC [185] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6069551Z  2026-02-14 13:15:34.046 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6069965Z  2026-02-14 13:15:34.046 UTC [185] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6070187Z  2026-02-14 13:15:34.046 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6070624Z  2026-02-14 13:15:34.046 UTC [185] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6070842Z  2026-02-14 13:15:34.047 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6071223Z  2026-02-14 13:15:34.047 UTC [185] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6071486Z  2026-02-14 13:15:34.047 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6071832Z  2026-02-14 13:15:34.047 UTC [185] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6072220Z  2026-02-14 13:15:34.047 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6072622Z  2026-02-14 13:15:34.047 UTC [185] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6072837Z  2026-02-14 13:15:34.048 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6073209Z  2026-02-14 13:15:34.048 UTC [185] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6073428Z  2026-02-14 13:15:34.048 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6074111Z  2026-02-14 13:15:34.048 UTC [185] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6074347Z  2026-02-14 13:15:34.049 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6074810Z  2026-02-14 13:15:34.049 UTC [185] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6075036Z  2026-02-14 13:15:34.049 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6075502Z  2026-02-14 13:15:34.049 UTC [185] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6075719Z  2026-02-14 13:15:34.050 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6076000Z  2026-02-14 13:15:34.050 UTC [185] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6076127Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6076344Z  2026-02-14 13:15:34.050 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6076618Z  2026-02-14 13:15:34.050 UTC [185] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6076749Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6076977Z  2026-02-14 13:15:34.051 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6077252Z  2026-02-14 13:15:34.051 UTC [185] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6077380Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6077468Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6077692Z  2026-02-14 13:15:34.051 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6078013Z  2026-02-14 13:15:34.051 UTC [185] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6078285Z  2026-02-14 13:15:34.052 UTC [185] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6078640Z  2026-02-14 13:15:34.052 UTC [185] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6078855Z  2026-02-14 13:15:34.053 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6079116Z  2026-02-14 13:15:34.053 UTC [185] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_chatgpt_enrichments_enriched_at 
2026-02-14T13:16:24.6079243Z  	    ON staging.chatgpt_enrichments(chatgpt_enriched_at);
2026-02-14T13:16:24.6079450Z  2026-02-14 13:15:34.053 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6079874Z  2026-02-14 13:15:34.053 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6080081Z  2026-02-14 13:15:34.054 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6080781Z  2026-02-14 13:15:34.054 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.jsearch_job_postings_key IS 'Foreign key to staging.jsearch_job_postings (UNIQUE - one enrichment per job)';
2026-02-14T13:16:24.6080991Z  2026-02-14 13:15:34.054 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6081466Z  2026-02-14 13:15:34.054 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6081671Z  2026-02-14 13:15:34.055 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6082289Z  2026-02-14 13:15:34.055 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6082489Z  2026-02-14 13:15:34.055 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6082956Z  2026-02-14 13:15:34.055 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6083166Z  2026-02-14 13:15:34.056 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6083981Z  2026-02-14 13:15:34.056 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6084186Z  2026-02-14 13:15:34.056 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6084841Z  2026-02-14 13:15:34.056 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6085051Z  2026-02-14 13:15:34.057 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6085506Z  2026-02-14 13:15:34.057 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6085711Z  2026-02-14 13:15:34.057 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6086149Z  2026-02-14 13:15:34.057 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6086355Z  2026-02-14 13:15:34.058 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6087011Z  2026-02-14 13:15:34.058 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6087226Z  2026-02-14 13:15:34.058 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6087850Z  2026-02-14 13:15:34.058 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6088055Z  2026-02-14 13:15:34.059 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6088516Z  2026-02-14 13:15:34.059 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enriched_at IS 'Timestamp when ChatGPT enrichment was completed';
2026-02-14T13:16:24.6088721Z  2026-02-14 13:15:34.059 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6089759Z  2026-02-14 13:15:34.059 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_status IS 'JSONB tracking which fields were successfully extracted: {"summary": boolean, "skills": boolean, "location": boolean, "seniority": boolean, "remote_type": boolean, "salary": boolean}';
2026-02-14T13:16:24.6089965Z  2026-02-14 13:15:34.060 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6090384Z  2026-02-14 13:15:34.060 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_date IS 'Technical column: date when record was loaded';
2026-02-14T13:16:24.6090588Z  2026-02-14 13:15:34.060 UTC [185] ERROR:  relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6091046Z  2026-02-14 13:15:34.060 UTC [185] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.dwh_load_timestamp IS 'Technical column: timestamp when record was loaded';
2026-02-14T13:16:24.6091395Z  2026-02-14 13:15:34.064 UTC [185] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6091915Z  2026-02-14 13:15:34.064 UTC [185] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6092114Z  2026-02-14 13:15:34.099 UTC [187] ERROR:  SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.6092283Z  2026-02-14 13:15:34.099 UTC [187] STATEMENT:  SAVEPOINT before_fact_jobs_delete
2026-02-14T13:16:24.6092493Z  2026-02-14 13:15:34.135 UTC [186] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6092668Z  2026-02-14 13:15:34.282 UTC [190] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6092831Z  2026-02-14 13:15:34.282 UTC [190] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6092896Z  	DO $$
2026-02-14T13:16:24.6092957Z  	BEGIN
2026-02-14T13:16:24.6093115Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6093237Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6093362Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6093483Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6093551Z  	    END IF;
2026-02-14T13:16:24.6093767Z  	END $$;
2026-02-14T13:16:24.6094021Z  2026-02-14 13:15:34.292 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6094778Z  2026-02-14 13:15:34.292 UTC [190] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6095004Z  2026-02-14 13:15:34.292 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6095438Z  2026-02-14 13:15:34.292 UTC [190] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6095659Z  2026-02-14 13:15:34.293 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6096046Z  2026-02-14 13:15:34.293 UTC [190] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6096266Z  2026-02-14 13:15:34.293 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6096654Z  2026-02-14 13:15:34.293 UTC [190] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6096869Z  2026-02-14 13:15:34.294 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6097264Z  2026-02-14 13:15:34.294 UTC [190] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6097483Z  2026-02-14 13:15:34.294 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6098028Z  2026-02-14 13:15:34.294 UTC [190] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6098251Z  2026-02-14 13:15:34.295 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6098618Z  2026-02-14 13:15:34.295 UTC [190] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6098848Z  2026-02-14 13:15:34.295 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6099209Z  2026-02-14 13:15:34.295 UTC [190] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6099428Z  2026-02-14 13:15:34.296 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6099924Z  2026-02-14 13:15:34.296 UTC [190] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6100148Z  2026-02-14 13:15:34.297 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6100514Z  2026-02-14 13:15:34.297 UTC [190] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6100735Z  2026-02-14 13:15:34.297 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6101163Z  2026-02-14 13:15:34.297 UTC [190] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6101378Z  2026-02-14 13:15:34.298 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6101830Z  2026-02-14 13:15:34.298 UTC [190] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6102047Z  2026-02-14 13:15:34.298 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6102525Z  2026-02-14 13:15:34.298 UTC [190] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6102744Z  2026-02-14 13:15:34.299 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6103021Z  2026-02-14 13:15:34.299 UTC [190] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6103142Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6103360Z  2026-02-14 13:15:34.299 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6103720Z  2026-02-14 13:15:34.299 UTC [190] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6103851Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6104068Z  2026-02-14 13:15:34.300 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6104335Z  2026-02-14 13:15:34.300 UTC [190] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6104460Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6104548Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6104764Z  2026-02-14 13:15:34.300 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6105079Z  2026-02-14 13:15:34.300 UTC [190] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6105342Z  2026-02-14 13:15:34.301 UTC [190] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6105698Z  2026-02-14 13:15:34.301 UTC [190] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6106034Z  2026-02-14 13:15:34.303 UTC [190] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6106559Z  2026-02-14 13:15:34.303 UTC [190] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6106853Z  2026-02-14 13:15:34.304 UTC [190] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6107326Z  2026-02-14 13:15:34.304 UTC [190] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6107661Z  2026-02-14 13:15:34.304 UTC [190] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6108320Z  2026-02-14 13:15:34.304 UTC [190] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6108664Z  2026-02-14 13:15:34.305 UTC [190] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6109125Z  2026-02-14 13:15:34.305 UTC [190] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6109456Z  2026-02-14 13:15:34.305 UTC [190] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6110166Z  2026-02-14 13:15:34.305 UTC [190] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6110500Z  2026-02-14 13:15:34.306 UTC [190] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6111153Z  2026-02-14 13:15:34.306 UTC [190] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6111476Z  2026-02-14 13:15:34.306 UTC [190] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6111923Z  2026-02-14 13:15:34.306 UTC [190] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6112240Z  2026-02-14 13:15:34.307 UTC [190] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6112683Z  2026-02-14 13:15:34.307 UTC [190] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6113011Z  2026-02-14 13:15:34.307 UTC [190] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6113769Z  2026-02-14 13:15:34.307 UTC [190] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6114108Z  2026-02-14 13:15:34.308 UTC [190] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6114740Z  2026-02-14 13:15:34.308 UTC [190] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6114990Z  2026-02-14 13:15:34.313 UTC [190] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6115506Z  2026-02-14 13:15:34.313 UTC [190] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6115749Z  2026-02-14 13:15:34.339 UTC [200] FATAL:  role "root" does not exist
2026-02-14T13:16:24.6115951Z  2026-02-14 13:15:34.354 UTC [199] ERROR:  SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.6116118Z  2026-02-14 13:15:34.354 UTC [199] STATEMENT:  SAVEPOINT before_fact_jobs_delete
2026-02-14T13:16:24.6116328Z  2026-02-14 13:15:34.443 UTC [198] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6116510Z  2026-02-14 13:15:34.586 UTC [203] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6116669Z  2026-02-14 13:15:34.586 UTC [203] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6116729Z  	DO $$
2026-02-14T13:16:24.6116799Z  	BEGIN
2026-02-14T13:16:24.6117052Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6117164Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6117292Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6117408Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6117474Z  	    END IF;
2026-02-14T13:16:24.6117540Z  	END $$;
2026-02-14T13:16:24.6117763Z  2026-02-14 13:15:34.595 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6118505Z  2026-02-14 13:15:34.595 UTC [203] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6118728Z  2026-02-14 13:15:34.595 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6119154Z  2026-02-14 13:15:34.595 UTC [203] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6119373Z  2026-02-14 13:15:34.596 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6119756Z  2026-02-14 13:15:34.596 UTC [203] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6119973Z  2026-02-14 13:15:34.596 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6120358Z  2026-02-14 13:15:34.596 UTC [203] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6120577Z  2026-02-14 13:15:34.597 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6120964Z  2026-02-14 13:15:34.597 UTC [203] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6121191Z  2026-02-14 13:15:34.597 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6121627Z  2026-02-14 13:15:34.597 UTC [203] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6121845Z  2026-02-14 13:15:34.598 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6122214Z  2026-02-14 13:15:34.598 UTC [203] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6122427Z  2026-02-14 13:15:34.598 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6122767Z  2026-02-14 13:15:34.598 UTC [203] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6122986Z  2026-02-14 13:15:34.599 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6123381Z  2026-02-14 13:15:34.599 UTC [203] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6123803Z  2026-02-14 13:15:34.599 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6124182Z  2026-02-14 13:15:34.599 UTC [203] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6124400Z  2026-02-14 13:15:34.600 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6124832Z  2026-02-14 13:15:34.600 UTC [203] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6125046Z  2026-02-14 13:15:34.600 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6125492Z  2026-02-14 13:15:34.600 UTC [203] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6125815Z  2026-02-14 13:15:34.601 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6126279Z  2026-02-14 13:15:34.601 UTC [203] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6126509Z  2026-02-14 13:15:34.601 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6126794Z  2026-02-14 13:15:34.601 UTC [203] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6126913Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6127136Z  2026-02-14 13:15:34.602 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6127402Z  2026-02-14 13:15:34.602 UTC [203] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6127529Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6127746Z  2026-02-14 13:15:34.602 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6128017Z  2026-02-14 13:15:34.602 UTC [203] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6128141Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6128227Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6128447Z  2026-02-14 13:15:34.603 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6128755Z  2026-02-14 13:15:34.603 UTC [203] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6129021Z  2026-02-14 13:15:34.603 UTC [203] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6129372Z  2026-02-14 13:15:34.603 UTC [203] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6129708Z  2026-02-14 13:15:34.605 UTC [203] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6130132Z  2026-02-14 13:15:34.605 UTC [203] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6130419Z  2026-02-14 13:15:34.606 UTC [203] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6130887Z  2026-02-14 13:15:34.606 UTC [203] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6131234Z  2026-02-14 13:15:34.607 UTC [203] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6131749Z  2026-02-14 13:15:34.607 UTC [203] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6132175Z  2026-02-14 13:15:34.607 UTC [203] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6132642Z  2026-02-14 13:15:34.607 UTC [203] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6132968Z  2026-02-14 13:15:34.608 UTC [203] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6133828Z  2026-02-14 13:15:34.608 UTC [203] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6134275Z  2026-02-14 13:15:34.608 UTC [203] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6134936Z  2026-02-14 13:15:34.608 UTC [203] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6135267Z  2026-02-14 13:15:34.609 UTC [203] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6135710Z  2026-02-14 13:15:34.609 UTC [203] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6136028Z  2026-02-14 13:15:34.609 UTC [203] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6136463Z  2026-02-14 13:15:34.609 UTC [203] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6136791Z  2026-02-14 13:15:34.610 UTC [203] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6137453Z  2026-02-14 13:15:34.610 UTC [203] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6137783Z  2026-02-14 13:15:34.610 UTC [203] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6138411Z  2026-02-14 13:15:34.610 UTC [203] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6138669Z  2026-02-14 13:15:34.614 UTC [203] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6139179Z  2026-02-14 13:15:34.614 UTC [203] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6139389Z  2026-02-14 13:15:34.654 UTC [205] ERROR:  SAVEPOINT can only be used in transaction blocks
2026-02-14T13:16:24.6139554Z  2026-02-14 13:15:34.654 UTC [205] STATEMENT:  SAVEPOINT before_fact_jobs_delete
2026-02-14T13:16:24.6139757Z  2026-02-14 13:15:34.689 UTC [204] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6139937Z  2026-02-14 13:15:34.825 UTC [208] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6140096Z  2026-02-14 13:15:34.825 UTC [208] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6140157Z  	DO $$
2026-02-14T13:16:24.6140222Z  	BEGIN
2026-02-14T13:16:24.6140379Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6140498Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6140627Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6140743Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6140804Z  	    END IF;
2026-02-14T13:16:24.6140870Z  	END $$;
2026-02-14T13:16:24.6141211Z  2026-02-14 13:15:34.834 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6141942Z  2026-02-14 13:15:34.834 UTC [208] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6142173Z  2026-02-14 13:15:34.835 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6142604Z  2026-02-14 13:15:34.835 UTC [208] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6142900Z  2026-02-14 13:15:34.835 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6143288Z  2026-02-14 13:15:34.835 UTC [208] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6143510Z  2026-02-14 13:15:34.836 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6144118Z  2026-02-14 13:15:34.836 UTC [208] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6144338Z  2026-02-14 13:15:34.836 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6144720Z  2026-02-14 13:15:34.836 UTC [208] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6144942Z  2026-02-14 13:15:34.837 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6145379Z  2026-02-14 13:15:34.837 UTC [208] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6145597Z  2026-02-14 13:15:34.837 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6145969Z  2026-02-14 13:15:34.837 UTC [208] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6146185Z  2026-02-14 13:15:34.838 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6146531Z  2026-02-14 13:15:34.838 UTC [208] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6146749Z  2026-02-14 13:15:34.838 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6147143Z  2026-02-14 13:15:34.838 UTC [208] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6147369Z  2026-02-14 13:15:34.839 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6147745Z  2026-02-14 13:15:34.839 UTC [208] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6147961Z  2026-02-14 13:15:34.839 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6148397Z  2026-02-14 13:15:34.839 UTC [208] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6148612Z  2026-02-14 13:15:34.840 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6149063Z  2026-02-14 13:15:34.840 UTC [208] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6149287Z  2026-02-14 13:15:34.840 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6149881Z  2026-02-14 13:15:34.840 UTC [208] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6150099Z  2026-02-14 13:15:34.841 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6150383Z  2026-02-14 13:15:34.841 UTC [208] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6150498Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6150717Z  2026-02-14 13:15:34.841 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6150981Z  2026-02-14 13:15:34.841 UTC [208] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6151206Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6151424Z  2026-02-14 13:15:34.842 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6151687Z  2026-02-14 13:15:34.842 UTC [208] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6151814Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6151914Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6152128Z  2026-02-14 13:15:34.842 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6152435Z  2026-02-14 13:15:34.842 UTC [208] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6152704Z  2026-02-14 13:15:34.843 UTC [208] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6153055Z  2026-02-14 13:15:34.843 UTC [208] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6153397Z  2026-02-14 13:15:34.845 UTC [208] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6153922Z  2026-02-14 13:15:34.845 UTC [208] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6154216Z  2026-02-14 13:15:34.846 UTC [208] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6154681Z  2026-02-14 13:15:34.846 UTC [208] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6155030Z  2026-02-14 13:15:34.846 UTC [208] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6155546Z  2026-02-14 13:15:34.846 UTC [208] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6155904Z  2026-02-14 13:15:34.847 UTC [208] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6156368Z  2026-02-14 13:15:34.847 UTC [208] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6156697Z  2026-02-14 13:15:34.847 UTC [208] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6157411Z  2026-02-14 13:15:34.847 UTC [208] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6157743Z  2026-02-14 13:15:34.848 UTC [208] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6158408Z  2026-02-14 13:15:34.848 UTC [208] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6158841Z  2026-02-14 13:15:34.848 UTC [208] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6159294Z  2026-02-14 13:15:34.848 UTC [208] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6159615Z  2026-02-14 13:15:34.849 UTC [208] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6160053Z  2026-02-14 13:15:34.849 UTC [208] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6160478Z  2026-02-14 13:15:34.849 UTC [208] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6161145Z  2026-02-14 13:15:34.849 UTC [208] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6161475Z  2026-02-14 13:15:34.850 UTC [208] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6162120Z  2026-02-14 13:15:34.850 UTC [208] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6162370Z  2026-02-14 13:15:34.854 UTC [208] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6162878Z  2026-02-14 13:15:34.854 UTC [208] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6163100Z  2026-02-14 13:15:34.895 UTC [209] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6163279Z  2026-02-14 13:15:35.030 UTC [213] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6163436Z  2026-02-14 13:15:35.030 UTC [213] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6163504Z  	DO $$
2026-02-14T13:16:24.6163565Z  	BEGIN
2026-02-14T13:16:24.6163846Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6163968Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6164091Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6164209Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6164274Z  	    END IF;
2026-02-14T13:16:24.6164334Z  	END $$;
2026-02-14T13:16:24.6164563Z  2026-02-14 13:15:35.039 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6165309Z  2026-02-14 13:15:35.039 UTC [213] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6165531Z  2026-02-14 13:15:35.039 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6165953Z  2026-02-14 13:15:35.039 UTC [213] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6166173Z  2026-02-14 13:15:35.040 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6166552Z  2026-02-14 13:15:35.040 UTC [213] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6166776Z  2026-02-14 13:15:35.040 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6167164Z  2026-02-14 13:15:35.040 UTC [213] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6167494Z  2026-02-14 13:15:35.041 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6167879Z  2026-02-14 13:15:35.041 UTC [213] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6168096Z  2026-02-14 13:15:35.041 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6168528Z  2026-02-14 13:15:35.041 UTC [213] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6168750Z  2026-02-14 13:15:35.042 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6169219Z  2026-02-14 13:15:35.042 UTC [213] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6169435Z  2026-02-14 13:15:35.042 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6169788Z  2026-02-14 13:15:35.042 UTC [213] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6170006Z  2026-02-14 13:15:35.043 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6170399Z  2026-02-14 13:15:35.043 UTC [213] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6170615Z  2026-02-14 13:15:35.043 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6170983Z  2026-02-14 13:15:35.043 UTC [213] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6171210Z  2026-02-14 13:15:35.044 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6171671Z  2026-02-14 13:15:35.044 UTC [213] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6171889Z  2026-02-14 13:15:35.044 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6172343Z  2026-02-14 13:15:35.044 UTC [213] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6172559Z  2026-02-14 13:15:35.045 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6173014Z  2026-02-14 13:15:35.045 UTC [213] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6173238Z  2026-02-14 13:15:35.045 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6173515Z  2026-02-14 13:15:35.045 UTC [213] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6173755Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6173972Z  2026-02-14 13:15:35.046 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6174231Z  2026-02-14 13:15:35.046 UTC [213] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6174354Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6174565Z  2026-02-14 13:15:35.046 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6174829Z  2026-02-14 13:15:35.046 UTC [213] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6174961Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6175048Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6175268Z  2026-02-14 13:15:35.047 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6175724Z  2026-02-14 13:15:35.047 UTC [213] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6175992Z  2026-02-14 13:15:35.047 UTC [213] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6176340Z  2026-02-14 13:15:35.047 UTC [213] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6176674Z  2026-02-14 13:15:35.049 UTC [213] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6177083Z  2026-02-14 13:15:35.049 UTC [213] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6177472Z  2026-02-14 13:15:35.050 UTC [213] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6177950Z  2026-02-14 13:15:35.050 UTC [213] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6178285Z  2026-02-14 13:15:35.050 UTC [213] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6178806Z  2026-02-14 13:15:35.050 UTC [213] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6179145Z  2026-02-14 13:15:35.051 UTC [213] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6179609Z  2026-02-14 13:15:35.051 UTC [213] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6179942Z  2026-02-14 13:15:35.051 UTC [213] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6180653Z  2026-02-14 13:15:35.051 UTC [213] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6180988Z  2026-02-14 13:15:35.052 UTC [213] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6181645Z  2026-02-14 13:15:35.052 UTC [213] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6181964Z  2026-02-14 13:15:35.052 UTC [213] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6182416Z  2026-02-14 13:15:35.052 UTC [213] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6182737Z  2026-02-14 13:15:35.053 UTC [213] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6183181Z  2026-02-14 13:15:35.053 UTC [213] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6183508Z  2026-02-14 13:15:35.053 UTC [213] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6184316Z  2026-02-14 13:15:35.053 UTC [213] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6184653Z  2026-02-14 13:15:35.054 UTC [213] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6185397Z  2026-02-14 13:15:35.054 UTC [213] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6185652Z  2026-02-14 13:15:35.058 UTC [213] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6186165Z  2026-02-14 13:15:35.058 UTC [213] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6186368Z  2026-02-14 13:15:35.098 UTC [214] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6186542Z  2026-02-14 13:15:35.230 UTC [218] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6186804Z  2026-02-14 13:15:35.230 UTC [218] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6186867Z  	DO $$
2026-02-14T13:16:24.6186926Z  	BEGIN
2026-02-14T13:16:24.6187090Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6187208Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6187328Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6187454Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6187517Z  	    END IF;
2026-02-14T13:16:24.6187577Z  	END $$;
2026-02-14T13:16:24.6187812Z  2026-02-14 13:15:35.239 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6188559Z  2026-02-14 13:15:35.239 UTC [218] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6188790Z  2026-02-14 13:15:35.240 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6189220Z  2026-02-14 13:15:35.240 UTC [218] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6189438Z  2026-02-14 13:15:35.240 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6189821Z  2026-02-14 13:15:35.240 UTC [218] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6190035Z  2026-02-14 13:15:35.241 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6190423Z  2026-02-14 13:15:35.241 UTC [218] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6190645Z  2026-02-14 13:15:35.241 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6191033Z  2026-02-14 13:15:35.241 UTC [218] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6191254Z  2026-02-14 13:15:35.242 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6191691Z  2026-02-14 13:15:35.242 UTC [218] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6191917Z  2026-02-14 13:15:35.242 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6192290Z  2026-02-14 13:15:35.242 UTC [218] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6192508Z  2026-02-14 13:15:35.243 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6192860Z  2026-02-14 13:15:35.243 UTC [218] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6193086Z  2026-02-14 13:15:35.243 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6193554Z  2026-02-14 13:15:35.243 UTC [218] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6193874Z  2026-02-14 13:15:35.244 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6194246Z  2026-02-14 13:15:35.244 UTC [218] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6194462Z  2026-02-14 13:15:35.244 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6194892Z  2026-02-14 13:15:35.244 UTC [218] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6195223Z  2026-02-14 13:15:35.245 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6195676Z  2026-02-14 13:15:35.245 UTC [218] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6195898Z  2026-02-14 13:15:35.245 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6196359Z  2026-02-14 13:15:35.245 UTC [218] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6196575Z  2026-02-14 13:15:35.246 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6196856Z  2026-02-14 13:15:35.246 UTC [218] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6196980Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6197194Z  2026-02-14 13:15:35.246 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6197453Z  2026-02-14 13:15:35.246 UTC [218] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6197572Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6197785Z  2026-02-14 13:15:35.247 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6198052Z  2026-02-14 13:15:35.247 UTC [218] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6198173Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6198261Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6198478Z  2026-02-14 13:15:35.247 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6198778Z  2026-02-14 13:15:35.247 UTC [218] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6199042Z  2026-02-14 13:15:35.248 UTC [218] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6199401Z  2026-02-14 13:15:35.248 UTC [218] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6199731Z  2026-02-14 13:15:35.250 UTC [218] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6200143Z  2026-02-14 13:15:35.250 UTC [218] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6200427Z  2026-02-14 13:15:35.251 UTC [218] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6200893Z  2026-02-14 13:15:35.251 UTC [218] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6201232Z  2026-02-14 13:15:35.251 UTC [218] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6201846Z  2026-02-14 13:15:35.251 UTC [218] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6202194Z  2026-02-14 13:15:35.252 UTC [218] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6202662Z  2026-02-14 13:15:35.252 UTC [218] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6202991Z  2026-02-14 13:15:35.252 UTC [218] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6203798Z  2026-02-14 13:15:35.252 UTC [218] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6204243Z  2026-02-14 13:15:35.253 UTC [218] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6204900Z  2026-02-14 13:15:35.253 UTC [218] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6205225Z  2026-02-14 13:15:35.253 UTC [218] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6205670Z  2026-02-14 13:15:35.253 UTC [218] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6205993Z  2026-02-14 13:15:35.254 UTC [218] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6206435Z  2026-02-14 13:15:35.254 UTC [218] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6206761Z  2026-02-14 13:15:35.254 UTC [218] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6207422Z  2026-02-14 13:15:35.254 UTC [218] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6207750Z  2026-02-14 13:15:35.255 UTC [218] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6208376Z  2026-02-14 13:15:35.255 UTC [218] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6208631Z  2026-02-14 13:15:35.259 UTC [218] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6209141Z  2026-02-14 13:15:35.259 UTC [218] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6209355Z  2026-02-14 13:15:35.299 UTC [219] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6209528Z  2026-02-14 13:15:35.437 UTC [223] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6209686Z  2026-02-14 13:15:35.437 UTC [223] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6209751Z  	DO $$
2026-02-14T13:16:24.6209810Z  	BEGIN
2026-02-14T13:16:24.6209960Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6210080Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6210203Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6210321Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6210387Z  	    END IF;
2026-02-14T13:16:24.6210448Z  	END $$;
2026-02-14T13:16:24.6210777Z  2026-02-14 13:15:35.446 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6211526Z  2026-02-14 13:15:35.446 UTC [223] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6211750Z  2026-02-14 13:15:35.446 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6212172Z  2026-02-14 13:15:35.446 UTC [223] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6212469Z  2026-02-14 13:15:35.447 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6212850Z  2026-02-14 13:15:35.447 UTC [223] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6213073Z  2026-02-14 13:15:35.447 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6213467Z  2026-02-14 13:15:35.447 UTC [223] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6213789Z  2026-02-14 13:15:35.448 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6214174Z  2026-02-14 13:15:35.448 UTC [223] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6214395Z  2026-02-14 13:15:35.448 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6214831Z  2026-02-14 13:15:35.448 UTC [223] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6215060Z  2026-02-14 13:15:35.449 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6215427Z  2026-02-14 13:15:35.449 UTC [223] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6215640Z  2026-02-14 13:15:35.449 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6215989Z  2026-02-14 13:15:35.449 UTC [223] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6216206Z  2026-02-14 13:15:35.450 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6216593Z  2026-02-14 13:15:35.450 UTC [223] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6216819Z  2026-02-14 13:15:35.450 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6217189Z  2026-02-14 13:15:35.450 UTC [223] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6217408Z  2026-02-14 13:15:35.451 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6217844Z  2026-02-14 13:15:35.451 UTC [223] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6218060Z  2026-02-14 13:15:35.451 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6218512Z  2026-02-14 13:15:35.451 UTC [223] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6218732Z  2026-02-14 13:15:35.452 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6219311Z  2026-02-14 13:15:35.452 UTC [223] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6219534Z  2026-02-14 13:15:35.452 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6219811Z  2026-02-14 13:15:35.452 UTC [223] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6219926Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6220148Z  2026-02-14 13:15:35.453 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6220404Z  2026-02-14 13:15:35.453 UTC [223] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6220625Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6220849Z  2026-02-14 13:15:35.453 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6221116Z  2026-02-14 13:15:35.453 UTC [223] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6221235Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6221326Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6221544Z  2026-02-14 13:15:35.454 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6221848Z  2026-02-14 13:15:35.454 UTC [223] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6222114Z  2026-02-14 13:15:35.454 UTC [223] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6222459Z  2026-02-14 13:15:35.454 UTC [223] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6222796Z  2026-02-14 13:15:35.456 UTC [223] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6223209Z  2026-02-14 13:15:35.456 UTC [223] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6223503Z  2026-02-14 13:15:35.457 UTC [223] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6224069Z  2026-02-14 13:15:35.457 UTC [223] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6224406Z  2026-02-14 13:15:35.458 UTC [223] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6224923Z  2026-02-14 13:15:35.458 UTC [223] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6225273Z  2026-02-14 13:15:35.458 UTC [223] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6225738Z  2026-02-14 13:15:35.458 UTC [223] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6226073Z  2026-02-14 13:15:35.459 UTC [223] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6226776Z  2026-02-14 13:15:35.459 UTC [223] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6227107Z  2026-02-14 13:15:35.459 UTC [223] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6227769Z  2026-02-14 13:15:35.459 UTC [223] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6228206Z  2026-02-14 13:15:35.460 UTC [223] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6228657Z  2026-02-14 13:15:35.460 UTC [223] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6228975Z  2026-02-14 13:15:35.460 UTC [223] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6229416Z  2026-02-14 13:15:35.460 UTC [223] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6229860Z  2026-02-14 13:15:35.461 UTC [223] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6230527Z  2026-02-14 13:15:35.461 UTC [223] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6230854Z  2026-02-14 13:15:35.461 UTC [223] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6231485Z  2026-02-14 13:15:35.461 UTC [223] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6231731Z  2026-02-14 13:15:35.465 UTC [223] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6232250Z  2026-02-14 13:15:35.465 UTC [223] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6232463Z  2026-02-14 13:15:35.505 UTC [224] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6232641Z  2026-02-14 13:15:35.642 UTC [228] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6232806Z  2026-02-14 13:15:35.642 UTC [228] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6232868Z  	DO $$
2026-02-14T13:16:24.6232928Z  	BEGIN
2026-02-14T13:16:24.6233083Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6233196Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6233319Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6233443Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6233502Z  	    END IF;
2026-02-14T13:16:24.6233562Z  	END $$;
2026-02-14T13:16:24.6233895Z  2026-02-14 13:15:35.651 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6234636Z  2026-02-14 13:15:35.651 UTC [228] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6234857Z  2026-02-14 13:15:35.651 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6235336Z  2026-02-14 13:15:35.651 UTC [228] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6235738Z  2026-02-14 13:15:35.652 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6236347Z  2026-02-14 13:15:35.652 UTC [228] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6236727Z  2026-02-14 13:15:35.652 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6237391Z  2026-02-14 13:15:35.652 UTC [228] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6237997Z  2026-02-14 13:15:35.653 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6238649Z  2026-02-14 13:15:35.653 UTC [228] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6239007Z  2026-02-14 13:15:35.653 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6239728Z  2026-02-14 13:15:35.653 UTC [228] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6240085Z  2026-02-14 13:15:35.654 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6240896Z  2026-02-14 13:15:35.654 UTC [228] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6241299Z  2026-02-14 13:15:35.654 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6241882Z  2026-02-14 13:15:35.654 UTC [228] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6242252Z  2026-02-14 13:15:35.655 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6242922Z  2026-02-14 13:15:35.655 UTC [228] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6243322Z  2026-02-14 13:15:35.655 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6244233Z  2026-02-14 13:15:35.655 UTC [228] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6244661Z  2026-02-14 13:15:35.656 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6245454Z  2026-02-14 13:15:35.656 UTC [228] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6245864Z  2026-02-14 13:15:35.656 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6246659Z  2026-02-14 13:15:35.656 UTC [228] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6247065Z  2026-02-14 13:15:35.657 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6247831Z  2026-02-14 13:15:35.657 UTC [228] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6248190Z  2026-02-14 13:15:35.657 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6248639Z  2026-02-14 13:15:35.657 UTC [228] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6248839Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6249213Z  2026-02-14 13:15:35.658 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6249665Z  2026-02-14 13:15:35.658 UTC [228] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6249877Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6250268Z  2026-02-14 13:15:35.658 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6250751Z  2026-02-14 13:15:35.658 UTC [228] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6250919Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6251009Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6251244Z  2026-02-14 13:15:35.659 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6251769Z  2026-02-14 13:15:35.659 UTC [228] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6252041Z  2026-02-14 13:15:35.659 UTC [228] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6252407Z  2026-02-14 13:15:35.659 UTC [228] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6252746Z  2026-02-14 13:15:35.661 UTC [228] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6253168Z  2026-02-14 13:15:35.661 UTC [228] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6253573Z  2026-02-14 13:15:35.662 UTC [228] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6254212Z  2026-02-14 13:15:35.662 UTC [228] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6254562Z  2026-02-14 13:15:35.663 UTC [228] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6255359Z  2026-02-14 13:15:35.663 UTC [228] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6256003Z  2026-02-14 13:15:35.663 UTC [228] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6256633Z  2026-02-14 13:15:35.663 UTC [228] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6256972Z  2026-02-14 13:15:35.664 UTC [228] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6257694Z  2026-02-14 13:15:35.664 UTC [228] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6258028Z  2026-02-14 13:15:35.664 UTC [228] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6258681Z  2026-02-14 13:15:35.664 UTC [228] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6259010Z  2026-02-14 13:15:35.665 UTC [228] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6259460Z  2026-02-14 13:15:35.665 UTC [228] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6259785Z  2026-02-14 13:15:35.665 UTC [228] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6260234Z  2026-02-14 13:15:35.665 UTC [228] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6260556Z  2026-02-14 13:15:35.666 UTC [228] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6261243Z  2026-02-14 13:15:35.666 UTC [228] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6261575Z  2026-02-14 13:15:35.666 UTC [228] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6262339Z  2026-02-14 13:15:35.666 UTC [228] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6262596Z  2026-02-14 13:15:35.670 UTC [228] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6263103Z  2026-02-14 13:15:35.670 UTC [228] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6263310Z  2026-02-14 13:15:35.710 UTC [229] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6263492Z  2026-02-14 13:15:35.844 UTC [233] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6263872Z  2026-02-14 13:15:35.844 UTC [233] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6263942Z  	DO $$
2026-02-14T13:16:24.6264007Z  	BEGIN
2026-02-14T13:16:24.6264163Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6264286Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6264420Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6264545Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6264608Z  	    END IF;
2026-02-14T13:16:24.6264676Z  	END $$;
2026-02-14T13:16:24.6264916Z  2026-02-14 13:15:35.853 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6265665Z  2026-02-14 13:15:35.853 UTC [233] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6265902Z  2026-02-14 13:15:35.854 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6266335Z  2026-02-14 13:15:35.854 UTC [233] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6266557Z  2026-02-14 13:15:35.854 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6266940Z  2026-02-14 13:15:35.854 UTC [233] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6267159Z  2026-02-14 13:15:35.855 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6267550Z  2026-02-14 13:15:35.855 UTC [233] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6267775Z  2026-02-14 13:15:35.855 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6268160Z  2026-02-14 13:15:35.855 UTC [233] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6268390Z  2026-02-14 13:15:35.856 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6268822Z  2026-02-14 13:15:35.856 UTC [233] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6269049Z  2026-02-14 13:15:35.856 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6269416Z  2026-02-14 13:15:35.856 UTC [233] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6269635Z  2026-02-14 13:15:35.856 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6269989Z  2026-02-14 13:15:35.856 UTC [233] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6270210Z  2026-02-14 13:15:35.857 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6270715Z  2026-02-14 13:15:35.857 UTC [233] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6270943Z  2026-02-14 13:15:35.857 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6271313Z  2026-02-14 13:15:35.857 UTC [233] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6271563Z  2026-02-14 13:15:35.858 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6272001Z  2026-02-14 13:15:35.858 UTC [233] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6272322Z  2026-02-14 13:15:35.858 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6272777Z  2026-02-14 13:15:35.858 UTC [233] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6272994Z  2026-02-14 13:15:35.859 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6273450Z  2026-02-14 13:15:35.859 UTC [233] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6273783Z  2026-02-14 13:15:35.859 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6274064Z  2026-02-14 13:15:35.859 UTC [233] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6274186Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6274410Z  2026-02-14 13:15:35.860 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6274674Z  2026-02-14 13:15:35.860 UTC [233] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6274801Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6275021Z  2026-02-14 13:15:35.860 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6275284Z  2026-02-14 13:15:35.860 UTC [233] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6275406Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6275499Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6275721Z  2026-02-14 13:15:35.861 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6276023Z  2026-02-14 13:15:35.861 UTC [233] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6276293Z  2026-02-14 13:15:35.861 UTC [233] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6276644Z  2026-02-14 13:15:35.861 UTC [233] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6276990Z  2026-02-14 13:15:35.863 UTC [233] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6277402Z  2026-02-14 13:15:35.863 UTC [233] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6277689Z  2026-02-14 13:15:35.864 UTC [233] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6278164Z  2026-02-14 13:15:35.864 UTC [233] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6278506Z  2026-02-14 13:15:35.865 UTC [233] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6279132Z  2026-02-14 13:15:35.865 UTC [233] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6279484Z  2026-02-14 13:15:35.865 UTC [233] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6280162Z  2026-02-14 13:15:35.865 UTC [233] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6280566Z  2026-02-14 13:15:35.866 UTC [233] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6281434Z  2026-02-14 13:15:35.866 UTC [233] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6282105Z  2026-02-14 13:15:35.866 UTC [233] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6283219Z  2026-02-14 13:15:35.866 UTC [233] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6283957Z  2026-02-14 13:15:35.867 UTC [233] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6284641Z  2026-02-14 13:15:35.867 UTC [233] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6285275Z  2026-02-14 13:15:35.867 UTC [233] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6286047Z  2026-02-14 13:15:35.867 UTC [233] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6286628Z  2026-02-14 13:15:35.868 UTC [233] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6287794Z  2026-02-14 13:15:35.868 UTC [233] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6288367Z  2026-02-14 13:15:35.868 UTC [233] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6289492Z  2026-02-14 13:15:35.868 UTC [233] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6289918Z  2026-02-14 13:15:35.872 UTC [233] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6290811Z  2026-02-14 13:15:35.872 UTC [233] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6291184Z  2026-02-14 13:15:35.912 UTC [234] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6291511Z  2026-02-14 13:15:36.050 UTC [238] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6291837Z  2026-02-14 13:15:36.050 UTC [238] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6291949Z  	DO $$
2026-02-14T13:16:24.6292012Z  	BEGIN
2026-02-14T13:16:24.6292279Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6292537Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6292779Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6293011Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6293125Z  	    END IF;
2026-02-14T13:16:24.6293194Z  	END $$;
2026-02-14T13:16:24.6293827Z  2026-02-14 13:15:36.059 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6294849Z  2026-02-14 13:15:36.059 UTC [238] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6295093Z  2026-02-14 13:15:36.060 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6295810Z  2026-02-14 13:15:36.060 UTC [238] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6296450Z  2026-02-14 13:15:36.060 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6296977Z  2026-02-14 13:15:36.060 UTC [238] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6297386Z  2026-02-14 13:15:36.061 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6298042Z  2026-02-14 13:15:36.061 UTC [238] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6298408Z  2026-02-14 13:15:36.061 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6299069Z  2026-02-14 13:15:36.061 UTC [238] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6299448Z  2026-02-14 13:15:36.062 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6300222Z  2026-02-14 13:15:36.062 UTC [238] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6300619Z  2026-02-14 13:15:36.062 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6301275Z  2026-02-14 13:15:36.062 UTC [238] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6301663Z  2026-02-14 13:15:36.063 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6302319Z  2026-02-14 13:15:36.063 UTC [238] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6302710Z  2026-02-14 13:15:36.063 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6303422Z  2026-02-14 13:15:36.063 UTC [238] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6304030Z  2026-02-14 13:15:36.064 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6304718Z  2026-02-14 13:15:36.064 UTC [238] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6305155Z  2026-02-14 13:15:36.064 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6306129Z  2026-02-14 13:15:36.064 UTC [238] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6306522Z  2026-02-14 13:15:36.065 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6307297Z  2026-02-14 13:15:36.065 UTC [238] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6307712Z  2026-02-14 13:15:36.065 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6308768Z  2026-02-14 13:15:36.065 UTC [238] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6309028Z  2026-02-14 13:15:36.066 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6309312Z  2026-02-14 13:15:36.066 UTC [238] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6309441Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6309661Z  2026-02-14 13:15:36.066 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6309920Z  2026-02-14 13:15:36.066 UTC [238] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6310163Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6310493Z  2026-02-14 13:15:36.067 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6310988Z  2026-02-14 13:15:36.067 UTC [238] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6311183Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6311276Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6311498Z  2026-02-14 13:15:36.067 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6311809Z  2026-02-14 13:15:36.067 UTC [238] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6312079Z  2026-02-14 13:15:36.068 UTC [238] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6312441Z  2026-02-14 13:15:36.068 UTC [238] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6312783Z  2026-02-14 13:15:36.070 UTC [238] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6313201Z  2026-02-14 13:15:36.070 UTC [238] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6313495Z  2026-02-14 13:15:36.071 UTC [238] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6314203Z  2026-02-14 13:15:36.071 UTC [238] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6314546Z  2026-02-14 13:15:36.071 UTC [238] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6315064Z  2026-02-14 13:15:36.071 UTC [238] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6315408Z  2026-02-14 13:15:36.072 UTC [238] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6315880Z  2026-02-14 13:15:36.072 UTC [238] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6316207Z  2026-02-14 13:15:36.072 UTC [238] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6316915Z  2026-02-14 13:15:36.072 UTC [238] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6317250Z  2026-02-14 13:15:36.073 UTC [238] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6317909Z  2026-02-14 13:15:36.073 UTC [238] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6318382Z  2026-02-14 13:15:36.073 UTC [238] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6318838Z  2026-02-14 13:15:36.073 UTC [238] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6319153Z  2026-02-14 13:15:36.074 UTC [238] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6319604Z  2026-02-14 13:15:36.074 UTC [238] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6320028Z  2026-02-14 13:15:36.074 UTC [238] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6320682Z  2026-02-14 13:15:36.074 UTC [238] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6321015Z  2026-02-14 13:15:36.075 UTC [238] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6321647Z  2026-02-14 13:15:36.075 UTC [238] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6321900Z  2026-02-14 13:15:36.079 UTC [238] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6322403Z  2026-02-14 13:15:36.079 UTC [238] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6322616Z  2026-02-14 13:15:36.122 UTC [239] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6322801Z  2026-02-14 13:15:36.260 UTC [243] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6322963Z  2026-02-14 13:15:36.260 UTC [243] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6323027Z  	DO $$
2026-02-14T13:16:24.6323093Z  	BEGIN
2026-02-14T13:16:24.6323253Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6323372Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6323500Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6323830Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6323900Z  	    END IF;
2026-02-14T13:16:24.6323969Z  	END $$;
2026-02-14T13:16:24.6324207Z  2026-02-14 13:15:36.269 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6324949Z  2026-02-14 13:15:36.269 UTC [243] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6325177Z  2026-02-14 13:15:36.269 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6325599Z  2026-02-14 13:15:36.269 UTC [243] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6325818Z  2026-02-14 13:15:36.270 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6326199Z  2026-02-14 13:15:36.270 UTC [243] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6326416Z  2026-02-14 13:15:36.270 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6326796Z  2026-02-14 13:15:36.270 UTC [243] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6327139Z  2026-02-14 13:15:36.271 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6327525Z  2026-02-14 13:15:36.271 UTC [243] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6327744Z  2026-02-14 13:15:36.271 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6328177Z  2026-02-14 13:15:36.271 UTC [243] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6328391Z  2026-02-14 13:15:36.272 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6328928Z  2026-02-14 13:15:36.272 UTC [243] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6329149Z  2026-02-14 13:15:36.272 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6329490Z  2026-02-14 13:15:36.272 UTC [243] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6329711Z  2026-02-14 13:15:36.273 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6330099Z  2026-02-14 13:15:36.273 UTC [243] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6330313Z  2026-02-14 13:15:36.273 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6330681Z  2026-02-14 13:15:36.273 UTC [243] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6330899Z  2026-02-14 13:15:36.274 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6331337Z  2026-02-14 13:15:36.274 UTC [243] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6331548Z  2026-02-14 13:15:36.274 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6331999Z  2026-02-14 13:15:36.274 UTC [243] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6332218Z  2026-02-14 13:15:36.275 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6332672Z  2026-02-14 13:15:36.275 UTC [243] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6332970Z  2026-02-14 13:15:36.275 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6333421Z  2026-02-14 13:15:36.275 UTC [243] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6333780Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6334210Z  2026-02-14 13:15:36.275 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6334494Z  2026-02-14 13:15:36.275 UTC [243] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6334613Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6334985Z  2026-02-14 13:15:36.276 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6335255Z  2026-02-14 13:15:36.276 UTC [243] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6335384Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6335471Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6335824Z  2026-02-14 13:15:36.276 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6336284Z  2026-02-14 13:15:36.276 UTC [243] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6336707Z  2026-02-14 13:15:36.277 UTC [243] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6337189Z  2026-02-14 13:15:36.277 UTC [243] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6337644Z  2026-02-14 13:15:36.279 UTC [243] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6338130Z  2026-02-14 13:15:36.279 UTC [243] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6338624Z  2026-02-14 13:15:36.280 UTC [243] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6339243Z  2026-02-14 13:15:36.280 UTC [243] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6339593Z  2026-02-14 13:15:36.280 UTC [243] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6340309Z  2026-02-14 13:15:36.280 UTC [243] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6340912Z  2026-02-14 13:15:36.281 UTC [243] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6341504Z  2026-02-14 13:15:36.281 UTC [243] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6341899Z  2026-02-14 13:15:36.281 UTC [243] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6342762Z  2026-02-14 13:15:36.281 UTC [243] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6343186Z  2026-02-14 13:15:36.282 UTC [243] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6344121Z  2026-02-14 13:15:36.282 UTC [243] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6344466Z  2026-02-14 13:15:36.282 UTC [243] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6345051Z  2026-02-14 13:15:36.282 UTC [243] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6345439Z  2026-02-14 13:15:36.283 UTC [243] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6345961Z  2026-02-14 13:15:36.283 UTC [243] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6346424Z  2026-02-14 13:15:36.283 UTC [243] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6347210Z  2026-02-14 13:15:36.283 UTC [243] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6347557Z  2026-02-14 13:15:36.284 UTC [243] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6348465Z  2026-02-14 13:15:36.284 UTC [243] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6348801Z  2026-02-14 13:15:36.288 UTC [243] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6349370Z  2026-02-14 13:15:36.288 UTC [243] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6349676Z  2026-02-14 13:15:36.330 UTC [244] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6349886Z  2026-02-14 13:15:36.468 UTC [248] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6350169Z  2026-02-14 13:15:36.468 UTC [248] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6350242Z  	DO $$
2026-02-14T13:16:24.6350301Z  	BEGIN
2026-02-14T13:16:24.6350580Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6350726Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6350850Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6350966Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6351032Z  	    END IF;
2026-02-14T13:16:24.6351093Z  	END $$;
2026-02-14T13:16:24.6351445Z  2026-02-14 13:15:36.477 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6352313Z  2026-02-14 13:15:36.477 UTC [248] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6352549Z  2026-02-14 13:15:36.478 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6353088Z  2026-02-14 13:15:36.478 UTC [248] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6353315Z  2026-02-14 13:15:36.478 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6353927Z  2026-02-14 13:15:36.478 UTC [248] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6354166Z  2026-02-14 13:15:36.479 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6354645Z  2026-02-14 13:15:36.479 UTC [248] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6354923Z  2026-02-14 13:15:36.479 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6355320Z  2026-02-14 13:15:36.479 UTC [248] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6355672Z  2026-02-14 13:15:36.480 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6356107Z  2026-02-14 13:15:36.480 UTC [248] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6356455Z  2026-02-14 13:15:36.480 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6356827Z  2026-02-14 13:15:36.480 UTC [248] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6357107Z  2026-02-14 13:15:36.481 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6357523Z  2026-02-14 13:15:36.481 UTC [248] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6357740Z  2026-02-14 13:15:36.481 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6358515Z  2026-02-14 13:15:36.481 UTC [248] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6358890Z  2026-02-14 13:15:36.482 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6359333Z  2026-02-14 13:15:36.482 UTC [248] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6359622Z  2026-02-14 13:15:36.482 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6360445Z  2026-02-14 13:15:36.482 UTC [248] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6361078Z  2026-02-14 13:15:36.482 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6361822Z  2026-02-14 13:15:36.482 UTC [248] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6362272Z  2026-02-14 13:15:36.483 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6363105Z  2026-02-14 13:15:36.483 UTC [248] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6363525Z  2026-02-14 13:15:36.483 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6364178Z  2026-02-14 13:15:36.483 UTC [248] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6364404Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6364808Z  2026-02-14 13:15:36.484 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6365289Z  2026-02-14 13:15:36.484 UTC [248] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6365518Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6365924Z  2026-02-14 13:15:36.484 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6366415Z  2026-02-14 13:15:36.484 UTC [248] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6366641Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6366797Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6367213Z  2026-02-14 13:15:36.485 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6367899Z  2026-02-14 13:15:36.485 UTC [248] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6368400Z  2026-02-14 13:15:36.485 UTC [248] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6369059Z  2026-02-14 13:15:36.485 UTC [248] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6369685Z  2026-02-14 13:15:36.487 UTC [248] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6370439Z  2026-02-14 13:15:36.487 UTC [248] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6370947Z  2026-02-14 13:15:36.488 UTC [248] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6371867Z  2026-02-14 13:15:36.488 UTC [248] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6372509Z  2026-02-14 13:15:36.489 UTC [248] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6373943Z  2026-02-14 13:15:36.489 UTC [248] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6374614Z  2026-02-14 13:15:36.489 UTC [248] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6375472Z  2026-02-14 13:15:36.489 UTC [248] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6376084Z  2026-02-14 13:15:36.490 UTC [248] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6377563Z  2026-02-14 13:15:36.490 UTC [248] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6378169Z  2026-02-14 13:15:36.490 UTC [248] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6379363Z  2026-02-14 13:15:36.490 UTC [248] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6379943Z  2026-02-14 13:15:36.491 UTC [248] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6380742Z  2026-02-14 13:15:36.491 UTC [248] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6381328Z  2026-02-14 13:15:36.491 UTC [248] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6382128Z  2026-02-14 13:15:36.491 UTC [248] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6382728Z  2026-02-14 13:15:36.492 UTC [248] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6384039Z  2026-02-14 13:15:36.492 UTC [248] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6384642Z  2026-02-14 13:15:36.492 UTC [248] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6385791Z  2026-02-14 13:15:36.492 UTC [248] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6386259Z  2026-02-14 13:15:36.496 UTC [248] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6386830Z  2026-02-14 13:15:36.496 UTC [248] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6387054Z  2026-02-14 13:15:36.538 UTC [249] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6387232Z  2026-02-14 13:15:36.673 UTC [253] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6387403Z  2026-02-14 13:15:36.673 UTC [253] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6387468Z  	DO $$
2026-02-14T13:16:24.6387529Z  	BEGIN
2026-02-14T13:16:24.6387690Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6387811Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6387932Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6388052Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6388114Z  	    END IF;
2026-02-14T13:16:24.6388329Z  	END $$;
2026-02-14T13:16:24.6388572Z  2026-02-14 13:15:36.682 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6389951Z  2026-02-14 13:15:36.682 UTC [253] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6390359Z  2026-02-14 13:15:36.682 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6391128Z  2026-02-14 13:15:36.682 UTC [253] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6391701Z  2026-02-14 13:15:36.683 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6392418Z  2026-02-14 13:15:36.683 UTC [253] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6392792Z  2026-02-14 13:15:36.683 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6393190Z  2026-02-14 13:15:36.683 UTC [253] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6393415Z  2026-02-14 13:15:36.684 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6394099Z  2026-02-14 13:15:36.684 UTC [253] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6394321Z  2026-02-14 13:15:36.684 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6394764Z  2026-02-14 13:15:36.684 UTC [253] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6394987Z  2026-02-14 13:15:36.684 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6395352Z  2026-02-14 13:15:36.684 UTC [253] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6395573Z  2026-02-14 13:15:36.685 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6395920Z  2026-02-14 13:15:36.685 UTC [253] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6396137Z  2026-02-14 13:15:36.685 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6396540Z  2026-02-14 13:15:36.685 UTC [253] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6396757Z  2026-02-14 13:15:36.686 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6397139Z  2026-02-14 13:15:36.686 UTC [253] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6397353Z  2026-02-14 13:15:36.686 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6397781Z  2026-02-14 13:15:36.686 UTC [253] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6398000Z  2026-02-14 13:15:36.687 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6398446Z  2026-02-14 13:15:36.687 UTC [253] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6398665Z  2026-02-14 13:15:36.687 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6399279Z  2026-02-14 13:15:36.687 UTC [253] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6399500Z  2026-02-14 13:15:36.688 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6399783Z  2026-02-14 13:15:36.688 UTC [253] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6400008Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6400421Z  2026-02-14 13:15:36.688 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6400956Z  2026-02-14 13:15:36.688 UTC [253] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6401377Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6401607Z  2026-02-14 13:15:36.689 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6401890Z  2026-02-14 13:15:36.689 UTC [253] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6402019Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6402108Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6402339Z  2026-02-14 13:15:36.689 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6402717Z  2026-02-14 13:15:36.689 UTC [253] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6403058Z  2026-02-14 13:15:36.690 UTC [253] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6403549Z  2026-02-14 13:15:36.690 UTC [253] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6404105Z  2026-02-14 13:15:36.692 UTC [253] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6404529Z  2026-02-14 13:15:36.692 UTC [253] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6404824Z  2026-02-14 13:15:36.693 UTC [253] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6405429Z  2026-02-14 13:15:36.693 UTC [253] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6405784Z  2026-02-14 13:15:36.693 UTC [253] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6406300Z  2026-02-14 13:15:36.693 UTC [253] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6406649Z  2026-02-14 13:15:36.694 UTC [253] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6407119Z  2026-02-14 13:15:36.694 UTC [253] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6407604Z  2026-02-14 13:15:36.694 UTC [253] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6408424Z  2026-02-14 13:15:36.694 UTC [253] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6408769Z  2026-02-14 13:15:36.695 UTC [253] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6409441Z  2026-02-14 13:15:36.695 UTC [253] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6409919Z  2026-02-14 13:15:36.695 UTC [253] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6410375Z  2026-02-14 13:15:36.695 UTC [253] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6410696Z  2026-02-14 13:15:36.696 UTC [253] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6411140Z  2026-02-14 13:15:36.696 UTC [253] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6411699Z  2026-02-14 13:15:36.696 UTC [253] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6412378Z  2026-02-14 13:15:36.696 UTC [253] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6412728Z  2026-02-14 13:15:36.697 UTC [253] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6413386Z  2026-02-14 13:15:36.697 UTC [253] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6413825Z  2026-02-14 13:15:36.701 UTC [253] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6414348Z  2026-02-14 13:15:36.701 UTC [253] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6414568Z  2026-02-14 13:15:36.743 UTC [254] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6414756Z  2026-02-14 13:15:36.877 UTC [258] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6414918Z  2026-02-14 13:15:36.877 UTC [258] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6414983Z  	DO $$
2026-02-14T13:16:24.6415047Z  	BEGIN
2026-02-14T13:16:24.6415201Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6415320Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6415449Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6415564Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6415625Z  	    END IF;
2026-02-14T13:16:24.6415696Z  	END $$;
2026-02-14T13:16:24.6415923Z  2026-02-14 13:15:36.887 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6416662Z  2026-02-14 13:15:36.887 UTC [258] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6416886Z  2026-02-14 13:15:36.887 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6417313Z  2026-02-14 13:15:36.887 UTC [258] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6417541Z  2026-02-14 13:15:36.888 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6417934Z  2026-02-14 13:15:36.888 UTC [258] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6418171Z  2026-02-14 13:15:36.888 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6418564Z  2026-02-14 13:15:36.888 UTC [258] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6418908Z  2026-02-14 13:15:36.889 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6419295Z  2026-02-14 13:15:36.889 UTC [258] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6419516Z  2026-02-14 13:15:36.889 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6419951Z  2026-02-14 13:15:36.889 UTC [258] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6420169Z  2026-02-14 13:15:36.890 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6420687Z  2026-02-14 13:15:36.890 UTC [258] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6420910Z  2026-02-14 13:15:36.890 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6421259Z  2026-02-14 13:15:36.890 UTC [258] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6421473Z  2026-02-14 13:15:36.891 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6421856Z  2026-02-14 13:15:36.891 UTC [258] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6422074Z  2026-02-14 13:15:36.891 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6422442Z  2026-02-14 13:15:36.891 UTC [258] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6422659Z  2026-02-14 13:15:36.892 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6423099Z  2026-02-14 13:15:36.892 UTC [258] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6423315Z  2026-02-14 13:15:36.892 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6424071Z  2026-02-14 13:15:36.892 UTC [258] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6424310Z  2026-02-14 13:15:36.892 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6424774Z  2026-02-14 13:15:36.892 UTC [258] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6425008Z  2026-02-14 13:15:36.893 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6425285Z  2026-02-14 13:15:36.893 UTC [258] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6425406Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6425626Z  2026-02-14 13:15:36.893 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6425881Z  2026-02-14 13:15:36.893 UTC [258] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6425999Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6426222Z  2026-02-14 13:15:36.894 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6426486Z  2026-02-14 13:15:36.894 UTC [258] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6426614Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6426705Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6426921Z  2026-02-14 13:15:36.894 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6427355Z  2026-02-14 13:15:36.894 UTC [258] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6427624Z  2026-02-14 13:15:36.895 UTC [258] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6427966Z  2026-02-14 13:15:36.895 UTC [258] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6428296Z  2026-02-14 13:15:36.897 UTC [258] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6428707Z  2026-02-14 13:15:36.897 UTC [258] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6429103Z  2026-02-14 13:15:36.898 UTC [258] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6429578Z  2026-02-14 13:15:36.898 UTC [258] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6429914Z  2026-02-14 13:15:36.898 UTC [258] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6430430Z  2026-02-14 13:15:36.898 UTC [258] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6430774Z  2026-02-14 13:15:36.899 UTC [258] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6431232Z  2026-02-14 13:15:36.899 UTC [258] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6431707Z  2026-02-14 13:15:36.899 UTC [258] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6432438Z  2026-02-14 13:15:36.899 UTC [258] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6432776Z  2026-02-14 13:15:36.900 UTC [258] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6433437Z  2026-02-14 13:15:36.900 UTC [258] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6434032Z  2026-02-14 13:15:36.900 UTC [258] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6434485Z  2026-02-14 13:15:36.900 UTC [258] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6434814Z  2026-02-14 13:15:36.901 UTC [258] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6435255Z  2026-02-14 13:15:36.901 UTC [258] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6435585Z  2026-02-14 13:15:36.901 UTC [258] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6436245Z  2026-02-14 13:15:36.901 UTC [258] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6436576Z  2026-02-14 13:15:36.902 UTC [258] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6437343Z  2026-02-14 13:15:36.902 UTC [258] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6437601Z  2026-02-14 13:15:36.906 UTC [258] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6438107Z  2026-02-14 13:15:36.906 UTC [258] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6438325Z  2026-02-14 13:15:36.950 UTC [259] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6438499Z  2026-02-14 13:15:37.084 UTC [263] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6438763Z  2026-02-14 13:15:37.084 UTC [263] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6438832Z  	DO $$
2026-02-14T13:16:24.6438893Z  	BEGIN
2026-02-14T13:16:24.6439053Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6439174Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6439299Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6439416Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6439481Z  	    END IF;
2026-02-14T13:16:24.6439545Z  	END $$;
2026-02-14T13:16:24.6439771Z  2026-02-14 13:15:37.093 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6440514Z  2026-02-14 13:15:37.093 UTC [263] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6440739Z  2026-02-14 13:15:37.093 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6441176Z  2026-02-14 13:15:37.093 UTC [263] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6441391Z  2026-02-14 13:15:37.094 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6441771Z  2026-02-14 13:15:37.094 UTC [263] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6441988Z  2026-02-14 13:15:37.094 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6442382Z  2026-02-14 13:15:37.094 UTC [263] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6442598Z  2026-02-14 13:15:37.095 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6442987Z  2026-02-14 13:15:37.095 UTC [263] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6443204Z  2026-02-14 13:15:37.095 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6443817Z  2026-02-14 13:15:37.095 UTC [263] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6444052Z  2026-02-14 13:15:37.096 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6444429Z  2026-02-14 13:15:37.096 UTC [263] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6444648Z  2026-02-14 13:15:37.096 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6445002Z  2026-02-14 13:15:37.096 UTC [263] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6445214Z  2026-02-14 13:15:37.097 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6445744Z  2026-02-14 13:15:37.097 UTC [263] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6445961Z  2026-02-14 13:15:37.097 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6446325Z  2026-02-14 13:15:37.097 UTC [263] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6446546Z  2026-02-14 13:15:37.098 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6446976Z  2026-02-14 13:15:37.098 UTC [263] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6447293Z  2026-02-14 13:15:37.098 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6447748Z  2026-02-14 13:15:37.098 UTC [263] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6447963Z  2026-02-14 13:15:37.099 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6448420Z  2026-02-14 13:15:37.099 UTC [263] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6448635Z  2026-02-14 13:15:37.099 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6448907Z  2026-02-14 13:15:37.099 UTC [263] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6449028Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6449243Z  2026-02-14 13:15:37.100 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6449498Z  2026-02-14 13:15:37.100 UTC [263] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6449620Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6449837Z  2026-02-14 13:15:37.100 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6450096Z  2026-02-14 13:15:37.100 UTC [263] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6450221Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6450308Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6450521Z  2026-02-14 13:15:37.101 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6450832Z  2026-02-14 13:15:37.101 UTC [263] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6451089Z  2026-02-14 13:15:37.101 UTC [263] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6451439Z  2026-02-14 13:15:37.101 UTC [263] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6451778Z  2026-02-14 13:15:37.103 UTC [263] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6452186Z  2026-02-14 13:15:37.103 UTC [263] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6452480Z  2026-02-14 13:15:37.104 UTC [263] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6452948Z  2026-02-14 13:15:37.104 UTC [263] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6453287Z  2026-02-14 13:15:37.105 UTC [263] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6454284Z  2026-02-14 13:15:37.105 UTC [263] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6454807Z  2026-02-14 13:15:37.105 UTC [263] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6455281Z  2026-02-14 13:15:37.105 UTC [263] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6455620Z  2026-02-14 13:15:37.106 UTC [263] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6456445Z  2026-02-14 13:15:37.106 UTC [263] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6456787Z  2026-02-14 13:15:37.106 UTC [263] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6457440Z  2026-02-14 13:15:37.106 UTC [263] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6457767Z  2026-02-14 13:15:37.107 UTC [263] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6458217Z  2026-02-14 13:15:37.107 UTC [263] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6458537Z  2026-02-14 13:15:37.107 UTC [263] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6458988Z  2026-02-14 13:15:37.107 UTC [263] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6459316Z  2026-02-14 13:15:37.108 UTC [263] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6459977Z  2026-02-14 13:15:37.108 UTC [263] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6460312Z  2026-02-14 13:15:37.108 UTC [263] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6460943Z  2026-02-14 13:15:37.108 UTC [263] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6461198Z  2026-02-14 13:15:37.112 UTC [263] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6461710Z  2026-02-14 13:15:37.112 UTC [263] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6461921Z  2026-02-14 13:15:37.256 UTC [264] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6462108Z  2026-02-14 13:15:37.391 UTC [268] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6462271Z  2026-02-14 13:15:37.391 UTC [268] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6462334Z  	DO $$
2026-02-14T13:16:24.6462398Z  	BEGIN
2026-02-14T13:16:24.6462551Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6462669Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6462791Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6462906Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6462967Z  	    END IF;
2026-02-14T13:16:24.6463106Z  	END $$;
2026-02-14T13:16:24.6463339Z  2026-02-14 13:15:37.400 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6464558Z  2026-02-14 13:15:37.400 UTC [268] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6464797Z  2026-02-14 13:15:37.401 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6465228Z  2026-02-14 13:15:37.401 UTC [268] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6465584Z  2026-02-14 13:15:37.401 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6465967Z  2026-02-14 13:15:37.401 UTC [268] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6466186Z  2026-02-14 13:15:37.402 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6466571Z  2026-02-14 13:15:37.402 UTC [268] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6466798Z  2026-02-14 13:15:37.402 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6467179Z  2026-02-14 13:15:37.402 UTC [268] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6467393Z  2026-02-14 13:15:37.403 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6467835Z  2026-02-14 13:15:37.403 UTC [268] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6468056Z  2026-02-14 13:15:37.403 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6468426Z  2026-02-14 13:15:37.403 UTC [268] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6468640Z  2026-02-14 13:15:37.404 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6468989Z  2026-02-14 13:15:37.404 UTC [268] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6469207Z  2026-02-14 13:15:37.404 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6469603Z  2026-02-14 13:15:37.404 UTC [268] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6469816Z  2026-02-14 13:15:37.405 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6470190Z  2026-02-14 13:15:37.405 UTC [268] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6470406Z  2026-02-14 13:15:37.405 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6470836Z  2026-02-14 13:15:37.405 UTC [268] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6471057Z  2026-02-14 13:15:37.406 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6471530Z  2026-02-14 13:15:37.406 UTC [268] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6471752Z  2026-02-14 13:15:37.406 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6472313Z  2026-02-14 13:15:37.406 UTC [268] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6472530Z  2026-02-14 13:15:37.407 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6472808Z  2026-02-14 13:15:37.407 UTC [268] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6472926Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6473140Z  2026-02-14 13:15:37.407 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6473400Z  2026-02-14 13:15:37.407 UTC [268] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6473598Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6474068Z  2026-02-14 13:15:37.408 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6474349Z  2026-02-14 13:15:37.408 UTC [268] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6474475Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6474564Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6474793Z  2026-02-14 13:15:37.408 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6475109Z  2026-02-14 13:15:37.408 UTC [268] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6475379Z  2026-02-14 13:15:37.409 UTC [268] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6475737Z  2026-02-14 13:15:37.409 UTC [268] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6476077Z  2026-02-14 13:15:37.411 UTC [268] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6476499Z  2026-02-14 13:15:37.411 UTC [268] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6476786Z  2026-02-14 13:15:37.412 UTC [268] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6477270Z  2026-02-14 13:15:37.412 UTC [268] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6477626Z  2026-02-14 13:15:37.412 UTC [268] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6478146Z  2026-02-14 13:15:37.412 UTC [268] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6478493Z  2026-02-14 13:15:37.413 UTC [268] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6478965Z  2026-02-14 13:15:37.413 UTC [268] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6479292Z  2026-02-14 13:15:37.413 UTC [268] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6480006Z  2026-02-14 13:15:37.413 UTC [268] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6480344Z  2026-02-14 13:15:37.414 UTC [268] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6481008Z  2026-02-14 13:15:37.414 UTC [268] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6481458Z  2026-02-14 13:15:37.414 UTC [268] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6481907Z  2026-02-14 13:15:37.414 UTC [268] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6482230Z  2026-02-14 13:15:37.415 UTC [268] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6482673Z  2026-02-14 13:15:37.415 UTC [268] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6483100Z  2026-02-14 13:15:37.415 UTC [268] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6484157Z  2026-02-14 13:15:37.415 UTC [268] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6484501Z  2026-02-14 13:15:37.416 UTC [268] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6485141Z  2026-02-14 13:15:37.416 UTC [268] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6485402Z  2026-02-14 13:15:37.420 UTC [268] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6485915Z  2026-02-14 13:15:37.420 UTC [268] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6486136Z  2026-02-14 13:15:37.462 UTC [269] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6486316Z  2026-02-14 13:15:37.596 UTC [273] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6486473Z  2026-02-14 13:15:37.596 UTC [273] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6486542Z  	DO $$
2026-02-14T13:16:24.6486603Z  	BEGIN
2026-02-14T13:16:24.6486760Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6486886Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6487007Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6487121Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6487185Z  	    END IF;
2026-02-14T13:16:24.6487247Z  	END $$;
2026-02-14T13:16:24.6487475Z  2026-02-14 13:15:37.605 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6488223Z  2026-02-14 13:15:37.605 UTC [273] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6488442Z  2026-02-14 13:15:37.606 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6488870Z  2026-02-14 13:15:37.606 UTC [273] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6489094Z  2026-02-14 13:15:37.606 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6489472Z  2026-02-14 13:15:37.606 UTC [273] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6489696Z  2026-02-14 13:15:37.607 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6490087Z  2026-02-14 13:15:37.607 UTC [273] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6490467Z  2026-02-14 13:15:37.607 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6490861Z  2026-02-14 13:15:37.607 UTC [273] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6491077Z  2026-02-14 13:15:37.608 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6491505Z  2026-02-14 13:15:37.608 UTC [273] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6491728Z  2026-02-14 13:15:37.608 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6492199Z  2026-02-14 13:15:37.608 UTC [273] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6492416Z  2026-02-14 13:15:37.609 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6492768Z  2026-02-14 13:15:37.609 UTC [273] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6492980Z  2026-02-14 13:15:37.609 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6493373Z  2026-02-14 13:15:37.609 UTC [273] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6493590Z  2026-02-14 13:15:37.610 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6494070Z  2026-02-14 13:15:37.610 UTC [273] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6494297Z  2026-02-14 13:15:37.610 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6494727Z  2026-02-14 13:15:37.610 UTC [273] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6494940Z  2026-02-14 13:15:37.611 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6495389Z  2026-02-14 13:15:37.611 UTC [273] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6495605Z  2026-02-14 13:15:37.611 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6496064Z  2026-02-14 13:15:37.611 UTC [273] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6496289Z  2026-02-14 13:15:37.611 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6496573Z  2026-02-14 13:15:37.611 UTC [273] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6496689Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6496905Z  2026-02-14 13:15:37.612 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6497163Z  2026-02-14 13:15:37.612 UTC [273] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6497281Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6497500Z  2026-02-14 13:15:37.612 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6497761Z  2026-02-14 13:15:37.612 UTC [273] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6497891Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6497982Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6498197Z  2026-02-14 13:15:37.613 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6498615Z  2026-02-14 13:15:37.613 UTC [273] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6498879Z  2026-02-14 13:15:37.613 UTC [273] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6499225Z  2026-02-14 13:15:37.613 UTC [273] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6499558Z  2026-02-14 13:15:37.615 UTC [273] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6499967Z  2026-02-14 13:15:37.615 UTC [273] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6500354Z  2026-02-14 13:15:37.616 UTC [273] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6500830Z  2026-02-14 13:15:37.616 UTC [273] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6501168Z  2026-02-14 13:15:37.617 UTC [273] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6501677Z  2026-02-14 13:15:37.617 UTC [273] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6502017Z  2026-02-14 13:15:37.617 UTC [273] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6502478Z  2026-02-14 13:15:37.617 UTC [273] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6502804Z  2026-02-14 13:15:37.618 UTC [273] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6503514Z  2026-02-14 13:15:37.618 UTC [273] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6504143Z  2026-02-14 13:15:37.618 UTC [273] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6504817Z  2026-02-14 13:15:37.618 UTC [273] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6505149Z  2026-02-14 13:15:37.619 UTC [273] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6505608Z  2026-02-14 13:15:37.619 UTC [273] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6505924Z  2026-02-14 13:15:37.619 UTC [273] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6506362Z  2026-02-14 13:15:37.619 UTC [273] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6506690Z  2026-02-14 13:15:37.620 UTC [273] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6507340Z  2026-02-14 13:15:37.620 UTC [273] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6507669Z  2026-02-14 13:15:37.620 UTC [273] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6508424Z  2026-02-14 13:15:37.620 UTC [273] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6508678Z  2026-02-14 13:15:37.624 UTC [273] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6509194Z  2026-02-14 13:15:37.624 UTC [273] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6509400Z  2026-02-14 13:15:37.666 UTC [274] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6509574Z  2026-02-14 13:15:37.798 UTC [278] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6509837Z  2026-02-14 13:15:37.798 UTC [278] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6509899Z  	DO $$
2026-02-14T13:16:24.6509959Z  	BEGIN
2026-02-14T13:16:24.6510121Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6510235Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6510362Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6510478Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6510540Z  	    END IF;
2026-02-14T13:16:24.6510601Z  	END $$;
2026-02-14T13:16:24.6510833Z  2026-02-14 13:15:37.806 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6511702Z  2026-02-14 13:15:37.806 UTC [278] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6511992Z  2026-02-14 13:15:37.807 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6512433Z  2026-02-14 13:15:37.807 UTC [278] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6512653Z  2026-02-14 13:15:37.808 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6513036Z  2026-02-14 13:15:37.808 UTC [278] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6513259Z  2026-02-14 13:15:37.808 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6513850Z  2026-02-14 13:15:37.808 UTC [278] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6514088Z  2026-02-14 13:15:37.809 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6514472Z  2026-02-14 13:15:37.809 UTC [278] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6514690Z  2026-02-14 13:15:37.809 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6515129Z  2026-02-14 13:15:37.809 UTC [278] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6515342Z  2026-02-14 13:15:37.809 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6515713Z  2026-02-14 13:15:37.809 UTC [278] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6515935Z  2026-02-14 13:15:37.810 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6516281Z  2026-02-14 13:15:37.810 UTC [278] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6516494Z  2026-02-14 13:15:37.810 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6517024Z  2026-02-14 13:15:37.810 UTC [278] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6517244Z  2026-02-14 13:15:37.811 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6517614Z  2026-02-14 13:15:37.811 UTC [278] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6517826Z  2026-02-14 13:15:37.811 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6518251Z  2026-02-14 13:15:37.811 UTC [278] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6518575Z  2026-02-14 13:15:37.812 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6519025Z  2026-02-14 13:15:37.812 UTC [278] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6519240Z  2026-02-14 13:15:37.812 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6519704Z  2026-02-14 13:15:37.812 UTC [278] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6519918Z  2026-02-14 13:15:37.813 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6520195Z  2026-02-14 13:15:37.813 UTC [278] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6520320Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6520535Z  2026-02-14 13:15:37.813 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6520793Z  2026-02-14 13:15:37.813 UTC [278] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6520919Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6521133Z  2026-02-14 13:15:37.814 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6521397Z  2026-02-14 13:15:37.814 UTC [278] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6521523Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6521611Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6521831Z  2026-02-14 13:15:37.814 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6522134Z  2026-02-14 13:15:37.814 UTC [278] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6522395Z  2026-02-14 13:15:37.815 UTC [278] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6522750Z  2026-02-14 13:15:37.815 UTC [278] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6523079Z  2026-02-14 13:15:37.817 UTC [278] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6523486Z  2026-02-14 13:15:37.817 UTC [278] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6523895Z  2026-02-14 13:15:37.818 UTC [278] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6524361Z  2026-02-14 13:15:37.818 UTC [278] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6524702Z  2026-02-14 13:15:37.818 UTC [278] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6525337Z  2026-02-14 13:15:37.818 UTC [278] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6525685Z  2026-02-14 13:15:37.819 UTC [278] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6526150Z  2026-02-14 13:15:37.819 UTC [278] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6526592Z  2026-02-14 13:15:37.819 UTC [278] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6527521Z  2026-02-14 13:15:37.819 UTC [278] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6527872Z  2026-02-14 13:15:37.820 UTC [278] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6528531Z  2026-02-14 13:15:37.820 UTC [278] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6528861Z  2026-02-14 13:15:37.820 UTC [278] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6529307Z  2026-02-14 13:15:37.820 UTC [278] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6529630Z  2026-02-14 13:15:37.821 UTC [278] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6530081Z  2026-02-14 13:15:37.821 UTC [278] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6530403Z  2026-02-14 13:15:37.821 UTC [278] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6531054Z  2026-02-14 13:15:37.821 UTC [278] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6531382Z  2026-02-14 13:15:37.822 UTC [278] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6532017Z  2026-02-14 13:15:37.822 UTC [278] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6532270Z  2026-02-14 13:15:37.825 UTC [278] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6532778Z  2026-02-14 13:15:37.825 UTC [278] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6532983Z  2026-02-14 13:15:37.871 UTC [279] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6533162Z  2026-02-14 13:15:38.004 UTC [283] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6533319Z  2026-02-14 13:15:38.004 UTC [283] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6533381Z  	DO $$
2026-02-14T13:16:24.6533446Z  	BEGIN
2026-02-14T13:16:24.6533715Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6533837Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6533965Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6534080Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6534142Z  	    END IF;
2026-02-14T13:16:24.6534340Z  	END $$;
2026-02-14T13:16:24.6534573Z  2026-02-14 13:15:38.013 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6535315Z  2026-02-14 13:15:38.013 UTC [283] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6535537Z  2026-02-14 13:15:38.014 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6535960Z  2026-02-14 13:15:38.014 UTC [283] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6536278Z  2026-02-14 13:15:38.014 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6536660Z  2026-02-14 13:15:38.014 UTC [283] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6536875Z  2026-02-14 13:15:38.014 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6537266Z  2026-02-14 13:15:38.014 UTC [283] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6537478Z  2026-02-14 13:15:38.015 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6537858Z  2026-02-14 13:15:38.015 UTC [283] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6538081Z  2026-02-14 13:15:38.015 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6538512Z  2026-02-14 13:15:38.015 UTC [283] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6538735Z  2026-02-14 13:15:38.016 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6539106Z  2026-02-14 13:15:38.016 UTC [283] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6539320Z  2026-02-14 13:15:38.016 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6539661Z  2026-02-14 13:15:38.016 UTC [283] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6539881Z  2026-02-14 13:15:38.017 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6540272Z  2026-02-14 13:15:38.017 UTC [283] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6540500Z  2026-02-14 13:15:38.017 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6540873Z  2026-02-14 13:15:38.017 UTC [283] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6541088Z  2026-02-14 13:15:38.018 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6541518Z  2026-02-14 13:15:38.018 UTC [283] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6541733Z  2026-02-14 13:15:38.018 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6542177Z  2026-02-14 13:15:38.018 UTC [283] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6542404Z  2026-02-14 13:15:38.019 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6542942Z  2026-02-14 13:15:38.019 UTC [283] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6543160Z  2026-02-14 13:15:38.019 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6543442Z  2026-02-14 13:15:38.019 UTC [283] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6543560Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6544083Z  2026-02-14 13:15:38.020 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6544346Z  2026-02-14 13:15:38.020 UTC [283] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6544602Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6544825Z  2026-02-14 13:15:38.020 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6545095Z  2026-02-14 13:15:38.020 UTC [283] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6545217Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6545308Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6545525Z  2026-02-14 13:15:38.021 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6545824Z  2026-02-14 13:15:38.021 UTC [283] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6546087Z  2026-02-14 13:15:38.021 UTC [283] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6546433Z  2026-02-14 13:15:38.021 UTC [283] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6546767Z  2026-02-14 13:15:38.023 UTC [283] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6547185Z  2026-02-14 13:15:38.023 UTC [283] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6547470Z  2026-02-14 13:15:38.024 UTC [283] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6547932Z  2026-02-14 13:15:38.024 UTC [283] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6548274Z  2026-02-14 13:15:38.025 UTC [283] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6548786Z  2026-02-14 13:15:38.025 UTC [283] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6549134Z  2026-02-14 13:15:38.025 UTC [283] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6549599Z  2026-02-14 13:15:38.025 UTC [283] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6549923Z  2026-02-14 13:15:38.026 UTC [283] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6550626Z  2026-02-14 13:15:38.026 UTC [283] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6550949Z  2026-02-14 13:15:38.026 UTC [283] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6551610Z  2026-02-14 13:15:38.026 UTC [283] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6552035Z  2026-02-14 13:15:38.027 UTC [283] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6552476Z  2026-02-14 13:15:38.027 UTC [283] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6552807Z  2026-02-14 13:15:38.027 UTC [283] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6553246Z  2026-02-14 13:15:38.027 UTC [283] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6553864Z  2026-02-14 13:15:38.027 UTC [283] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6554548Z  2026-02-14 13:15:38.027 UTC [283] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6554873Z  2026-02-14 13:15:38.028 UTC [283] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6555508Z  2026-02-14 13:15:38.028 UTC [283] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6555766Z  2026-02-14 13:15:38.032 UTC [283] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6556286Z  2026-02-14 13:15:38.032 UTC [283] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6556501Z  2026-02-14 13:15:38.076 UTC [284] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6556678Z  2026-02-14 13:15:38.217 UTC [288] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6556835Z  2026-02-14 13:15:38.217 UTC [288] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6556905Z  	DO $$
2026-02-14T13:16:24.6556965Z  	BEGIN
2026-02-14T13:16:24.6557117Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6557234Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6557355Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6557470Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6557536Z  	    END IF;
2026-02-14T13:16:24.6557600Z  	END $$;
2026-02-14T13:16:24.6557827Z  2026-02-14 13:15:38.226 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6558560Z  2026-02-14 13:15:38.226 UTC [288] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6558780Z  2026-02-14 13:15:38.227 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6559201Z  2026-02-14 13:15:38.227 UTC [288] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6559425Z  2026-02-14 13:15:38.227 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6559803Z  2026-02-14 13:15:38.227 UTC [288] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6560029Z  2026-02-14 13:15:38.228 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6560569Z  2026-02-14 13:15:38.228 UTC [288] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6560790Z  2026-02-14 13:15:38.228 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6561177Z  2026-02-14 13:15:38.228 UTC [288] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6561393Z  2026-02-14 13:15:38.229 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6561824Z  2026-02-14 13:15:38.229 UTC [288] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6562048Z  2026-02-14 13:15:38.229 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6562528Z  2026-02-14 13:15:38.229 UTC [288] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6562751Z  2026-02-14 13:15:38.230 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6563093Z  2026-02-14 13:15:38.230 UTC [288] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6563308Z  2026-02-14 13:15:38.230 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6563819Z  2026-02-14 13:15:38.230 UTC [288] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6564038Z  2026-02-14 13:15:38.231 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6564406Z  2026-02-14 13:15:38.231 UTC [288] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6564628Z  2026-02-14 13:15:38.231 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6565067Z  2026-02-14 13:15:38.231 UTC [288] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6565284Z  2026-02-14 13:15:38.232 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6565734Z  2026-02-14 13:15:38.232 UTC [288] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6565948Z  2026-02-14 13:15:38.232 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6566411Z  2026-02-14 13:15:38.232 UTC [288] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6566629Z  2026-02-14 13:15:38.233 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6566905Z  2026-02-14 13:15:38.233 UTC [288] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6567024Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6567241Z  2026-02-14 13:15:38.234 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6567498Z  2026-02-14 13:15:38.234 UTC [288] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6567620Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6567834Z  2026-02-14 13:15:38.234 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6568096Z  2026-02-14 13:15:38.234 UTC [288] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6568227Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6568314Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6568528Z  2026-02-14 13:15:38.235 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6568955Z  2026-02-14 13:15:38.235 UTC [288] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6569217Z  2026-02-14 13:15:38.235 UTC [288] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6569560Z  2026-02-14 13:15:38.235 UTC [288] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6569894Z  2026-02-14 13:15:38.238 UTC [288] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6570306Z  2026-02-14 13:15:38.238 UTC [288] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6570698Z  2026-02-14 13:15:38.239 UTC [288] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6571165Z  2026-02-14 13:15:38.239 UTC [288] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6571531Z  2026-02-14 13:15:38.239 UTC [288] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6572061Z  2026-02-14 13:15:38.239 UTC [288] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6572402Z  2026-02-14 13:15:38.240 UTC [288] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6572867Z  2026-02-14 13:15:38.240 UTC [288] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6573201Z  2026-02-14 13:15:38.240 UTC [288] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6574010Z  2026-02-14 13:15:38.240 UTC [288] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6574348Z  2026-02-14 13:15:38.241 UTC [288] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6574998Z  2026-02-14 13:15:38.241 UTC [288] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6575321Z  2026-02-14 13:15:38.241 UTC [288] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6575776Z  2026-02-14 13:15:38.241 UTC [288] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6576096Z  2026-02-14 13:15:38.242 UTC [288] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6576538Z  2026-02-14 13:15:38.242 UTC [288] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6576867Z  2026-02-14 13:15:38.242 UTC [288] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6577521Z  2026-02-14 13:15:38.242 UTC [288] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6577860Z  2026-02-14 13:15:38.243 UTC [288] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6578599Z  2026-02-14 13:15:38.243 UTC [288] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6578855Z  2026-02-14 13:15:38.248 UTC [288] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6579370Z  2026-02-14 13:15:38.248 UTC [288] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6579574Z  2026-02-14 13:15:38.298 UTC [289] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6579847Z  2026-02-14 13:15:38.436 UTC [294] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6580012Z  2026-02-14 13:15:38.436 UTC [294] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6580074Z  	DO $$
2026-02-14T13:16:24.6580135Z  	BEGIN
2026-02-14T13:16:24.6580297Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6580411Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6580533Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6580651Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6580711Z  	    END IF;
2026-02-14T13:16:24.6580770Z  	END $$;
2026-02-14T13:16:24.6581002Z  2026-02-14 13:15:38.446 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6591235Z  2026-02-14 13:15:38.446 UTC [294] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6591551Z  2026-02-14 13:15:38.446 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6592021Z  2026-02-14 13:15:38.446 UTC [294] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6592253Z  2026-02-14 13:15:38.447 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6592651Z  2026-02-14 13:15:38.447 UTC [294] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6592873Z  2026-02-14 13:15:38.447 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6593264Z  2026-02-14 13:15:38.447 UTC [294] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6593489Z  2026-02-14 13:15:38.448 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6594139Z  2026-02-14 13:15:38.448 UTC [294] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6594385Z  2026-02-14 13:15:38.448 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6594836Z  2026-02-14 13:15:38.448 UTC [294] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6595061Z  2026-02-14 13:15:38.449 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6595432Z  2026-02-14 13:15:38.449 UTC [294] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6595656Z  2026-02-14 13:15:38.449 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6596004Z  2026-02-14 13:15:38.449 UTC [294] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6596232Z  2026-02-14 13:15:38.449 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6596799Z  2026-02-14 13:15:38.449 UTC [294] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6597025Z  2026-02-14 13:15:38.450 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6597399Z  2026-02-14 13:15:38.450 UTC [294] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6597615Z  2026-02-14 13:15:38.450 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6598048Z  2026-02-14 13:15:38.450 UTC [294] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6598373Z  2026-02-14 13:15:38.451 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6598824Z  2026-02-14 13:15:38.451 UTC [294] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6599039Z  2026-02-14 13:15:38.451 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6599502Z  2026-02-14 13:15:38.451 UTC [294] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6599724Z  2026-02-14 13:15:38.452 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6600028Z  2026-02-14 13:15:38.452 UTC [294] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6600156Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6600380Z  2026-02-14 13:15:38.452 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6600650Z  2026-02-14 13:15:38.452 UTC [294] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6600773Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6600990Z  2026-02-14 13:15:38.453 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6601262Z  2026-02-14 13:15:38.453 UTC [294] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6601385Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6601474Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6601696Z  2026-02-14 13:15:38.453 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6602012Z  2026-02-14 13:15:38.453 UTC [294] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6602276Z  2026-02-14 13:15:38.454 UTC [294] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6602633Z  2026-02-14 13:15:38.454 UTC [294] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6602972Z  2026-02-14 13:15:38.456 UTC [294] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6603386Z  2026-02-14 13:15:38.456 UTC [294] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6603801Z  2026-02-14 13:15:38.457 UTC [294] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6604275Z  2026-02-14 13:15:38.457 UTC [294] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6604620Z  2026-02-14 13:15:38.457 UTC [294] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6605249Z  2026-02-14 13:15:38.457 UTC [294] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6605592Z  2026-02-14 13:15:38.458 UTC [294] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6606060Z  2026-02-14 13:15:38.458 UTC [294] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6606388Z  2026-02-14 13:15:38.458 UTC [294] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6607195Z  2026-02-14 13:15:38.458 UTC [294] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6607531Z  2026-02-14 13:15:38.459 UTC [294] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6608183Z  2026-02-14 13:15:38.459 UTC [294] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6608508Z  2026-02-14 13:15:38.459 UTC [294] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6608958Z  2026-02-14 13:15:38.459 UTC [294] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6609280Z  2026-02-14 13:15:38.460 UTC [294] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6609723Z  2026-02-14 13:15:38.460 UTC [294] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6610044Z  2026-02-14 13:15:38.460 UTC [294] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6610698Z  2026-02-14 13:15:38.460 UTC [294] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6611032Z  2026-02-14 13:15:38.461 UTC [294] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6611660Z  2026-02-14 13:15:38.461 UTC [294] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6611920Z  2026-02-14 13:15:38.465 UTC [294] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6612438Z  2026-02-14 13:15:38.465 UTC [294] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6612648Z  2026-02-14 13:15:38.608 UTC [295] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6612829Z  2026-02-14 13:15:38.742 UTC [299] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6612992Z  2026-02-14 13:15:38.742 UTC [299] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6613057Z  	DO $$
2026-02-14T13:16:24.6613121Z  	BEGIN
2026-02-14T13:16:24.6613273Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6613399Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6613528Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6613743Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6613808Z  	    END IF;
2026-02-14T13:16:24.6613990Z  	END $$;
2026-02-14T13:16:24.6614224Z  2026-02-14 13:15:38.751 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6614963Z  2026-02-14 13:15:38.751 UTC [299] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6615189Z  2026-02-14 13:15:38.751 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6615617Z  2026-02-14 13:15:38.751 UTC [299] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6615945Z  2026-02-14 13:15:38.752 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6616332Z  2026-02-14 13:15:38.752 UTC [299] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6616550Z  2026-02-14 13:15:38.753 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6616942Z  2026-02-14 13:15:38.753 UTC [299] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6617159Z  2026-02-14 13:15:38.753 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6617547Z  2026-02-14 13:15:38.753 UTC [299] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6617772Z  2026-02-14 13:15:38.753 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6618204Z  2026-02-14 13:15:38.753 UTC [299] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6618438Z  2026-02-14 13:15:38.754 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6618809Z  2026-02-14 13:15:38.754 UTC [299] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6619021Z  2026-02-14 13:15:38.754 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6619374Z  2026-02-14 13:15:38.754 UTC [299] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6619595Z  2026-02-14 13:15:38.755 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6619996Z  2026-02-14 13:15:38.755 UTC [299] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6620219Z  2026-02-14 13:15:38.755 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6620593Z  2026-02-14 13:15:38.755 UTC [299] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6620807Z  2026-02-14 13:15:38.756 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6621244Z  2026-02-14 13:15:38.756 UTC [299] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6621462Z  2026-02-14 13:15:38.756 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6621906Z  2026-02-14 13:15:38.756 UTC [299] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6622133Z  2026-02-14 13:15:38.757 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6622680Z  2026-02-14 13:15:38.757 UTC [299] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6622904Z  2026-02-14 13:15:38.757 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6623180Z  2026-02-14 13:15:38.757 UTC [299] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6623299Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6623522Z  2026-02-14 13:15:38.758 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6624093Z  2026-02-14 13:15:38.758 UTC [299] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6624385Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6624623Z  2026-02-14 13:15:38.758 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6624896Z  2026-02-14 13:15:38.758 UTC [299] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6625021Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6625113Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6625330Z  2026-02-14 13:15:38.759 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6625639Z  2026-02-14 13:15:38.759 UTC [299] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6625908Z  2026-02-14 13:15:38.759 UTC [299] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6626257Z  2026-02-14 13:15:38.759 UTC [299] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6626598Z  2026-02-14 13:15:38.761 UTC [299] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6627015Z  2026-02-14 13:15:38.761 UTC [299] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6627305Z  2026-02-14 13:15:38.762 UTC [299] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6627777Z  2026-02-14 13:15:38.762 UTC [299] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6628123Z  2026-02-14 13:15:38.763 UTC [299] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6628661Z  2026-02-14 13:15:38.763 UTC [299] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6629018Z  2026-02-14 13:15:38.763 UTC [299] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6629487Z  2026-02-14 13:15:38.763 UTC [299] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6629817Z  2026-02-14 13:15:38.764 UTC [299] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6630536Z  2026-02-14 13:15:38.764 UTC [299] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6630867Z  2026-02-14 13:15:38.764 UTC [299] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6631644Z  2026-02-14 13:15:38.764 UTC [299] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6631971Z  2026-02-14 13:15:38.765 UTC [299] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6632421Z  2026-02-14 13:15:38.765 UTC [299] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6632746Z  2026-02-14 13:15:38.765 UTC [299] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6633188Z  2026-02-14 13:15:38.765 UTC [299] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6633999Z  2026-02-14 13:15:38.766 UTC [299] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6635181Z  2026-02-14 13:15:38.766 UTC [299] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6635540Z  2026-02-14 13:15:38.766 UTC [299] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6636202Z  2026-02-14 13:15:38.766 UTC [299] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6636462Z  2026-02-14 13:15:38.770 UTC [299] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6636990Z  2026-02-14 13:15:38.770 UTC [299] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6637210Z  2026-02-14 13:15:38.812 UTC [300] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6637396Z  2026-02-14 13:15:38.949 UTC [304] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6637563Z  2026-02-14 13:15:38.949 UTC [304] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6637627Z  	DO $$
2026-02-14T13:16:24.6637686Z  	BEGIN
2026-02-14T13:16:24.6637843Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6637966Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6638089Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6638206Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6638276Z  	    END IF;
2026-02-14T13:16:24.6638341Z  	END $$;
2026-02-14T13:16:24.6638573Z  2026-02-14 13:15:38.959 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6639346Z  2026-02-14 13:15:38.959 UTC [304] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6639570Z  2026-02-14 13:15:38.960 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6640008Z  2026-02-14 13:15:38.960 UTC [304] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6640231Z  2026-02-14 13:15:38.960 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6640619Z  2026-02-14 13:15:38.960 UTC [304] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6640845Z  2026-02-14 13:15:38.960 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6641388Z  2026-02-14 13:15:38.960 UTC [304] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6641611Z  2026-02-14 13:15:38.961 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6642000Z  2026-02-14 13:15:38.961 UTC [304] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6642219Z  2026-02-14 13:15:38.961 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6642654Z  2026-02-14 13:15:38.961 UTC [304] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6642890Z  2026-02-14 13:15:38.962 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6643368Z  2026-02-14 13:15:38.962 UTC [304] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6643598Z  2026-02-14 13:15:38.962 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6644213Z  2026-02-14 13:15:38.962 UTC [304] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6644441Z  2026-02-14 13:15:38.963 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6644838Z  2026-02-14 13:15:38.963 UTC [304] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6645054Z  2026-02-14 13:15:38.963 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6645427Z  2026-02-14 13:15:38.963 UTC [304] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6645644Z  2026-02-14 13:15:38.964 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6646080Z  2026-02-14 13:15:38.964 UTC [304] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6646299Z  2026-02-14 13:15:38.964 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6646751Z  2026-02-14 13:15:38.964 UTC [304] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6646966Z  2026-02-14 13:15:38.965 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6647431Z  2026-02-14 13:15:38.965 UTC [304] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6647660Z  2026-02-14 13:15:38.965 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6647941Z  2026-02-14 13:15:38.965 UTC [304] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6648067Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6648291Z  2026-02-14 13:15:38.966 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6648547Z  2026-02-14 13:15:38.966 UTC [304] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6648673Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6649031Z  2026-02-14 13:15:38.966 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6649523Z  2026-02-14 13:15:38.966 UTC [304] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6649765Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6649918Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6650288Z  2026-02-14 13:15:38.967 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6650609Z  2026-02-14 13:15:38.967 UTC [304] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6650870Z  2026-02-14 13:15:38.967 UTC [304] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6651219Z  2026-02-14 13:15:38.967 UTC [304] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6651560Z  2026-02-14 13:15:38.969 UTC [304] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6652299Z  2026-02-14 13:15:38.969 UTC [304] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6653059Z  2026-02-14 13:15:38.970 UTC [304] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6654087Z  2026-02-14 13:15:38.970 UTC [304] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6654714Z  2026-02-14 13:15:38.971 UTC [304] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6655348Z  2026-02-14 13:15:38.971 UTC [304] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6655696Z  2026-02-14 13:15:38.971 UTC [304] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6656171Z  2026-02-14 13:15:38.971 UTC [304] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6656512Z  2026-02-14 13:15:38.972 UTC [304] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6657222Z  2026-02-14 13:15:38.972 UTC [304] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6657571Z  2026-02-14 13:15:38.972 UTC [304] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6658229Z  2026-02-14 13:15:38.972 UTC [304] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6658555Z  2026-02-14 13:15:38.973 UTC [304] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6659015Z  2026-02-14 13:15:38.973 UTC [304] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6659333Z  2026-02-14 13:15:38.973 UTC [304] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6659780Z  2026-02-14 13:15:38.973 UTC [304] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6660109Z  2026-02-14 13:15:38.974 UTC [304] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6660769Z  2026-02-14 13:15:38.974 UTC [304] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6661104Z  2026-02-14 13:15:38.974 UTC [304] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6661889Z  2026-02-14 13:15:38.974 UTC [304] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6662144Z  2026-02-14 13:15:38.978 UTC [304] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6662737Z  2026-02-14 13:15:38.978 UTC [304] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6663014Z  2026-02-14 13:15:39.021 UTC [305] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6663785Z  2026-02-14 13:15:39.158 UTC [309] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6664077Z  2026-02-14 13:15:39.158 UTC [309] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6664196Z  	DO $$
2026-02-14T13:16:24.6664314Z  	BEGIN
2026-02-14T13:16:24.6664596Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6664795Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6665013Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6665215Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6665326Z  	    END IF;
2026-02-14T13:16:24.6665446Z  	END $$;
2026-02-14T13:16:24.6665857Z  2026-02-14 13:15:39.167 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6667239Z  2026-02-14 13:15:39.167 UTC [309] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6667678Z  2026-02-14 13:15:39.167 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6668459Z  2026-02-14 13:15:39.167 UTC [309] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6668870Z  2026-02-14 13:15:39.168 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6669588Z  2026-02-14 13:15:39.168 UTC [309] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6669980Z  2026-02-14 13:15:39.168 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6670667Z  2026-02-14 13:15:39.168 UTC [309] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6671100Z  2026-02-14 13:15:39.169 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6671873Z  2026-02-14 13:15:39.169 UTC [309] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6672307Z  2026-02-14 13:15:39.169 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6673107Z  2026-02-14 13:15:39.169 UTC [309] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6673513Z  2026-02-14 13:15:39.170 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6674260Z  2026-02-14 13:15:39.170 UTC [309] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6674723Z  2026-02-14 13:15:39.170 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6675130Z  2026-02-14 13:15:39.170 UTC [309] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6675531Z  2026-02-14 13:15:39.171 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6675944Z  2026-02-14 13:15:39.171 UTC [309] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6676167Z  2026-02-14 13:15:39.171 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6676549Z  2026-02-14 13:15:39.171 UTC [309] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6676768Z  2026-02-14 13:15:39.172 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6677216Z  2026-02-14 13:15:39.172 UTC [309] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6677538Z  2026-02-14 13:15:39.172 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6677990Z  2026-02-14 13:15:39.172 UTC [309] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6678217Z  2026-02-14 13:15:39.173 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6678681Z  2026-02-14 13:15:39.173 UTC [309] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6678898Z  2026-02-14 13:15:39.173 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6679179Z  2026-02-14 13:15:39.173 UTC [309] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6679304Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6679521Z  2026-02-14 13:15:39.174 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6679788Z  2026-02-14 13:15:39.174 UTC [309] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6679910Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6680123Z  2026-02-14 13:15:39.174 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6680392Z  2026-02-14 13:15:39.174 UTC [309] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6680514Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6680601Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6680822Z  2026-02-14 13:15:39.175 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6681128Z  2026-02-14 13:15:39.175 UTC [309] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6681394Z  2026-02-14 13:15:39.175 UTC [309] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6681747Z  2026-02-14 13:15:39.175 UTC [309] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6682078Z  2026-02-14 13:15:39.177 UTC [309] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6682491Z  2026-02-14 13:15:39.177 UTC [309] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6682781Z  2026-02-14 13:15:39.178 UTC [309] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6683245Z  2026-02-14 13:15:39.178 UTC [309] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6683586Z  2026-02-14 13:15:39.179 UTC [309] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6684547Z  2026-02-14 13:15:39.179 UTC [309] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6684900Z  2026-02-14 13:15:39.179 UTC [309] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6685364Z  2026-02-14 13:15:39.179 UTC [309] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6685689Z  2026-02-14 13:15:39.179 UTC [309] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6686500Z  2026-02-14 13:15:39.179 UTC [309] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6686832Z  2026-02-14 13:15:39.180 UTC [309] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6687485Z  2026-02-14 13:15:39.180 UTC [309] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6687811Z  2026-02-14 13:15:39.181 UTC [309] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6688255Z  2026-02-14 13:15:39.181 UTC [309] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6688579Z  2026-02-14 13:15:39.181 UTC [309] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6689020Z  2026-02-14 13:15:39.181 UTC [309] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6689343Z  2026-02-14 13:15:39.182 UTC [309] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6689995Z  2026-02-14 13:15:39.182 UTC [309] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6690320Z  2026-02-14 13:15:39.182 UTC [309] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6690951Z  2026-02-14 13:15:39.182 UTC [309] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6691210Z  2026-02-14 13:15:39.186 UTC [309] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6691725Z  2026-02-14 13:15:39.186 UTC [309] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6691940Z  2026-02-14 13:15:39.223 UTC [310] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6692118Z  2026-02-14 13:15:39.361 UTC [314] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6692281Z  2026-02-14 13:15:39.361 UTC [314] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6692351Z  	DO $$
2026-02-14T13:16:24.6692412Z  	BEGIN
2026-02-14T13:16:24.6692566Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6692694Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6692819Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6692934Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6693084Z  	    END IF;
2026-02-14T13:16:24.6693148Z  	END $$;
2026-02-14T13:16:24.6693380Z  2026-02-14 13:15:39.369 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6694354Z  2026-02-14 13:15:39.369 UTC [314] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6694578Z  2026-02-14 13:15:39.370 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6695011Z  2026-02-14 13:15:39.370 UTC [314] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6695360Z  2026-02-14 13:15:39.370 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6695742Z  2026-02-14 13:15:39.370 UTC [314] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6695961Z  2026-02-14 13:15:39.371 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6696353Z  2026-02-14 13:15:39.371 UTC [314] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6696567Z  2026-02-14 13:15:39.371 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6696958Z  2026-02-14 13:15:39.371 UTC [314] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6697175Z  2026-02-14 13:15:39.372 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6697611Z  2026-02-14 13:15:39.372 UTC [314] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6697833Z  2026-02-14 13:15:39.372 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6698195Z  2026-02-14 13:15:39.372 UTC [314] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6698414Z  2026-02-14 13:15:39.373 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6698766Z  2026-02-14 13:15:39.373 UTC [314] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6698979Z  2026-02-14 13:15:39.373 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6699376Z  2026-02-14 13:15:39.373 UTC [314] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6699596Z  2026-02-14 13:15:39.374 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6699967Z  2026-02-14 13:15:39.374 UTC [314] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6700187Z  2026-02-14 13:15:39.374 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6700616Z  2026-02-14 13:15:39.374 UTC [314] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6700829Z  2026-02-14 13:15:39.375 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6701283Z  2026-02-14 13:15:39.375 UTC [314] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6701501Z  2026-02-14 13:15:39.375 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6702067Z  2026-02-14 13:15:39.375 UTC [314] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6702290Z  2026-02-14 13:15:39.376 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6702569Z  2026-02-14 13:15:39.376 UTC [314] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6702689Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6702921Z  2026-02-14 13:15:39.376 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6703177Z  2026-02-14 13:15:39.376 UTC [314] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6703377Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6703760Z  2026-02-14 13:15:39.377 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6704164Z  2026-02-14 13:15:39.377 UTC [314] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6704297Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6704384Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6704599Z  2026-02-14 13:15:39.377 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6704908Z  2026-02-14 13:15:39.377 UTC [314] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6705170Z  2026-02-14 13:15:39.378 UTC [314] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6705524Z  2026-02-14 13:15:39.378 UTC [314] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6705859Z  2026-02-14 13:15:39.379 UTC [314] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6706273Z  2026-02-14 13:15:39.379 UTC [314] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6706561Z  2026-02-14 13:15:39.380 UTC [314] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6707033Z  2026-02-14 13:15:39.380 UTC [314] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6707363Z  2026-02-14 13:15:39.381 UTC [314] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6707881Z  2026-02-14 13:15:39.381 UTC [314] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6708223Z  2026-02-14 13:15:39.381 UTC [314] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6708687Z  2026-02-14 13:15:39.381 UTC [314] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6709018Z  2026-02-14 13:15:39.382 UTC [314] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6709724Z  2026-02-14 13:15:39.382 UTC [314] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6710050Z  2026-02-14 13:15:39.382 UTC [314] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6710831Z  2026-02-14 13:15:39.382 UTC [314] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6711159Z  2026-02-14 13:15:39.383 UTC [314] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6711610Z  2026-02-14 13:15:39.383 UTC [314] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6711926Z  2026-02-14 13:15:39.383 UTC [314] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6712362Z  2026-02-14 13:15:39.383 UTC [314] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6712831Z  2026-02-14 13:15:39.384 UTC [314] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6713485Z  2026-02-14 13:15:39.384 UTC [314] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6714137Z  2026-02-14 13:15:39.384 UTC [314] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6714918Z  2026-02-14 13:15:39.384 UTC [314] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6715173Z  2026-02-14 13:15:39.389 UTC [314] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6715693Z  2026-02-14 13:15:39.389 UTC [314] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6715901Z  2026-02-14 13:15:39.430 UTC [315] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6716082Z  2026-02-14 13:15:39.567 UTC [319] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6716248Z  2026-02-14 13:15:39.567 UTC [319] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6716311Z  	DO $$
2026-02-14T13:16:24.6716371Z  	BEGIN
2026-02-14T13:16:24.6716528Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6716643Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6716764Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6716885Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6716950Z  	    END IF;
2026-02-14T13:16:24.6717009Z  	END $$;
2026-02-14T13:16:24.6717240Z  2026-02-14 13:15:39.577 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6717976Z  2026-02-14 13:15:39.577 UTC [319] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6718196Z  2026-02-14 13:15:39.578 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6718633Z  2026-02-14 13:15:39.578 UTC [319] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6718849Z  2026-02-14 13:15:39.578 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6719221Z  2026-02-14 13:15:39.578 UTC [319] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6719441Z  2026-02-14 13:15:39.579 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6719961Z  2026-02-14 13:15:39.579 UTC [319] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6720178Z  2026-02-14 13:15:39.579 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6720573Z  2026-02-14 13:15:39.579 UTC [319] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6720783Z  2026-02-14 13:15:39.580 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6721214Z  2026-02-14 13:15:39.580 UTC [319] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6721551Z  2026-02-14 13:15:39.580 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6721914Z  2026-02-14 13:15:39.580 UTC [319] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6722133Z  2026-02-14 13:15:39.581 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6722478Z  2026-02-14 13:15:39.581 UTC [319] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6722691Z  2026-02-14 13:15:39.582 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6723082Z  2026-02-14 13:15:39.582 UTC [319] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6723290Z  2026-02-14 13:15:39.582 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6723874Z  2026-02-14 13:15:39.582 UTC [319] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6724144Z  2026-02-14 13:15:39.582 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6724582Z  2026-02-14 13:15:39.582 UTC [319] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6724799Z  2026-02-14 13:15:39.583 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6725245Z  2026-02-14 13:15:39.583 UTC [319] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6725457Z  2026-02-14 13:15:39.583 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6725923Z  2026-02-14 13:15:39.583 UTC [319] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6726141Z  2026-02-14 13:15:39.584 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6726420Z  2026-02-14 13:15:39.584 UTC [319] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6726542Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6726759Z  2026-02-14 13:15:39.584 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6727014Z  2026-02-14 13:15:39.584 UTC [319] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6727139Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6727353Z  2026-02-14 13:15:39.585 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6727614Z  2026-02-14 13:15:39.585 UTC [319] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6727744Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6727827Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6728162Z  2026-02-14 13:15:39.585 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6728500Z  2026-02-14 13:15:39.585 UTC [319] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6728759Z  2026-02-14 13:15:39.586 UTC [319] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6729107Z  2026-02-14 13:15:39.586 UTC [319] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6729437Z  2026-02-14 13:15:39.588 UTC [319] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6729841Z  2026-02-14 13:15:39.588 UTC [319] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6730232Z  2026-02-14 13:15:39.589 UTC [319] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6730698Z  2026-02-14 13:15:39.589 UTC [319] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6731032Z  2026-02-14 13:15:39.589 UTC [319] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6731548Z  2026-02-14 13:15:39.589 UTC [319] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6731887Z  2026-02-14 13:15:39.590 UTC [319] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6732358Z  2026-02-14 13:15:39.590 UTC [319] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6732683Z  2026-02-14 13:15:39.590 UTC [319] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6733407Z  2026-02-14 13:15:39.590 UTC [319] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6734061Z  2026-02-14 13:15:39.591 UTC [319] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6734732Z  2026-02-14 13:15:39.591 UTC [319] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6735065Z  2026-02-14 13:15:39.591 UTC [319] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6735520Z  2026-02-14 13:15:39.591 UTC [319] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6735840Z  2026-02-14 13:15:39.592 UTC [319] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6736288Z  2026-02-14 13:15:39.592 UTC [319] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6736608Z  2026-02-14 13:15:39.592 UTC [319] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6737259Z  2026-02-14 13:15:39.592 UTC [319] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6737591Z  2026-02-14 13:15:39.593 UTC [319] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6738344Z  2026-02-14 13:15:39.593 UTC [319] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6738603Z  2026-02-14 13:15:39.597 UTC [319] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6739111Z  2026-02-14 13:15:39.597 UTC [319] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6739321Z  2026-02-14 13:15:39.641 UTC [320] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6739605Z  2026-02-14 13:15:39.782 UTC [324] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6739760Z  2026-02-14 13:15:39.782 UTC [324] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6739821Z  	DO $$
2026-02-14T13:16:24.6739884Z  	BEGIN
2026-02-14T13:16:24.6740042Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6740158Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6740286Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6740401Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6740461Z  	    END IF;
2026-02-14T13:16:24.6740527Z  	END $$;
2026-02-14T13:16:24.6740754Z  2026-02-14 13:15:39.791 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6741488Z  2026-02-14 13:15:39.791 UTC [324] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6741717Z  2026-02-14 13:15:39.792 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6742145Z  2026-02-14 13:15:39.792 UTC [324] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6742359Z  2026-02-14 13:15:39.792 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6742745Z  2026-02-14 13:15:39.792 UTC [324] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6742959Z  2026-02-14 13:15:39.793 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6743350Z  2026-02-14 13:15:39.793 UTC [324] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6743572Z  2026-02-14 13:15:39.793 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6744183Z  2026-02-14 13:15:39.793 UTC [324] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6744412Z  2026-02-14 13:15:39.794 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6744841Z  2026-02-14 13:15:39.794 UTC [324] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6745055Z  2026-02-14 13:15:39.794 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6745421Z  2026-02-14 13:15:39.794 UTC [324] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6745633Z  2026-02-14 13:15:39.795 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6745979Z  2026-02-14 13:15:39.795 UTC [324] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6746320Z  2026-02-14 13:15:39.795 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6746714Z  2026-02-14 13:15:39.795 UTC [324] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6746927Z  2026-02-14 13:15:39.796 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6747298Z  2026-02-14 13:15:39.796 UTC [324] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6747512Z  2026-02-14 13:15:39.796 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6747959Z  2026-02-14 13:15:39.796 UTC [324] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6748286Z  2026-02-14 13:15:39.797 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6748746Z  2026-02-14 13:15:39.797 UTC [324] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6748970Z  2026-02-14 13:15:39.797 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6749429Z  2026-02-14 13:15:39.797 UTC [324] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6749643Z  2026-02-14 13:15:39.798 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6749920Z  2026-02-14 13:15:39.798 UTC [324] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6750042Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6750250Z  2026-02-14 13:15:39.798 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6750509Z  2026-02-14 13:15:39.798 UTC [324] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6750626Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6750841Z  2026-02-14 13:15:39.799 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6751105Z  2026-02-14 13:15:39.799 UTC [324] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6751223Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6751310Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6751530Z  2026-02-14 13:15:39.799 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6751835Z  2026-02-14 13:15:39.799 UTC [324] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6752101Z  2026-02-14 13:15:39.800 UTC [324] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6752450Z  2026-02-14 13:15:39.800 UTC [324] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6752780Z  2026-02-14 13:15:39.802 UTC [324] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6753205Z  2026-02-14 13:15:39.802 UTC [324] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6753488Z  2026-02-14 13:15:39.802 UTC [324] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6754327Z  2026-02-14 13:15:39.802 UTC [324] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6754690Z  2026-02-14 13:15:39.803 UTC [324] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6755509Z  2026-02-14 13:15:39.803 UTC [324] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6755872Z  2026-02-14 13:15:39.804 UTC [324] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6756334Z  2026-02-14 13:15:39.804 UTC [324] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6756662Z  2026-02-14 13:15:39.804 UTC [324] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6757481Z  2026-02-14 13:15:39.804 UTC [324] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6757813Z  2026-02-14 13:15:39.805 UTC [324] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6758460Z  2026-02-14 13:15:39.805 UTC [324] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6758786Z  2026-02-14 13:15:39.805 UTC [324] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6759410Z  2026-02-14 13:15:39.805 UTC [324] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6759743Z  2026-02-14 13:15:39.805 UTC [324] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6760342Z  2026-02-14 13:15:39.805 UTC [324] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6760673Z  2026-02-14 13:15:39.806 UTC [324] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6761482Z  2026-02-14 13:15:39.806 UTC [324] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6761961Z  2026-02-14 13:15:39.807 UTC [324] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6762739Z  2026-02-14 13:15:39.807 UTC [324] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6763004Z  2026-02-14 13:15:39.811 UTC [324] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6763878Z  2026-02-14 13:15:39.811 UTC [324] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6764124Z  2026-02-14 13:15:39.853 UTC [325] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6764436Z  2026-02-14 13:15:39.987 UTC [329] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6764596Z  2026-02-14 13:15:39.987 UTC [329] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6764661Z  	DO $$
2026-02-14T13:16:24.6764721Z  	BEGIN
2026-02-14T13:16:24.6764872Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6765060Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6765247Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6765373Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6765576Z  	    END IF;
2026-02-14T13:16:24.6765717Z  	END $$;
2026-02-14T13:16:24.6766158Z  2026-02-14 13:15:39.996 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6767100Z  2026-02-14 13:15:39.996 UTC [329] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6767333Z  2026-02-14 13:15:39.997 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6767760Z  2026-02-14 13:15:39.997 UTC [329] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6768129Z  2026-02-14 13:15:39.997 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6768519Z  2026-02-14 13:15:39.997 UTC [329] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6768741Z  2026-02-14 13:15:39.998 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6769134Z  2026-02-14 13:15:39.998 UTC [329] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6769349Z  2026-02-14 13:15:39.998 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6769739Z  2026-02-14 13:15:39.998 UTC [329] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6769958Z  2026-02-14 13:15:39.998 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6770389Z  2026-02-14 13:15:39.998 UTC [329] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6770613Z  2026-02-14 13:15:39.999 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6770978Z  2026-02-14 13:15:39.999 UTC [329] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6771193Z  2026-02-14 13:15:39.999 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6771577Z  2026-02-14 13:15:39.999 UTC [329] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6771796Z  2026-02-14 13:15:40.000 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6772192Z  2026-02-14 13:15:40.000 UTC [329] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6772410Z  2026-02-14 13:15:40.000 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6772784Z  2026-02-14 13:15:40.000 UTC [329] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6773003Z  2026-02-14 13:15:40.001 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6773435Z  2026-02-14 13:15:40.001 UTC [329] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6773850Z  2026-02-14 13:15:40.001 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6774313Z  2026-02-14 13:15:40.001 UTC [329] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6774534Z  2026-02-14 13:15:40.002 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6775110Z  2026-02-14 13:15:40.002 UTC [329] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6775335Z  2026-02-14 13:15:40.002 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6775610Z  2026-02-14 13:15:40.002 UTC [329] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6775727Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6775946Z  2026-02-14 13:15:40.003 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6776203Z  2026-02-14 13:15:40.003 UTC [329] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6776426Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6776641Z  2026-02-14 13:15:40.003 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6776904Z  2026-02-14 13:15:40.003 UTC [329] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6777034Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6777119Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6777332Z  2026-02-14 13:15:40.004 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6777640Z  2026-02-14 13:15:40.004 UTC [329] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6777904Z  2026-02-14 13:15:40.004 UTC [329] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6778264Z  2026-02-14 13:15:40.004 UTC [329] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6778599Z  2026-02-14 13:15:40.006 UTC [329] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6779009Z  2026-02-14 13:15:40.006 UTC [329] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6779298Z  2026-02-14 13:15:40.007 UTC [329] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6779776Z  2026-02-14 13:15:40.007 UTC [329] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6780116Z  2026-02-14 13:15:40.008 UTC [329] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6780644Z  2026-02-14 13:15:40.008 UTC [329] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6780988Z  2026-02-14 13:15:40.008 UTC [329] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6781450Z  2026-02-14 13:15:40.008 UTC [329] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6781787Z  2026-02-14 13:15:40.009 UTC [329] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6782494Z  2026-02-14 13:15:40.009 UTC [329] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6782823Z  2026-02-14 13:15:40.009 UTC [329] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6783713Z  2026-02-14 13:15:40.009 UTC [329] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6784047Z  2026-02-14 13:15:40.010 UTC [329] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6784497Z  2026-02-14 13:15:40.010 UTC [329] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6784815Z  2026-02-14 13:15:40.010 UTC [329] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6785256Z  2026-02-14 13:15:40.010 UTC [329] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6785692Z  2026-02-14 13:15:40.011 UTC [329] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6786349Z  2026-02-14 13:15:40.011 UTC [329] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6786682Z  2026-02-14 13:15:40.011 UTC [329] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6787307Z  2026-02-14 13:15:40.011 UTC [329] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6787556Z  2026-02-14 13:15:40.016 UTC [329] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6788068Z  2026-02-14 13:15:40.016 UTC [329] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6788279Z  2026-02-14 13:15:40.058 UTC [330] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6788458Z  2026-02-14 13:15:40.193 UTC [334] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6788619Z  2026-02-14 13:15:40.193 UTC [334] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6788681Z  	DO $$
2026-02-14T13:16:24.6788740Z  	BEGIN
2026-02-14T13:16:24.6788896Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6789008Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6789131Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6789250Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6789314Z  	    END IF;
2026-02-14T13:16:24.6789372Z  	END $$;
2026-02-14T13:16:24.6789600Z  2026-02-14 13:15:40.202 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6790336Z  2026-02-14 13:15:40.202 UTC [334] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6790555Z  2026-02-14 13:15:40.202 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6790987Z  2026-02-14 13:15:40.202 UTC [334] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6791200Z  2026-02-14 13:15:40.203 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6791578Z  2026-02-14 13:15:40.203 UTC [334] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6791798Z  2026-02-14 13:15:40.203 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6792290Z  2026-02-14 13:15:40.203 UTC [334] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6792509Z  2026-02-14 13:15:40.204 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6792893Z  2026-02-14 13:15:40.204 UTC [334] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6793107Z  2026-02-14 13:15:40.204 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6793542Z  2026-02-14 13:15:40.204 UTC [334] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6794145Z  2026-02-14 13:15:40.205 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6794525Z  2026-02-14 13:15:40.205 UTC [334] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6794751Z  2026-02-14 13:15:40.205 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6795097Z  2026-02-14 13:15:40.205 UTC [334] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6795318Z  2026-02-14 13:15:40.206 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6795709Z  2026-02-14 13:15:40.206 UTC [334] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6795920Z  2026-02-14 13:15:40.206 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6796298Z  2026-02-14 13:15:40.206 UTC [334] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6796518Z  2026-02-14 13:15:40.207 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6796961Z  2026-02-14 13:15:40.207 UTC [334] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6797176Z  2026-02-14 13:15:40.207 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6797629Z  2026-02-14 13:15:40.207 UTC [334] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6797844Z  2026-02-14 13:15:40.207 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6798308Z  2026-02-14 13:15:40.207 UTC [334] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6798523Z  2026-02-14 13:15:40.208 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6798808Z  2026-02-14 13:15:40.208 UTC [334] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6798925Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6799142Z  2026-02-14 13:15:40.208 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6799405Z  2026-02-14 13:15:40.208 UTC [334] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6799522Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6799735Z  2026-02-14 13:15:40.209 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6800000Z  2026-02-14 13:15:40.209 UTC [334] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6800122Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6800208Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6800551Z  2026-02-14 13:15:40.209 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6800871Z  2026-02-14 13:15:40.209 UTC [334] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6801132Z  2026-02-14 13:15:40.210 UTC [334] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6801484Z  2026-02-14 13:15:40.210 UTC [334] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6801816Z  2026-02-14 13:15:40.212 UTC [334] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6802324Z  2026-02-14 13:15:40.212 UTC [334] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6802616Z  2026-02-14 13:15:40.213 UTC [334] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6803083Z  2026-02-14 13:15:40.213 UTC [334] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6803423Z  2026-02-14 13:15:40.213 UTC [334] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6804312Z  2026-02-14 13:15:40.213 UTC [334] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6804653Z  2026-02-14 13:15:40.214 UTC [334] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6805121Z  2026-02-14 13:15:40.214 UTC [334] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6805452Z  2026-02-14 13:15:40.214 UTC [334] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6806154Z  2026-02-14 13:15:40.214 UTC [334] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6806488Z  2026-02-14 13:15:40.215 UTC [334] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6807141Z  2026-02-14 13:15:40.215 UTC [334] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6807466Z  2026-02-14 13:15:40.215 UTC [334] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6807916Z  2026-02-14 13:15:40.215 UTC [334] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6808232Z  2026-02-14 13:15:40.216 UTC [334] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6808673Z  2026-02-14 13:15:40.216 UTC [334] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6808989Z  2026-02-14 13:15:40.216 UTC [334] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6809645Z  2026-02-14 13:15:40.216 UTC [334] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6809975Z  2026-02-14 13:15:40.217 UTC [334] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6810744Z  2026-02-14 13:15:40.217 UTC [334] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6811000Z  2026-02-14 13:15:40.221 UTC [334] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6811504Z  2026-02-14 13:15:40.221 UTC [334] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6811709Z  2026-02-14 13:15:40.264 UTC [335] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6811987Z  2026-02-14 13:15:40.401 UTC [339] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6812143Z  2026-02-14 13:15:40.401 UTC [339] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6812204Z  	DO $$
2026-02-14T13:16:24.6812269Z  	BEGIN
2026-02-14T13:16:24.6812424Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6812540Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6812668Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6812784Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6812846Z  	    END IF;
2026-02-14T13:16:24.6812911Z  	END $$;
2026-02-14T13:16:24.6813137Z  2026-02-14 13:15:40.410 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6813988Z  2026-02-14 13:15:40.410 UTC [339] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6814218Z  2026-02-14 13:15:40.410 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6814647Z  2026-02-14 13:15:40.410 UTC [339] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6814867Z  2026-02-14 13:15:40.410 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6815242Z  2026-02-14 13:15:40.410 UTC [339] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6815453Z  2026-02-14 13:15:40.411 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6815844Z  2026-02-14 13:15:40.411 UTC [339] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6816058Z  2026-02-14 13:15:40.411 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6816446Z  2026-02-14 13:15:40.411 UTC [339] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6816665Z  2026-02-14 13:15:40.412 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6817093Z  2026-02-14 13:15:40.412 UTC [339] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6817306Z  2026-02-14 13:15:40.412 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6817673Z  2026-02-14 13:15:40.412 UTC [339] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6817884Z  2026-02-14 13:15:40.413 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6818230Z  2026-02-14 13:15:40.413 UTC [339] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6818556Z  2026-02-14 13:15:40.413 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6818945Z  2026-02-14 13:15:40.413 UTC [339] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6819164Z  2026-02-14 13:15:40.414 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6819527Z  2026-02-14 13:15:40.414 UTC [339] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6819740Z  2026-02-14 13:15:40.414 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6820170Z  2026-02-14 13:15:40.414 UTC [339] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6820484Z  2026-02-14 13:15:40.415 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6820934Z  2026-02-14 13:15:40.415 UTC [339] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6821153Z  2026-02-14 13:15:40.415 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6821609Z  2026-02-14 13:15:40.415 UTC [339] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6821823Z  2026-02-14 13:15:40.416 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6822096Z  2026-02-14 13:15:40.416 UTC [339] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6822214Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6822434Z  2026-02-14 13:15:40.416 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6822691Z  2026-02-14 13:15:40.416 UTC [339] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6822809Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6823029Z  2026-02-14 13:15:40.417 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6823289Z  2026-02-14 13:15:40.417 UTC [339] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6823408Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6823498Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6823820Z  2026-02-14 13:15:40.417 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6824145Z  2026-02-14 13:15:40.417 UTC [339] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6824417Z  2026-02-14 13:15:40.418 UTC [339] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6824772Z  2026-02-14 13:15:40.418 UTC [339] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6825106Z  2026-02-14 13:15:40.420 UTC [339] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6825524Z  2026-02-14 13:15:40.420 UTC [339] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6825806Z  2026-02-14 13:15:40.421 UTC [339] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6826276Z  2026-02-14 13:15:40.421 UTC [339] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6826619Z  2026-02-14 13:15:40.421 UTC [339] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6827337Z  2026-02-14 13:15:40.421 UTC [339] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6827685Z  2026-02-14 13:15:40.422 UTC [339] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6828144Z  2026-02-14 13:15:40.422 UTC [339] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6828467Z  2026-02-14 13:15:40.422 UTC [339] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6829387Z  2026-02-14 13:15:40.422 UTC [339] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6829724Z  2026-02-14 13:15:40.423 UTC [339] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6830376Z  2026-02-14 13:15:40.423 UTC [339] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6830697Z  2026-02-14 13:15:40.423 UTC [339] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6831136Z  2026-02-14 13:15:40.423 UTC [339] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6831467Z  2026-02-14 13:15:40.424 UTC [339] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6831907Z  2026-02-14 13:15:40.424 UTC [339] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6832236Z  2026-02-14 13:15:40.424 UTC [339] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6832892Z  2026-02-14 13:15:40.424 UTC [339] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6833217Z  2026-02-14 13:15:40.425 UTC [339] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6834148Z  2026-02-14 13:15:40.425 UTC [339] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6834428Z  2026-02-14 13:15:40.429 UTC [339] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6834950Z  2026-02-14 13:15:40.429 UTC [339] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6835167Z  2026-02-14 13:15:40.472 UTC [340] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6835341Z  2026-02-14 13:15:40.649 UTC [344] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6835501Z  2026-02-14 13:15:40.649 UTC [344] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6835563Z  	DO $$
2026-02-14T13:16:24.6835621Z  	BEGIN
2026-02-14T13:16:24.6835775Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6835897Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6836021Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6836137Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6836397Z  	    END IF;
2026-02-14T13:16:24.6836516Z  	END $$;
2026-02-14T13:16:24.6836926Z  2026-02-14 13:15:40.659 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6838263Z  2026-02-14 13:15:40.659 UTC [344] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6838571Z  2026-02-14 13:15:40.659 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6839027Z  2026-02-14 13:15:40.659 UTC [344] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6839399Z  2026-02-14 13:15:40.660 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6839796Z  2026-02-14 13:15:40.660 UTC [344] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6840025Z  2026-02-14 13:15:40.660 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6840412Z  2026-02-14 13:15:40.660 UTC [344] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6840633Z  2026-02-14 13:15:40.661 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6841031Z  2026-02-14 13:15:40.661 UTC [344] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6841250Z  2026-02-14 13:15:40.661 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6841678Z  2026-02-14 13:15:40.661 UTC [344] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6841904Z  2026-02-14 13:15:40.662 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6842265Z  2026-02-14 13:15:40.662 UTC [344] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6842485Z  2026-02-14 13:15:40.662 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6842829Z  2026-02-14 13:15:40.662 UTC [344] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6843042Z  2026-02-14 13:15:40.663 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6843441Z  2026-02-14 13:15:40.663 UTC [344] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6843911Z  2026-02-14 13:15:40.663 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6844377Z  2026-02-14 13:15:40.663 UTC [344] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6844606Z  2026-02-14 13:15:40.664 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6845040Z  2026-02-14 13:15:40.664 UTC [344] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6845254Z  2026-02-14 13:15:40.664 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6845708Z  2026-02-14 13:15:40.664 UTC [344] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6845926Z  2026-02-14 13:15:40.665 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6846516Z  2026-02-14 13:15:40.665 UTC [344] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6846735Z  2026-02-14 13:15:40.665 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6847012Z  2026-02-14 13:15:40.665 UTC [344] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6847136Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6847350Z  2026-02-14 13:15:40.666 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6847606Z  2026-02-14 13:15:40.666 UTC [344] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6847837Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6848049Z  2026-02-14 13:15:40.666 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6848313Z  2026-02-14 13:15:40.666 UTC [344] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6848471Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6848558Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6848771Z  2026-02-14 13:15:40.667 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6849128Z  2026-02-14 13:15:40.667 UTC [344] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6849405Z  2026-02-14 13:15:40.667 UTC [344] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6849770Z  2026-02-14 13:15:40.667 UTC [344] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6850114Z  2026-02-14 13:15:40.669 UTC [344] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6850542Z  2026-02-14 13:15:40.669 UTC [344] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6850845Z  2026-02-14 13:15:40.670 UTC [344] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6851313Z  2026-02-14 13:15:40.670 UTC [344] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6851644Z  2026-02-14 13:15:40.671 UTC [344] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6852438Z  2026-02-14 13:15:40.671 UTC [344] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6853055Z  2026-02-14 13:15:40.671 UTC [344] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6854149Z  2026-02-14 13:15:40.671 UTC [344] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6854785Z  2026-02-14 13:15:40.672 UTC [344] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6856110Z  2026-02-14 13:15:40.672 UTC [344] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6856746Z  2026-02-14 13:15:40.672 UTC [344] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6858302Z  2026-02-14 13:15:40.672 UTC [344] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6858960Z  2026-02-14 13:15:40.673 UTC [344] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6859811Z  2026-02-14 13:15:40.673 UTC [344] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6860425Z  2026-02-14 13:15:40.673 UTC [344] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6861276Z  2026-02-14 13:15:40.673 UTC [344] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6862164Z  2026-02-14 13:15:40.674 UTC [344] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6863412Z  2026-02-14 13:15:40.674 UTC [344] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6864264Z  2026-02-14 13:15:40.674 UTC [344] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6865399Z  2026-02-14 13:15:40.674 UTC [344] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6865672Z  2026-02-14 13:15:40.679 UTC [344] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6866211Z  2026-02-14 13:15:40.679 UTC [344] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6866481Z  2026-02-14 13:15:41.407 UTC [345] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6866834Z  2026-02-14 13:15:41.407 UTC [347] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6867014Z  2026-02-14 13:15:41.548 UTC [350] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6867172Z  2026-02-14 13:15:41.548 UTC [350] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6867241Z  	DO $$
2026-02-14T13:16:24.6867300Z  	BEGIN
2026-02-14T13:16:24.6867465Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6867593Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6867719Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6867841Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6867908Z  	    END IF;
2026-02-14T13:16:24.6867969Z  	END $$;
2026-02-14T13:16:24.6868209Z  2026-02-14 13:15:41.557 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6868961Z  2026-02-14 13:15:41.557 UTC [350] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6869187Z  2026-02-14 13:15:41.558 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6869616Z  2026-02-14 13:15:41.558 UTC [350] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6869843Z  2026-02-14 13:15:41.558 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6870224Z  2026-02-14 13:15:41.558 UTC [350] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6870444Z  2026-02-14 13:15:41.559 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6870999Z  2026-02-14 13:15:41.559 UTC [350] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6871221Z  2026-02-14 13:15:41.559 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6871651Z  2026-02-14 13:15:41.559 UTC [350] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6871864Z  2026-02-14 13:15:41.560 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6872291Z  2026-02-14 13:15:41.560 UTC [350] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6872621Z  2026-02-14 13:15:41.560 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6872993Z  2026-02-14 13:15:41.560 UTC [350] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6873205Z  2026-02-14 13:15:41.561 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6873549Z  2026-02-14 13:15:41.561 UTC [350] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6874106Z  2026-02-14 13:15:41.561 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6874524Z  2026-02-14 13:15:41.561 UTC [350] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6874764Z  2026-02-14 13:15:41.562 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6875143Z  2026-02-14 13:15:41.562 UTC [350] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6875370Z  2026-02-14 13:15:41.562 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6875804Z  2026-02-14 13:15:41.562 UTC [350] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6876020Z  2026-02-14 13:15:41.563 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6876476Z  2026-02-14 13:15:41.563 UTC [350] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6876692Z  2026-02-14 13:15:41.563 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6877155Z  2026-02-14 13:15:41.563 UTC [350] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6877381Z  2026-02-14 13:15:41.564 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6877674Z  2026-02-14 13:15:41.564 UTC [350] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6877802Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6878023Z  2026-02-14 13:15:41.564 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6878286Z  2026-02-14 13:15:41.564 UTC [350] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6878412Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6878629Z  2026-02-14 13:15:41.565 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6878893Z  2026-02-14 13:15:41.565 UTC [350] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6879020Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6879232Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6879453Z  2026-02-14 13:15:41.565 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6879760Z  2026-02-14 13:15:41.565 UTC [350] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6880022Z  2026-02-14 13:15:41.566 UTC [350] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6880372Z  2026-02-14 13:15:41.566 UTC [350] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6880708Z  2026-02-14 13:15:41.568 UTC [350] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6881222Z  2026-02-14 13:15:41.568 UTC [350] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6881511Z  2026-02-14 13:15:41.569 UTC [350] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6881985Z  2026-02-14 13:15:41.569 UTC [350] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6882321Z  2026-02-14 13:15:41.569 UTC [350] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6882841Z  2026-02-14 13:15:41.569 UTC [350] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6883185Z  2026-02-14 13:15:41.570 UTC [350] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6883881Z  2026-02-14 13:15:41.570 UTC [350] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6884256Z  2026-02-14 13:15:41.570 UTC [350] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6884974Z  2026-02-14 13:15:41.570 UTC [350] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6885312Z  2026-02-14 13:15:41.571 UTC [350] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6885969Z  2026-02-14 13:15:41.571 UTC [350] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6886297Z  2026-02-14 13:15:41.571 UTC [350] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6886754Z  2026-02-14 13:15:41.571 UTC [350] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6887070Z  2026-02-14 13:15:41.572 UTC [350] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6887506Z  2026-02-14 13:15:41.572 UTC [350] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6887836Z  2026-02-14 13:15:41.572 UTC [350] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6888493Z  2026-02-14 13:15:41.572 UTC [350] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6888944Z  2026-02-14 13:15:41.573 UTC [350] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6889574Z  2026-02-14 13:15:41.573 UTC [350] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6889823Z  2026-02-14 13:15:41.577 UTC [350] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6890335Z  2026-02-14 13:15:41.577 UTC [350] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6890647Z  2026-02-14 13:15:41.934 UTC [351] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6890818Z  2026-02-14 13:15:42.082 UTC [355] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6890984Z  2026-02-14 13:15:42.082 UTC [355] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6891047Z  	DO $$
2026-02-14T13:16:24.6891105Z  	BEGIN
2026-02-14T13:16:24.6891262Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6891377Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6891498Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6891613Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6891673Z  	    END IF;
2026-02-14T13:16:24.6891731Z  	END $$;
2026-02-14T13:16:24.6891963Z  2026-02-14 13:15:42.091 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6892709Z  2026-02-14 13:15:42.091 UTC [355] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6892930Z  2026-02-14 13:15:42.092 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6893356Z  2026-02-14 13:15:42.092 UTC [355] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6893572Z  2026-02-14 13:15:42.092 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6894072Z  2026-02-14 13:15:42.092 UTC [355] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6894285Z  2026-02-14 13:15:42.093 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6894675Z  2026-02-14 13:15:42.093 UTC [355] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6894892Z  2026-02-14 13:15:42.093 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6895277Z  2026-02-14 13:15:42.093 UTC [355] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6895490Z  2026-02-14 13:15:42.094 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6895920Z  2026-02-14 13:15:42.094 UTC [355] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6896132Z  2026-02-14 13:15:42.094 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6896496Z  2026-02-14 13:15:42.094 UTC [355] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6896718Z  2026-02-14 13:15:42.095 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6897171Z  2026-02-14 13:15:42.095 UTC [355] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6897390Z  2026-02-14 13:15:42.095 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6897775Z  2026-02-14 13:15:42.095 UTC [355] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6897992Z  2026-02-14 13:15:42.096 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6898361Z  2026-02-14 13:15:42.096 UTC [355] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6898574Z  2026-02-14 13:15:42.096 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6899103Z  2026-02-14 13:15:42.096 UTC [355] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6899328Z  2026-02-14 13:15:42.097 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6899773Z  2026-02-14 13:15:42.097 UTC [355] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6899988Z  2026-02-14 13:15:42.097 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6900452Z  2026-02-14 13:15:42.097 UTC [355] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6900666Z  2026-02-14 13:15:42.098 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6900948Z  2026-02-14 13:15:42.098 UTC [355] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6901062Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6901280Z  2026-02-14 13:15:42.098 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6901542Z  2026-02-14 13:15:42.098 UTC [355] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6901659Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6901870Z  2026-02-14 13:15:42.099 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6902136Z  2026-02-14 13:15:42.099 UTC [355] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6902254Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6902342Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6902569Z  2026-02-14 13:15:42.099 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6902868Z  2026-02-14 13:15:42.099 UTC [355] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6903133Z  2026-02-14 13:15:42.100 UTC [355] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6903493Z  2026-02-14 13:15:42.100 UTC [355] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6903928Z  2026-02-14 13:15:42.102 UTC [355] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6904333Z  2026-02-14 13:15:42.102 UTC [355] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6904621Z  2026-02-14 13:15:42.103 UTC [355] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6905100Z  2026-02-14 13:15:42.103 UTC [355] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6905579Z  2026-02-14 13:15:42.103 UTC [355] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6906098Z  2026-02-14 13:15:42.103 UTC [355] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6906438Z  2026-02-14 13:15:42.104 UTC [355] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6906906Z  2026-02-14 13:15:42.104 UTC [355] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6907335Z  2026-02-14 13:15:42.104 UTC [355] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6908055Z  2026-02-14 13:15:42.104 UTC [355] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6908385Z  2026-02-14 13:15:42.105 UTC [355] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6909043Z  2026-02-14 13:15:42.105 UTC [355] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6909368Z  2026-02-14 13:15:42.105 UTC [355] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6909821Z  2026-02-14 13:15:42.105 UTC [355] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6910136Z  2026-02-14 13:15:42.106 UTC [355] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6910584Z  2026-02-14 13:15:42.106 UTC [355] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6910911Z  2026-02-14 13:15:42.106 UTC [355] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6911566Z  2026-02-14 13:15:42.106 UTC [355] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6911893Z  2026-02-14 13:15:42.107 UTC [355] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6912519Z  2026-02-14 13:15:42.107 UTC [355] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6912774Z  2026-02-14 13:15:42.111 UTC [355] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6913276Z  2026-02-14 13:15:42.111 UTC [355] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6913484Z  2026-02-14 13:15:42.735 UTC [358] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6913952Z  2026-02-14 13:15:42.735 UTC [356] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6914158Z  2026-02-14 13:15:42.877 UTC [361] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6914332Z  2026-02-14 13:15:42.877 UTC [361] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6914394Z  	DO $$
2026-02-14T13:16:24.6914453Z  	BEGIN
2026-02-14T13:16:24.6914607Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6914848Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6914973Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6915088Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6915152Z  	    END IF;
2026-02-14T13:16:24.6915211Z  	END $$;
2026-02-14T13:16:24.6915435Z  2026-02-14 13:15:42.886 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6916178Z  2026-02-14 13:15:42.886 UTC [361] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6916501Z  2026-02-14 13:15:42.887 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6916937Z  2026-02-14 13:15:42.887 UTC [361] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6917152Z  2026-02-14 13:15:42.887 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6917530Z  2026-02-14 13:15:42.887 UTC [361] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6917754Z  2026-02-14 13:15:42.888 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6918138Z  2026-02-14 13:15:42.888 UTC [361] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6918348Z  2026-02-14 13:15:42.888 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6918741Z  2026-02-14 13:15:42.888 UTC [361] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6918957Z  2026-02-14 13:15:42.889 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6919386Z  2026-02-14 13:15:42.889 UTC [361] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6919606Z  2026-02-14 13:15:42.889 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6919969Z  2026-02-14 13:15:42.889 UTC [361] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6920188Z  2026-02-14 13:15:42.890 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6920535Z  2026-02-14 13:15:42.890 UTC [361] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6920747Z  2026-02-14 13:15:42.890 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6921144Z  2026-02-14 13:15:42.890 UTC [361] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6921359Z  2026-02-14 13:15:42.891 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6921720Z  2026-02-14 13:15:42.891 UTC [361] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6921938Z  2026-02-14 13:15:42.891 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6922367Z  2026-02-14 13:15:42.891 UTC [361] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6922585Z  2026-02-14 13:15:42.892 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6923125Z  2026-02-14 13:15:42.892 UTC [361] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6923349Z  2026-02-14 13:15:42.892 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6924064Z  2026-02-14 13:15:42.892 UTC [361] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6924281Z  2026-02-14 13:15:42.893 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6924553Z  2026-02-14 13:15:42.893 UTC [361] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6924838Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6925053Z  2026-02-14 13:15:42.893 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6925309Z  2026-02-14 13:15:42.893 UTC [361] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6925435Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6925651Z  2026-02-14 13:15:42.894 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6925912Z  2026-02-14 13:15:42.894 UTC [361] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6926039Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6926123Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6926331Z  2026-02-14 13:15:42.894 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6926639Z  2026-02-14 13:15:42.894 UTC [361] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6926903Z  2026-02-14 13:15:42.895 UTC [361] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6927250Z  2026-02-14 13:15:42.895 UTC [361] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6927583Z  2026-02-14 13:15:42.897 UTC [361] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6927991Z  2026-02-14 13:15:42.897 UTC [361] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6928280Z  2026-02-14 13:15:42.898 UTC [361] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6928741Z  2026-02-14 13:15:42.898 UTC [361] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6929079Z  2026-02-14 13:15:42.898 UTC [361] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6929595Z  2026-02-14 13:15:42.898 UTC [361] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6929928Z  2026-02-14 13:15:42.899 UTC [361] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6930386Z  2026-02-14 13:15:42.899 UTC [361] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6930718Z  2026-02-14 13:15:42.899 UTC [361] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6931421Z  2026-02-14 13:15:42.899 UTC [361] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6931866Z  2026-02-14 13:15:42.900 UTC [361] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6932517Z  2026-02-14 13:15:42.900 UTC [361] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6932838Z  2026-02-14 13:15:42.900 UTC [361] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6933292Z  2026-02-14 13:15:42.900 UTC [361] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6934046Z  2026-02-14 13:15:42.901 UTC [361] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6934542Z  2026-02-14 13:15:42.901 UTC [361] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6934882Z  2026-02-14 13:15:42.901 UTC [361] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6935545Z  2026-02-14 13:15:42.901 UTC [361] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6935880Z  2026-02-14 13:15:42.902 UTC [361] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6936508Z  2026-02-14 13:15:42.902 UTC [361] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6936759Z  2026-02-14 13:15:42.906 UTC [361] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6937276Z  2026-02-14 13:15:42.906 UTC [361] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6937486Z  2026-02-14 13:15:43.260 UTC [362] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6937668Z  2026-02-14 13:15:43.399 UTC [366] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6937826Z  2026-02-14 13:15:43.399 UTC [366] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6937889Z  	DO $$
2026-02-14T13:16:24.6937954Z  	BEGIN
2026-02-14T13:16:24.6938103Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6938220Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6938346Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6938462Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6938521Z  	    END IF;
2026-02-14T13:16:24.6938580Z  	END $$;
2026-02-14T13:16:24.6938818Z  2026-02-14 13:15:43.408 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6939551Z  2026-02-14 13:15:43.408 UTC [366] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6939778Z  2026-02-14 13:15:43.408 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6940200Z  2026-02-14 13:15:43.408 UTC [366] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6940421Z  2026-02-14 13:15:43.409 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6940812Z  2026-02-14 13:15:43.409 UTC [366] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6941159Z  2026-02-14 13:15:43.409 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6941548Z  2026-02-14 13:15:43.409 UTC [366] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6941767Z  2026-02-14 13:15:43.410 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6942151Z  2026-02-14 13:15:43.410 UTC [366] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6942373Z  2026-02-14 13:15:43.410 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6942912Z  2026-02-14 13:15:43.410 UTC [366] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6943130Z  2026-02-14 13:15:43.411 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6943499Z  2026-02-14 13:15:43.411 UTC [366] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6943843Z  2026-02-14 13:15:43.411 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6944185Z  2026-02-14 13:15:43.411 UTC [366] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6944404Z  2026-02-14 13:15:43.412 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6944792Z  2026-02-14 13:15:43.412 UTC [366] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6945009Z  2026-02-14 13:15:43.412 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6945411Z  2026-02-14 13:15:43.412 UTC [366] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6945677Z  2026-02-14 13:15:43.413 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6946171Z  2026-02-14 13:15:43.413 UTC [366] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6946391Z  2026-02-14 13:15:43.413 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6946836Z  2026-02-14 13:15:43.413 UTC [366] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6947057Z  2026-02-14 13:15:43.414 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6947518Z  2026-02-14 13:15:43.414 UTC [366] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6947737Z  2026-02-14 13:15:43.414 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6948030Z  2026-02-14 13:15:43.414 UTC [366] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6948147Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6948371Z  2026-02-14 13:15:43.415 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6948638Z  2026-02-14 13:15:43.415 UTC [366] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6948759Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6948977Z  2026-02-14 13:15:43.415 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6949364Z  2026-02-14 13:15:43.415 UTC [366] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6949493Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6949581Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6949807Z  2026-02-14 13:15:43.416 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6950110Z  2026-02-14 13:15:43.416 UTC [366] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6950375Z  2026-02-14 13:15:43.416 UTC [366] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6950733Z  2026-02-14 13:15:43.416 UTC [366] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6951169Z  2026-02-14 13:15:43.418 UTC [366] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6951593Z  2026-02-14 13:15:43.418 UTC [366] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6951880Z  2026-02-14 13:15:43.419 UTC [366] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6952345Z  2026-02-14 13:15:43.419 UTC [366] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6952683Z  2026-02-14 13:15:43.420 UTC [366] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6953194Z  2026-02-14 13:15:43.420 UTC [366] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6953537Z  2026-02-14 13:15:43.420 UTC [366] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6954584Z  2026-02-14 13:15:43.420 UTC [366] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6955184Z  2026-02-14 13:15:43.421 UTC [366] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6956469Z  2026-02-14 13:15:43.421 UTC [366] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6957068Z  2026-02-14 13:15:43.421 UTC [366] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6958254Z  2026-02-14 13:15:43.421 UTC [366] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6958846Z  2026-02-14 13:15:43.422 UTC [366] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6959636Z  2026-02-14 13:15:43.422 UTC [366] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6959977Z  2026-02-14 13:15:43.422 UTC [366] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6960431Z  2026-02-14 13:15:43.422 UTC [366] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6960760Z  2026-02-14 13:15:43.423 UTC [366] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6961897Z  2026-02-14 13:15:43.423 UTC [366] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6962525Z  2026-02-14 13:15:43.423 UTC [366] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6963861Z  2026-02-14 13:15:43.423 UTC [366] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6964354Z  2026-02-14 13:15:43.428 UTC [366] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6965314Z  2026-02-14 13:15:43.428 UTC [366] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6965939Z  2026-02-14 13:15:44.051 UTC [369] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6966315Z  2026-02-14 13:15:44.051 UTC [367] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6966627Z  2026-02-14 13:15:44.193 UTC [372] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6966939Z  2026-02-14 13:15:44.193 UTC [372] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6967061Z  	DO $$
2026-02-14T13:16:24.6967172Z  	BEGIN
2026-02-14T13:16:24.6967432Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6967620Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6967814Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6967995Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6968107Z  	    END IF;
2026-02-14T13:16:24.6968203Z  	END $$;
2026-02-14T13:16:24.6968593Z  2026-02-14 13:15:44.202 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6970043Z  2026-02-14 13:15:44.202 UTC [372] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.6970483Z  2026-02-14 13:15:44.202 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6971215Z  2026-02-14 13:15:44.202 UTC [372] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.6971532Z  2026-02-14 13:15:44.203 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6972238Z  2026-02-14 13:15:44.203 UTC [372] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.6972674Z  2026-02-14 13:15:44.203 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6973403Z  2026-02-14 13:15:44.203 UTC [372] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.6974008Z  2026-02-14 13:15:44.203 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6974509Z  2026-02-14 13:15:44.203 UTC [372] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.6974959Z  2026-02-14 13:15:44.204 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6975785Z  2026-02-14 13:15:44.204 UTC [372] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.6976209Z  2026-02-14 13:15:44.204 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6976905Z  2026-02-14 13:15:44.204 UTC [372] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.6977563Z  2026-02-14 13:15:44.205 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6978250Z  2026-02-14 13:15:44.205 UTC [372] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.6978669Z  2026-02-14 13:15:44.205 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6979400Z  2026-02-14 13:15:44.205 UTC [372] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.6979829Z  2026-02-14 13:15:44.206 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6980817Z  2026-02-14 13:15:44.206 UTC [372] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.6981247Z  2026-02-14 13:15:44.206 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6981822Z  2026-02-14 13:15:44.206 UTC [372] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.6982272Z  2026-02-14 13:15:44.207 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6982894Z  2026-02-14 13:15:44.207 UTC [372] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.6983312Z  2026-02-14 13:15:44.207 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6984411Z  2026-02-14 13:15:44.207 UTC [372] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.6984742Z  2026-02-14 13:15:44.208 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6985073Z  2026-02-14 13:15:44.208 UTC [372] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.6985204Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.6985423Z  2026-02-14 13:15:44.208 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6985685Z  2026-02-14 13:15:44.208 UTC [372] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.6985812Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.6986028Z  2026-02-14 13:15:44.209 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6986300Z  2026-02-14 13:15:44.209 UTC [372] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.6986422Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.6986509Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.6986734Z  2026-02-14 13:15:44.209 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.6987043Z  2026-02-14 13:15:44.209 UTC [372] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.6987310Z  2026-02-14 13:15:44.210 UTC [372] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.6987672Z  2026-02-14 13:15:44.210 UTC [372] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.6988006Z  2026-02-14 13:15:44.212 UTC [372] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6988423Z  2026-02-14 13:15:44.212 UTC [372] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.6988876Z  2026-02-14 13:15:44.213 UTC [372] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6989354Z  2026-02-14 13:15:44.213 UTC [372] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.6989692Z  2026-02-14 13:15:44.213 UTC [372] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6990217Z  2026-02-14 13:15:44.213 UTC [372] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.6990558Z  2026-02-14 13:15:44.214 UTC [372] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6991132Z  2026-02-14 13:15:44.214 UTC [372] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.6991466Z  2026-02-14 13:15:44.214 UTC [372] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6992172Z  2026-02-14 13:15:44.214 UTC [372] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.6992506Z  2026-02-14 13:15:44.215 UTC [372] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6993155Z  2026-02-14 13:15:44.215 UTC [372] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.6993488Z  2026-02-14 13:15:44.215 UTC [372] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6994249Z  2026-02-14 13:15:44.215 UTC [372] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6994587Z  2026-02-14 13:15:44.215 UTC [372] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6995040Z  2026-02-14 13:15:44.215 UTC [372] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.6995374Z  2026-02-14 13:15:44.216 UTC [372] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6996040Z  2026-02-14 13:15:44.216 UTC [372] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.6996381Z  2026-02-14 13:15:44.216 UTC [372] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.6997006Z  2026-02-14 13:15:44.216 UTC [372] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.6997262Z  2026-02-14 13:15:44.220 UTC [372] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.6997774Z  2026-02-14 13:15:44.220 UTC [372] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.6997913Z  2026-02-14 13:15:44.405 UTC [382] FATAL:  role "root" does not exist
2026-02-14T13:16:24.6998127Z  2026-02-14 13:15:44.579 UTC [373] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.6998300Z  2026-02-14 13:15:44.722 UTC [385] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.6998581Z  2026-02-14 13:15:44.722 UTC [385] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.6998654Z  	DO $$
2026-02-14T13:16:24.6998714Z  	BEGIN
2026-02-14T13:16:24.6998868Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.6998990Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.6999116Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.6999236Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.6999301Z  	    END IF;
2026-02-14T13:16:24.6999360Z  	END $$;
2026-02-14T13:16:24.6999588Z  2026-02-14 13:15:44.731 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7000453Z  2026-02-14 13:15:44.731 UTC [385] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7000680Z  2026-02-14 13:15:44.731 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7001106Z  2026-02-14 13:15:44.731 UTC [385] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7001328Z  2026-02-14 13:15:44.732 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7001706Z  2026-02-14 13:15:44.732 UTC [385] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7001923Z  2026-02-14 13:15:44.732 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7002313Z  2026-02-14 13:15:44.732 UTC [385] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7002526Z  2026-02-14 13:15:44.733 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7002916Z  2026-02-14 13:15:44.733 UTC [385] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7003130Z  2026-02-14 13:15:44.733 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7003560Z  2026-02-14 13:15:44.733 UTC [385] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7004077Z  2026-02-14 13:15:44.734 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7004578Z  2026-02-14 13:15:44.734 UTC [385] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7004801Z  2026-02-14 13:15:44.734 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7005149Z  2026-02-14 13:15:44.734 UTC [385] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7005364Z  2026-02-14 13:15:44.735 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7005756Z  2026-02-14 13:15:44.735 UTC [385] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7005969Z  2026-02-14 13:15:44.735 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7006338Z  2026-02-14 13:15:44.735 UTC [385] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7006559Z  2026-02-14 13:15:44.736 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7006991Z  2026-02-14 13:15:44.736 UTC [385] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7007340Z  2026-02-14 13:15:44.736 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7007799Z  2026-02-14 13:15:44.736 UTC [385] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7008015Z  2026-02-14 13:15:44.737 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7008478Z  2026-02-14 13:15:44.737 UTC [385] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7008694Z  2026-02-14 13:15:44.737 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7009117Z  2026-02-14 13:15:44.737 UTC [385] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7009238Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7009458Z  2026-02-14 13:15:44.738 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7009714Z  2026-02-14 13:15:44.738 UTC [385] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7009834Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7010049Z  2026-02-14 13:15:44.738 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7010308Z  2026-02-14 13:15:44.738 UTC [385] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7010433Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7010528Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7010743Z  2026-02-14 13:15:44.739 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7011053Z  2026-02-14 13:15:44.739 UTC [385] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7011317Z  2026-02-14 13:15:44.739 UTC [385] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7011666Z  2026-02-14 13:15:44.739 UTC [385] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7012000Z  2026-02-14 13:15:44.741 UTC [385] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7012405Z  2026-02-14 13:15:44.741 UTC [385] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7012691Z  2026-02-14 13:15:44.742 UTC [385] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7013160Z  2026-02-14 13:15:44.742 UTC [385] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7013498Z  2026-02-14 13:15:44.743 UTC [385] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7014234Z  2026-02-14 13:15:44.743 UTC [385] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7014588Z  2026-02-14 13:15:44.743 UTC [385] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7015057Z  2026-02-14 13:15:44.743 UTC [385] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7015393Z  2026-02-14 13:15:44.744 UTC [385] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7016226Z  2026-02-14 13:15:44.744 UTC [385] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7016558Z  2026-02-14 13:15:44.744 UTC [385] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7017217Z  2026-02-14 13:15:44.744 UTC [385] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7017538Z  2026-02-14 13:15:44.745 UTC [385] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7018096Z  2026-02-14 13:15:44.745 UTC [385] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7018416Z  2026-02-14 13:15:44.745 UTC [385] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7018858Z  2026-02-14 13:15:44.745 UTC [385] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7019191Z  2026-02-14 13:15:44.746 UTC [385] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7019853Z  2026-02-14 13:15:44.746 UTC [385] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7020186Z  2026-02-14 13:15:44.746 UTC [385] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7020825Z  2026-02-14 13:15:44.746 UTC [385] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7021074Z  2026-02-14 13:15:44.750 UTC [385] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7021581Z  2026-02-14 13:15:44.750 UTC [385] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7021790Z  2026-02-14 13:15:45.381 UTC [386] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7021987Z  2026-02-14 13:15:45.381 UTC [389] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7022170Z  2026-02-14 13:15:45.527 UTC [392] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7022331Z  2026-02-14 13:15:45.527 UTC [392] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7022394Z  	DO $$
2026-02-14T13:16:24.7022458Z  	BEGIN
2026-02-14T13:16:24.7022615Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7022739Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7022866Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7022980Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7023039Z  	    END IF;
2026-02-14T13:16:24.7023103Z  	END $$;
2026-02-14T13:16:24.7023339Z  2026-02-14 13:15:45.536 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7024339Z  2026-02-14 13:15:45.536 UTC [392] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7024588Z  2026-02-14 13:15:45.537 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7025144Z  2026-02-14 13:15:45.537 UTC [392] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7025372Z  2026-02-14 13:15:45.537 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7025753Z  2026-02-14 13:15:45.537 UTC [392] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7025971Z  2026-02-14 13:15:45.538 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7026366Z  2026-02-14 13:15:45.538 UTC [392] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7026683Z  2026-02-14 13:15:45.538 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7027065Z  2026-02-14 13:15:45.538 UTC [392] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7027292Z  2026-02-14 13:15:45.539 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7027725Z  2026-02-14 13:15:45.539 UTC [392] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7027939Z  2026-02-14 13:15:45.539 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7028314Z  2026-02-14 13:15:45.539 UTC [392] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7028529Z  2026-02-14 13:15:45.539 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7028886Z  2026-02-14 13:15:45.539 UTC [392] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7029100Z  2026-02-14 13:15:45.540 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7029491Z  2026-02-14 13:15:45.540 UTC [392] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7029709Z  2026-02-14 13:15:45.540 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7030074Z  2026-02-14 13:15:45.540 UTC [392] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7030287Z  2026-02-14 13:15:45.541 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7030722Z  2026-02-14 13:15:45.541 UTC [392] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7030942Z  2026-02-14 13:15:45.541 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7031388Z  2026-02-14 13:15:45.541 UTC [392] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7031608Z  2026-02-14 13:15:45.542 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7032062Z  2026-02-14 13:15:45.542 UTC [392] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7032279Z  2026-02-14 13:15:45.542 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7032555Z  2026-02-14 13:15:45.542 UTC [392] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7032680Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7032903Z  2026-02-14 13:15:45.543 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7033159Z  2026-02-14 13:15:45.543 UTC [392] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7033359Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7033582Z  2026-02-14 13:15:45.543 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7034040Z  2026-02-14 13:15:45.543 UTC [392] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7034166Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7034258Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7034470Z  2026-02-14 13:15:45.544 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7034889Z  2026-02-14 13:15:45.544 UTC [392] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7035154Z  2026-02-14 13:15:45.544 UTC [392] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7035508Z  2026-02-14 13:15:45.544 UTC [392] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7035844Z  2026-02-14 13:15:45.546 UTC [392] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7036255Z  2026-02-14 13:15:45.546 UTC [392] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7036542Z  2026-02-14 13:15:45.547 UTC [392] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7037010Z  2026-02-14 13:15:45.547 UTC [392] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7037351Z  2026-02-14 13:15:45.548 UTC [392] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7037867Z  2026-02-14 13:15:45.548 UTC [392] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7038214Z  2026-02-14 13:15:45.548 UTC [392] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7038673Z  2026-02-14 13:15:45.548 UTC [392] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7039001Z  2026-02-14 13:15:45.549 UTC [392] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7039714Z  2026-02-14 13:15:45.549 UTC [392] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7040062Z  2026-02-14 13:15:45.549 UTC [392] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7040748Z  2026-02-14 13:15:45.549 UTC [392] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7041075Z  2026-02-14 13:15:45.550 UTC [392] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7041524Z  2026-02-14 13:15:45.550 UTC [392] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7041851Z  2026-02-14 13:15:45.550 UTC [392] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7042289Z  2026-02-14 13:15:45.550 UTC [392] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7042724Z  2026-02-14 13:15:45.551 UTC [392] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7043381Z  2026-02-14 13:15:45.551 UTC [392] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7043887Z  2026-02-14 13:15:45.551 UTC [392] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7044527Z  2026-02-14 13:15:45.551 UTC [392] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7044893Z  2026-02-14 13:15:45.555 UTC [392] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7045404Z  2026-02-14 13:15:45.555 UTC [392] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7045617Z  2026-02-14 13:15:45.620 UTC [393] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7045791Z  2026-02-14 13:15:45.838 UTC [396] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7045952Z  2026-02-14 13:15:45.838 UTC [396] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7046020Z  	DO $$
2026-02-14T13:16:24.7046081Z  	BEGIN
2026-02-14T13:16:24.7046230Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7046348Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7046468Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7046583Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7046647Z  	    END IF;
2026-02-14T13:16:24.7046710Z  	END $$;
2026-02-14T13:16:24.7046936Z  2026-02-14 13:15:45.847 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7047683Z  2026-02-14 13:15:45.847 UTC [396] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7047906Z  2026-02-14 13:15:45.848 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7048338Z  2026-02-14 13:15:45.848 UTC [396] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7048561Z  2026-02-14 13:15:45.848 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7048942Z  2026-02-14 13:15:45.848 UTC [396] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7049162Z  2026-02-14 13:15:45.849 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7049545Z  2026-02-14 13:15:45.849 UTC [396] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7049757Z  2026-02-14 13:15:45.849 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7050145Z  2026-02-14 13:15:45.849 UTC [396] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7050361Z  2026-02-14 13:15:45.850 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7050796Z  2026-02-14 13:15:45.850 UTC [396] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7051124Z  2026-02-14 13:15:45.850 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7051493Z  2026-02-14 13:15:45.850 UTC [396] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7051708Z  2026-02-14 13:15:45.851 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7052050Z  2026-02-14 13:15:45.851 UTC [396] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7052268Z  2026-02-14 13:15:45.852 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7052734Z  2026-02-14 13:15:45.852 UTC [396] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7052946Z  2026-02-14 13:15:45.852 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7053313Z  2026-02-14 13:15:45.852 UTC [396] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7053531Z  2026-02-14 13:15:45.853 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7054233Z  2026-02-14 13:15:45.853 UTC [396] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7054453Z  2026-02-14 13:15:45.853 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7054908Z  2026-02-14 13:15:45.853 UTC [396] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7055127Z  2026-02-14 13:15:45.854 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7055600Z  2026-02-14 13:15:45.854 UTC [396] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7055812Z  2026-02-14 13:15:45.854 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7056089Z  2026-02-14 13:15:45.854 UTC [396] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7056208Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7056421Z  2026-02-14 13:15:45.855 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7056679Z  2026-02-14 13:15:45.855 UTC [396] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7056801Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7057013Z  2026-02-14 13:15:45.855 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7057277Z  2026-02-14 13:15:45.855 UTC [396] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7057402Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7057490Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7057703Z  2026-02-14 13:15:45.856 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7058009Z  2026-02-14 13:15:45.856 UTC [396] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7058271Z  2026-02-14 13:15:45.856 UTC [396] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7058615Z  2026-02-14 13:15:45.856 UTC [396] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7058954Z  2026-02-14 13:15:45.892 UTC [396] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7059482Z  2026-02-14 13:15:45.892 UTC [396] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7059776Z  2026-02-14 13:15:45.893 UTC [396] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7060240Z  2026-02-14 13:15:45.893 UTC [396] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7060576Z  2026-02-14 13:15:45.894 UTC [396] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7061094Z  2026-02-14 13:15:45.894 UTC [396] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7061535Z  2026-02-14 13:15:45.894 UTC [396] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7062010Z  2026-02-14 13:15:45.894 UTC [396] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7062352Z  2026-02-14 13:15:45.895 UTC [396] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7063065Z  2026-02-14 13:15:45.895 UTC [396] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7063403Z  2026-02-14 13:15:45.895 UTC [396] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7064260Z  2026-02-14 13:15:45.895 UTC [396] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7064589Z  2026-02-14 13:15:45.896 UTC [396] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7065038Z  2026-02-14 13:15:45.896 UTC [396] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7065351Z  2026-02-14 13:15:45.896 UTC [396] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7065793Z  2026-02-14 13:15:45.896 UTC [396] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7066121Z  2026-02-14 13:15:45.897 UTC [396] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7066770Z  2026-02-14 13:15:45.897 UTC [396] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7067099Z  2026-02-14 13:15:45.897 UTC [396] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7067728Z  2026-02-14 13:15:45.897 UTC [396] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7067972Z  2026-02-14 13:15:45.902 UTC [396] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7068480Z  2026-02-14 13:15:45.902 UTC [396] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7068690Z  2026-02-14 13:15:46.328 UTC [397] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7068988Z  2026-02-14 13:15:46.470 UTC [401] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7069148Z  2026-02-14 13:15:46.470 UTC [401] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7069211Z  	DO $$
2026-02-14T13:16:24.7069276Z  	BEGIN
2026-02-14T13:16:24.7069425Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7069538Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7069666Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7069779Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7069841Z  	    END IF;
2026-02-14T13:16:24.7070002Z  	END $$;
2026-02-14T13:16:24.7070231Z  2026-02-14 13:15:46.479 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7070963Z  2026-02-14 13:15:46.479 UTC [401] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7071186Z  2026-02-14 13:15:46.480 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7071646Z  2026-02-14 13:15:46.480 UTC [401] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7071863Z  2026-02-14 13:15:46.480 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7072247Z  2026-02-14 13:15:46.480 UTC [401] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7072466Z  2026-02-14 13:15:46.481 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7072853Z  2026-02-14 13:15:46.481 UTC [401] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7073076Z  2026-02-14 13:15:46.481 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7073461Z  2026-02-14 13:15:46.481 UTC [401] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7073869Z  2026-02-14 13:15:46.482 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7074319Z  2026-02-14 13:15:46.482 UTC [401] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7074536Z  2026-02-14 13:15:46.482 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7074912Z  2026-02-14 13:15:46.482 UTC [401] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7075130Z  2026-02-14 13:15:46.483 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7075470Z  2026-02-14 13:15:46.483 UTC [401] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7075689Z  2026-02-14 13:15:46.483 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7076080Z  2026-02-14 13:15:46.483 UTC [401] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7076290Z  2026-02-14 13:15:46.484 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7076658Z  2026-02-14 13:15:46.484 UTC [401] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7076873Z  2026-02-14 13:15:46.484 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7077447Z  2026-02-14 13:15:46.484 UTC [401] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7077669Z  2026-02-14 13:15:46.485 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7078114Z  2026-02-14 13:15:46.485 UTC [401] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7078330Z  2026-02-14 13:15:46.485 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7078787Z  2026-02-14 13:15:46.485 UTC [401] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7079107Z  2026-02-14 13:15:46.486 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7079387Z  2026-02-14 13:15:46.486 UTC [401] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7079504Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7079718Z  2026-02-14 13:15:46.486 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7079977Z  2026-02-14 13:15:46.486 UTC [401] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7080090Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7080303Z  2026-02-14 13:15:46.487 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7080570Z  2026-02-14 13:15:46.487 UTC [401] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7080693Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7080779Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7080996Z  2026-02-14 13:15:46.487 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7081301Z  2026-02-14 13:15:46.487 UTC [401] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7081559Z  2026-02-14 13:15:46.488 UTC [401] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7081905Z  2026-02-14 13:15:46.488 UTC [401] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7082233Z  2026-02-14 13:15:46.490 UTC [401] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7082641Z  2026-02-14 13:15:46.490 UTC [401] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7082927Z  2026-02-14 13:15:46.491 UTC [401] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7083392Z  2026-02-14 13:15:46.491 UTC [401] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7083948Z  2026-02-14 13:15:46.491 UTC [401] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7084487Z  2026-02-14 13:15:46.491 UTC [401] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7084825Z  2026-02-14 13:15:46.492 UTC [401] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7085298Z  2026-02-14 13:15:46.492 UTC [401] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7085633Z  2026-02-14 13:15:46.492 UTC [401] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7086458Z  2026-02-14 13:15:46.492 UTC [401] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7086792Z  2026-02-14 13:15:46.493 UTC [401] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7087442Z  2026-02-14 13:15:46.493 UTC [401] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7087889Z  2026-02-14 13:15:46.493 UTC [401] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7088337Z  2026-02-14 13:15:46.493 UTC [401] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7088658Z  2026-02-14 13:15:46.494 UTC [401] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7089093Z  2026-02-14 13:15:46.494 UTC [401] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7089417Z  2026-02-14 13:15:46.494 UTC [401] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7090075Z  2026-02-14 13:15:46.494 UTC [401] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7090401Z  2026-02-14 13:15:46.495 UTC [401] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7091024Z  2026-02-14 13:15:46.495 UTC [401] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7091278Z  2026-02-14 13:15:46.498 UTC [401] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7091777Z  2026-02-14 13:15:46.498 UTC [401] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7091987Z  2026-02-14 13:15:46.536 UTC [402] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7092159Z  2026-02-14 13:15:46.687 UTC [406] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7092318Z  2026-02-14 13:15:46.687 UTC [406] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7092385Z  	DO $$
2026-02-14T13:16:24.7092444Z  	BEGIN
2026-02-14T13:16:24.7092592Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7092714Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7092836Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7092951Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7093017Z  	    END IF;
2026-02-14T13:16:24.7093076Z  	END $$;
2026-02-14T13:16:24.7093315Z  2026-02-14 13:15:46.697 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7094294Z  2026-02-14 13:15:46.697 UTC [406] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7094528Z  2026-02-14 13:15:46.697 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7095076Z  2026-02-14 13:15:46.697 UTC [406] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7095305Z  2026-02-14 13:15:46.698 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7095678Z  2026-02-14 13:15:46.698 UTC [406] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7095889Z  2026-02-14 13:15:46.698 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7096280Z  2026-02-14 13:15:46.698 UTC [406] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7096593Z  2026-02-14 13:15:46.699 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7096982Z  2026-02-14 13:15:46.699 UTC [406] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7097197Z  2026-02-14 13:15:46.699 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7097623Z  2026-02-14 13:15:46.699 UTC [406] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7097839Z  2026-02-14 13:15:46.700 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7098214Z  2026-02-14 13:15:46.700 UTC [406] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7098427Z  2026-02-14 13:15:46.700 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7098779Z  2026-02-14 13:15:46.700 UTC [406] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7098996Z  2026-02-14 13:15:46.701 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7099385Z  2026-02-14 13:15:46.701 UTC [406] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7099605Z  2026-02-14 13:15:46.701 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7099975Z  2026-02-14 13:15:46.701 UTC [406] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7100193Z  2026-02-14 13:15:46.702 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7172278Z  2026-02-14 13:15:46.702 UTC [406] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7172608Z  2026-02-14 13:15:46.702 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7173106Z  2026-02-14 13:15:46.702 UTC [406] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7173346Z  2026-02-14 13:15:46.703 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7174166Z  2026-02-14 13:15:46.703 UTC [406] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7174408Z  2026-02-14 13:15:46.703 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7174693Z  2026-02-14 13:15:46.703 UTC [406] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7174832Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7175057Z  2026-02-14 13:15:46.704 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7175487Z  2026-02-14 13:15:46.704 UTC [406] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7175633Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7175865Z  2026-02-14 13:15:46.704 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7176131Z  2026-02-14 13:15:46.704 UTC [406] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7176259Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7176348Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7176568Z  2026-02-14 13:15:46.705 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7177001Z  2026-02-14 13:15:46.705 UTC [406] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7177273Z  2026-02-14 13:15:46.705 UTC [406] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7177634Z  2026-02-14 13:15:46.705 UTC [406] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7177974Z  2026-02-14 13:15:46.707 UTC [406] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7178419Z  2026-02-14 13:15:46.707 UTC [406] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7178705Z  2026-02-14 13:15:46.708 UTC [406] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7179176Z  2026-02-14 13:15:46.708 UTC [406] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7179514Z  2026-02-14 13:15:46.708 UTC [406] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7180030Z  2026-02-14 13:15:46.708 UTC [406] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7180374Z  2026-02-14 13:15:46.709 UTC [406] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7180835Z  2026-02-14 13:15:46.709 UTC [406] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7181167Z  2026-02-14 13:15:46.709 UTC [406] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7181880Z  2026-02-14 13:15:46.709 UTC [406] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7182216Z  2026-02-14 13:15:46.710 UTC [406] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7182867Z  2026-02-14 13:15:46.710 UTC [406] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7183188Z  2026-02-14 13:15:46.710 UTC [406] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7183756Z  2026-02-14 13:15:46.710 UTC [406] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7184239Z  2026-02-14 13:15:46.711 UTC [406] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7184816Z  2026-02-14 13:15:46.711 UTC [406] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7185170Z  2026-02-14 13:15:46.711 UTC [406] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7185842Z  2026-02-14 13:15:46.711 UTC [406] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7186178Z  2026-02-14 13:15:46.712 UTC [406] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7186808Z  2026-02-14 13:15:46.712 UTC [406] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7187165Z  2026-02-14 13:15:46.716 UTC [406] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7187680Z  2026-02-14 13:15:46.716 UTC [406] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7187890Z  2026-02-14 13:15:46.768 UTC [407] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7188065Z  2026-02-14 13:15:46.913 UTC [411] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7188232Z  2026-02-14 13:15:46.913 UTC [411] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7188296Z  	DO $$
2026-02-14T13:16:24.7188358Z  	BEGIN
2026-02-14T13:16:24.7188519Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7188641Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7188762Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7188883Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7188945Z  	    END IF;
2026-02-14T13:16:24.7189009Z  	END $$;
2026-02-14T13:16:24.7189247Z  2026-02-14 13:15:46.922 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7189985Z  2026-02-14 13:15:46.922 UTC [411] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7190207Z  2026-02-14 13:15:46.923 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7190643Z  2026-02-14 13:15:46.923 UTC [411] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7190863Z  2026-02-14 13:15:46.923 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7191249Z  2026-02-14 13:15:46.923 UTC [411] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7191462Z  2026-02-14 13:15:46.924 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7191849Z  2026-02-14 13:15:46.924 UTC [411] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7192068Z  2026-02-14 13:15:46.924 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7192448Z  2026-02-14 13:15:46.924 UTC [411] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7192659Z  2026-02-14 13:15:46.925 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7193095Z  2026-02-14 13:15:46.925 UTC [411] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7193396Z  2026-02-14 13:15:46.925 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7194042Z  2026-02-14 13:15:46.925 UTC [411] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7194281Z  2026-02-14 13:15:46.925 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7194629Z  2026-02-14 13:15:46.925 UTC [411] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7194853Z  2026-02-14 13:15:46.926 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7195374Z  2026-02-14 13:15:46.926 UTC [411] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7195591Z  2026-02-14 13:15:46.927 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7195969Z  2026-02-14 13:15:46.927 UTC [411] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7196184Z  2026-02-14 13:15:46.927 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7196616Z  2026-02-14 13:15:46.927 UTC [411] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7196833Z  2026-02-14 13:15:46.927 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7197277Z  2026-02-14 13:15:46.927 UTC [411] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7197500Z  2026-02-14 13:15:46.928 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7197959Z  2026-02-14 13:15:46.928 UTC [411] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7198173Z  2026-02-14 13:15:46.928 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7198457Z  2026-02-14 13:15:46.928 UTC [411] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7198578Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7198794Z  2026-02-14 13:15:46.929 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7199057Z  2026-02-14 13:15:46.929 UTC [411] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7199182Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7199395Z  2026-02-14 13:15:46.929 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7199666Z  2026-02-14 13:15:46.929 UTC [411] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7199788Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7199877Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7200094Z  2026-02-14 13:15:46.930 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7200392Z  2026-02-14 13:15:46.930 UTC [411] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7200652Z  2026-02-14 13:15:46.930 UTC [411] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7201003Z  2026-02-14 13:15:46.930 UTC [411] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7201337Z  2026-02-14 13:15:46.933 UTC [411] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7201861Z  2026-02-14 13:15:46.933 UTC [411] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7202151Z  2026-02-14 13:15:46.933 UTC [411] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7202616Z  2026-02-14 13:15:46.933 UTC [411] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7202956Z  2026-02-14 13:15:46.934 UTC [411] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7203469Z  2026-02-14 13:15:46.934 UTC [411] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7204030Z  2026-02-14 13:15:46.934 UTC [411] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7204498Z  2026-02-14 13:15:46.934 UTC [411] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7204828Z  2026-02-14 13:15:46.935 UTC [411] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7205532Z  2026-02-14 13:15:46.935 UTC [411] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7205860Z  2026-02-14 13:15:46.935 UTC [411] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7206513Z  2026-02-14 13:15:46.935 UTC [411] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7206843Z  2026-02-14 13:15:46.936 UTC [411] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7207293Z  2026-02-14 13:15:46.936 UTC [411] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7207610Z  2026-02-14 13:15:46.936 UTC [411] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7208057Z  2026-02-14 13:15:46.936 UTC [411] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7208381Z  2026-02-14 13:15:46.937 UTC [411] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7209046Z  2026-02-14 13:15:46.937 UTC [411] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7209391Z  2026-02-14 13:15:46.937 UTC [411] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7210026Z  2026-02-14 13:15:46.937 UTC [411] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7210284Z  2026-02-14 13:15:46.941 UTC [411] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7210795Z  2026-02-14 13:15:46.941 UTC [411] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7211014Z  2026-02-14 13:15:46.991 UTC [412] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7211297Z  2026-02-14 13:15:47.134 UTC [416] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7211462Z  2026-02-14 13:15:47.134 UTC [416] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7211527Z  	DO $$
2026-02-14T13:16:24.7211587Z  	BEGIN
2026-02-14T13:16:24.7211738Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7211855Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7211985Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7212103Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7212164Z  	    END IF;
2026-02-14T13:16:24.7212329Z  	END $$;
2026-02-14T13:16:24.7212559Z  2026-02-14 13:15:47.143 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7213293Z  2026-02-14 13:15:47.143 UTC [416] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7213517Z  2026-02-14 13:15:47.144 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7214069Z  2026-02-14 13:15:47.144 UTC [416] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7214293Z  2026-02-14 13:15:47.144 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7214671Z  2026-02-14 13:15:47.144 UTC [416] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7214888Z  2026-02-14 13:15:47.144 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7215281Z  2026-02-14 13:15:47.144 UTC [416] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7215497Z  2026-02-14 13:15:47.145 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7215880Z  2026-02-14 13:15:47.145 UTC [416] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7216098Z  2026-02-14 13:15:47.145 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7216529Z  2026-02-14 13:15:47.145 UTC [416] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7216746Z  2026-02-14 13:15:47.146 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7217122Z  2026-02-14 13:15:47.146 UTC [416] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7217336Z  2026-02-14 13:15:47.146 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7217682Z  2026-02-14 13:15:47.146 UTC [416] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7217894Z  2026-02-14 13:15:47.147 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7218286Z  2026-02-14 13:15:47.147 UTC [416] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7218503Z  2026-02-14 13:15:47.147 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7218868Z  2026-02-14 13:15:47.147 UTC [416] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7219082Z  2026-02-14 13:15:47.148 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7219626Z  2026-02-14 13:15:47.148 UTC [416] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7219844Z  2026-02-14 13:15:47.148 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7220298Z  2026-02-14 13:15:47.148 UTC [416] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7220512Z  2026-02-14 13:15:47.149 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7220969Z  2026-02-14 13:15:47.149 UTC [416] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7221286Z  2026-02-14 13:15:47.149 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7221565Z  2026-02-14 13:15:47.149 UTC [416] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7221684Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7221902Z  2026-02-14 13:15:47.150 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7222158Z  2026-02-14 13:15:47.150 UTC [416] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7222276Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7222492Z  2026-02-14 13:15:47.150 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7222754Z  2026-02-14 13:15:47.150 UTC [416] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7222880Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7222975Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7223196Z  2026-02-14 13:15:47.151 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7223499Z  2026-02-14 13:15:47.151 UTC [416] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7224052Z  2026-02-14 13:15:47.151 UTC [416] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7224409Z  2026-02-14 13:15:47.151 UTC [416] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7224746Z  2026-02-14 13:15:47.153 UTC [416] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7225154Z  2026-02-14 13:15:47.153 UTC [416] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7225447Z  2026-02-14 13:15:47.154 UTC [416] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7225920Z  2026-02-14 13:15:47.154 UTC [416] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7226255Z  2026-02-14 13:15:47.155 UTC [416] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7226858Z  2026-02-14 13:15:47.155 UTC [416] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7227514Z  2026-02-14 13:15:47.155 UTC [416] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7228343Z  2026-02-14 13:15:47.155 UTC [416] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7228803Z  2026-02-14 13:15:47.156 UTC [416] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7229683Z  2026-02-14 13:15:47.156 UTC [416] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7230031Z  2026-02-14 13:15:47.156 UTC [416] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7230885Z  2026-02-14 13:15:47.156 UTC [416] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7231339Z  2026-02-14 13:15:47.157 UTC [416] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7231789Z  2026-02-14 13:15:47.157 UTC [416] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7232111Z  2026-02-14 13:15:47.157 UTC [416] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7232555Z  2026-02-14 13:15:47.157 UTC [416] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7232878Z  2026-02-14 13:15:47.158 UTC [416] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7233531Z  2026-02-14 13:15:47.158 UTC [416] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7234024Z  2026-02-14 13:15:47.158 UTC [416] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7234670Z  2026-02-14 13:15:47.158 UTC [416] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7234920Z  2026-02-14 13:15:47.162 UTC [416] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7235430Z  2026-02-14 13:15:47.162 UTC [416] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7235637Z  2026-02-14 13:15:47.212 UTC [417] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7235814Z  2026-02-14 13:15:47.352 UTC [421] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7235983Z  2026-02-14 13:15:47.352 UTC [421] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7236047Z  	DO $$
2026-02-14T13:16:24.7236109Z  	BEGIN
2026-02-14T13:16:24.7236269Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7236384Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7236506Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7236626Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7236687Z  	    END IF;
2026-02-14T13:16:24.7236747Z  	END $$;
2026-02-14T13:16:24.7236982Z  2026-02-14 13:15:47.361 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7237720Z  2026-02-14 13:15:47.361 UTC [421] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7237946Z  2026-02-14 13:15:47.362 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7238492Z  2026-02-14 13:15:47.362 UTC [421] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7238709Z  2026-02-14 13:15:47.362 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7239090Z  2026-02-14 13:15:47.362 UTC [421] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7239310Z  2026-02-14 13:15:47.363 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7239698Z  2026-02-14 13:15:47.363 UTC [421] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7240046Z  2026-02-14 13:15:47.363 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7240439Z  2026-02-14 13:15:47.363 UTC [421] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7240658Z  2026-02-14 13:15:47.364 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7241095Z  2026-02-14 13:15:47.364 UTC [421] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7241309Z  2026-02-14 13:15:47.364 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7241675Z  2026-02-14 13:15:47.364 UTC [421] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7241893Z  2026-02-14 13:15:47.365 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7242235Z  2026-02-14 13:15:47.365 UTC [421] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7242449Z  2026-02-14 13:15:47.365 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7242844Z  2026-02-14 13:15:47.365 UTC [421] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7243059Z  2026-02-14 13:15:47.366 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7243425Z  2026-02-14 13:15:47.366 UTC [421] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7243742Z  2026-02-14 13:15:47.366 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7244182Z  2026-02-14 13:15:47.366 UTC [421] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7244402Z  2026-02-14 13:15:47.367 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7244854Z  2026-02-14 13:15:47.367 UTC [421] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7245069Z  2026-02-14 13:15:47.367 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7245530Z  2026-02-14 13:15:47.367 UTC [421] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7245744Z  2026-02-14 13:15:47.368 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7246017Z  2026-02-14 13:15:47.368 UTC [421] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7246143Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7246356Z  2026-02-14 13:15:47.368 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7246747Z  2026-02-14 13:15:47.368 UTC [421] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7246873Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7247092Z  2026-02-14 13:15:47.369 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7247350Z  2026-02-14 13:15:47.369 UTC [421] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7247473Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7247562Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7247779Z  2026-02-14 13:15:47.369 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7248182Z  2026-02-14 13:15:47.369 UTC [421] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7248442Z  2026-02-14 13:15:47.370 UTC [421] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7248797Z  2026-02-14 13:15:47.370 UTC [421] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7249124Z  2026-02-14 13:15:47.372 UTC [421] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7249530Z  2026-02-14 13:15:47.372 UTC [421] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7249822Z  2026-02-14 13:15:47.373 UTC [421] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7250299Z  2026-02-14 13:15:47.373 UTC [421] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7250639Z  2026-02-14 13:15:47.373 UTC [421] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7251160Z  2026-02-14 13:15:47.373 UTC [421] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7251502Z  2026-02-14 13:15:47.374 UTC [421] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7251972Z  2026-02-14 13:15:47.374 UTC [421] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7252298Z  2026-02-14 13:15:47.374 UTC [421] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7253000Z  2026-02-14 13:15:47.374 UTC [421] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7253336Z  2026-02-14 13:15:47.375 UTC [421] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7254118Z  2026-02-14 13:15:47.375 UTC [421] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7254438Z  2026-02-14 13:15:47.375 UTC [421] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7254891Z  2026-02-14 13:15:47.375 UTC [421] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7255211Z  2026-02-14 13:15:47.376 UTC [421] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7255760Z  2026-02-14 13:15:47.376 UTC [421] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7256090Z  2026-02-14 13:15:47.376 UTC [421] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7256738Z  2026-02-14 13:15:47.376 UTC [421] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7257068Z  2026-02-14 13:15:47.377 UTC [421] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7257691Z  2026-02-14 13:15:47.377 UTC [421] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7258037Z  2026-02-14 13:15:47.381 UTC [421] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7258543Z  2026-02-14 13:15:47.381 UTC [421] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7258753Z  2026-02-14 13:15:47.431 UTC [422] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7258933Z  2026-02-14 13:15:47.569 UTC [426] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7259092Z  2026-02-14 13:15:47.569 UTC [426] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7259153Z  	DO $$
2026-02-14T13:16:24.7259218Z  	BEGIN
2026-02-14T13:16:24.7259367Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7259485Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7259610Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7259725Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7259786Z  	    END IF;
2026-02-14T13:16:24.7259855Z  	END $$;
2026-02-14T13:16:24.7260078Z  2026-02-14 13:15:47.578 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7260818Z  2026-02-14 13:15:47.578 UTC [426] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7261041Z  2026-02-14 13:15:47.579 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7261468Z  2026-02-14 13:15:47.579 UTC [426] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7261684Z  2026-02-14 13:15:47.579 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7262070Z  2026-02-14 13:15:47.579 UTC [426] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7262287Z  2026-02-14 13:15:47.580 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7262674Z  2026-02-14 13:15:47.580 UTC [426] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7262897Z  2026-02-14 13:15:47.580 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7263281Z  2026-02-14 13:15:47.580 UTC [426] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7263504Z  2026-02-14 13:15:47.581 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7264302Z  2026-02-14 13:15:47.581 UTC [426] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7264656Z  2026-02-14 13:15:47.581 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7265046Z  2026-02-14 13:15:47.581 UTC [426] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7265264Z  2026-02-14 13:15:47.582 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7265608Z  2026-02-14 13:15:47.582 UTC [426] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7265827Z  2026-02-14 13:15:47.582 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7266314Z  2026-02-14 13:15:47.582 UTC [426] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7266530Z  2026-02-14 13:15:47.583 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7266906Z  2026-02-14 13:15:47.583 UTC [426] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7267124Z  2026-02-14 13:15:47.583 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7267569Z  2026-02-14 13:15:47.583 UTC [426] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7267785Z  2026-02-14 13:15:47.584 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7268234Z  2026-02-14 13:15:47.584 UTC [426] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7268457Z  2026-02-14 13:15:47.584 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7268929Z  2026-02-14 13:15:47.584 UTC [426] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7269153Z  2026-02-14 13:15:47.585 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7269437Z  2026-02-14 13:15:47.585 UTC [426] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7269553Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7269772Z  2026-02-14 13:15:47.585 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7270035Z  2026-02-14 13:15:47.585 UTC [426] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7270159Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7270375Z  2026-02-14 13:15:47.586 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7270648Z  2026-02-14 13:15:47.586 UTC [426] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7270768Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7270859Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7271071Z  2026-02-14 13:15:47.586 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7271372Z  2026-02-14 13:15:47.586 UTC [426] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7271678Z  2026-02-14 13:15:47.587 UTC [426] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7272028Z  2026-02-14 13:15:47.587 UTC [426] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7272364Z  2026-02-14 13:15:47.589 UTC [426] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7272854Z  2026-02-14 13:15:47.589 UTC [426] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7273144Z  2026-02-14 13:15:47.590 UTC [426] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7273931Z  2026-02-14 13:15:47.590 UTC [426] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7274292Z  2026-02-14 13:15:47.591 UTC [426] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7274809Z  2026-02-14 13:15:47.591 UTC [426] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7275268Z  2026-02-14 13:15:47.591 UTC [426] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7275730Z  2026-02-14 13:15:47.591 UTC [426] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7276057Z  2026-02-14 13:15:47.592 UTC [426] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7276768Z  2026-02-14 13:15:47.592 UTC [426] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7277098Z  2026-02-14 13:15:47.592 UTC [426] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7277748Z  2026-02-14 13:15:47.592 UTC [426] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7278076Z  2026-02-14 13:15:47.593 UTC [426] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7278516Z  2026-02-14 13:15:47.593 UTC [426] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7278837Z  2026-02-14 13:15:47.593 UTC [426] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7279272Z  2026-02-14 13:15:47.593 UTC [426] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7279595Z  2026-02-14 13:15:47.594 UTC [426] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7280253Z  2026-02-14 13:15:47.594 UTC [426] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7280580Z  2026-02-14 13:15:47.594 UTC [426] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7281211Z  2026-02-14 13:15:47.594 UTC [426] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7281458Z  2026-02-14 13:15:47.598 UTC [426] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7281969Z  2026-02-14 13:15:47.598 UTC [426] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7282175Z  2026-02-14 13:15:47.649 UTC [427] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7282448Z  2026-02-14 13:15:47.791 UTC [431] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7282609Z  2026-02-14 13:15:47.791 UTC [431] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7282676Z  	DO $$
2026-02-14T13:16:24.7282737Z  	BEGIN
2026-02-14T13:16:24.7282889Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7283008Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7283131Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7283247Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7283316Z  	    END IF;
2026-02-14T13:16:24.7283450Z  	END $$;
2026-02-14T13:16:24.7283808Z  2026-02-14 13:15:47.800 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7284551Z  2026-02-14 13:15:47.800 UTC [431] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7284769Z  2026-02-14 13:15:47.801 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7285194Z  2026-02-14 13:15:47.801 UTC [431] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7285417Z  2026-02-14 13:15:47.801 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7285794Z  2026-02-14 13:15:47.801 UTC [431] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7286014Z  2026-02-14 13:15:47.802 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7286401Z  2026-02-14 13:15:47.802 UTC [431] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7286619Z  2026-02-14 13:15:47.802 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7287009Z  2026-02-14 13:15:47.802 UTC [431] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7287225Z  2026-02-14 13:15:47.803 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7287652Z  2026-02-14 13:15:47.803 UTC [431] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7287870Z  2026-02-14 13:15:47.803 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7288235Z  2026-02-14 13:15:47.803 UTC [431] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7288453Z  2026-02-14 13:15:47.804 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7288798Z  2026-02-14 13:15:47.804 UTC [431] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7289014Z  2026-02-14 13:15:47.804 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7289406Z  2026-02-14 13:15:47.804 UTC [431] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7289619Z  2026-02-14 13:15:47.805 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7289987Z  2026-02-14 13:15:47.805 UTC [431] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7290212Z  2026-02-14 13:15:47.805 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7290749Z  2026-02-14 13:15:47.805 UTC [431] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7290968Z  2026-02-14 13:15:47.806 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7291419Z  2026-02-14 13:15:47.806 UTC [431] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7291639Z  2026-02-14 13:15:47.806 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7292091Z  2026-02-14 13:15:47.806 UTC [431] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7292406Z  2026-02-14 13:15:47.807 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7292688Z  2026-02-14 13:15:47.807 UTC [431] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7292810Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7293024Z  2026-02-14 13:15:47.807 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7293277Z  2026-02-14 13:15:47.807 UTC [431] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7293402Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7293708Z  2026-02-14 13:15:47.808 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7293973Z  2026-02-14 13:15:47.808 UTC [431] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7294102Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7294187Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7294399Z  2026-02-14 13:15:47.808 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7294702Z  2026-02-14 13:15:47.808 UTC [431] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7294963Z  2026-02-14 13:15:47.809 UTC [431] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7295309Z  2026-02-14 13:15:47.809 UTC [431] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7295640Z  2026-02-14 13:15:47.811 UTC [431] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7296050Z  2026-02-14 13:15:47.811 UTC [431] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7296344Z  2026-02-14 13:15:47.812 UTC [431] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7296819Z  2026-02-14 13:15:47.812 UTC [431] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7297153Z  2026-02-14 13:15:47.813 UTC [431] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7297672Z  2026-02-14 13:15:47.813 UTC [431] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7298009Z  2026-02-14 13:15:47.813 UTC [431] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7298474Z  2026-02-14 13:15:47.813 UTC [431] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7298802Z  2026-02-14 13:15:47.813 UTC [431] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7299616Z  2026-02-14 13:15:47.813 UTC [431] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7299944Z  2026-02-14 13:15:47.814 UTC [431] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7300596Z  2026-02-14 13:15:47.814 UTC [431] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7301013Z  2026-02-14 13:15:47.814 UTC [431] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7301470Z  2026-02-14 13:15:47.814 UTC [431] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7301787Z  2026-02-14 13:15:47.815 UTC [431] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7302230Z  2026-02-14 13:15:47.815 UTC [431] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7302559Z  2026-02-14 13:15:47.815 UTC [431] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7303212Z  2026-02-14 13:15:47.815 UTC [431] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7303545Z  2026-02-14 13:15:47.816 UTC [431] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7304490Z  2026-02-14 13:15:47.816 UTC [431] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7304755Z  2026-02-14 13:15:47.820 UTC [431] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7305270Z  2026-02-14 13:15:47.820 UTC [431] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7305477Z  2026-02-14 13:15:47.870 UTC [432] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7305655Z  2026-02-14 13:15:48.024 UTC [436] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7305816Z  2026-02-14 13:15:48.024 UTC [436] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7305876Z  	DO $$
2026-02-14T13:16:24.7305935Z  	BEGIN
2026-02-14T13:16:24.7306096Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7306210Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7306332Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7306452Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7306512Z  	    END IF;
2026-02-14T13:16:24.7306571Z  	END $$;
2026-02-14T13:16:24.7306795Z  2026-02-14 13:15:48.033 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7307530Z  2026-02-14 13:15:48.033 UTC [436] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7307755Z  2026-02-14 13:15:48.033 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7308342Z  2026-02-14 13:15:48.033 UTC [436] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7308560Z  2026-02-14 13:15:48.034 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7308942Z  2026-02-14 13:15:48.034 UTC [436] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7309156Z  2026-02-14 13:15:48.034 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7309538Z  2026-02-14 13:15:48.034 UTC [436] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7309856Z  2026-02-14 13:15:48.035 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7310238Z  2026-02-14 13:15:48.035 UTC [436] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7310451Z  2026-02-14 13:15:48.035 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7310879Z  2026-02-14 13:15:48.035 UTC [436] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7311090Z  2026-02-14 13:15:48.036 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7311447Z  2026-02-14 13:15:48.036 UTC [436] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7311661Z  2026-02-14 13:15:48.036 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7312004Z  2026-02-14 13:15:48.036 UTC [436] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7312223Z  2026-02-14 13:15:48.037 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7312615Z  2026-02-14 13:15:48.037 UTC [436] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7312825Z  2026-02-14 13:15:48.037 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7313194Z  2026-02-14 13:15:48.037 UTC [436] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7313403Z  2026-02-14 13:15:48.038 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7313934Z  2026-02-14 13:15:48.038 UTC [436] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7314158Z  2026-02-14 13:15:48.038 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7314610Z  2026-02-14 13:15:48.038 UTC [436] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7314828Z  2026-02-14 13:15:48.039 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7315292Z  2026-02-14 13:15:48.039 UTC [436] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7315504Z  2026-02-14 13:15:48.039 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7315785Z  2026-02-14 13:15:48.039 UTC [436] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7315906Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7316120Z  2026-02-14 13:15:48.039 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7316486Z  2026-02-14 13:15:48.039 UTC [436] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7316609Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7316822Z  2026-02-14 13:15:48.040 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7317090Z  2026-02-14 13:15:48.040 UTC [436] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7317208Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7317293Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7317516Z  2026-02-14 13:15:48.040 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7317922Z  2026-02-14 13:15:48.040 UTC [436] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7318181Z  2026-02-14 13:15:48.041 UTC [436] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7318534Z  2026-02-14 13:15:48.041 UTC [436] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7318863Z  2026-02-14 13:15:48.043 UTC [436] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7319269Z  2026-02-14 13:15:48.043 UTC [436] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7319560Z  2026-02-14 13:15:48.044 UTC [436] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7320022Z  2026-02-14 13:15:48.044 UTC [436] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7320364Z  2026-02-14 13:15:48.044 UTC [436] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7320880Z  2026-02-14 13:15:48.044 UTC [436] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7321217Z  2026-02-14 13:15:48.045 UTC [436] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7321685Z  2026-02-14 13:15:48.045 UTC [436] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7322012Z  2026-02-14 13:15:48.045 UTC [436] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7322717Z  2026-02-14 13:15:48.045 UTC [436] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7323052Z  2026-02-14 13:15:48.046 UTC [436] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7323800Z  2026-02-14 13:15:48.046 UTC [436] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7324128Z  2026-02-14 13:15:48.046 UTC [436] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7324571Z  2026-02-14 13:15:48.046 UTC [436] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7324890Z  2026-02-14 13:15:48.047 UTC [436] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7325441Z  2026-02-14 13:15:48.047 UTC [436] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7325764Z  2026-02-14 13:15:48.047 UTC [436] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7326424Z  2026-02-14 13:15:48.047 UTC [436] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7326746Z  2026-02-14 13:15:48.048 UTC [436] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7327381Z  2026-02-14 13:15:48.048 UTC [436] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7327731Z  2026-02-14 13:15:48.052 UTC [436] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7328241Z  2026-02-14 13:15:48.052 UTC [436] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7328447Z  2026-02-14 13:15:48.110 UTC [437] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7328623Z  2026-02-14 13:15:48.253 UTC [442] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7328779Z  2026-02-14 13:15:48.253 UTC [442] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7328841Z  	DO $$
2026-02-14T13:16:24.7328902Z  	BEGIN
2026-02-14T13:16:24.7329053Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7329167Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7329289Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7329403Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7329463Z  	    END IF;
2026-02-14T13:16:24.7329529Z  	END $$;
2026-02-14T13:16:24.7329754Z  2026-02-14 13:15:48.262 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7330484Z  2026-02-14 13:15:48.262 UTC [442] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7330707Z  2026-02-14 13:15:48.263 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7331133Z  2026-02-14 13:15:48.263 UTC [442] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7331353Z  2026-02-14 13:15:48.263 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7331732Z  2026-02-14 13:15:48.263 UTC [442] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7331947Z  2026-02-14 13:15:48.264 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7332332Z  2026-02-14 13:15:48.264 UTC [442] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7332544Z  2026-02-14 13:15:48.264 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7332926Z  2026-02-14 13:15:48.264 UTC [442] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7333147Z  2026-02-14 13:15:48.265 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7333579Z  2026-02-14 13:15:48.265 UTC [442] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7334013Z  2026-02-14 13:15:48.265 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7334386Z  2026-02-14 13:15:48.265 UTC [442] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7334600Z  2026-02-14 13:15:48.265 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7334943Z  2026-02-14 13:15:48.265 UTC [442] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7335154Z  2026-02-14 13:15:48.266 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7335633Z  2026-02-14 13:15:48.266 UTC [442] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7335852Z  2026-02-14 13:15:48.266 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7336219Z  2026-02-14 13:15:48.266 UTC [442] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7336430Z  2026-02-14 13:15:48.267 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7336858Z  2026-02-14 13:15:48.267 UTC [442] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7337066Z  2026-02-14 13:15:48.267 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7337507Z  2026-02-14 13:15:48.267 UTC [442] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7337724Z  2026-02-14 13:15:48.268 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7338183Z  2026-02-14 13:15:48.268 UTC [442] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7338398Z  2026-02-14 13:15:48.268 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7338668Z  2026-02-14 13:15:48.268 UTC [442] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7338781Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7338999Z  2026-02-14 13:15:48.269 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7339256Z  2026-02-14 13:15:48.269 UTC [442] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7339377Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7339594Z  2026-02-14 13:15:48.269 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7339856Z  2026-02-14 13:15:48.269 UTC [442] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7339974Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7340064Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7340276Z  2026-02-14 13:15:48.270 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7340574Z  2026-02-14 13:15:48.270 UTC [442] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7340838Z  2026-02-14 13:15:48.270 UTC [442] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7341182Z  2026-02-14 13:15:48.270 UTC [442] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7341512Z  2026-02-14 13:15:48.272 UTC [442] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7342004Z  2026-02-14 13:15:48.272 UTC [442] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7342287Z  2026-02-14 13:15:48.273 UTC [442] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7342755Z  2026-02-14 13:15:48.273 UTC [442] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7343086Z  2026-02-14 13:15:48.274 UTC [442] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7343596Z  2026-02-14 13:15:48.274 UTC [442] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7344359Z  2026-02-14 13:15:48.274 UTC [442] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7344849Z  2026-02-14 13:15:48.274 UTC [442] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7345186Z  2026-02-14 13:15:48.275 UTC [442] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7345901Z  2026-02-14 13:15:48.275 UTC [442] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7346233Z  2026-02-14 13:15:48.275 UTC [442] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7346895Z  2026-02-14 13:15:48.275 UTC [442] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7347217Z  2026-02-14 13:15:48.276 UTC [442] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7347661Z  2026-02-14 13:15:48.276 UTC [442] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7347979Z  2026-02-14 13:15:48.276 UTC [442] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7348418Z  2026-02-14 13:15:48.276 UTC [442] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7348745Z  2026-02-14 13:15:48.277 UTC [442] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7349402Z  2026-02-14 13:15:48.277 UTC [442] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7349726Z  2026-02-14 13:15:48.277 UTC [442] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7350365Z  2026-02-14 13:15:48.277 UTC [442] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7350609Z  2026-02-14 13:15:48.281 UTC [442] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7351119Z  2026-02-14 13:15:48.281 UTC [442] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7351329Z  2026-02-14 13:15:48.340 UTC [443] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7351618Z  2026-02-14 13:15:48.480 UTC [449] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7351782Z  2026-02-14 13:15:48.480 UTC [449] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7351842Z  	DO $$
2026-02-14T13:16:24.7351900Z  	BEGIN
2026-02-14T13:16:24.7352050Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7352167Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7352286Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7352400Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7352463Z  	    END IF;
2026-02-14T13:16:24.7352597Z  	END $$;
2026-02-14T13:16:24.7352818Z  2026-02-14 13:15:48.489 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7353559Z  2026-02-14 13:15:48.489 UTC [449] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7353915Z  2026-02-14 13:15:48.489 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7354355Z  2026-02-14 13:15:48.489 UTC [449] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7354569Z  2026-02-14 13:15:48.490 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7354949Z  2026-02-14 13:15:48.490 UTC [449] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7355172Z  2026-02-14 13:15:48.490 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7355558Z  2026-02-14 13:15:48.490 UTC [449] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7355774Z  2026-02-14 13:15:48.490 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7356159Z  2026-02-14 13:15:48.490 UTC [449] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7356369Z  2026-02-14 13:15:48.491 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7356813Z  2026-02-14 13:15:48.491 UTC [449] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7357026Z  2026-02-14 13:15:48.491 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7357394Z  2026-02-14 13:15:48.491 UTC [449] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7357615Z  2026-02-14 13:15:48.492 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7357955Z  2026-02-14 13:15:48.492 UTC [449] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7358165Z  2026-02-14 13:15:48.492 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7358554Z  2026-02-14 13:15:48.492 UTC [449] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7358770Z  2026-02-14 13:15:48.493 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7359133Z  2026-02-14 13:15:48.493 UTC [449] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7359352Z  2026-02-14 13:15:48.493 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7359894Z  2026-02-14 13:15:48.493 UTC [449] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7360110Z  2026-02-14 13:15:48.494 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7360553Z  2026-02-14 13:15:48.494 UTC [449] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7360764Z  2026-02-14 13:15:48.494 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7361225Z  2026-02-14 13:15:48.494 UTC [449] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7361535Z  2026-02-14 13:15:48.495 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7361810Z  2026-02-14 13:15:48.495 UTC [449] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7361931Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7362147Z  2026-02-14 13:15:48.495 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7362405Z  2026-02-14 13:15:48.495 UTC [449] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7362527Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7362737Z  2026-02-14 13:15:48.496 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7362998Z  2026-02-14 13:15:48.496 UTC [449] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7363125Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7363208Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7363422Z  2026-02-14 13:15:48.496 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7363820Z  2026-02-14 13:15:48.496 UTC [449] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7364081Z  2026-02-14 13:15:48.497 UTC [449] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7364425Z  2026-02-14 13:15:48.497 UTC [449] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7364757Z  2026-02-14 13:15:48.499 UTC [449] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7365165Z  2026-02-14 13:15:48.499 UTC [449] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7365457Z  2026-02-14 13:15:48.500 UTC [449] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7365919Z  2026-02-14 13:15:48.500 UTC [449] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7366250Z  2026-02-14 13:15:48.501 UTC [449] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7366768Z  2026-02-14 13:15:48.501 UTC [449] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7367104Z  2026-02-14 13:15:48.501 UTC [449] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7367567Z  2026-02-14 13:15:48.501 UTC [449] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7368007Z  2026-02-14 13:15:48.502 UTC [449] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7368710Z  2026-02-14 13:15:48.502 UTC [449] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7369041Z  2026-02-14 13:15:48.502 UTC [449] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7369687Z  2026-02-14 13:15:48.502 UTC [449] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7370109Z  2026-02-14 13:15:48.503 UTC [449] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7370558Z  2026-02-14 13:15:48.503 UTC [449] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7370873Z  2026-02-14 13:15:48.503 UTC [449] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7371316Z  2026-02-14 13:15:48.503 UTC [449] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7371670Z  2026-02-14 13:15:48.504 UTC [449] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7372321Z  2026-02-14 13:15:48.504 UTC [449] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7372655Z  2026-02-14 13:15:48.504 UTC [449] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7373289Z  2026-02-14 13:15:48.504 UTC [449] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7373536Z  2026-02-14 13:15:48.508 UTC [449] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7374143Z  2026-02-14 13:15:48.508 UTC [449] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7374351Z  2026-02-14 13:15:48.556 UTC [450] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7374536Z  2026-02-14 13:15:48.695 UTC [455] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7374690Z  2026-02-14 13:15:48.695 UTC [455] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7374749Z  	DO $$
2026-02-14T13:16:24.7374811Z  	BEGIN
2026-02-14T13:16:24.7374962Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7375074Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7375199Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7375312Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7375370Z  	    END IF;
2026-02-14T13:16:24.7375434Z  	END $$;
2026-02-14T13:16:24.7375654Z  2026-02-14 13:15:48.704 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7376383Z  2026-02-14 13:15:48.704 UTC [455] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7376610Z  2026-02-14 13:15:48.705 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7377178Z  2026-02-14 13:15:48.705 UTC [455] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7377399Z  2026-02-14 13:15:48.705 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7377778Z  2026-02-14 13:15:48.705 UTC [455] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7377989Z  2026-02-14 13:15:48.706 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7378372Z  2026-02-14 13:15:48.706 UTC [455] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7378685Z  2026-02-14 13:15:48.706 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7379064Z  2026-02-14 13:15:48.706 UTC [455] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7379283Z  2026-02-14 13:15:48.707 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7379711Z  2026-02-14 13:15:48.707 UTC [455] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7379921Z  2026-02-14 13:15:48.707 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7380287Z  2026-02-14 13:15:48.707 UTC [455] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7380498Z  2026-02-14 13:15:48.708 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7380842Z  2026-02-14 13:15:48.708 UTC [455] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7381059Z  2026-02-14 13:15:48.708 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7381449Z  2026-02-14 13:15:48.708 UTC [455] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7381664Z  2026-02-14 13:15:48.709 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7382038Z  2026-02-14 13:15:48.709 UTC [455] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7382253Z  2026-02-14 13:15:48.709 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7382682Z  2026-02-14 13:15:48.709 UTC [455] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7382898Z  2026-02-14 13:15:48.710 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7383345Z  2026-02-14 13:15:48.710 UTC [455] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7383562Z  2026-02-14 13:15:48.710 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7384120Z  2026-02-14 13:15:48.710 UTC [455] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7384332Z  2026-02-14 13:15:48.710 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7384610Z  2026-02-14 13:15:48.710 UTC [455] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7384728Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7384940Z  2026-02-14 13:15:48.711 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7385306Z  2026-02-14 13:15:48.711 UTC [455] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7385426Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7385640Z  2026-02-14 13:15:48.711 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7385905Z  2026-02-14 13:15:48.711 UTC [455] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7386024Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7386108Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7386325Z  2026-02-14 13:15:48.712 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7386721Z  2026-02-14 13:15:48.712 UTC [455] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7386988Z  2026-02-14 13:15:48.712 UTC [455] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7387333Z  2026-02-14 13:15:48.712 UTC [455] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7387659Z  2026-02-14 13:15:48.714 UTC [455] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7388069Z  2026-02-14 13:15:48.714 UTC [455] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7388353Z  2026-02-14 13:15:48.715 UTC [455] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7388814Z  2026-02-14 13:15:48.715 UTC [455] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7389152Z  2026-02-14 13:15:48.716 UTC [455] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7389669Z  2026-02-14 13:15:48.716 UTC [455] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7390008Z  2026-02-14 13:15:48.716 UTC [455] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7390464Z  2026-02-14 13:15:48.716 UTC [455] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7390786Z  2026-02-14 13:15:48.717 UTC [455] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7391498Z  2026-02-14 13:15:48.717 UTC [455] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7391831Z  2026-02-14 13:15:48.717 UTC [455] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7392486Z  2026-02-14 13:15:48.717 UTC [455] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7392809Z  2026-02-14 13:15:48.718 UTC [455] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7393251Z  2026-02-14 13:15:48.718 UTC [455] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7393566Z  2026-02-14 13:15:48.718 UTC [455] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7394203Z  2026-02-14 13:15:48.718 UTC [455] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7394536Z  2026-02-14 13:15:48.719 UTC [455] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7395190Z  2026-02-14 13:15:48.719 UTC [455] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7395516Z  2026-02-14 13:15:48.719 UTC [455] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7396144Z  2026-02-14 13:15:48.719 UTC [455] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7396491Z  2026-02-14 13:15:48.723 UTC [455] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7396997Z  2026-02-14 13:15:48.723 UTC [455] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7397205Z  2026-02-14 13:15:48.780 UTC [456] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7397380Z  2026-02-14 13:15:48.916 UTC [462] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7397534Z  2026-02-14 13:15:48.916 UTC [462] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7397597Z  	DO $$
2026-02-14T13:16:24.7397655Z  	BEGIN
2026-02-14T13:16:24.7397805Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7397922Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7398578Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7398693Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7398761Z  	    END IF;
2026-02-14T13:16:24.7398820Z  	END $$;
2026-02-14T13:16:24.7399042Z  2026-02-14 13:15:48.925 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7399779Z  2026-02-14 13:15:48.925 UTC [462] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7399998Z  2026-02-14 13:15:48.926 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7400423Z  2026-02-14 13:15:48.926 UTC [462] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7400644Z  2026-02-14 13:15:48.926 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7401024Z  2026-02-14 13:15:48.926 UTC [462] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7401243Z  2026-02-14 13:15:48.927 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7401626Z  2026-02-14 13:15:48.927 UTC [462] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7401837Z  2026-02-14 13:15:48.927 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7402222Z  2026-02-14 13:15:48.927 UTC [462] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7402434Z  2026-02-14 13:15:48.928 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7402858Z  2026-02-14 13:15:48.928 UTC [462] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7403162Z  2026-02-14 13:15:48.928 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7403526Z  2026-02-14 13:15:48.928 UTC [462] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7403838Z  2026-02-14 13:15:48.929 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7404184Z  2026-02-14 13:15:48.929 UTC [462] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7404396Z  2026-02-14 13:15:48.929 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7404889Z  2026-02-14 13:15:48.929 UTC [462] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7405110Z  2026-02-14 13:15:48.930 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7405476Z  2026-02-14 13:15:48.930 UTC [462] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7405695Z  2026-02-14 13:15:48.930 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7406118Z  2026-02-14 13:15:48.930 UTC [462] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7406334Z  2026-02-14 13:15:48.931 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7406780Z  2026-02-14 13:15:48.931 UTC [462] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7406999Z  2026-02-14 13:15:48.931 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7407461Z  2026-02-14 13:15:48.931 UTC [462] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7407681Z  2026-02-14 13:15:48.932 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7407953Z  2026-02-14 13:15:48.932 UTC [462] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7408065Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7408282Z  2026-02-14 13:15:48.932 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7408537Z  2026-02-14 13:15:48.932 UTC [462] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7408662Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7408876Z  2026-02-14 13:15:48.933 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7409138Z  2026-02-14 13:15:48.933 UTC [462] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7409261Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7409347Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7409558Z  2026-02-14 13:15:48.933 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7409861Z  2026-02-14 13:15:48.933 UTC [462] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7410116Z  2026-02-14 13:15:48.933 UTC [462] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7410464Z  2026-02-14 13:15:48.933 UTC [462] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7410790Z  2026-02-14 13:15:48.936 UTC [462] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7411297Z  2026-02-14 13:15:48.936 UTC [462] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7411582Z  2026-02-14 13:15:48.936 UTC [462] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7412051Z  2026-02-14 13:15:48.936 UTC [462] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7412385Z  2026-02-14 13:15:48.937 UTC [462] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7412905Z  2026-02-14 13:15:48.937 UTC [462] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7413335Z  2026-02-14 13:15:48.937 UTC [462] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7413899Z  2026-02-14 13:15:48.937 UTC [462] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7414229Z  2026-02-14 13:15:48.938 UTC [462] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7414940Z  2026-02-14 13:15:48.938 UTC [462] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7415268Z  2026-02-14 13:15:48.938 UTC [462] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7415936Z  2026-02-14 13:15:48.938 UTC [462] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7416257Z  2026-02-14 13:15:48.939 UTC [462] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7416707Z  2026-02-14 13:15:48.939 UTC [462] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7417022Z  2026-02-14 13:15:48.939 UTC [462] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7417459Z  2026-02-14 13:15:48.939 UTC [462] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7417785Z  2026-02-14 13:15:48.940 UTC [462] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7418440Z  2026-02-14 13:15:48.940 UTC [462] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7418773Z  2026-02-14 13:15:48.940 UTC [462] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7419403Z  2026-02-14 13:15:48.940 UTC [462] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7419651Z  2026-02-14 13:15:48.944 UTC [462] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7420163Z  2026-02-14 13:15:48.944 UTC [462] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7420368Z  2026-02-14 13:15:49.001 UTC [463] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7420648Z  2026-02-14 13:15:49.144 UTC [469] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7420811Z  2026-02-14 13:15:49.144 UTC [469] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7420872Z  	DO $$
2026-02-14T13:16:24.7420931Z  	BEGIN
2026-02-14T13:16:24.7421084Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7421199Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7421320Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7421437Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7421601Z  	    END IF;
2026-02-14T13:16:24.7421660Z  	END $$;
2026-02-14T13:16:24.7421889Z  2026-02-14 13:15:49.153 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7422625Z  2026-02-14 13:15:49.153 UTC [469] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7422842Z  2026-02-14 13:15:49.153 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7423269Z  2026-02-14 13:15:49.153 UTC [469] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7423485Z  2026-02-14 13:15:49.154 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7423964Z  2026-02-14 13:15:49.154 UTC [469] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7424186Z  2026-02-14 13:15:49.154 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7424580Z  2026-02-14 13:15:49.154 UTC [469] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7424802Z  2026-02-14 13:15:49.155 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7425185Z  2026-02-14 13:15:49.155 UTC [469] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7425399Z  2026-02-14 13:15:49.155 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7425829Z  2026-02-14 13:15:49.155 UTC [469] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7426045Z  2026-02-14 13:15:49.156 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7426406Z  2026-02-14 13:15:49.156 UTC [469] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7426626Z  2026-02-14 13:15:49.156 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7426968Z  2026-02-14 13:15:49.156 UTC [469] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7427179Z  2026-02-14 13:15:49.156 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7427570Z  2026-02-14 13:15:49.156 UTC [469] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7427786Z  2026-02-14 13:15:49.157 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7428162Z  2026-02-14 13:15:49.157 UTC [469] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7428374Z  2026-02-14 13:15:49.157 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7428909Z  2026-02-14 13:15:49.157 UTC [469] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7429130Z  2026-02-14 13:15:49.158 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7429570Z  2026-02-14 13:15:49.158 UTC [469] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7429787Z  2026-02-14 13:15:49.158 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7430249Z  2026-02-14 13:15:49.158 UTC [469] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7430560Z  2026-02-14 13:15:49.159 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7430841Z  2026-02-14 13:15:49.159 UTC [469] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7430957Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7431170Z  2026-02-14 13:15:49.159 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7431431Z  2026-02-14 13:15:49.159 UTC [469] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7431548Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7431762Z  2026-02-14 13:15:49.160 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7432030Z  2026-02-14 13:15:49.160 UTC [469] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7432151Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7432238Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7432461Z  2026-02-14 13:15:49.160 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7432763Z  2026-02-14 13:15:49.160 UTC [469] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7433020Z  2026-02-14 13:15:49.161 UTC [469] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7433368Z  2026-02-14 13:15:49.161 UTC [469] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7433792Z  2026-02-14 13:15:49.163 UTC [469] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7434200Z  2026-02-14 13:15:49.163 UTC [469] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7434499Z  2026-02-14 13:15:49.164 UTC [469] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7434962Z  2026-02-14 13:15:49.164 UTC [469] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7435301Z  2026-02-14 13:15:49.165 UTC [469] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7435808Z  2026-02-14 13:15:49.165 UTC [469] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7436147Z  2026-02-14 13:15:49.165 UTC [469] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7436614Z  2026-02-14 13:15:49.165 UTC [469] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7437044Z  2026-02-14 13:15:49.166 UTC [469] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7437751Z  2026-02-14 13:15:49.166 UTC [469] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7438081Z  2026-02-14 13:15:49.166 UTC [469] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7438732Z  2026-02-14 13:15:49.166 UTC [469] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7439191Z  2026-02-14 13:15:49.167 UTC [469] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7439633Z  2026-02-14 13:15:49.167 UTC [469] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7439947Z  2026-02-14 13:15:49.167 UTC [469] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7440395Z  2026-02-14 13:15:49.167 UTC [469] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7440717Z  2026-02-14 13:15:49.168 UTC [469] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7441374Z  2026-02-14 13:15:49.168 UTC [469] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7441709Z  2026-02-14 13:15:49.168 UTC [469] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7442343Z  2026-02-14 13:15:49.168 UTC [469] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7442598Z  2026-02-14 13:15:49.172 UTC [469] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7443107Z  2026-02-14 13:15:49.172 UTC [469] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7443315Z  2026-02-14 13:15:49.230 UTC [470] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7443495Z  2026-02-14 13:15:49.375 UTC [476] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7443747Z  2026-02-14 13:15:49.375 UTC [476] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7443808Z  	DO $$
2026-02-14T13:16:24.7443868Z  	BEGIN
2026-02-14T13:16:24.7444019Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7444131Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7444257Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7444372Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7444429Z  	    END IF;
2026-02-14T13:16:24.7444491Z  	END $$;
2026-02-14T13:16:24.7444714Z  2026-02-14 13:15:49.384 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7445460Z  2026-02-14 13:15:49.384 UTC [476] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7445692Z  2026-02-14 13:15:49.384 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7446239Z  2026-02-14 13:15:49.384 UTC [476] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7446468Z  2026-02-14 13:15:49.385 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7446847Z  2026-02-14 13:15:49.385 UTC [476] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7447061Z  2026-02-14 13:15:49.385 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7447451Z  2026-02-14 13:15:49.385 UTC [476] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7447761Z  2026-02-14 13:15:49.386 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7448146Z  2026-02-14 13:15:49.386 UTC [476] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7448370Z  2026-02-14 13:15:49.386 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7448799Z  2026-02-14 13:15:49.386 UTC [476] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7449009Z  2026-02-14 13:15:49.387 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7449378Z  2026-02-14 13:15:49.387 UTC [476] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7449591Z  2026-02-14 13:15:49.387 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7449940Z  2026-02-14 13:15:49.387 UTC [476] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7450157Z  2026-02-14 13:15:49.387 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7450543Z  2026-02-14 13:15:49.387 UTC [476] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7450763Z  2026-02-14 13:15:49.388 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7451132Z  2026-02-14 13:15:49.388 UTC [476] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7451345Z  2026-02-14 13:15:49.388 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7451779Z  2026-02-14 13:15:49.388 UTC [476] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7451994Z  2026-02-14 13:15:49.389 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7452436Z  2026-02-14 13:15:49.389 UTC [476] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7452654Z  2026-02-14 13:15:49.389 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7453110Z  2026-02-14 13:15:49.389 UTC [476] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7453327Z  2026-02-14 13:15:49.390 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7453694Z  2026-02-14 13:15:49.390 UTC [476] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7453814Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7454035Z  2026-02-14 13:15:49.390 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7454400Z  2026-02-14 13:15:49.390 UTC [476] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7454521Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7454742Z  2026-02-14 13:15:49.391 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7455002Z  2026-02-14 13:15:49.391 UTC [476] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7455121Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7455211Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7455424Z  2026-02-14 13:15:49.391 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7455826Z  2026-02-14 13:15:49.391 UTC [476] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7456088Z  2026-02-14 13:15:49.392 UTC [476] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7456439Z  2026-02-14 13:15:49.392 UTC [476] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7456767Z  2026-02-14 13:15:49.394 UTC [476] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7457176Z  2026-02-14 13:15:49.394 UTC [476] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7457467Z  2026-02-14 13:15:49.395 UTC [476] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7457930Z  2026-02-14 13:15:49.395 UTC [476] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7458273Z  2026-02-14 13:15:49.395 UTC [476] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7458784Z  2026-02-14 13:15:49.395 UTC [476] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7459129Z  2026-02-14 13:15:49.396 UTC [476] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7459581Z  2026-02-14 13:15:49.396 UTC [476] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7459905Z  2026-02-14 13:15:49.396 UTC [476] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7460616Z  2026-02-14 13:15:49.396 UTC [476] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7460945Z  2026-02-14 13:15:49.397 UTC [476] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7461602Z  2026-02-14 13:15:49.397 UTC [476] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7461923Z  2026-02-14 13:15:49.397 UTC [476] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7462362Z  2026-02-14 13:15:49.397 UTC [476] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7462688Z  2026-02-14 13:15:49.398 UTC [476] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7463210Z  2026-02-14 13:15:49.398 UTC [476] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7463541Z  2026-02-14 13:15:49.398 UTC [476] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7464289Z  2026-02-14 13:15:49.398 UTC [476] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7464618Z  2026-02-14 13:15:49.399 UTC [476] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7465250Z  2026-02-14 13:15:49.399 UTC [476] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7465602Z  2026-02-14 13:15:49.403 UTC [476] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7466109Z  2026-02-14 13:15:49.403 UTC [476] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7466321Z  2026-02-14 13:15:49.450 UTC [477] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7466492Z  2026-02-14 13:15:49.590 UTC [482] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7466647Z  2026-02-14 13:15:49.590 UTC [482] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7466714Z  	DO $$
2026-02-14T13:16:24.7466774Z  	BEGIN
2026-02-14T13:16:24.7466924Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7467044Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7467169Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7467282Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7467350Z  	    END IF;
2026-02-14T13:16:24.7467410Z  	END $$;
2026-02-14T13:16:24.7467632Z  2026-02-14 13:15:49.599 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7468368Z  2026-02-14 13:15:49.599 UTC [482] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7468587Z  2026-02-14 13:15:49.600 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7469020Z  2026-02-14 13:15:49.600 UTC [482] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7469237Z  2026-02-14 13:15:49.600 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7469617Z  2026-02-14 13:15:49.600 UTC [482] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7469842Z  2026-02-14 13:15:49.601 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7470227Z  2026-02-14 13:15:49.601 UTC [482] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7470441Z  2026-02-14 13:15:49.601 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7470831Z  2026-02-14 13:15:49.601 UTC [482] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7471050Z  2026-02-14 13:15:49.602 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7471479Z  2026-02-14 13:15:49.602 UTC [482] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7471833Z  2026-02-14 13:15:49.602 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7472203Z  2026-02-14 13:15:49.602 UTC [482] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7472422Z  2026-02-14 13:15:49.603 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7472761Z  2026-02-14 13:15:49.603 UTC [482] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7472973Z  2026-02-14 13:15:49.603 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7473442Z  2026-02-14 13:15:49.603 UTC [482] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7473748Z  2026-02-14 13:15:49.604 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7474120Z  2026-02-14 13:15:49.604 UTC [482] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7474345Z  2026-02-14 13:15:49.604 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7474772Z  2026-02-14 13:15:49.604 UTC [482] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7474984Z  2026-02-14 13:15:49.605 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7475432Z  2026-02-14 13:15:49.605 UTC [482] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7475647Z  2026-02-14 13:15:49.605 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7476112Z  2026-02-14 13:15:49.605 UTC [482] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7476323Z  2026-02-14 13:15:49.606 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7476597Z  2026-02-14 13:15:49.606 UTC [482] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7476715Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7476925Z  2026-02-14 13:15:49.606 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7477178Z  2026-02-14 13:15:49.606 UTC [482] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7477303Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7477518Z  2026-02-14 13:15:49.607 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7477777Z  2026-02-14 13:15:49.607 UTC [482] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7477901Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7477987Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7478202Z  2026-02-14 13:15:49.607 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7478511Z  2026-02-14 13:15:49.607 UTC [482] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7478773Z  2026-02-14 13:15:49.608 UTC [482] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7479121Z  2026-02-14 13:15:49.608 UTC [482] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7479455Z  2026-02-14 13:15:49.610 UTC [482] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7479969Z  2026-02-14 13:15:49.610 UTC [482] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7480258Z  2026-02-14 13:15:49.611 UTC [482] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7480727Z  2026-02-14 13:15:49.611 UTC [482] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7481079Z  2026-02-14 13:15:49.611 UTC [482] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7481708Z  2026-02-14 13:15:49.611 UTC [482] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7482058Z  2026-02-14 13:15:49.612 UTC [482] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7482518Z  2026-02-14 13:15:49.612 UTC [482] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7482852Z  2026-02-14 13:15:49.612 UTC [482] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7483555Z  2026-02-14 13:15:49.612 UTC [482] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7483997Z  2026-02-14 13:15:49.613 UTC [482] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7484668Z  2026-02-14 13:15:49.613 UTC [482] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7484990Z  2026-02-14 13:15:49.613 UTC [482] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7485437Z  2026-02-14 13:15:49.613 UTC [482] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7485754Z  2026-02-14 13:15:49.614 UTC [482] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7486202Z  2026-02-14 13:15:49.614 UTC [482] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7486529Z  2026-02-14 13:15:49.614 UTC [482] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7487187Z  2026-02-14 13:15:49.614 UTC [482] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7487516Z  2026-02-14 13:15:49.615 UTC [482] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7488140Z  2026-02-14 13:15:49.615 UTC [482] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7488389Z  2026-02-14 13:15:49.619 UTC [482] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7488902Z  2026-02-14 13:15:49.619 UTC [482] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7489109Z  2026-02-14 13:15:49.678 UTC [483] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7489395Z  2026-02-14 13:15:49.814 UTC [489] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7489554Z  2026-02-14 13:15:49.814 UTC [489] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7489616Z  	DO $$
2026-02-14T13:16:24.7489679Z  	BEGIN
2026-02-14T13:16:24.7489829Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7489943Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7490069Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7490184Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7490344Z  	    END IF;
2026-02-14T13:16:24.7490404Z  	END $$;
2026-02-14T13:16:24.7490631Z  2026-02-14 13:15:49.823 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7491365Z  2026-02-14 13:15:49.823 UTC [489] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7491588Z  2026-02-14 13:15:49.823 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7492019Z  2026-02-14 13:15:49.823 UTC [489] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7492231Z  2026-02-14 13:15:49.824 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7492612Z  2026-02-14 13:15:49.824 UTC [489] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7492825Z  2026-02-14 13:15:49.824 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7493209Z  2026-02-14 13:15:49.824 UTC [489] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7493426Z  2026-02-14 13:15:49.825 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7493902Z  2026-02-14 13:15:49.825 UTC [489] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7494117Z  2026-02-14 13:15:49.826 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7494557Z  2026-02-14 13:15:49.826 UTC [489] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7494772Z  2026-02-14 13:15:49.826 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7495142Z  2026-02-14 13:15:49.826 UTC [489] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7495352Z  2026-02-14 13:15:49.826 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7495693Z  2026-02-14 13:15:49.826 UTC [489] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7495909Z  2026-02-14 13:15:49.827 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7496298Z  2026-02-14 13:15:49.827 UTC [489] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7496511Z  2026-02-14 13:15:49.827 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7496884Z  2026-02-14 13:15:49.827 UTC [489] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7497095Z  2026-02-14 13:15:49.828 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7497639Z  2026-02-14 13:15:49.828 UTC [489] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7497877Z  2026-02-14 13:15:49.828 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7498322Z  2026-02-14 13:15:49.828 UTC [489] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7498538Z  2026-02-14 13:15:49.829 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7498999Z  2026-02-14 13:15:49.829 UTC [489] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7499474Z  2026-02-14 13:15:49.829 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7499753Z  2026-02-14 13:15:49.829 UTC [489] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7499869Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7500082Z  2026-02-14 13:15:49.830 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7500342Z  2026-02-14 13:15:49.830 UTC [489] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7500457Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7500671Z  2026-02-14 13:15:49.830 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7500937Z  2026-02-14 13:15:49.830 UTC [489] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7501059Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7501145Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7501369Z  2026-02-14 13:15:49.831 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7501670Z  2026-02-14 13:15:49.831 UTC [489] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7501930Z  2026-02-14 13:15:49.831 UTC [489] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7502286Z  2026-02-14 13:15:49.831 UTC [489] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7502616Z  2026-02-14 13:15:49.833 UTC [489] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7503027Z  2026-02-14 13:15:49.833 UTC [489] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7503318Z  2026-02-14 13:15:49.834 UTC [489] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7503873Z  2026-02-14 13:15:49.834 UTC [489] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7504216Z  2026-02-14 13:15:49.835 UTC [489] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7504724Z  2026-02-14 13:15:49.835 UTC [489] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7505061Z  2026-02-14 13:15:49.835 UTC [489] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7505526Z  2026-02-14 13:15:49.835 UTC [489] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7505959Z  2026-02-14 13:15:49.836 UTC [489] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7506672Z  2026-02-14 13:15:49.836 UTC [489] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7506997Z  2026-02-14 13:15:49.836 UTC [489] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7507649Z  2026-02-14 13:15:49.836 UTC [489] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7508108Z  2026-02-14 13:15:49.837 UTC [489] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7508551Z  2026-02-14 13:15:49.837 UTC [489] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7508872Z  2026-02-14 13:15:49.837 UTC [489] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7509309Z  2026-02-14 13:15:49.837 UTC [489] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7509630Z  2026-02-14 13:15:49.838 UTC [489] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7510290Z  2026-02-14 13:15:49.838 UTC [489] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7510621Z  2026-02-14 13:15:49.838 UTC [489] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7511250Z  2026-02-14 13:15:49.838 UTC [489] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7511501Z  2026-02-14 13:15:49.842 UTC [489] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7512006Z  2026-02-14 13:15:49.842 UTC [489] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7512218Z  2026-02-14 13:15:49.893 UTC [490] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7512394Z  2026-02-14 13:15:50.032 UTC [495] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7512548Z  2026-02-14 13:15:50.032 UTC [495] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7512611Z  	DO $$
2026-02-14T13:16:24.7512671Z  	BEGIN
2026-02-14T13:16:24.7512825Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7512941Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7513061Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7513175Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7513240Z  	    END IF;
2026-02-14T13:16:24.7513299Z  	END $$;
2026-02-14T13:16:24.7513527Z  2026-02-14 13:15:50.041 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7514367Z  2026-02-14 13:15:50.041 UTC [495] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7514589Z  2026-02-14 13:15:50.041 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7515124Z  2026-02-14 13:15:50.041 UTC [495] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7515345Z  2026-02-14 13:15:50.042 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7515721Z  2026-02-14 13:15:50.042 UTC [495] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7515934Z  2026-02-14 13:15:50.042 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7516322Z  2026-02-14 13:15:50.042 UTC [495] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7516634Z  2026-02-14 13:15:50.043 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7517017Z  2026-02-14 13:15:50.043 UTC [495] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7517233Z  2026-02-14 13:15:50.043 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7517666Z  2026-02-14 13:15:50.043 UTC [495] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7517889Z  2026-02-14 13:15:50.044 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7518254Z  2026-02-14 13:15:50.044 UTC [495] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7518465Z  2026-02-14 13:15:50.044 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7518811Z  2026-02-14 13:15:50.044 UTC [495] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7519028Z  2026-02-14 13:15:50.045 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7519419Z  2026-02-14 13:15:50.045 UTC [495] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7519636Z  2026-02-14 13:15:50.045 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7519999Z  2026-02-14 13:15:50.045 UTC [495] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7520218Z  2026-02-14 13:15:50.046 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7520647Z  2026-02-14 13:15:50.046 UTC [495] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7520862Z  2026-02-14 13:15:50.046 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7521321Z  2026-02-14 13:15:50.046 UTC [495] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7521533Z  2026-02-14 13:15:50.047 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7521990Z  2026-02-14 13:15:50.047 UTC [495] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7522209Z  2026-02-14 13:15:50.047 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7522483Z  2026-02-14 13:15:50.047 UTC [495] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7522603Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7522822Z  2026-02-14 13:15:50.048 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7523156Z  2026-02-14 13:15:50.048 UTC [495] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7523276Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7523497Z  2026-02-14 13:15:50.048 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7523857Z  2026-02-14 13:15:50.048 UTC [495] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7523979Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7524073Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7524286Z  2026-02-14 13:15:50.049 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7524711Z  2026-02-14 13:15:50.049 UTC [495] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7524969Z  2026-02-14 13:15:50.049 UTC [495] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7525315Z  2026-02-14 13:15:50.049 UTC [495] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7525658Z  2026-02-14 13:15:50.051 UTC [495] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7526064Z  2026-02-14 13:15:50.051 UTC [495] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7526349Z  2026-02-14 13:15:50.052 UTC [495] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7526816Z  2026-02-14 13:15:50.052 UTC [495] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7527155Z  2026-02-14 13:15:50.053 UTC [495] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7527666Z  2026-02-14 13:15:50.053 UTC [495] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7528012Z  2026-02-14 13:15:50.053 UTC [495] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7528470Z  2026-02-14 13:15:50.053 UTC [495] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7528807Z  2026-02-14 13:15:50.054 UTC [495] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7529510Z  2026-02-14 13:15:50.054 UTC [495] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7529839Z  2026-02-14 13:15:50.054 UTC [495] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7530498Z  2026-02-14 13:15:50.054 UTC [495] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7530820Z  2026-02-14 13:15:50.055 UTC [495] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7531266Z  2026-02-14 13:15:50.055 UTC [495] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7531584Z  2026-02-14 13:15:50.055 UTC [495] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7532118Z  2026-02-14 13:15:50.055 UTC [495] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7532447Z  2026-02-14 13:15:50.056 UTC [495] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7533097Z  2026-02-14 13:15:50.056 UTC [495] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7533420Z  2026-02-14 13:15:50.056 UTC [495] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7534156Z  2026-02-14 13:15:50.056 UTC [495] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7534507Z  2026-02-14 13:15:50.060 UTC [495] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7535019Z  2026-02-14 13:15:50.060 UTC [495] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7535227Z  2026-02-14 13:15:50.105 UTC [496] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7535400Z  2026-02-14 13:15:50.250 UTC [501] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7535560Z  2026-02-14 13:15:50.250 UTC [501] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7535621Z  	DO $$
2026-02-14T13:16:24.7535680Z  	BEGIN
2026-02-14T13:16:24.7535835Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7535949Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7536071Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7536189Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7536251Z  	    END IF;
2026-02-14T13:16:24.7536310Z  	END $$;
2026-02-14T13:16:24.7536539Z  2026-02-14 13:15:50.259 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7537277Z  2026-02-14 13:15:50.259 UTC [501] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7537495Z  2026-02-14 13:15:50.260 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7537929Z  2026-02-14 13:15:50.260 UTC [501] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7538149Z  2026-02-14 13:15:50.260 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7538531Z  2026-02-14 13:15:50.260 UTC [501] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7538751Z  2026-02-14 13:15:50.261 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7539137Z  2026-02-14 13:15:50.261 UTC [501] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7539354Z  2026-02-14 13:15:50.261 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7539737Z  2026-02-14 13:15:50.261 UTC [501] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7539952Z  2026-02-14 13:15:50.262 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7540386Z  2026-02-14 13:15:50.262 UTC [501] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7540708Z  2026-02-14 13:15:50.262 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7541077Z  2026-02-14 13:15:50.262 UTC [501] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7541296Z  2026-02-14 13:15:50.263 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7541639Z  2026-02-14 13:15:50.263 UTC [501] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7541850Z  2026-02-14 13:15:50.263 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7542318Z  2026-02-14 13:15:50.263 UTC [501] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7542531Z  2026-02-14 13:15:50.264 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7543117Z  2026-02-14 13:15:50.264 UTC [501] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7543587Z  2026-02-14 13:15:50.264 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7544507Z  2026-02-14 13:15:50.264 UTC [501] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7544911Z  2026-02-14 13:15:50.265 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7545383Z  2026-02-14 13:15:50.265 UTC [501] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7545612Z  2026-02-14 13:15:50.265 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7546086Z  2026-02-14 13:15:50.265 UTC [501] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7546329Z  2026-02-14 13:15:50.266 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7546617Z  2026-02-14 13:15:50.266 UTC [501] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7546737Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7546955Z  2026-02-14 13:15:50.266 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7547316Z  2026-02-14 13:15:50.266 UTC [501] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7547480Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7547850Z  2026-02-14 13:15:50.267 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7548160Z  2026-02-14 13:15:50.267 UTC [501] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7548390Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7548514Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7548766Z  2026-02-14 13:15:50.267 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7549180Z  2026-02-14 13:15:50.267 UTC [501] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7549496Z  2026-02-14 13:15:50.268 UTC [501] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7549883Z  2026-02-14 13:15:50.268 UTC [501] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7550296Z  2026-02-14 13:15:50.270 UTC [501] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7550873Z  2026-02-14 13:15:50.270 UTC [501] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7551227Z  2026-02-14 13:15:50.271 UTC [501] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7551777Z  2026-02-14 13:15:50.271 UTC [501] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7552167Z  2026-02-14 13:15:50.271 UTC [501] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7552888Z  2026-02-14 13:15:50.271 UTC [501] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7553271Z  2026-02-14 13:15:50.272 UTC [501] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7554117Z  2026-02-14 13:15:50.272 UTC [501] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7554536Z  2026-02-14 13:15:50.272 UTC [501] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7555362Z  2026-02-14 13:15:50.272 UTC [501] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7555794Z  2026-02-14 13:15:50.273 UTC [501] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7556498Z  2026-02-14 13:15:50.273 UTC [501] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7556860Z  2026-02-14 13:15:50.273 UTC [501] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7557386Z  2026-02-14 13:15:50.273 UTC [501] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7557729Z  2026-02-14 13:15:50.273 UTC [501] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7558343Z  2026-02-14 13:15:50.273 UTC [501] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7558705Z  2026-02-14 13:15:50.274 UTC [501] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7559399Z  2026-02-14 13:15:50.274 UTC [501] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7559801Z  2026-02-14 13:15:50.274 UTC [501] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7560464Z  2026-02-14 13:15:50.274 UTC [501] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7560821Z  2026-02-14 13:15:50.278 UTC [501] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7561384Z  2026-02-14 13:15:50.278 UTC [501] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7561756Z  2026-02-14 13:15:50.333 UTC [502] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7562014Z  2026-02-14 13:15:50.477 UTC [508] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7562207Z  2026-02-14 13:15:50.477 UTC [508] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7562308Z  	DO $$
2026-02-14T13:16:24.7562514Z  	BEGIN
2026-02-14T13:16:24.7562728Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7562884Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7563082Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7563232Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7563433Z  	    END IF;
2026-02-14T13:16:24.7563759Z  	END $$;
2026-02-14T13:16:24.7564050Z  2026-02-14 13:15:50.487 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7564832Z  2026-02-14 13:15:50.487 UTC [508] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7565129Z  2026-02-14 13:15:50.488 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7565595Z  2026-02-14 13:15:50.488 UTC [508] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7565876Z  2026-02-14 13:15:50.488 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7566364Z  2026-02-14 13:15:50.488 UTC [508] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7566637Z  2026-02-14 13:15:50.488 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7567101Z  2026-02-14 13:15:50.488 UTC [508] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7567349Z  2026-02-14 13:15:50.489 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7567770Z  2026-02-14 13:15:50.489 UTC [508] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7568044Z  2026-02-14 13:15:50.489 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7568562Z  2026-02-14 13:15:50.489 UTC [508] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7568854Z  2026-02-14 13:15:50.490 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7569296Z  2026-02-14 13:15:50.490 UTC [508] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7569545Z  2026-02-14 13:15:50.490 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7569953Z  2026-02-14 13:15:50.490 UTC [508] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7570227Z  2026-02-14 13:15:50.491 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7570696Z  2026-02-14 13:15:50.491 UTC [508] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7571004Z  2026-02-14 13:15:50.491 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7571409Z  2026-02-14 13:15:50.491 UTC [508] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7571692Z  2026-02-14 13:15:50.492 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7572325Z  2026-02-14 13:15:50.492 UTC [508] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7572563Z  2026-02-14 13:15:50.492 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7573099Z  2026-02-14 13:15:50.492 UTC [508] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7573411Z  2026-02-14 13:15:50.493 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7574017Z  2026-02-14 13:15:50.493 UTC [508] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7574452Z  2026-02-14 13:15:50.493 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7574768Z  2026-02-14 13:15:50.493 UTC [508] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7574906Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7575279Z  2026-02-14 13:15:50.494 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7575573Z  2026-02-14 13:15:50.494 UTC [508] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7575727Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7576018Z  2026-02-14 13:15:50.494 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7576316Z  2026-02-14 13:15:50.494 UTC [508] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7576460Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7576691Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7576975Z  2026-02-14 13:15:50.495 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7577310Z  2026-02-14 13:15:50.495 UTC [508] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7577648Z  2026-02-14 13:15:50.495 UTC [508] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7578026Z  2026-02-14 13:15:50.495 UTC [508] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7578463Z  2026-02-14 13:15:50.497 UTC [508] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7578926Z  2026-02-14 13:15:50.497 UTC [508] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7579248Z  2026-02-14 13:15:50.498 UTC [508] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7579786Z  2026-02-14 13:15:50.498 UTC [508] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7580156Z  2026-02-14 13:15:50.499 UTC [508] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7580701Z  2026-02-14 13:15:50.499 UTC [508] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7581145Z  2026-02-14 13:15:50.499 UTC [508] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7581662Z  2026-02-14 13:15:50.499 UTC [508] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7582199Z  2026-02-14 13:15:50.500 UTC [508] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7582946Z  2026-02-14 13:15:50.500 UTC [508] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7583311Z  2026-02-14 13:15:50.500 UTC [508] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7584130Z  2026-02-14 13:15:50.500 UTC [508] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7584653Z  2026-02-14 13:15:50.500 UTC [508] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7585195Z  2026-02-14 13:15:50.500 UTC [508] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7585554Z  2026-02-14 13:15:50.501 UTC [508] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7586026Z  2026-02-14 13:15:50.501 UTC [508] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7586420Z  2026-02-14 13:15:50.501 UTC [508] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7587097Z  2026-02-14 13:15:50.501 UTC [508] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7587597Z  2026-02-14 13:15:50.502 UTC [508] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7588263Z  2026-02-14 13:15:50.502 UTC [508] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7588542Z  2026-02-14 13:15:50.506 UTC [508] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7589124Z  2026-02-14 13:15:50.506 UTC [508] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7589368Z  2026-02-14 13:15:50.557 UTC [509] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7589563Z  2026-02-14 13:15:50.690 UTC [514] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7589863Z  2026-02-14 13:15:50.690 UTC [514] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7589959Z  	DO $$
2026-02-14T13:16:24.7590057Z  	BEGIN
2026-02-14T13:16:24.7590284Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7590437Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7590624Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7590891Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7590988Z  	    END IF;
2026-02-14T13:16:24.7591082Z  	END $$;
2026-02-14T13:16:24.7591388Z  2026-02-14 13:15:50.700 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7592161Z  2026-02-14 13:15:50.700 UTC [514] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7592492Z  2026-02-14 13:15:50.700 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7593097Z  2026-02-14 13:15:50.700 UTC [514] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7593357Z  2026-02-14 13:15:50.701 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7594136Z  2026-02-14 13:15:50.701 UTC [514] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7594454Z  2026-02-14 13:15:50.701 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7594898Z  2026-02-14 13:15:50.701 UTC [514] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7595384Z  2026-02-14 13:15:50.702 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7595831Z  2026-02-14 13:15:50.702 UTC [514] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7596082Z  2026-02-14 13:15:50.702 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7596590Z  2026-02-14 13:15:50.702 UTC [514] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7596841Z  2026-02-14 13:15:50.703 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7597263Z  2026-02-14 13:15:50.703 UTC [514] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7597567Z  2026-02-14 13:15:50.703 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7597966Z  2026-02-14 13:15:50.703 UTC [514] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7598264Z  2026-02-14 13:15:50.704 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7598721Z  2026-02-14 13:15:50.704 UTC [514] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7598973Z  2026-02-14 13:15:50.704 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7599398Z  2026-02-14 13:15:50.704 UTC [514] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7599694Z  2026-02-14 13:15:50.705 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7600214Z  2026-02-14 13:15:50.705 UTC [514] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7600462Z  2026-02-14 13:15:50.705 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7600950Z  2026-02-14 13:15:50.705 UTC [514] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7601244Z  2026-02-14 13:15:50.706 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7601726Z  2026-02-14 13:15:50.706 UTC [514] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7602023Z  2026-02-14 13:15:50.706 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7602399Z  2026-02-14 13:15:50.706 UTC [514] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7602587Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7602843Z  2026-02-14 13:15:50.707 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7603289Z  2026-02-14 13:15:50.707 UTC [514] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7603433Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7603855Z  2026-02-14 13:15:50.707 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7604233Z  2026-02-14 13:15:50.707 UTC [514] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7604395Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7604562Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7604826Z  2026-02-14 13:15:50.708 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7605270Z  2026-02-14 13:15:50.708 UTC [514] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7605715Z  2026-02-14 13:15:50.708 UTC [514] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7606102Z  2026-02-14 13:15:50.708 UTC [514] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7606473Z  2026-02-14 13:15:50.710 UTC [514] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7606957Z  2026-02-14 13:15:50.710 UTC [514] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7607277Z  2026-02-14 13:15:50.711 UTC [514] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7607768Z  2026-02-14 13:15:50.711 UTC [514] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7608247Z  2026-02-14 13:15:50.712 UTC [514] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7608800Z  2026-02-14 13:15:50.712 UTC [514] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7609218Z  2026-02-14 13:15:50.712 UTC [514] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7609717Z  2026-02-14 13:15:50.712 UTC [514] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7610083Z  2026-02-14 13:15:50.713 UTC [514] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7610895Z  2026-02-14 13:15:50.713 UTC [514] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7611307Z  2026-02-14 13:15:50.713 UTC [514] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7612031Z  2026-02-14 13:15:50.713 UTC [514] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7612384Z  2026-02-14 13:15:50.714 UTC [514] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7612866Z  2026-02-14 13:15:50.714 UTC [514] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7613242Z  2026-02-14 13:15:50.714 UTC [514] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7613988Z  2026-02-14 13:15:50.714 UTC [514] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7614373Z  2026-02-14 13:15:50.715 UTC [514] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7615107Z  2026-02-14 13:15:50.715 UTC [514] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7615472Z  2026-02-14 13:15:50.715 UTC [514] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7616314Z  2026-02-14 13:15:50.715 UTC [514] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7616582Z  2026-02-14 13:15:50.719 UTC [514] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7617176Z  2026-02-14 13:15:50.719 UTC [514] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7617475Z  2026-02-14 13:15:50.768 UTC [515] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7617686Z  2026-02-14 13:15:50.905 UTC [520] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7617916Z  2026-02-14 13:15:50.905 UTC [520] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7618017Z  	DO $$
2026-02-14T13:16:24.7618096Z  	BEGIN
2026-02-14T13:16:24.7618343Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7618550Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7618709Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7618859Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7619030Z  	    END IF;
2026-02-14T13:16:24.7619111Z  	END $$;
2026-02-14T13:16:24.7619416Z  2026-02-14 13:15:50.914 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7620241Z  2026-02-14 13:15:50.914 UTC [520] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7620496Z  2026-02-14 13:15:50.915 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7620993Z  2026-02-14 13:15:50.915 UTC [520] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7621248Z  2026-02-14 13:15:50.915 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7621650Z  2026-02-14 13:15:50.915 UTC [520] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7622006Z  2026-02-14 13:15:50.916 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7622426Z  2026-02-14 13:15:50.916 UTC [520] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7622679Z  2026-02-14 13:15:50.916 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7623168Z  2026-02-14 13:15:50.916 UTC [520] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7623419Z  2026-02-14 13:15:50.917 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7624072Z  2026-02-14 13:15:50.917 UTC [520] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7624453Z  2026-02-14 13:15:50.917 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7624861Z  2026-02-14 13:15:50.917 UTC [520] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7625152Z  2026-02-14 13:15:50.918 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7625533Z  2026-02-14 13:15:50.918 UTC [520] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7625780Z  2026-02-14 13:15:50.918 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7626383Z  2026-02-14 13:15:50.918 UTC [520] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7626655Z  2026-02-14 13:15:50.919 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7627147Z  2026-02-14 13:15:50.919 UTC [520] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7627410Z  2026-02-14 13:15:50.919 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7627881Z  2026-02-14 13:15:50.919 UTC [520] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7628154Z  2026-02-14 13:15:50.920 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7628684Z  2026-02-14 13:15:50.920 UTC [520] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7628956Z  2026-02-14 13:15:50.920 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7629490Z  2026-02-14 13:15:50.920 UTC [520] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7629743Z  2026-02-14 13:15:50.921 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7630051Z  2026-02-14 13:15:50.921 UTC [520] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7630226Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7630525Z  2026-02-14 13:15:50.921 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7630903Z  2026-02-14 13:15:50.921 UTC [520] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7631063Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7631311Z  2026-02-14 13:15:50.922 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7631652Z  2026-02-14 13:15:50.922 UTC [520] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7631791Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7631960Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7632268Z  2026-02-14 13:15:50.922 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7632607Z  2026-02-14 13:15:50.922 UTC [520] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7632905Z  2026-02-14 13:15:50.923 UTC [520] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7633337Z  2026-02-14 13:15:50.923 UTC [520] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7633955Z  2026-02-14 13:15:50.925 UTC [520] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7634659Z  2026-02-14 13:15:50.925 UTC [520] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7635098Z  2026-02-14 13:15:50.925 UTC [520] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7635619Z  2026-02-14 13:15:50.925 UTC [520] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7636037Z  2026-02-14 13:15:50.926 UTC [520] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7636690Z  2026-02-14 13:15:50.926 UTC [520] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7637052Z  2026-02-14 13:15:50.926 UTC [520] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7637665Z  2026-02-14 13:15:50.926 UTC [520] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7638035Z  2026-02-14 13:15:50.927 UTC [520] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7638817Z  2026-02-14 13:15:50.927 UTC [520] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7639191Z  2026-02-14 13:15:50.927 UTC [520] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7639895Z  2026-02-14 13:15:50.927 UTC [520] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7640361Z  2026-02-14 13:15:50.928 UTC [520] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7640864Z  2026-02-14 13:15:50.928 UTC [520] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7641254Z  2026-02-14 13:15:50.928 UTC [520] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7641730Z  2026-02-14 13:15:50.928 UTC [520] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7642095Z  2026-02-14 13:15:50.929 UTC [520] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7642808Z  2026-02-14 13:15:50.929 UTC [520] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7643214Z  2026-02-14 13:15:50.929 UTC [520] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7644049Z  2026-02-14 13:15:50.929 UTC [520] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7644383Z  2026-02-14 13:15:50.934 UTC [520] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7644939Z  2026-02-14 13:15:50.934 UTC [520] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7645370Z  2026-02-14 13:15:50.985 UTC [521] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7645570Z  2026-02-14 13:15:51.123 UTC [526] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7645818Z  2026-02-14 13:15:51.123 UTC [526] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7645973Z  	DO $$
2026-02-14T13:16:24.7646067Z  	BEGIN
2026-02-14T13:16:24.7646258Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7646449Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7646589Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7646785Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7647038Z  	    END IF;
2026-02-14T13:16:24.7647134Z  	END $$;
2026-02-14T13:16:24.7647429Z  2026-02-14 13:15:51.132 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7648241Z  2026-02-14 13:15:51.132 UTC [526] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7648480Z  2026-02-14 13:15:51.132 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7648994Z  2026-02-14 13:15:51.132 UTC [526] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7649306Z  2026-02-14 13:15:51.133 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7649718Z  2026-02-14 13:15:51.133 UTC [526] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7650011Z  2026-02-14 13:15:51.133 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7650441Z  2026-02-14 13:15:51.133 UTC [526] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7650673Z  2026-02-14 13:15:51.134 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7651199Z  2026-02-14 13:15:51.134 UTC [526] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7651450Z  2026-02-14 13:15:51.134 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7651945Z  2026-02-14 13:15:51.134 UTC [526] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7652241Z  2026-02-14 13:15:51.135 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7652649Z  2026-02-14 13:15:51.135 UTC [526] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7652893Z  2026-02-14 13:15:51.135 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7653386Z  2026-02-14 13:15:51.135 UTC [526] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7653888Z  2026-02-14 13:15:51.136 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7654394Z  2026-02-14 13:15:51.136 UTC [526] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7654662Z  2026-02-14 13:15:51.136 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7655075Z  2026-02-14 13:15:51.136 UTC [526] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7655406Z  2026-02-14 13:15:51.137 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7656012Z  2026-02-14 13:15:51.137 UTC [526] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7656301Z  2026-02-14 13:15:51.137 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7656827Z  2026-02-14 13:15:51.137 UTC [526] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7657073Z  2026-02-14 13:15:51.138 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7657585Z  2026-02-14 13:15:51.138 UTC [526] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7657990Z  2026-02-14 13:15:51.138 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7658323Z  2026-02-14 13:15:51.138 UTC [526] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7658519Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7658770Z  2026-02-14 13:15:51.139 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7659064Z  2026-02-14 13:15:51.139 UTC [526] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7659247Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7659538Z  2026-02-14 13:15:51.139 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7659886Z  2026-02-14 13:15:51.139 UTC [526] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7660090Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7660213Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7660463Z  2026-02-14 13:15:51.140 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7660808Z  2026-02-14 13:15:51.140 UTC [526] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7667656Z  2026-02-14 13:15:51.140 UTC [526] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7668065Z  2026-02-14 13:15:51.140 UTC [526] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7668418Z  2026-02-14 13:15:51.142 UTC [526] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7668863Z  2026-02-14 13:15:51.142 UTC [526] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7669160Z  2026-02-14 13:15:51.143 UTC [526] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7669642Z  2026-02-14 13:15:51.143 UTC [526] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7669985Z  2026-02-14 13:15:51.144 UTC [526] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7670510Z  2026-02-14 13:15:51.144 UTC [526] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7670875Z  2026-02-14 13:15:51.144 UTC [526] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7671347Z  2026-02-14 13:15:51.144 UTC [526] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7671885Z  2026-02-14 13:15:51.145 UTC [526] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7672608Z  2026-02-14 13:15:51.145 UTC [526] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7672943Z  2026-02-14 13:15:51.145 UTC [526] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7673597Z  2026-02-14 13:15:51.145 UTC [526] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7674427Z  2026-02-14 13:15:51.146 UTC [526] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7674912Z  2026-02-14 13:15:51.146 UTC [526] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7675244Z  2026-02-14 13:15:51.146 UTC [526] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7675699Z  2026-02-14 13:15:51.146 UTC [526] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7676033Z  2026-02-14 13:15:51.147 UTC [526] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7676707Z  2026-02-14 13:15:51.147 UTC [526] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7677046Z  2026-02-14 13:15:51.147 UTC [526] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7677692Z  2026-02-14 13:15:51.147 UTC [526] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7677944Z  2026-02-14 13:15:51.151 UTC [526] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7678451Z  2026-02-14 13:15:51.151 UTC [526] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7678659Z  2026-02-14 13:15:51.202 UTC [527] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7678838Z  2026-02-14 13:15:51.338 UTC [532] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7678996Z  2026-02-14 13:15:51.338 UTC [532] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7679065Z  	DO $$
2026-02-14T13:16:24.7679128Z  	BEGIN
2026-02-14T13:16:24.7679294Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7679416Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7679542Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7679656Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7679724Z  	    END IF;
2026-02-14T13:16:24.7679782Z  	END $$;
2026-02-14T13:16:24.7680020Z  2026-02-14 13:15:51.346 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7680764Z  2026-02-14 13:15:51.346 UTC [532] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7680992Z  2026-02-14 13:15:51.347 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7681530Z  2026-02-14 13:15:51.347 UTC [532] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7681756Z  2026-02-14 13:15:51.348 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7682127Z  2026-02-14 13:15:51.348 UTC [532] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7682345Z  2026-02-14 13:15:51.348 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7682728Z  2026-02-14 13:15:51.348 UTC [532] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7683016Z  2026-02-14 13:15:51.348 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7683405Z  2026-02-14 13:15:51.348 UTC [532] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7683732Z  2026-02-14 13:15:51.349 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7684178Z  2026-02-14 13:15:51.349 UTC [532] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7684398Z  2026-02-14 13:15:51.349 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7684760Z  2026-02-14 13:15:51.349 UTC [532] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7684980Z  2026-02-14 13:15:51.350 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7685331Z  2026-02-14 13:15:51.350 UTC [532] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7685542Z  2026-02-14 13:15:51.350 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7685938Z  2026-02-14 13:15:51.350 UTC [532] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7686155Z  2026-02-14 13:15:51.351 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7686516Z  2026-02-14 13:15:51.351 UTC [532] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7686734Z  2026-02-14 13:15:51.351 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7687166Z  2026-02-14 13:15:51.351 UTC [532] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7687378Z  2026-02-14 13:15:51.352 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7687833Z  2026-02-14 13:15:51.352 UTC [532] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7688046Z  2026-02-14 13:15:51.352 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7688505Z  2026-02-14 13:15:51.352 UTC [532] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7688723Z  2026-02-14 13:15:51.353 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7688999Z  2026-02-14 13:15:51.353 UTC [532] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7689126Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7689339Z  2026-02-14 13:15:51.353 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7689705Z  2026-02-14 13:15:51.353 UTC [532] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7689832Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7690045Z  2026-02-14 13:15:51.354 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7690308Z  2026-02-14 13:15:51.354 UTC [532] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7690434Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7690522Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7690733Z  2026-02-14 13:15:51.354 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7691139Z  2026-02-14 13:15:51.354 UTC [532] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7691403Z  2026-02-14 13:15:51.355 UTC [532] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7691752Z  2026-02-14 13:15:51.355 UTC [532] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7692083Z  2026-02-14 13:15:51.357 UTC [532] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7692506Z  2026-02-14 13:15:51.357 UTC [532] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7692793Z  2026-02-14 13:15:51.358 UTC [532] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7693266Z  2026-02-14 13:15:51.358 UTC [532] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7693699Z  2026-02-14 13:15:51.358 UTC [532] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7694230Z  2026-02-14 13:15:51.358 UTC [532] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7694571Z  2026-02-14 13:15:51.359 UTC [532] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7695038Z  2026-02-14 13:15:51.359 UTC [532] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7695370Z  2026-02-14 13:15:51.359 UTC [532] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7696084Z  2026-02-14 13:15:51.359 UTC [532] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7696421Z  2026-02-14 13:15:51.360 UTC [532] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7697075Z  2026-02-14 13:15:51.360 UTC [532] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7697399Z  2026-02-14 13:15:51.360 UTC [532] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7697851Z  2026-02-14 13:15:51.360 UTC [532] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7698174Z  2026-02-14 13:15:51.361 UTC [532] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7698744Z  2026-02-14 13:15:51.361 UTC [532] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7699077Z  2026-02-14 13:15:51.361 UTC [532] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7699734Z  2026-02-14 13:15:51.361 UTC [532] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7700067Z  2026-02-14 13:15:51.362 UTC [532] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7700806Z  2026-02-14 13:15:51.362 UTC [532] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7701060Z  2026-02-14 13:15:51.365 UTC [532] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7701574Z  2026-02-14 13:15:51.365 UTC [532] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7701784Z  2026-02-14 13:15:51.415 UTC [533] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7701961Z  2026-02-14 13:15:51.552 UTC [538] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7702125Z  2026-02-14 13:15:51.552 UTC [538] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7702187Z  	DO $$
2026-02-14T13:16:24.7702246Z  	BEGIN
2026-02-14T13:16:24.7702405Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7702521Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7702643Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7702762Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7702841Z  	    END IF;
2026-02-14T13:16:24.7702913Z  	END $$;
2026-02-14T13:16:24.7703144Z  2026-02-14 13:15:51.561 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7703986Z  2026-02-14 13:15:51.561 UTC [538] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7704208Z  2026-02-14 13:15:51.561 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7704643Z  2026-02-14 13:15:51.561 UTC [538] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7704862Z  2026-02-14 13:15:51.562 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7705254Z  2026-02-14 13:15:51.562 UTC [538] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7705467Z  2026-02-14 13:15:51.562 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7705863Z  2026-02-14 13:15:51.562 UTC [538] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7706081Z  2026-02-14 13:15:51.563 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7706461Z  2026-02-14 13:15:51.563 UTC [538] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7706672Z  2026-02-14 13:15:51.563 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7707254Z  2026-02-14 13:15:51.563 UTC [538] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7707466Z  2026-02-14 13:15:51.564 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7707827Z  2026-02-14 13:15:51.564 UTC [538] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7708047Z  2026-02-14 13:15:51.564 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7708393Z  2026-02-14 13:15:51.564 UTC [538] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7708609Z  2026-02-14 13:15:51.564 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7709116Z  2026-02-14 13:15:51.564 UTC [538] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7709335Z  2026-02-14 13:15:51.565 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7709707Z  2026-02-14 13:15:51.565 UTC [538] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7709917Z  2026-02-14 13:15:51.565 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7710346Z  2026-02-14 13:15:51.565 UTC [538] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7710564Z  2026-02-14 13:15:51.566 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7711010Z  2026-02-14 13:15:51.566 UTC [538] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7711226Z  2026-02-14 13:15:51.566 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7711691Z  2026-02-14 13:15:51.566 UTC [538] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7711902Z  2026-02-14 13:15:51.567 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7712184Z  2026-02-14 13:15:51.567 UTC [538] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7712300Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7712512Z  2026-02-14 13:15:51.567 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7712770Z  2026-02-14 13:15:51.567 UTC [538] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7712892Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7713101Z  2026-02-14 13:15:51.568 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7713367Z  2026-02-14 13:15:51.568 UTC [538] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7713487Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7713572Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7714098Z  2026-02-14 13:15:51.568 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7714420Z  2026-02-14 13:15:51.568 UTC [538] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7714686Z  2026-02-14 13:15:51.569 UTC [538] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7715046Z  2026-02-14 13:15:51.569 UTC [538] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7715378Z  2026-02-14 13:15:51.571 UTC [538] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7715909Z  2026-02-14 13:15:51.571 UTC [538] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7716206Z  2026-02-14 13:15:51.572 UTC [538] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7716672Z  2026-02-14 13:15:51.572 UTC [538] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7717012Z  2026-02-14 13:15:51.572 UTC [538] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7717628Z  2026-02-14 13:15:51.572 UTC [538] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7717965Z  2026-02-14 13:15:51.573 UTC [538] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7718432Z  2026-02-14 13:15:51.573 UTC [538] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7718761Z  2026-02-14 13:15:51.573 UTC [538] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7719465Z  2026-02-14 13:15:51.573 UTC [538] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7719795Z  2026-02-14 13:15:51.574 UTC [538] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7720456Z  2026-02-14 13:15:51.574 UTC [538] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7720782Z  2026-02-14 13:15:51.574 UTC [538] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7721223Z  2026-02-14 13:15:51.574 UTC [538] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7721537Z  2026-02-14 13:15:51.575 UTC [538] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7721980Z  2026-02-14 13:15:51.575 UTC [538] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7722302Z  2026-02-14 13:15:51.575 UTC [538] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7722958Z  2026-02-14 13:15:51.575 UTC [538] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7723289Z  2026-02-14 13:15:51.576 UTC [538] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7724087Z  2026-02-14 13:15:51.576 UTC [538] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7724338Z  2026-02-14 13:15:51.580 UTC [538] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7724857Z  2026-02-14 13:15:51.580 UTC [538] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7725180Z  2026-02-14 13:15:51.630 UTC [539] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7725365Z  2026-02-14 13:15:51.768 UTC [544] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7725522Z  2026-02-14 13:15:51.768 UTC [544] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7725588Z  	DO $$
2026-02-14T13:16:24.7725646Z  	BEGIN
2026-02-14T13:16:24.7725796Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7725911Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7726035Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7726147Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7726305Z  	    END IF;
2026-02-14T13:16:24.7726369Z  	END $$;
2026-02-14T13:16:24.7726592Z  2026-02-14 13:15:51.777 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7727331Z  2026-02-14 13:15:51.777 UTC [544] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7727554Z  2026-02-14 13:15:51.777 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7727976Z  2026-02-14 13:15:51.777 UTC [544] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7728194Z  2026-02-14 13:15:51.778 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7728576Z  2026-02-14 13:15:51.778 UTC [544] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7728791Z  2026-02-14 13:15:51.778 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7729186Z  2026-02-14 13:15:51.778 UTC [544] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7729398Z  2026-02-14 13:15:51.779 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7729780Z  2026-02-14 13:15:51.779 UTC [544] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7729999Z  2026-02-14 13:15:51.779 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7730431Z  2026-02-14 13:15:51.779 UTC [544] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7730655Z  2026-02-14 13:15:51.780 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7731019Z  2026-02-14 13:15:51.780 UTC [544] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7731232Z  2026-02-14 13:15:51.780 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7731575Z  2026-02-14 13:15:51.780 UTC [544] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7731787Z  2026-02-14 13:15:51.781 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7732175Z  2026-02-14 13:15:51.781 UTC [544] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7732397Z  2026-02-14 13:15:51.781 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7732763Z  2026-02-14 13:15:51.781 UTC [544] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7732976Z  2026-02-14 13:15:51.782 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7733478Z  2026-02-14 13:15:51.782 UTC [544] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7733796Z  2026-02-14 13:15:51.782 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7734247Z  2026-02-14 13:15:51.782 UTC [544] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7734461Z  2026-02-14 13:15:51.783 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7734923Z  2026-02-14 13:15:51.783 UTC [544] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7735245Z  2026-02-14 13:15:51.783 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7735522Z  2026-02-14 13:15:51.783 UTC [544] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7735640Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7735860Z  2026-02-14 13:15:51.784 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7736111Z  2026-02-14 13:15:51.784 UTC [544] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7736227Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7736446Z  2026-02-14 13:15:51.784 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7736709Z  2026-02-14 13:15:51.784 UTC [544] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7736828Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7736920Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7737134Z  2026-02-14 13:15:51.785 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7737436Z  2026-02-14 13:15:51.785 UTC [544] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7737703Z  2026-02-14 13:15:51.785 UTC [544] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7738051Z  2026-02-14 13:15:51.785 UTC [544] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7738387Z  2026-02-14 13:15:51.787 UTC [544] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7738798Z  2026-02-14 13:15:51.787 UTC [544] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7739081Z  2026-02-14 13:15:51.788 UTC [544] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7739549Z  2026-02-14 13:15:51.788 UTC [544] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7739885Z  2026-02-14 13:15:51.788 UTC [544] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7740397Z  2026-02-14 13:15:51.788 UTC [544] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7740737Z  2026-02-14 13:15:51.789 UTC [544] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7741199Z  2026-02-14 13:15:51.789 UTC [544] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7741637Z  2026-02-14 13:15:51.789 UTC [544] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7742343Z  2026-02-14 13:15:51.789 UTC [544] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7742669Z  2026-02-14 13:15:51.790 UTC [544] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7743324Z  2026-02-14 13:15:51.790 UTC [544] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7743814Z  2026-02-14 13:15:51.790 UTC [544] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7744263Z  2026-02-14 13:15:51.790 UTC [544] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7744582Z  2026-02-14 13:15:51.791 UTC [544] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7745027Z  2026-02-14 13:15:51.791 UTC [544] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7745351Z  2026-02-14 13:15:51.791 UTC [544] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7746000Z  2026-02-14 13:15:51.791 UTC [544] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7746326Z  2026-02-14 13:15:51.792 UTC [544] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7746955Z  2026-02-14 13:15:51.792 UTC [544] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7747196Z  2026-02-14 13:15:51.796 UTC [544] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7747701Z  2026-02-14 13:15:51.796 UTC [544] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7747903Z  2026-02-14 13:15:51.845 UTC [545] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7748078Z  2026-02-14 13:15:51.982 UTC [550] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7748239Z  2026-02-14 13:15:51.982 UTC [550] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7748298Z  	DO $$
2026-02-14T13:16:24.7748357Z  	BEGIN
2026-02-14T13:16:24.7748514Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7748626Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7748746Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7748865Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7748924Z  	    END IF;
2026-02-14T13:16:24.7748983Z  	END $$;
2026-02-14T13:16:24.7749205Z  2026-02-14 13:15:51.991 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7749940Z  2026-02-14 13:15:51.991 UTC [550] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7750164Z  2026-02-14 13:15:51.991 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7750702Z  2026-02-14 13:15:51.991 UTC [550] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7750919Z  2026-02-14 13:15:51.992 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7751295Z  2026-02-14 13:15:51.992 UTC [550] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7751513Z  2026-02-14 13:15:51.992 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7751897Z  2026-02-14 13:15:51.992 UTC [550] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7752212Z  2026-02-14 13:15:51.993 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7752605Z  2026-02-14 13:15:51.993 UTC [550] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7752818Z  2026-02-14 13:15:51.993 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7753258Z  2026-02-14 13:15:51.993 UTC [550] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7753473Z  2026-02-14 13:15:51.994 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7754124Z  2026-02-14 13:15:51.994 UTC [550] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7754366Z  2026-02-14 13:15:51.994 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7754716Z  2026-02-14 13:15:51.994 UTC [550] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7754940Z  2026-02-14 13:15:51.995 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7755331Z  2026-02-14 13:15:51.995 UTC [550] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7755542Z  2026-02-14 13:15:51.995 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7755903Z  2026-02-14 13:15:51.995 UTC [550] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7756123Z  2026-02-14 13:15:51.995 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7756554Z  2026-02-14 13:15:51.995 UTC [550] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7756769Z  2026-02-14 13:15:51.996 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7757218Z  2026-02-14 13:15:51.996 UTC [550] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7757429Z  2026-02-14 13:15:51.996 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7757895Z  2026-02-14 13:15:51.996 UTC [550] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7758108Z  2026-02-14 13:15:51.997 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7758383Z  2026-02-14 13:15:51.997 UTC [550] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7758510Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7758724Z  2026-02-14 13:15:51.997 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7759101Z  2026-02-14 13:15:51.997 UTC [550] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7759228Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7759439Z  2026-02-14 13:15:51.998 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7759698Z  2026-02-14 13:15:51.998 UTC [550] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7759823Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7759907Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7760118Z  2026-02-14 13:15:51.998 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7760523Z  2026-02-14 13:15:51.998 UTC [550] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7760784Z  2026-02-14 13:15:51.999 UTC [550] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7761133Z  2026-02-14 13:15:51.999 UTC [550] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7761462Z  2026-02-14 13:15:52.001 UTC [550] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7761865Z  2026-02-14 13:15:52.001 UTC [550] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7762154Z  2026-02-14 13:15:52.002 UTC [550] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7762618Z  2026-02-14 13:15:52.002 UTC [550] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7762953Z  2026-02-14 13:15:52.002 UTC [550] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7763471Z  2026-02-14 13:15:52.002 UTC [550] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7763915Z  2026-02-14 13:15:52.003 UTC [550] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7764378Z  2026-02-14 13:15:52.003 UTC [550] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7764708Z  2026-02-14 13:15:52.003 UTC [550] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7765419Z  2026-02-14 13:15:52.003 UTC [550] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7765756Z  2026-02-14 13:15:52.004 UTC [550] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7766407Z  2026-02-14 13:15:52.004 UTC [550] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7766722Z  2026-02-14 13:15:52.004 UTC [550] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7767169Z  2026-02-14 13:15:52.004 UTC [550] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7767484Z  2026-02-14 13:15:52.005 UTC [550] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7768031Z  2026-02-14 13:15:52.005 UTC [550] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7768354Z  2026-02-14 13:15:52.005 UTC [550] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7769003Z  2026-02-14 13:15:52.005 UTC [550] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7769330Z  2026-02-14 13:15:52.006 UTC [550] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7770052Z  2026-02-14 13:15:52.006 UTC [550] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7770317Z  2026-02-14 13:15:52.010 UTC [550] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7770824Z  2026-02-14 13:15:52.010 UTC [550] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7771029Z  2026-02-14 13:15:52.062 UTC [551] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7771210Z  2026-02-14 13:15:52.198 UTC [556] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7771366Z  2026-02-14 13:15:52.198 UTC [556] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7771427Z  	DO $$
2026-02-14T13:16:24.7771493Z  	BEGIN
2026-02-14T13:16:24.7771680Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7771792Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7771915Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7772052Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7772117Z  	    END IF;
2026-02-14T13:16:24.7772180Z  	END $$;
2026-02-14T13:16:24.7772420Z  2026-02-14 13:15:52.207 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7773154Z  2026-02-14 13:15:52.207 UTC [556] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7773379Z  2026-02-14 13:15:52.207 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7773898Z  2026-02-14 13:15:52.207 UTC [556] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7774121Z  2026-02-14 13:15:52.208 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7774506Z  2026-02-14 13:15:52.208 UTC [556] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7774722Z  2026-02-14 13:15:52.208 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7775104Z  2026-02-14 13:15:52.208 UTC [556] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7775319Z  2026-02-14 13:15:52.209 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7775699Z  2026-02-14 13:15:52.209 UTC [556] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7775922Z  2026-02-14 13:15:52.209 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7776492Z  2026-02-14 13:15:52.209 UTC [556] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7776706Z  2026-02-14 13:15:52.210 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7777073Z  2026-02-14 13:15:52.210 UTC [556] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7777290Z  2026-02-14 13:15:52.210 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7777628Z  2026-02-14 13:15:52.210 UTC [556] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7777844Z  2026-02-14 13:15:52.210 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7778348Z  2026-02-14 13:15:52.210 UTC [556] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7778565Z  2026-02-14 13:15:52.211 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7778932Z  2026-02-14 13:15:52.211 UTC [556] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7779145Z  2026-02-14 13:15:52.211 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7779577Z  2026-02-14 13:15:52.211 UTC [556] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7779787Z  2026-02-14 13:15:52.212 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7780232Z  2026-02-14 13:15:52.212 UTC [556] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7780449Z  2026-02-14 13:15:52.212 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7780906Z  2026-02-14 13:15:52.212 UTC [556] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7781119Z  2026-02-14 13:15:52.213 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7781395Z  2026-02-14 13:15:52.213 UTC [556] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7781508Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7781721Z  2026-02-14 13:15:52.213 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7781981Z  2026-02-14 13:15:52.213 UTC [556] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7782111Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7782323Z  2026-02-14 13:15:52.214 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7782594Z  2026-02-14 13:15:52.214 UTC [556] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7782712Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7782800Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7783014Z  2026-02-14 13:15:52.214 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7783315Z  2026-02-14 13:15:52.214 UTC [556] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7783578Z  2026-02-14 13:15:52.215 UTC [556] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7784023Z  2026-02-14 13:15:52.215 UTC [556] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7784350Z  2026-02-14 13:15:52.217 UTC [556] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7784865Z  2026-02-14 13:15:52.217 UTC [556] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7785151Z  2026-02-14 13:15:52.218 UTC [556] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7785611Z  2026-02-14 13:15:52.218 UTC [556] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7785953Z  2026-02-14 13:15:52.218 UTC [556] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7786568Z  2026-02-14 13:15:52.218 UTC [556] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7786912Z  2026-02-14 13:15:52.219 UTC [556] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7787372Z  2026-02-14 13:15:52.219 UTC [556] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7787696Z  2026-02-14 13:15:52.219 UTC [556] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7788400Z  2026-02-14 13:15:52.219 UTC [556] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7788731Z  2026-02-14 13:15:52.220 UTC [556] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7789380Z  2026-02-14 13:15:52.220 UTC [556] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7789702Z  2026-02-14 13:15:52.220 UTC [556] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7790144Z  2026-02-14 13:15:52.220 UTC [556] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7790466Z  2026-02-14 13:15:52.221 UTC [556] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7790904Z  2026-02-14 13:15:52.221 UTC [556] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7791227Z  2026-02-14 13:15:52.221 UTC [556] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7791885Z  2026-02-14 13:15:52.221 UTC [556] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7792211Z  2026-02-14 13:15:52.222 UTC [556] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7792839Z  2026-02-14 13:15:52.222 UTC [556] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7793088Z  2026-02-14 13:15:52.226 UTC [556] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7793588Z  2026-02-14 13:15:52.226 UTC [556] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7794239Z  2026-02-14 13:15:52.274 UTC [557] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7794426Z  2026-02-14 13:15:52.409 UTC [562] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7794584Z  2026-02-14 13:15:52.409 UTC [562] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7794648Z  	DO $$
2026-02-14T13:16:24.7794706Z  	BEGIN
2026-02-14T13:16:24.7794857Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7794973Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7795095Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7795212Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7795377Z  	    END IF;
2026-02-14T13:16:24.7795436Z  	END $$;
2026-02-14T13:16:24.7795657Z  2026-02-14 13:15:52.418 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7796395Z  2026-02-14 13:15:52.418 UTC [562] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7796614Z  2026-02-14 13:15:52.419 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7797042Z  2026-02-14 13:15:52.419 UTC [562] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7797261Z  2026-02-14 13:15:52.419 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7797639Z  2026-02-14 13:15:52.419 UTC [562] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7797853Z  2026-02-14 13:15:52.420 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7798243Z  2026-02-14 13:15:52.420 UTC [562] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7798458Z  2026-02-14 13:15:52.420 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7798843Z  2026-02-14 13:15:52.420 UTC [562] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7799054Z  2026-02-14 13:15:52.420 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7799487Z  2026-02-14 13:15:52.420 UTC [562] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7799708Z  2026-02-14 13:15:52.421 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7800071Z  2026-02-14 13:15:52.421 UTC [562] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7800286Z  2026-02-14 13:15:52.422 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7800635Z  2026-02-14 13:15:52.422 UTC [562] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7800849Z  2026-02-14 13:15:52.422 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7801239Z  2026-02-14 13:15:52.422 UTC [562] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7801459Z  2026-02-14 13:15:52.422 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7801826Z  2026-02-14 13:15:52.422 UTC [562] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7802047Z  2026-02-14 13:15:52.423 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7802554Z  2026-02-14 13:15:52.423 UTC [562] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7802769Z  2026-02-14 13:15:52.423 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7803216Z  2026-02-14 13:15:52.423 UTC [562] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7803427Z  2026-02-14 13:15:52.424 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7804320Z  2026-02-14 13:15:52.424 UTC [562] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7804661Z  2026-02-14 13:15:52.424 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7804935Z  2026-02-14 13:15:52.424 UTC [562] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7805048Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7805266Z  2026-02-14 13:15:52.425 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7805516Z  2026-02-14 13:15:52.425 UTC [562] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7805634Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7805843Z  2026-02-14 13:15:52.425 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7806108Z  2026-02-14 13:15:52.425 UTC [562] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7806231Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7806316Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7806531Z  2026-02-14 13:15:52.426 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7806837Z  2026-02-14 13:15:52.426 UTC [562] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7807095Z  2026-02-14 13:15:52.426 UTC [562] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7807437Z  2026-02-14 13:15:52.426 UTC [562] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7807766Z  2026-02-14 13:15:52.429 UTC [562] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7808171Z  2026-02-14 13:15:52.429 UTC [562] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7808460Z  2026-02-14 13:15:52.429 UTC [562] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7808934Z  2026-02-14 13:15:52.429 UTC [562] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7809271Z  2026-02-14 13:15:52.430 UTC [562] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7809791Z  2026-02-14 13:15:52.430 UTC [562] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7810126Z  2026-02-14 13:15:52.430 UTC [562] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7810585Z  2026-02-14 13:15:52.430 UTC [562] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7811014Z  2026-02-14 13:15:52.431 UTC [562] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7811721Z  2026-02-14 13:15:52.431 UTC [562] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7812049Z  2026-02-14 13:15:52.431 UTC [562] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7812707Z  2026-02-14 13:15:52.431 UTC [562] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7813098Z  2026-02-14 13:15:52.432 UTC [562] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7813545Z  2026-02-14 13:15:52.432 UTC [562] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7813960Z  2026-02-14 13:15:52.432 UTC [562] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7814397Z  2026-02-14 13:15:52.432 UTC [562] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7814723Z  2026-02-14 13:15:52.433 UTC [562] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7815379Z  2026-02-14 13:15:52.433 UTC [562] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7815714Z  2026-02-14 13:15:52.433 UTC [562] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7816339Z  2026-02-14 13:15:52.433 UTC [562] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7816584Z  2026-02-14 13:15:52.437 UTC [562] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7817091Z  2026-02-14 13:15:52.437 UTC [562] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7817298Z  2026-02-14 13:15:52.488 UTC [563] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7817471Z  2026-02-14 13:15:52.622 UTC [568] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7817632Z  2026-02-14 13:15:52.622 UTC [568] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7817696Z  	DO $$
2026-02-14T13:16:24.7817754Z  	BEGIN
2026-02-14T13:16:24.7817912Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7818025Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7818147Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7818265Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7818325Z  	    END IF;
2026-02-14T13:16:24.7818383Z  	END $$;
2026-02-14T13:16:24.7818607Z  2026-02-14 13:15:52.631 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7819344Z  2026-02-14 13:15:52.631 UTC [568] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7819569Z  2026-02-14 13:15:52.631 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7820112Z  2026-02-14 13:15:52.631 UTC [568] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7820328Z  2026-02-14 13:15:52.632 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7820709Z  2026-02-14 13:15:52.632 UTC [568] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7820926Z  2026-02-14 13:15:52.632 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7821313Z  2026-02-14 13:15:52.632 UTC [568] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7821626Z  2026-02-14 13:15:52.633 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7822015Z  2026-02-14 13:15:52.633 UTC [568] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7822227Z  2026-02-14 13:15:52.633 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7822663Z  2026-02-14 13:15:52.633 UTC [568] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7822876Z  2026-02-14 13:15:52.634 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7823248Z  2026-02-14 13:15:52.634 UTC [568] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7823475Z  2026-02-14 13:15:52.634 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7823919Z  2026-02-14 13:15:52.634 UTC [568] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7824144Z  2026-02-14 13:15:52.634 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7824533Z  2026-02-14 13:15:52.634 UTC [568] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7824743Z  2026-02-14 13:15:52.635 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7825120Z  2026-02-14 13:15:52.635 UTC [568] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7825332Z  2026-02-14 13:15:52.635 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7825763Z  2026-02-14 13:15:52.635 UTC [568] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7825974Z  2026-02-14 13:15:52.636 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7826419Z  2026-02-14 13:15:52.636 UTC [568] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7826629Z  2026-02-14 13:15:52.636 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7827089Z  2026-02-14 13:15:52.636 UTC [568] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7827302Z  2026-02-14 13:15:52.637 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7827581Z  2026-02-14 13:15:52.637 UTC [568] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7827699Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7827913Z  2026-02-14 13:15:52.637 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7828283Z  2026-02-14 13:15:52.637 UTC [568] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7828403Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7828615Z  2026-02-14 13:15:52.638 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7828880Z  2026-02-14 13:15:52.638 UTC [568] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7828998Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7829080Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7829296Z  2026-02-14 13:15:52.638 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7829692Z  2026-02-14 13:15:52.638 UTC [568] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7829955Z  2026-02-14 13:15:52.639 UTC [568] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7830301Z  2026-02-14 13:15:52.639 UTC [568] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7830634Z  2026-02-14 13:15:52.641 UTC [568] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7831039Z  2026-02-14 13:15:52.641 UTC [568] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7831331Z  2026-02-14 13:15:52.642 UTC [568] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7831799Z  2026-02-14 13:15:52.642 UTC [568] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7832138Z  2026-02-14 13:15:52.642 UTC [568] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7832655Z  2026-02-14 13:15:52.642 UTC [568] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7832992Z  2026-02-14 13:15:52.643 UTC [568] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7833453Z  2026-02-14 13:15:52.643 UTC [568] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7834078Z  2026-02-14 13:15:52.643 UTC [568] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7834813Z  2026-02-14 13:15:52.643 UTC [568] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7835164Z  2026-02-14 13:15:52.644 UTC [568] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7835815Z  2026-02-14 13:15:52.644 UTC [568] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7836141Z  2026-02-14 13:15:52.644 UTC [568] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7836593Z  2026-02-14 13:15:52.644 UTC [568] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7836913Z  2026-02-14 13:15:52.645 UTC [568] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7837481Z  2026-02-14 13:15:52.645 UTC [568] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7837809Z  2026-02-14 13:15:52.645 UTC [568] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7838465Z  2026-02-14 13:15:52.645 UTC [568] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7838794Z  2026-02-14 13:15:52.646 UTC [568] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7839556Z  2026-02-14 13:15:52.646 UTC [568] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7839811Z  2026-02-14 13:15:52.650 UTC [568] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7840311Z  2026-02-14 13:15:52.650 UTC [568] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7840518Z  2026-02-14 13:15:52.701 UTC [569] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7840693Z  2026-02-14 13:15:52.840 UTC [574] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7840847Z  2026-02-14 13:15:52.840 UTC [574] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7840907Z  	DO $$
2026-02-14T13:16:24.7840970Z  	BEGIN
2026-02-14T13:16:24.7841125Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7841236Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7841363Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7841481Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7841542Z  	    END IF;
2026-02-14T13:16:24.7841607Z  	END $$;
2026-02-14T13:16:24.7841831Z  2026-02-14 13:15:52.849 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7842556Z  2026-02-14 13:15:52.849 UTC [574] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7842781Z  2026-02-14 13:15:52.849 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7843204Z  2026-02-14 13:15:52.849 UTC [574] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7843427Z  2026-02-14 13:15:52.850 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7843919Z  2026-02-14 13:15:52.850 UTC [574] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7844133Z  2026-02-14 13:15:52.850 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7844522Z  2026-02-14 13:15:52.850 UTC [574] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7844736Z  2026-02-14 13:15:52.851 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7845115Z  2026-02-14 13:15:52.851 UTC [574] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7845344Z  2026-02-14 13:15:52.851 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7845878Z  2026-02-14 13:15:52.851 UTC [574] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7846096Z  2026-02-14 13:15:52.852 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7846465Z  2026-02-14 13:15:52.852 UTC [574] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7846679Z  2026-02-14 13:15:52.852 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7847023Z  2026-02-14 13:15:52.852 UTC [574] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7847238Z  2026-02-14 13:15:52.852 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7847725Z  2026-02-14 13:15:52.852 UTC [574] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7847948Z  2026-02-14 13:15:52.853 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7848315Z  2026-02-14 13:15:52.853 UTC [574] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7848527Z  2026-02-14 13:15:52.853 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7848958Z  2026-02-14 13:15:52.853 UTC [574] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7849175Z  2026-02-14 13:15:52.854 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7849620Z  2026-02-14 13:15:52.854 UTC [574] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7849840Z  2026-02-14 13:15:52.854 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7850306Z  2026-02-14 13:15:52.854 UTC [574] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7850522Z  2026-02-14 13:15:52.855 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7850801Z  2026-02-14 13:15:52.855 UTC [574] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7850915Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7851131Z  2026-02-14 13:15:52.855 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7851387Z  2026-02-14 13:15:52.855 UTC [574] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7851502Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7851721Z  2026-02-14 13:15:52.856 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7851979Z  2026-02-14 13:15:52.856 UTC [574] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7852098Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7852191Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7852401Z  2026-02-14 13:15:52.856 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7852701Z  2026-02-14 13:15:52.856 UTC [574] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7852970Z  2026-02-14 13:15:52.857 UTC [574] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7853313Z  2026-02-14 13:15:52.857 UTC [574] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7853840Z  2026-02-14 13:15:52.859 UTC [574] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7854253Z  2026-02-14 13:15:52.859 UTC [574] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7854538Z  2026-02-14 13:15:52.860 UTC [574] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7855014Z  2026-02-14 13:15:52.860 UTC [574] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7855345Z  2026-02-14 13:15:52.860 UTC [574] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7855955Z  2026-02-14 13:15:52.860 UTC [574] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7856304Z  2026-02-14 13:15:52.861 UTC [574] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7856769Z  2026-02-14 13:15:52.861 UTC [574] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7857097Z  2026-02-14 13:15:52.861 UTC [574] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7857805Z  2026-02-14 13:15:52.861 UTC [574] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7858135Z  2026-02-14 13:15:52.862 UTC [574] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7858790Z  2026-02-14 13:15:52.862 UTC [574] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7859108Z  2026-02-14 13:15:52.862 UTC [574] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7859551Z  2026-02-14 13:15:52.862 UTC [574] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7859874Z  2026-02-14 13:15:52.863 UTC [574] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7860311Z  2026-02-14 13:15:52.863 UTC [574] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7860640Z  2026-02-14 13:15:52.863 UTC [574] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7861296Z  2026-02-14 13:15:52.863 UTC [574] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7861622Z  2026-02-14 13:15:52.864 UTC [574] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7862257Z  2026-02-14 13:15:52.864 UTC [574] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7862503Z  2026-02-14 13:15:52.868 UTC [574] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7863019Z  2026-02-14 13:15:52.868 UTC [574] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7863308Z  2026-02-14 13:15:53.220 UTC [575] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7863483Z  2026-02-14 13:15:53.363 UTC [580] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7863736Z  2026-02-14 13:15:53.363 UTC [580] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7863797Z  	DO $$
2026-02-14T13:16:24.7863855Z  	BEGIN
2026-02-14T13:16:24.7864005Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7864120Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7864241Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7864354Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7864541Z  	    END IF;
2026-02-14T13:16:24.7864599Z  	END $$;
2026-02-14T13:16:24.7864826Z  2026-02-14 13:15:53.372 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7865575Z  2026-02-14 13:15:53.372 UTC [580] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7865795Z  2026-02-14 13:15:53.373 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7866221Z  2026-02-14 13:15:53.373 UTC [580] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7866433Z  2026-02-14 13:15:53.374 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7866806Z  2026-02-14 13:15:53.374 UTC [580] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7867027Z  2026-02-14 13:15:53.374 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7867652Z  2026-02-14 13:15:53.374 UTC [580] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7867884Z  2026-02-14 13:15:53.374 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7868279Z  2026-02-14 13:15:53.374 UTC [580] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7868496Z  2026-02-14 13:15:53.375 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7868924Z  2026-02-14 13:15:53.375 UTC [580] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7869147Z  2026-02-14 13:15:53.375 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7869514Z  2026-02-14 13:15:53.375 UTC [580] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7869734Z  2026-02-14 13:15:53.376 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7870074Z  2026-02-14 13:15:53.376 UTC [580] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7870287Z  2026-02-14 13:15:53.376 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7870677Z  2026-02-14 13:15:53.376 UTC [580] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7870888Z  2026-02-14 13:15:53.377 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7871258Z  2026-02-14 13:15:53.377 UTC [580] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7871475Z  2026-02-14 13:15:53.377 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7872057Z  2026-02-14 13:15:53.377 UTC [580] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7872273Z  2026-02-14 13:15:53.378 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7872728Z  2026-02-14 13:15:53.378 UTC [580] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7872942Z  2026-02-14 13:15:53.378 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7873481Z  2026-02-14 13:15:53.378 UTC [580] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7873944Z  2026-02-14 13:15:53.379 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7874254Z  2026-02-14 13:15:53.379 UTC [580] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7874380Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7874600Z  2026-02-14 13:15:53.379 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7874857Z  2026-02-14 13:15:53.379 UTC [580] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7874979Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7875191Z  2026-02-14 13:15:53.380 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7875456Z  2026-02-14 13:15:53.380 UTC [580] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7875582Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7875667Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7875880Z  2026-02-14 13:15:53.380 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7876186Z  2026-02-14 13:15:53.380 UTC [580] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7876449Z  2026-02-14 13:15:53.381 UTC [580] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7876792Z  2026-02-14 13:15:53.381 UTC [580] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7877132Z  2026-02-14 13:15:53.383 UTC [580] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7877545Z  2026-02-14 13:15:53.383 UTC [580] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7877837Z  2026-02-14 13:15:53.384 UTC [580] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7878302Z  2026-02-14 13:15:53.384 UTC [580] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7878636Z  2026-02-14 13:15:53.384 UTC [580] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7879154Z  2026-02-14 13:15:53.384 UTC [580] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7879496Z  2026-02-14 13:15:53.385 UTC [580] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7879959Z  2026-02-14 13:15:53.385 UTC [580] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7880413Z  2026-02-14 13:15:53.385 UTC [580] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7881120Z  2026-02-14 13:15:53.385 UTC [580] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7881452Z  2026-02-14 13:15:53.386 UTC [580] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7882102Z  2026-02-14 13:15:53.386 UTC [580] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7882523Z  2026-02-14 13:15:53.386 UTC [580] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7882974Z  2026-02-14 13:15:53.386 UTC [580] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7883289Z  2026-02-14 13:15:53.387 UTC [580] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7883881Z  2026-02-14 13:15:53.387 UTC [580] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7884204Z  2026-02-14 13:15:53.388 UTC [580] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7884860Z  2026-02-14 13:15:53.388 UTC [580] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7885193Z  2026-02-14 13:15:53.388 UTC [580] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7885822Z  2026-02-14 13:15:53.388 UTC [580] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7886067Z  2026-02-14 13:15:53.392 UTC [580] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7886571Z  2026-02-14 13:15:53.392 UTC [580] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7886778Z  2026-02-14 13:15:53.750 UTC [581] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7886960Z  2026-02-14 13:15:53.891 UTC [586] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7887117Z  2026-02-14 13:15:53.891 UTC [586] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7887177Z  	DO $$
2026-02-14T13:16:24.7887242Z  	BEGIN
2026-02-14T13:16:24.7887392Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7887505Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7887630Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7887743Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7887803Z  	    END IF;
2026-02-14T13:16:24.7887861Z  	END $$;
2026-02-14T13:16:24.7888092Z  2026-02-14 13:15:53.901 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7888820Z  2026-02-14 13:15:53.901 UTC [586] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7889048Z  2026-02-14 13:15:53.901 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7889578Z  2026-02-14 13:15:53.901 UTC [586] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7889799Z  2026-02-14 13:15:53.902 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7890181Z  2026-02-14 13:15:53.902 UTC [586] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7890392Z  2026-02-14 13:15:53.902 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7890781Z  2026-02-14 13:15:53.902 UTC [586] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7891099Z  2026-02-14 13:15:53.903 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7891485Z  2026-02-14 13:15:53.903 UTC [586] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7891701Z  2026-02-14 13:15:53.904 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7892137Z  2026-02-14 13:15:53.904 UTC [586] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7892348Z  2026-02-14 13:15:53.904 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7892712Z  2026-02-14 13:15:53.904 UTC [586] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7892927Z  2026-02-14 13:15:53.904 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7893267Z  2026-02-14 13:15:53.904 UTC [586] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7893486Z  2026-02-14 13:15:53.905 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7893978Z  2026-02-14 13:15:53.905 UTC [586] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7894192Z  2026-02-14 13:15:53.905 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7894562Z  2026-02-14 13:15:53.905 UTC [586] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7894771Z  2026-02-14 13:15:53.906 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7895200Z  2026-02-14 13:15:53.906 UTC [586] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7895417Z  2026-02-14 13:15:53.906 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7895867Z  2026-02-14 13:15:53.906 UTC [586] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7896084Z  2026-02-14 13:15:53.907 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7896539Z  2026-02-14 13:15:53.907 UTC [586] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7896750Z  2026-02-14 13:15:53.907 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7897029Z  2026-02-14 13:15:53.907 UTC [586] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7897148Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7897363Z  2026-02-14 13:15:53.908 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7897733Z  2026-02-14 13:15:53.908 UTC [586] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7897853Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7898064Z  2026-02-14 13:15:53.908 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7898328Z  2026-02-14 13:15:53.908 UTC [586] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7898448Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7898534Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7898751Z  2026-02-14 13:15:53.909 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7899154Z  2026-02-14 13:15:53.909 UTC [586] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7899417Z  2026-02-14 13:15:53.909 UTC [586] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7899765Z  2026-02-14 13:15:53.909 UTC [586] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7900094Z  2026-02-14 13:15:53.911 UTC [586] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7900501Z  2026-02-14 13:15:53.911 UTC [586] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7900783Z  2026-02-14 13:15:53.912 UTC [586] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7901246Z  2026-02-14 13:15:53.912 UTC [586] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7901588Z  2026-02-14 13:15:53.913 UTC [586] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7902097Z  2026-02-14 13:15:53.913 UTC [586] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7902437Z  2026-02-14 13:15:53.913 UTC [586] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7902898Z  2026-02-14 13:15:53.913 UTC [586] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7903222Z  2026-02-14 13:15:53.914 UTC [586] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7904032Z  2026-02-14 13:15:53.914 UTC [586] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7904362Z  2026-02-14 13:15:53.914 UTC [586] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7905018Z  2026-02-14 13:15:53.914 UTC [586] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7905355Z  2026-02-14 13:15:53.915 UTC [586] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7905800Z  2026-02-14 13:15:53.915 UTC [586] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7906122Z  2026-02-14 13:15:53.915 UTC [586] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7906667Z  2026-02-14 13:15:53.915 UTC [586] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7906990Z  2026-02-14 13:15:53.916 UTC [586] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7907645Z  2026-02-14 13:15:53.916 UTC [586] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7907969Z  2026-02-14 13:15:53.916 UTC [586] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7908727Z  2026-02-14 13:15:53.916 UTC [586] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7908979Z  2026-02-14 13:15:53.921 UTC [586] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7909483Z  2026-02-14 13:15:53.921 UTC [586] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7909695Z  2026-02-14 13:15:54.278 UTC [587] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7909868Z  2026-02-14 13:15:54.418 UTC [592] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7910024Z  2026-02-14 13:15:54.418 UTC [592] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7910091Z  	DO $$
2026-02-14T13:16:24.7910153Z  	BEGIN
2026-02-14T13:16:24.7910309Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7910425Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7910544Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7910662Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7910728Z  	    END IF;
2026-02-14T13:16:24.7910787Z  	END $$;
2026-02-14T13:16:24.7911012Z  2026-02-14 13:15:54.430 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7911758Z  2026-02-14 13:15:54.430 UTC [592] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7911980Z  2026-02-14 13:15:54.430 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7912408Z  2026-02-14 13:15:54.430 UTC [592] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7912628Z  2026-02-14 13:15:54.431 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7913005Z  2026-02-14 13:15:54.431 UTC [592] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7913219Z  2026-02-14 13:15:54.432 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7913701Z  2026-02-14 13:15:54.432 UTC [592] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7913917Z  2026-02-14 13:15:54.432 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7914303Z  2026-02-14 13:15:54.432 UTC [592] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7914522Z  2026-02-14 13:15:54.433 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7915055Z  2026-02-14 13:15:54.433 UTC [592] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7915280Z  2026-02-14 13:15:54.433 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7915644Z  2026-02-14 13:15:54.433 UTC [592] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7915858Z  2026-02-14 13:15:54.434 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7916202Z  2026-02-14 13:15:54.434 UTC [592] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7916414Z  2026-02-14 13:15:54.434 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7916901Z  2026-02-14 13:15:54.434 UTC [592] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7917120Z  2026-02-14 13:15:54.435 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7917487Z  2026-02-14 13:15:54.435 UTC [592] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7917704Z  2026-02-14 13:15:54.435 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7918133Z  2026-02-14 13:15:54.435 UTC [592] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7918347Z  2026-02-14 13:15:54.436 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7918795Z  2026-02-14 13:15:54.436 UTC [592] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7919007Z  2026-02-14 13:15:54.436 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7919465Z  2026-02-14 13:15:54.436 UTC [592] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7919681Z  2026-02-14 13:15:54.437 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7919956Z  2026-02-14 13:15:54.437 UTC [592] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7920071Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7920289Z  2026-02-14 13:15:54.437 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7920544Z  2026-02-14 13:15:54.437 UTC [592] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7920662Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7920878Z  2026-02-14 13:15:54.438 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7921136Z  2026-02-14 13:15:54.438 UTC [592] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7921259Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7921344Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7921560Z  2026-02-14 13:15:54.438 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7921866Z  2026-02-14 13:15:54.438 UTC [592] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7922123Z  2026-02-14 13:15:54.439 UTC [592] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7922463Z  2026-02-14 13:15:54.439 UTC [592] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7922871Z  2026-02-14 13:15:54.441 UTC [592] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7923278Z  2026-02-14 13:15:54.441 UTC [592] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7923563Z  2026-02-14 13:15:54.442 UTC [592] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7924164Z  2026-02-14 13:15:54.442 UTC [592] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7924498Z  2026-02-14 13:15:54.443 UTC [592] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7925121Z  2026-02-14 13:15:54.443 UTC [592] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7925471Z  2026-02-14 13:15:54.443 UTC [592] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7925936Z  2026-02-14 13:15:54.443 UTC [592] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7926266Z  2026-02-14 13:15:54.444 UTC [592] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7926969Z  2026-02-14 13:15:54.444 UTC [592] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7927297Z  2026-02-14 13:15:54.444 UTC [592] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7927959Z  2026-02-14 13:15:54.444 UTC [592] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7928277Z  2026-02-14 13:15:54.445 UTC [592] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7928718Z  2026-02-14 13:15:54.445 UTC [592] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7929030Z  2026-02-14 13:15:54.446 UTC [592] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7929468Z  2026-02-14 13:15:54.446 UTC [592] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7929797Z  2026-02-14 13:15:54.446 UTC [592] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7930449Z  2026-02-14 13:15:54.446 UTC [592] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7930769Z  2026-02-14 13:15:54.447 UTC [592] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7931397Z  2026-02-14 13:15:54.447 UTC [592] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7931642Z  2026-02-14 13:15:54.452 UTC [592] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7932152Z  2026-02-14 13:15:54.452 UTC [592] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7932390Z  2026-02-14 13:15:54.477 UTC [601] FATAL:  role "root" does not exist
2026-02-14T13:16:24.7932595Z  2026-02-14 13:15:54.811 UTC [600] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7932771Z  2026-02-14 13:15:54.946 UTC [606] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7932925Z  2026-02-14 13:15:54.946 UTC [606] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7932986Z  	DO $$
2026-02-14T13:16:24.7933051Z  	BEGIN
2026-02-14T13:16:24.7933199Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7933313Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7933437Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7933727Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7933789Z  	    END IF;
2026-02-14T13:16:24.7933852Z  	END $$;
2026-02-14T13:16:24.7934084Z  2026-02-14 13:15:54.955 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7934815Z  2026-02-14 13:15:54.955 UTC [606] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7935040Z  2026-02-14 13:15:54.955 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7935475Z  2026-02-14 13:15:54.955 UTC [606] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7935691Z  2026-02-14 13:15:54.956 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7936075Z  2026-02-14 13:15:54.956 UTC [606] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7936289Z  2026-02-14 13:15:54.956 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7936683Z  2026-02-14 13:15:54.956 UTC [606] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7936896Z  2026-02-14 13:15:54.957 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7937277Z  2026-02-14 13:15:54.957 UTC [606] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7937492Z  2026-02-14 13:15:54.957 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7937921Z  2026-02-14 13:15:54.957 UTC [606] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7938140Z  2026-02-14 13:15:54.958 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7938512Z  2026-02-14 13:15:54.958 UTC [606] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7938726Z  2026-02-14 13:15:54.958 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7939068Z  2026-02-14 13:15:54.958 UTC [606] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7939286Z  2026-02-14 13:15:54.959 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7939668Z  2026-02-14 13:15:54.959 UTC [606] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7939888Z  2026-02-14 13:15:54.959 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7940252Z  2026-02-14 13:15:54.959 UTC [606] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7940572Z  2026-02-14 13:15:54.960 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7941003Z  2026-02-14 13:15:54.960 UTC [606] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7941216Z  2026-02-14 13:15:54.960 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7941660Z  2026-02-14 13:15:54.960 UTC [606] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7941876Z  2026-02-14 13:15:54.961 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7942425Z  2026-02-14 13:15:54.961 UTC [606] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7942640Z  2026-02-14 13:15:54.961 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7942919Z  2026-02-14 13:15:54.961 UTC [606] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7943037Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7943252Z  2026-02-14 13:15:54.962 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7943513Z  2026-02-14 13:15:54.962 UTC [606] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7943720Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7943941Z  2026-02-14 13:15:54.962 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7944201Z  2026-02-14 13:15:54.962 UTC [606] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7944319Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7944410Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7944623Z  2026-02-14 13:15:54.963 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7944923Z  2026-02-14 13:15:54.963 UTC [606] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7945191Z  2026-02-14 13:15:54.963 UTC [606] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7945533Z  2026-02-14 13:15:54.963 UTC [606] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7945860Z  2026-02-14 13:15:54.965 UTC [606] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7946271Z  2026-02-14 13:15:54.965 UTC [606] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7946561Z  2026-02-14 13:15:54.966 UTC [606] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7947021Z  2026-02-14 13:15:54.966 UTC [606] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7947352Z  2026-02-14 13:15:54.967 UTC [606] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7947860Z  2026-02-14 13:15:54.967 UTC [606] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7948202Z  2026-02-14 13:15:54.967 UTC [606] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7948782Z  2026-02-14 13:15:54.967 UTC [606] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7949110Z  2026-02-14 13:15:54.968 UTC [606] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7949812Z  2026-02-14 13:15:54.968 UTC [606] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7950134Z  2026-02-14 13:15:54.968 UTC [606] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7950783Z  2026-02-14 13:15:54.968 UTC [606] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7951202Z  2026-02-14 13:15:54.969 UTC [606] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7951643Z  2026-02-14 13:15:54.969 UTC [606] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7951960Z  2026-02-14 13:15:54.969 UTC [606] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7952394Z  2026-02-14 13:15:54.969 UTC [606] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7952715Z  2026-02-14 13:15:54.970 UTC [606] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7953368Z  2026-02-14 13:15:54.970 UTC [606] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7953791Z  2026-02-14 13:15:54.970 UTC [606] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7954414Z  2026-02-14 13:15:54.970 UTC [606] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7954656Z  2026-02-14 13:15:54.975 UTC [606] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7955158Z  2026-02-14 13:15:54.975 UTC [606] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7955377Z  2026-02-14 13:15:55.333 UTC [607] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7955550Z  2026-02-14 13:15:55.472 UTC [612] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7955706Z  2026-02-14 13:15:55.472 UTC [612] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7955770Z  	DO $$
2026-02-14T13:16:24.7955828Z  	BEGIN
2026-02-14T13:16:24.7955978Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7956096Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7956215Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7956330Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7956395Z  	    END IF;
2026-02-14T13:16:24.7956454Z  	END $$;
2026-02-14T13:16:24.7956678Z  2026-02-14 13:15:55.481 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7957424Z  2026-02-14 13:15:55.481 UTC [612] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7957759Z  2026-02-14 13:15:55.481 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7958187Z  2026-02-14 13:15:55.481 UTC [612] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7958405Z  2026-02-14 13:15:55.482 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7958786Z  2026-02-14 13:15:55.482 UTC [612] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7959018Z  2026-02-14 13:15:55.482 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7959503Z  2026-02-14 13:15:55.482 UTC [612] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7959716Z  2026-02-14 13:15:55.483 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7960104Z  2026-02-14 13:15:55.483 UTC [612] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7960317Z  2026-02-14 13:15:55.483 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7960745Z  2026-02-14 13:15:55.483 UTC [612] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7960964Z  2026-02-14 13:15:55.484 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7961327Z  2026-02-14 13:15:55.484 UTC [612] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7961542Z  2026-02-14 13:15:55.484 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7961887Z  2026-02-14 13:15:55.484 UTC [612] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7962101Z  2026-02-14 13:15:55.485 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7962496Z  2026-02-14 13:15:55.485 UTC [612] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7962712Z  2026-02-14 13:15:55.485 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7963079Z  2026-02-14 13:15:55.485 UTC [612] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7963298Z  2026-02-14 13:15:55.486 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7963826Z  2026-02-14 13:15:55.486 UTC [612] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7964058Z  2026-02-14 13:15:55.486 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7964517Z  2026-02-14 13:15:55.486 UTC [612] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7964733Z  2026-02-14 13:15:55.487 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7965191Z  2026-02-14 13:15:55.487 UTC [612] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7965418Z  2026-02-14 13:15:55.487 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7965700Z  2026-02-14 13:15:55.487 UTC [612] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7965821Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7966143Z  2026-02-14 13:15:55.487 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7966397Z  2026-02-14 13:15:55.487 UTC [612] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7966519Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7966730Z  2026-02-14 13:15:55.488 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7966992Z  2026-02-14 13:15:55.488 UTC [612] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7967117Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7967300Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7967512Z  2026-02-14 13:15:55.488 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7967812Z  2026-02-14 13:15:55.488 UTC [612] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7968075Z  2026-02-14 13:15:55.489 UTC [612] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7968422Z  2026-02-14 13:15:55.489 UTC [612] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7968755Z  2026-02-14 13:15:55.491 UTC [612] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7969163Z  2026-02-14 13:15:55.491 UTC [612] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7969451Z  2026-02-14 13:15:55.492 UTC [612] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7969918Z  2026-02-14 13:15:55.492 UTC [612] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7970254Z  2026-02-14 13:15:55.492 UTC [612] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7970772Z  2026-02-14 13:15:55.492 UTC [612] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7971112Z  2026-02-14 13:15:55.493 UTC [612] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7971569Z  2026-02-14 13:15:55.493 UTC [612] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7971945Z  2026-02-14 13:15:55.493 UTC [612] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7972668Z  2026-02-14 13:15:55.493 UTC [612] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7973004Z  2026-02-14 13:15:55.494 UTC [612] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7973742Z  2026-02-14 13:15:55.494 UTC [612] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7974066Z  2026-02-14 13:15:55.494 UTC [612] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7974515Z  2026-02-14 13:15:55.494 UTC [612] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7974970Z  2026-02-14 13:15:55.495 UTC [612] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7975414Z  2026-02-14 13:15:55.495 UTC [612] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7975736Z  2026-02-14 13:15:55.495 UTC [612] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7976386Z  2026-02-14 13:15:55.495 UTC [612] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7976718Z  2026-02-14 13:15:55.496 UTC [612] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7977444Z  2026-02-14 13:15:55.496 UTC [612] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.7977692Z  2026-02-14 13:15:55.500 UTC [612] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.7978200Z  2026-02-14 13:15:55.500 UTC [612] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.7978405Z  2026-02-14 13:15:55.856 UTC [613] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.7978579Z  2026-02-14 13:15:55.988 UTC [618] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.7978739Z  2026-02-14 13:15:55.988 UTC [618] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.7978803Z  	DO $$
2026-02-14T13:16:24.7978862Z  	BEGIN
2026-02-14T13:16:24.7979015Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.7979125Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.7979249Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.7979370Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.7979429Z  	    END IF;
2026-02-14T13:16:24.7979486Z  	END $$;
2026-02-14T13:16:24.7979713Z  2026-02-14 13:15:55.997 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7980447Z  2026-02-14 13:15:55.997 UTC [618] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.7980666Z  2026-02-14 13:15:55.997 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7981097Z  2026-02-14 13:15:55.997 UTC [618] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.7981314Z  2026-02-14 13:15:55.998 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7981699Z  2026-02-14 13:15:55.998 UTC [618] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.7981910Z  2026-02-14 13:15:55.998 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7982297Z  2026-02-14 13:15:55.998 UTC [618] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.7982516Z  2026-02-14 13:15:55.999 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7982900Z  2026-02-14 13:15:55.999 UTC [618] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.7983115Z  2026-02-14 13:15:55.999 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7983745Z  2026-02-14 13:15:55.999 UTC [618] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.7983968Z  2026-02-14 13:15:56.000 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7984334Z  2026-02-14 13:15:56.000 UTC [618] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.7984552Z  2026-02-14 13:15:56.000 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7984894Z  2026-02-14 13:15:56.000 UTC [618] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.7985215Z  2026-02-14 13:15:56.000 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7985609Z  2026-02-14 13:15:56.000 UTC [618] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.7985822Z  2026-02-14 13:15:56.001 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7986195Z  2026-02-14 13:15:56.001 UTC [618] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.7986404Z  2026-02-14 13:15:56.001 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7986831Z  2026-02-14 13:15:56.001 UTC [618] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.7987052Z  2026-02-14 13:15:56.002 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7987497Z  2026-02-14 13:15:56.002 UTC [618] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.7987712Z  2026-02-14 13:15:56.002 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7988172Z  2026-02-14 13:15:56.002 UTC [618] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.7988383Z  2026-02-14 13:15:56.003 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7988663Z  2026-02-14 13:15:56.003 UTC [618] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.7988779Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.7988996Z  2026-02-14 13:15:56.003 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7989255Z  2026-02-14 13:15:56.003 UTC [618] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.7989374Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.7989590Z  2026-02-14 13:15:56.004 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7989857Z  2026-02-14 13:15:56.004 UTC [618] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.7989977Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.7990063Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.7990288Z  2026-02-14 13:15:56.004 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.7990589Z  2026-02-14 13:15:56.004 UTC [618] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.7990850Z  2026-02-14 13:15:56.005 UTC [618] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.7991202Z  2026-02-14 13:15:56.005 UTC [618] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.7991623Z  2026-02-14 13:15:56.007 UTC [618] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7992027Z  2026-02-14 13:15:56.007 UTC [618] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.7992318Z  2026-02-14 13:15:56.008 UTC [618] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7992778Z  2026-02-14 13:15:56.008 UTC [618] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.7993193Z  2026-02-14 13:15:56.008 UTC [618] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7993800Z  2026-02-14 13:15:56.008 UTC [618] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.7994141Z  2026-02-14 13:15:56.009 UTC [618] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7994605Z  2026-02-14 13:15:56.009 UTC [618] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.7994935Z  2026-02-14 13:15:56.009 UTC [618] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7995652Z  2026-02-14 13:15:56.009 UTC [618] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.7995988Z  2026-02-14 13:15:56.010 UTC [618] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7996642Z  2026-02-14 13:15:56.010 UTC [618] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.7996965Z  2026-02-14 13:15:56.010 UTC [618] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7997407Z  2026-02-14 13:15:56.010 UTC [618] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7997724Z  2026-02-14 13:15:56.011 UTC [618] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7998172Z  2026-02-14 13:15:56.011 UTC [618] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.7998496Z  2026-02-14 13:15:56.011 UTC [618] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.7999156Z  2026-02-14 13:15:56.011 UTC [618] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.7999485Z  2026-02-14 13:15:56.012 UTC [618] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8000115Z  2026-02-14 13:15:56.012 UTC [618] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8000368Z  2026-02-14 13:15:56.016 UTC [618] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8000984Z  2026-02-14 13:15:56.016 UTC [618] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8001195Z  2026-02-14 13:15:56.367 UTC [619] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8001371Z  2026-02-14 13:15:56.508 UTC [623] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8001525Z  2026-02-14 13:15:56.508 UTC [623] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8001590Z  	DO $$
2026-02-14T13:16:24.8001649Z  	BEGIN
2026-02-14T13:16:24.8001799Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8001910Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8002135Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8002248Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8002306Z  	    END IF;
2026-02-14T13:16:24.8002368Z  	END $$;
2026-02-14T13:16:24.8002592Z  2026-02-14 13:15:56.517 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8003332Z  2026-02-14 13:15:56.517 UTC [623] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8003557Z  2026-02-14 13:15:56.518 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8004076Z  2026-02-14 13:15:56.518 UTC [623] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8004299Z  2026-02-14 13:15:56.518 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8004676Z  2026-02-14 13:15:56.518 UTC [623] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8004893Z  2026-02-14 13:15:56.519 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8005282Z  2026-02-14 13:15:56.519 UTC [623] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8005503Z  2026-02-14 13:15:56.519 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8005888Z  2026-02-14 13:15:56.519 UTC [623] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8006103Z  2026-02-14 13:15:56.520 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8006530Z  2026-02-14 13:15:56.520 UTC [623] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8006749Z  2026-02-14 13:15:56.520 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8007114Z  2026-02-14 13:15:56.520 UTC [623] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8007327Z  2026-02-14 13:15:56.521 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8007672Z  2026-02-14 13:15:56.521 UTC [623] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8007887Z  2026-02-14 13:15:56.521 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8008273Z  2026-02-14 13:15:56.521 UTC [623] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8008497Z  2026-02-14 13:15:56.522 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8008862Z  2026-02-14 13:15:56.522 UTC [623] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8009181Z  2026-02-14 13:15:56.522 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8009615Z  2026-02-14 13:15:56.522 UTC [623] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8009828Z  2026-02-14 13:15:56.523 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8010277Z  2026-02-14 13:15:56.523 UTC [623] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8010494Z  2026-02-14 13:15:56.524 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8011051Z  2026-02-14 13:15:56.524 UTC [623] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8011271Z  2026-02-14 13:15:56.524 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8011547Z  2026-02-14 13:15:56.524 UTC [623] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8011662Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8011883Z  2026-02-14 13:15:56.524 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8012137Z  2026-02-14 13:15:56.524 UTC [623] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8012253Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8012476Z  2026-02-14 13:15:56.525 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8012735Z  2026-02-14 13:15:56.525 UTC [623] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8012852Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8012943Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8013154Z  2026-02-14 13:15:56.525 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8013454Z  2026-02-14 13:15:56.525 UTC [623] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8013810Z  2026-02-14 13:15:56.526 UTC [623] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8014159Z  2026-02-14 13:15:56.526 UTC [623] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8014495Z  2026-02-14 13:15:56.528 UTC [623] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8014900Z  2026-02-14 13:15:56.528 UTC [623] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8015189Z  2026-02-14 13:15:56.529 UTC [623] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8015662Z  2026-02-14 13:15:56.529 UTC [623] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8015997Z  2026-02-14 13:15:56.529 UTC [623] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8016508Z  2026-02-14 13:15:56.529 UTC [623] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8016852Z  2026-02-14 13:15:56.530 UTC [623] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8017417Z  2026-02-14 13:15:56.530 UTC [623] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8017749Z  2026-02-14 13:15:56.530 UTC [623] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8018453Z  2026-02-14 13:15:56.530 UTC [623] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8018781Z  2026-02-14 13:15:56.531 UTC [623] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8019436Z  2026-02-14 13:15:56.531 UTC [623] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8019858Z  2026-02-14 13:15:56.531 UTC [623] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8020305Z  2026-02-14 13:15:56.531 UTC [623] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8020628Z  2026-02-14 13:15:56.532 UTC [623] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8021067Z  2026-02-14 13:15:56.532 UTC [623] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8021391Z  2026-02-14 13:15:56.532 UTC [623] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8022046Z  2026-02-14 13:15:56.532 UTC [623] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8022376Z  2026-02-14 13:15:56.533 UTC [623] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8023012Z  2026-02-14 13:15:56.533 UTC [623] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8023261Z  2026-02-14 13:15:56.537 UTC [623] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8023868Z  2026-02-14 13:15:56.537 UTC [623] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8024079Z  2026-02-14 13:15:56.893 UTC [624] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8024254Z  2026-02-14 13:15:57.028 UTC [629] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8024414Z  2026-02-14 13:15:57.028 UTC [629] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8024476Z  	DO $$
2026-02-14T13:16:24.8024534Z  	BEGIN
2026-02-14T13:16:24.8024688Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8024798Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8024915Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8025032Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8025089Z  	    END IF;
2026-02-14T13:16:24.8025147Z  	END $$;
2026-02-14T13:16:24.8025368Z  2026-02-14 13:15:57.036 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8026111Z  2026-02-14 13:15:57.036 UTC [629] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8026435Z  2026-02-14 13:15:57.037 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8026869Z  2026-02-14 13:15:57.037 UTC [629] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8027085Z  2026-02-14 13:15:57.037 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8027461Z  2026-02-14 13:15:57.037 UTC [629] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8027678Z  2026-02-14 13:15:57.038 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8028158Z  2026-02-14 13:15:57.038 UTC [629] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8028370Z  2026-02-14 13:15:57.038 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8028761Z  2026-02-14 13:15:57.038 UTC [629] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8028974Z  2026-02-14 13:15:57.039 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8029413Z  2026-02-14 13:15:57.039 UTC [629] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8029623Z  2026-02-14 13:15:57.039 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8029985Z  2026-02-14 13:15:57.039 UTC [629] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8030208Z  2026-02-14 13:15:57.040 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8030552Z  2026-02-14 13:15:57.040 UTC [629] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8030768Z  2026-02-14 13:15:57.040 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8031163Z  2026-02-14 13:15:57.040 UTC [629] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8031377Z  2026-02-14 13:15:57.041 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8031745Z  2026-02-14 13:15:57.041 UTC [629] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8031969Z  2026-02-14 13:15:57.041 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8032397Z  2026-02-14 13:15:57.041 UTC [629] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8032613Z  2026-02-14 13:15:57.042 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8033055Z  2026-02-14 13:15:57.042 UTC [629] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8033270Z  2026-02-14 13:15:57.042 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8033822Z  2026-02-14 13:15:57.042 UTC [629] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8034039Z  2026-02-14 13:15:57.043 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8034314Z  2026-02-14 13:15:57.043 UTC [629] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8034430Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8034766Z  2026-02-14 13:15:57.043 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8035022Z  2026-02-14 13:15:57.043 UTC [629] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8035145Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8035356Z  2026-02-14 13:15:57.044 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8035618Z  2026-02-14 13:15:57.044 UTC [629] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8035742Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8035926Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8036146Z  2026-02-14 13:15:57.044 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8036454Z  2026-02-14 13:15:57.044 UTC [629] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8036712Z  2026-02-14 13:15:57.045 UTC [629] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8037063Z  2026-02-14 13:15:57.045 UTC [629] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8037389Z  2026-02-14 13:15:57.047 UTC [629] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8037792Z  2026-02-14 13:15:57.047 UTC [629] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8038089Z  2026-02-14 13:15:57.048 UTC [629] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8038550Z  2026-02-14 13:15:57.048 UTC [629] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8038890Z  2026-02-14 13:15:57.048 UTC [629] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8039405Z  2026-02-14 13:15:57.048 UTC [629] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8039744Z  2026-02-14 13:15:57.049 UTC [629] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8040210Z  2026-02-14 13:15:57.049 UTC [629] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8040542Z  2026-02-14 13:15:57.049 UTC [629] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8041247Z  2026-02-14 13:15:57.049 UTC [629] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8041579Z  2026-02-14 13:15:57.050 UTC [629] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8042228Z  2026-02-14 13:15:57.050 UTC [629] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8042544Z  2026-02-14 13:15:57.050 UTC [629] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8042993Z  2026-02-14 13:15:57.050 UTC [629] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8043418Z  2026-02-14 13:15:57.051 UTC [629] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8043961Z  2026-02-14 13:15:57.051 UTC [629] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8044285Z  2026-02-14 13:15:57.051 UTC [629] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8044936Z  2026-02-14 13:15:57.051 UTC [629] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8045267Z  2026-02-14 13:15:57.052 UTC [629] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8046004Z  2026-02-14 13:15:57.052 UTC [629] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8046255Z  2026-02-14 13:15:57.056 UTC [629] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8046761Z  2026-02-14 13:15:57.056 UTC [629] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8046962Z  2026-02-14 13:15:57.411 UTC [630] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8047139Z  2026-02-14 13:15:57.552 UTC [635] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8047294Z  2026-02-14 13:15:57.552 UTC [635] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8047356Z  	DO $$
2026-02-14T13:16:24.8047418Z  	BEGIN
2026-02-14T13:16:24.8047567Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8047676Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8047802Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8047917Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8047976Z  	    END IF;
2026-02-14T13:16:24.8048040Z  	END $$;
2026-02-14T13:16:24.8048263Z  2026-02-14 13:15:57.561 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8048996Z  2026-02-14 13:15:57.561 UTC [635] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8049220Z  2026-02-14 13:15:57.561 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8049647Z  2026-02-14 13:15:57.561 UTC [635] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8049868Z  2026-02-14 13:15:57.562 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8050251Z  2026-02-14 13:15:57.562 UTC [635] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8050466Z  2026-02-14 13:15:57.562 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8050856Z  2026-02-14 13:15:57.562 UTC [635] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8051073Z  2026-02-14 13:15:57.563 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8051460Z  2026-02-14 13:15:57.563 UTC [635] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8051679Z  2026-02-14 13:15:57.563 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8052211Z  2026-02-14 13:15:57.563 UTC [635] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8052428Z  2026-02-14 13:15:57.564 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8052799Z  2026-02-14 13:15:57.564 UTC [635] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8053012Z  2026-02-14 13:15:57.564 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8053354Z  2026-02-14 13:15:57.564 UTC [635] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8053756Z  2026-02-14 13:15:57.565 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8054147Z  2026-02-14 13:15:57.565 UTC [635] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8054358Z  2026-02-14 13:15:57.565 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8054734Z  2026-02-14 13:15:57.565 UTC [635] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8054948Z  2026-02-14 13:15:57.566 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8055380Z  2026-02-14 13:15:57.566 UTC [635] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8055604Z  2026-02-14 13:15:57.566 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8056049Z  2026-02-14 13:15:57.566 UTC [635] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8056271Z  2026-02-14 13:15:57.567 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8056732Z  2026-02-14 13:15:57.567 UTC [635] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8056947Z  2026-02-14 13:15:57.567 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8057225Z  2026-02-14 13:15:57.567 UTC [635] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8057341Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8057560Z  2026-02-14 13:15:57.568 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8057819Z  2026-02-14 13:15:57.568 UTC [635] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8057938Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8058156Z  2026-02-14 13:15:57.568 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8058422Z  2026-02-14 13:15:57.568 UTC [635] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8058542Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8058634Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8058847Z  2026-02-14 13:15:57.569 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8059144Z  2026-02-14 13:15:57.569 UTC [635] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8059411Z  2026-02-14 13:15:57.569 UTC [635] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8059757Z  2026-02-14 13:15:57.569 UTC [635] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8060197Z  2026-02-14 13:15:57.571 UTC [635] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8060608Z  2026-02-14 13:15:57.571 UTC [635] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8060895Z  2026-02-14 13:15:57.572 UTC [635] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8061358Z  2026-02-14 13:15:57.572 UTC [635] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8061797Z  2026-02-14 13:15:57.573 UTC [635] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8062313Z  2026-02-14 13:15:57.573 UTC [635] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8062656Z  2026-02-14 13:15:57.573 UTC [635] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8063110Z  2026-02-14 13:15:57.573 UTC [635] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8063433Z  2026-02-14 13:15:57.574 UTC [635] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8064241Z  2026-02-14 13:15:57.574 UTC [635] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8064572Z  2026-02-14 13:15:57.574 UTC [635] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8065230Z  2026-02-14 13:15:57.574 UTC [635] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8065562Z  2026-02-14 13:15:57.575 UTC [635] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8066006Z  2026-02-14 13:15:57.575 UTC [635] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8066325Z  2026-02-14 13:15:57.575 UTC [635] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8066763Z  2026-02-14 13:15:57.575 UTC [635] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8067086Z  2026-02-14 13:15:57.575 UTC [635] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8067744Z  2026-02-14 13:15:57.575 UTC [635] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8068068Z  2026-02-14 13:15:57.576 UTC [635] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8068698Z  2026-02-14 13:15:57.576 UTC [635] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8068948Z  2026-02-14 13:15:57.580 UTC [635] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8069563Z  2026-02-14 13:15:57.580 UTC [635] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8069780Z  2026-02-14 13:15:57.935 UTC [636] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8069955Z  2026-02-14 13:15:58.069 UTC [641] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8070110Z  2026-02-14 13:15:58.069 UTC [641] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8070175Z  	DO $$
2026-02-14T13:16:24.8070233Z  	BEGIN
2026-02-14T13:16:24.8070380Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8070496Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8070711Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8070823Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8070886Z  	    END IF;
2026-02-14T13:16:24.8070944Z  	END $$;
2026-02-14T13:16:24.8071170Z  2026-02-14 13:15:58.077 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8071937Z  2026-02-14 13:15:58.077 UTC [641] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8072157Z  2026-02-14 13:15:58.078 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8072577Z  2026-02-14 13:15:58.078 UTC [641] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8072796Z  2026-02-14 13:15:58.078 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8073173Z  2026-02-14 13:15:58.078 UTC [641] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8073395Z  2026-02-14 13:15:58.079 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8073879Z  2026-02-14 13:15:58.079 UTC [641] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8074108Z  2026-02-14 13:15:58.079 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8074501Z  2026-02-14 13:15:58.079 UTC [641] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8074718Z  2026-02-14 13:15:58.080 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8075153Z  2026-02-14 13:15:58.080 UTC [641] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8075373Z  2026-02-14 13:15:58.080 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8075750Z  2026-02-14 13:15:58.080 UTC [641] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8075965Z  2026-02-14 13:15:58.081 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8076307Z  2026-02-14 13:15:58.081 UTC [641] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8076521Z  2026-02-14 13:15:58.081 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8076906Z  2026-02-14 13:15:58.081 UTC [641] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8077125Z  2026-02-14 13:15:58.082 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8077487Z  2026-02-14 13:15:58.082 UTC [641] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8077814Z  2026-02-14 13:15:58.082 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8078245Z  2026-02-14 13:15:58.082 UTC [641] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8078460Z  2026-02-14 13:15:58.083 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8078912Z  2026-02-14 13:15:58.083 UTC [641] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8079124Z  2026-02-14 13:15:58.083 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8079676Z  2026-02-14 13:15:58.083 UTC [641] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8079897Z  2026-02-14 13:15:58.084 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8080171Z  2026-02-14 13:15:58.084 UTC [641] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8080285Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8080507Z  2026-02-14 13:15:58.084 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8080762Z  2026-02-14 13:15:58.084 UTC [641] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8080881Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8081096Z  2026-02-14 13:15:58.085 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8081357Z  2026-02-14 13:15:58.085 UTC [641] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8081481Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8081568Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8081787Z  2026-02-14 13:15:58.085 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8082091Z  2026-02-14 13:15:58.085 UTC [641] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8082356Z  2026-02-14 13:15:58.086 UTC [641] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8082698Z  2026-02-14 13:15:58.086 UTC [641] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8083030Z  2026-02-14 13:15:58.088 UTC [641] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8083438Z  2026-02-14 13:15:58.088 UTC [641] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8083840Z  2026-02-14 13:15:58.089 UTC [641] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8084311Z  2026-02-14 13:15:58.089 UTC [641] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8084647Z  2026-02-14 13:15:58.089 UTC [641] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8085159Z  2026-02-14 13:15:58.089 UTC [641] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8085510Z  2026-02-14 13:15:58.090 UTC [641] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8086075Z  2026-02-14 13:15:58.090 UTC [641] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8086410Z  2026-02-14 13:15:58.090 UTC [641] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8087120Z  2026-02-14 13:15:58.090 UTC [641] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8087456Z  2026-02-14 13:15:58.091 UTC [641] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8088120Z  2026-02-14 13:15:58.091 UTC [641] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8088541Z  2026-02-14 13:15:58.091 UTC [641] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8088997Z  2026-02-14 13:15:58.091 UTC [641] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8089317Z  2026-02-14 13:15:58.092 UTC [641] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8089749Z  2026-02-14 13:15:58.092 UTC [641] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8090071Z  2026-02-14 13:15:58.092 UTC [641] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8090736Z  2026-02-14 13:15:58.092 UTC [641] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8091068Z  2026-02-14 13:15:58.093 UTC [641] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8091693Z  2026-02-14 13:15:58.093 UTC [641] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8091937Z  2026-02-14 13:15:58.097 UTC [641] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8092445Z  2026-02-14 13:15:58.097 UTC [641] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8092654Z  2026-02-14 13:15:58.456 UTC [642] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8092822Z  2026-02-14 13:15:58.593 UTC [647] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8092981Z  2026-02-14 13:15:58.593 UTC [647] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8093041Z  	DO $$
2026-02-14T13:16:24.8093099Z  	BEGIN
2026-02-14T13:16:24.8093251Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8093366Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8093488Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8093702Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8093764Z  	    END IF;
2026-02-14T13:16:24.8093823Z  	END $$;
2026-02-14T13:16:24.8094052Z  2026-02-14 13:15:58.602 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8094795Z  2026-02-14 13:15:58.602 UTC [647] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8095119Z  2026-02-14 13:15:58.603 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8095561Z  2026-02-14 13:15:58.603 UTC [647] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8095777Z  2026-02-14 13:15:58.603 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8096158Z  2026-02-14 13:15:58.603 UTC [647] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8096375Z  2026-02-14 13:15:58.604 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8096859Z  2026-02-14 13:15:58.604 UTC [647] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8097082Z  2026-02-14 13:15:58.604 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8097464Z  2026-02-14 13:15:58.604 UTC [647] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8097680Z  2026-02-14 13:15:58.605 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8098117Z  2026-02-14 13:15:58.605 UTC [647] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8098332Z  2026-02-14 13:15:58.605 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8098695Z  2026-02-14 13:15:58.605 UTC [647] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8098921Z  2026-02-14 13:15:58.606 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8099261Z  2026-02-14 13:15:58.606 UTC [647] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8099480Z  2026-02-14 13:15:58.606 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8099865Z  2026-02-14 13:15:58.606 UTC [647] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8100077Z  2026-02-14 13:15:58.606 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8100448Z  2026-02-14 13:15:58.606 UTC [647] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8100664Z  2026-02-14 13:15:58.607 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8101088Z  2026-02-14 13:15:58.607 UTC [647] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8101309Z  2026-02-14 13:15:58.607 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8101752Z  2026-02-14 13:15:58.607 UTC [647] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8101963Z  2026-02-14 13:15:58.608 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8102424Z  2026-02-14 13:15:58.608 UTC [647] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8102640Z  2026-02-14 13:15:58.608 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8102923Z  2026-02-14 13:15:58.608 UTC [647] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8103034Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8103326Z  2026-02-14 13:15:58.609 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8103588Z  2026-02-14 13:15:58.609 UTC [647] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8103799Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8104010Z  2026-02-14 13:15:58.609 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8104275Z  2026-02-14 13:15:58.609 UTC [647] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8104395Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8104618Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8104836Z  2026-02-14 13:15:58.610 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8105141Z  2026-02-14 13:15:58.610 UTC [647] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8105400Z  2026-02-14 13:15:58.610 UTC [647] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8105750Z  2026-02-14 13:15:58.610 UTC [647] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8106083Z  2026-02-14 13:15:58.612 UTC [647] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8106492Z  2026-02-14 13:15:58.612 UTC [647] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8106784Z  2026-02-14 13:15:58.613 UTC [647] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8107241Z  2026-02-14 13:15:58.613 UTC [647] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8107582Z  2026-02-14 13:15:58.614 UTC [647] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8108098Z  2026-02-14 13:15:58.614 UTC [647] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8108443Z  2026-02-14 13:15:58.614 UTC [647] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8108908Z  2026-02-14 13:15:58.614 UTC [647] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8109241Z  2026-02-14 13:15:58.615 UTC [647] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8109944Z  2026-02-14 13:15:58.615 UTC [647] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8110283Z  2026-02-14 13:15:58.615 UTC [647] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8110935Z  2026-02-14 13:15:58.615 UTC [647] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8111260Z  2026-02-14 13:15:58.616 UTC [647] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8111707Z  2026-02-14 13:15:58.616 UTC [647] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8112120Z  2026-02-14 13:15:58.616 UTC [647] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8112569Z  2026-02-14 13:15:58.616 UTC [647] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8112891Z  2026-02-14 13:15:58.617 UTC [647] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8113555Z  2026-02-14 13:15:58.617 UTC [647] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8114072Z  2026-02-14 13:15:58.617 UTC [647] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8114702Z  2026-02-14 13:15:58.617 UTC [647] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8114955Z  2026-02-14 13:15:58.622 UTC [647] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8115469Z  2026-02-14 13:15:58.622 UTC [647] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8115681Z  2026-02-14 13:15:58.669 UTC [648] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8115860Z  2026-02-14 13:15:58.801 UTC [653] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8116014Z  2026-02-14 13:15:58.801 UTC [653] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8116077Z  	DO $$
2026-02-14T13:16:24.8116144Z  	BEGIN
2026-02-14T13:16:24.8116292Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8116403Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8116530Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8116643Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8116701Z  	    END IF;
2026-02-14T13:16:24.8116767Z  	END $$;
2026-02-14T13:16:24.8116991Z  2026-02-14 13:15:58.811 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8117725Z  2026-02-14 13:15:58.811 UTC [653] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8117950Z  2026-02-14 13:15:58.811 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8118376Z  2026-02-14 13:15:58.811 UTC [653] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8118595Z  2026-02-14 13:15:58.811 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8118975Z  2026-02-14 13:15:58.811 UTC [653] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8119188Z  2026-02-14 13:15:58.812 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8119573Z  2026-02-14 13:15:58.812 UTC [653] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8119787Z  2026-02-14 13:15:58.812 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8120172Z  2026-02-14 13:15:58.812 UTC [653] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8120391Z  2026-02-14 13:15:58.813 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8120925Z  2026-02-14 13:15:58.813 UTC [653] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8121140Z  2026-02-14 13:15:58.813 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8121511Z  2026-02-14 13:15:58.813 UTC [653] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8121722Z  2026-02-14 13:15:58.814 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8122066Z  2026-02-14 13:15:58.814 UTC [653] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8122378Z  2026-02-14 13:15:58.814 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8122769Z  2026-02-14 13:15:58.814 UTC [653] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8122987Z  2026-02-14 13:15:58.815 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8123357Z  2026-02-14 13:15:58.815 UTC [653] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8123572Z  2026-02-14 13:15:58.815 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8124100Z  2026-02-14 13:15:58.815 UTC [653] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8124319Z  2026-02-14 13:15:58.816 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8124760Z  2026-02-14 13:15:58.816 UTC [653] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8124986Z  2026-02-14 13:15:58.816 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8125444Z  2026-02-14 13:15:58.816 UTC [653] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8125662Z  2026-02-14 13:15:58.817 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8125936Z  2026-02-14 13:15:58.817 UTC [653] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8126050Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8126271Z  2026-02-14 13:15:58.817 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8126523Z  2026-02-14 13:15:58.817 UTC [653] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8126637Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8126854Z  2026-02-14 13:15:58.818 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8127114Z  2026-02-14 13:15:58.818 UTC [653] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8127232Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8127321Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8127534Z  2026-02-14 13:15:58.818 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8127837Z  2026-02-14 13:15:58.818 UTC [653] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8128104Z  2026-02-14 13:15:58.819 UTC [653] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8128445Z  2026-02-14 13:15:58.819 UTC [653] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8128884Z  2026-02-14 13:15:58.821 UTC [653] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8129297Z  2026-02-14 13:15:58.821 UTC [653] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8129582Z  2026-02-14 13:15:58.822 UTC [653] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8130050Z  2026-02-14 13:15:58.822 UTC [653] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8130481Z  2026-02-14 13:15:58.822 UTC [653] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8130997Z  2026-02-14 13:15:58.822 UTC [653] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8131343Z  2026-02-14 13:15:58.823 UTC [653] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8131803Z  2026-02-14 13:15:58.823 UTC [653] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8132128Z  2026-02-14 13:15:58.823 UTC [653] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8132838Z  2026-02-14 13:15:58.823 UTC [653] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8133168Z  2026-02-14 13:15:58.824 UTC [653] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8133924Z  2026-02-14 13:15:58.824 UTC [653] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8134245Z  2026-02-14 13:15:58.824 UTC [653] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8134689Z  2026-02-14 13:15:58.824 UTC [653] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8135006Z  2026-02-14 13:15:58.825 UTC [653] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8135454Z  2026-02-14 13:15:58.825 UTC [653] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8135783Z  2026-02-14 13:15:58.825 UTC [653] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8136436Z  2026-02-14 13:15:58.825 UTC [653] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8136762Z  2026-02-14 13:15:58.826 UTC [653] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8137393Z  2026-02-14 13:15:58.826 UTC [653] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8137643Z  2026-02-14 13:15:58.830 UTC [653] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8138255Z  2026-02-14 13:15:58.830 UTC [653] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8138470Z  2026-02-14 13:15:58.879 UTC [654] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8138644Z  2026-02-14 13:15:59.013 UTC [659] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8138804Z  2026-02-14 13:15:59.013 UTC [659] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8138864Z  	DO $$
2026-02-14T13:16:24.8138923Z  	BEGIN
2026-02-14T13:16:24.8139070Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8139188Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8139407Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8139523Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8139589Z  	    END IF;
2026-02-14T13:16:24.8139647Z  	END $$;
2026-02-14T13:16:24.8139870Z  2026-02-14 13:15:59.023 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8140619Z  2026-02-14 13:15:59.023 UTC [659] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8143947Z  2026-02-14 13:15:59.023 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8144446Z  2026-02-14 13:15:59.023 UTC [659] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8144692Z  2026-02-14 13:15:59.024 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8145098Z  2026-02-14 13:15:59.024 UTC [659] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8145329Z  2026-02-14 13:15:59.024 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8145717Z  2026-02-14 13:15:59.024 UTC [659] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8145932Z  2026-02-14 13:15:59.025 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8146314Z  2026-02-14 13:15:59.025 UTC [659] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8146527Z  2026-02-14 13:15:59.025 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8146956Z  2026-02-14 13:15:59.025 UTC [659] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8147168Z  2026-02-14 13:15:59.026 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8147531Z  2026-02-14 13:15:59.026 UTC [659] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8147746Z  2026-02-14 13:15:59.026 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8148085Z  2026-02-14 13:15:59.026 UTC [659] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8148306Z  2026-02-14 13:15:59.027 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8148698Z  2026-02-14 13:15:59.027 UTC [659] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8148914Z  2026-02-14 13:15:59.027 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8149434Z  2026-02-14 13:15:59.027 UTC [659] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8149662Z  2026-02-14 13:15:59.028 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8150089Z  2026-02-14 13:15:59.028 UTC [659] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8150298Z  2026-02-14 13:15:59.028 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8150756Z  2026-02-14 13:15:59.028 UTC [659] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8151085Z  2026-02-14 13:15:59.029 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8151544Z  2026-02-14 13:15:59.029 UTC [659] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8151761Z  2026-02-14 13:15:59.029 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8152054Z  2026-02-14 13:15:59.029 UTC [659] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8152179Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8152396Z  2026-02-14 13:15:59.030 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8152653Z  2026-02-14 13:15:59.030 UTC [659] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8152776Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8152996Z  2026-02-14 13:15:59.030 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8153255Z  2026-02-14 13:15:59.030 UTC [659] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8153383Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8153469Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8153789Z  2026-02-14 13:15:59.030 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8154097Z  2026-02-14 13:15:59.030 UTC [659] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8154360Z  2026-02-14 13:15:59.031 UTC [659] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8154706Z  2026-02-14 13:15:59.031 UTC [659] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8155043Z  2026-02-14 13:15:59.033 UTC [659] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8155455Z  2026-02-14 13:15:59.033 UTC [659] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8155746Z  2026-02-14 13:15:59.034 UTC [659] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8156212Z  2026-02-14 13:15:59.034 UTC [659] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8156552Z  2026-02-14 13:15:59.034 UTC [659] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8157066Z  2026-02-14 13:15:59.034 UTC [659] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8157407Z  2026-02-14 13:15:59.035 UTC [659] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8157981Z  2026-02-14 13:15:59.035 UTC [659] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8158330Z  2026-02-14 13:15:59.035 UTC [659] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8159051Z  2026-02-14 13:15:59.035 UTC [659] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8159379Z  2026-02-14 13:15:59.036 UTC [659] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8160140Z  2026-02-14 13:15:59.036 UTC [659] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8160466Z  2026-02-14 13:15:59.036 UTC [659] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8160914Z  2026-02-14 13:15:59.036 UTC [659] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8161228Z  2026-02-14 13:15:59.037 UTC [659] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8161669Z  2026-02-14 13:15:59.037 UTC [659] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8161985Z  2026-02-14 13:15:59.037 UTC [659] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8162634Z  2026-02-14 13:15:59.037 UTC [659] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8162961Z  2026-02-14 13:15:59.038 UTC [659] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8163583Z  2026-02-14 13:15:59.038 UTC [659] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8163925Z  2026-02-14 13:15:59.042 UTC [659] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8164433Z  2026-02-14 13:15:59.042 UTC [659] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8164644Z  2026-02-14 13:15:59.091 UTC [660] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8164818Z  2026-02-14 13:15:59.226 UTC [665] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8164975Z  2026-02-14 13:15:59.226 UTC [665] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8165035Z  	DO $$
2026-02-14T13:16:24.8165095Z  	BEGIN
2026-02-14T13:16:24.8165247Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8165358Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8165480Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8165594Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8165653Z  	    END IF;
2026-02-14T13:16:24.8165711Z  	END $$;
2026-02-14T13:16:24.8165936Z  2026-02-14 13:15:59.235 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8166674Z  2026-02-14 13:15:59.235 UTC [665] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8167006Z  2026-02-14 13:15:59.236 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8167433Z  2026-02-14 13:15:59.236 UTC [665] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8167643Z  2026-02-14 13:15:59.236 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8168021Z  2026-02-14 13:15:59.236 UTC [665] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8168234Z  2026-02-14 13:15:59.237 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8168722Z  2026-02-14 13:15:59.237 UTC [665] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8168941Z  2026-02-14 13:15:59.237 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8169327Z  2026-02-14 13:15:59.237 UTC [665] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8169541Z  2026-02-14 13:15:59.238 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8169972Z  2026-02-14 13:15:59.238 UTC [665] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8170184Z  2026-02-14 13:15:59.238 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8170552Z  2026-02-14 13:15:59.238 UTC [665] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8170764Z  2026-02-14 13:15:59.239 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8171107Z  2026-02-14 13:15:59.239 UTC [665] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8171322Z  2026-02-14 13:15:59.239 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8171749Z  2026-02-14 13:15:59.239 UTC [665] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8171957Z  2026-02-14 13:15:59.240 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8172323Z  2026-02-14 13:15:59.240 UTC [665] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8172535Z  2026-02-14 13:15:59.240 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8172965Z  2026-02-14 13:15:59.240 UTC [665] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8173179Z  2026-02-14 13:15:59.241 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8173719Z  2026-02-14 13:15:59.241 UTC [665] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8173933Z  2026-02-14 13:15:59.241 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8174391Z  2026-02-14 13:15:59.241 UTC [665] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8174606Z  2026-02-14 13:15:59.242 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8174878Z  2026-02-14 13:15:59.242 UTC [665] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8174994Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8175346Z  2026-02-14 13:15:59.242 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8175605Z  2026-02-14 13:15:59.242 UTC [665] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8175720Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8175932Z  2026-02-14 13:15:59.243 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8176192Z  2026-02-14 13:15:59.243 UTC [665] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8176310Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8176492Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8176705Z  2026-02-14 13:15:59.243 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8177007Z  2026-02-14 13:15:59.243 UTC [665] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8177263Z  2026-02-14 13:15:59.244 UTC [665] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8177619Z  2026-02-14 13:15:59.244 UTC [665] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8177955Z  2026-02-14 13:15:59.246 UTC [665] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8178371Z  2026-02-14 13:15:59.246 UTC [665] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8178661Z  2026-02-14 13:15:59.246 UTC [665] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8179127Z  2026-02-14 13:15:59.246 UTC [665] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8179463Z  2026-02-14 13:15:59.247 UTC [665] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8179976Z  2026-02-14 13:15:59.247 UTC [665] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8180312Z  2026-02-14 13:15:59.248 UTC [665] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8180784Z  2026-02-14 13:15:59.248 UTC [665] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8181111Z  2026-02-14 13:15:59.248 UTC [665] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8181817Z  2026-02-14 13:15:59.248 UTC [665] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8182143Z  2026-02-14 13:15:59.249 UTC [665] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8182799Z  2026-02-14 13:15:59.249 UTC [665] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8183123Z  2026-02-14 13:15:59.249 UTC [665] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8183565Z  2026-02-14 13:15:59.249 UTC [665] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8184086Z  2026-02-14 13:15:59.250 UTC [665] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8184531Z  2026-02-14 13:15:59.250 UTC [665] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8184850Z  2026-02-14 13:15:59.250 UTC [665] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8185502Z  2026-02-14 13:15:59.250 UTC [665] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8185922Z  2026-02-14 13:15:59.250 UTC [665] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8186566Z  2026-02-14 13:15:59.250 UTC [665] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8186829Z  2026-02-14 13:15:59.254 UTC [665] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8187334Z  2026-02-14 13:15:59.254 UTC [665] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8187543Z  2026-02-14 13:15:59.301 UTC [666] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8187714Z  2026-02-14 13:15:59.435 UTC [671] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8187871Z  2026-02-14 13:15:59.435 UTC [671] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8187931Z  	DO $$
2026-02-14T13:16:24.8187989Z  	BEGIN
2026-02-14T13:16:24.8188140Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8188254Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8188377Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8188490Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8188551Z  	    END IF;
2026-02-14T13:16:24.8188610Z  	END $$;
2026-02-14T13:16:24.8188833Z  2026-02-14 13:15:59.444 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8189572Z  2026-02-14 13:15:59.444 UTC [671] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8189792Z  2026-02-14 13:15:59.444 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8190216Z  2026-02-14 13:15:59.444 UTC [671] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8190431Z  2026-02-14 13:15:59.445 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8190808Z  2026-02-14 13:15:59.445 UTC [671] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8191018Z  2026-02-14 13:15:59.445 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8191404Z  2026-02-14 13:15:59.445 UTC [671] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8191615Z  2026-02-14 13:15:59.445 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8192003Z  2026-02-14 13:15:59.445 UTC [671] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8192214Z  2026-02-14 13:15:59.446 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8192724Z  2026-02-14 13:15:59.446 UTC [671] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8192942Z  2026-02-14 13:15:59.446 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8193309Z  2026-02-14 13:15:59.446 UTC [671] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8193519Z  2026-02-14 13:15:59.447 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8193994Z  2026-02-14 13:15:59.447 UTC [671] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8194313Z  2026-02-14 13:15:59.447 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8194702Z  2026-02-14 13:15:59.447 UTC [671] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8194917Z  2026-02-14 13:15:59.448 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8195276Z  2026-02-14 13:15:59.448 UTC [671] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8195489Z  2026-02-14 13:15:59.448 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8195916Z  2026-02-14 13:15:59.448 UTC [671] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8196129Z  2026-02-14 13:15:59.449 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8196575Z  2026-02-14 13:15:59.449 UTC [671] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8196793Z  2026-02-14 13:15:59.449 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8197249Z  2026-02-14 13:15:59.449 UTC [671] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8197462Z  2026-02-14 13:15:59.450 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8197735Z  2026-02-14 13:15:59.450 UTC [671] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8197848Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8198065Z  2026-02-14 13:15:59.450 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8198317Z  2026-02-14 13:15:59.450 UTC [671] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8198430Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8198649Z  2026-02-14 13:15:59.451 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8198908Z  2026-02-14 13:15:59.451 UTC [671] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8199028Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8199119Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8199332Z  2026-02-14 13:15:59.451 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8199637Z  2026-02-14 13:15:59.451 UTC [671] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8199897Z  2026-02-14 13:15:59.452 UTC [671] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8200243Z  2026-02-14 13:15:59.452 UTC [671] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8200675Z  2026-02-14 13:15:59.454 UTC [671] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8201084Z  2026-02-14 13:15:59.454 UTC [671] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8201367Z  2026-02-14 13:15:59.455 UTC [671] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8201829Z  2026-02-14 13:15:59.455 UTC [671] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8202251Z  2026-02-14 13:15:59.455 UTC [671] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8202764Z  2026-02-14 13:15:59.455 UTC [671] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8203107Z  2026-02-14 13:15:59.456 UTC [671] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8203565Z  2026-02-14 13:15:59.456 UTC [671] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8204001Z  2026-02-14 13:15:59.456 UTC [671] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8204705Z  2026-02-14 13:15:59.456 UTC [671] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8205035Z  2026-02-14 13:15:59.457 UTC [671] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8205687Z  2026-02-14 13:15:59.457 UTC [671] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8206002Z  2026-02-14 13:15:59.457 UTC [671] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8206448Z  2026-02-14 13:15:59.457 UTC [671] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8206763Z  2026-02-14 13:15:59.458 UTC [671] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8207200Z  2026-02-14 13:15:59.458 UTC [671] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8207525Z  2026-02-14 13:15:59.458 UTC [671] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8208172Z  2026-02-14 13:15:59.458 UTC [671] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8208494Z  2026-02-14 13:15:59.459 UTC [671] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8209128Z  2026-02-14 13:15:59.459 UTC [671] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8209373Z  2026-02-14 13:15:59.463 UTC [671] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8209992Z  2026-02-14 13:15:59.463 UTC [671] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8210201Z  2026-02-14 13:15:59.509 UTC [672] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8210372Z  2026-02-14 13:15:59.643 UTC [677] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8210528Z  2026-02-14 13:15:59.643 UTC [677] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8210586Z  	DO $$
2026-02-14T13:16:24.8210642Z  	BEGIN
2026-02-14T13:16:24.8210791Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8210902Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8211122Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8211238Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8211295Z  	    END IF;
2026-02-14T13:16:24.8211353Z  	END $$;
2026-02-14T13:16:24.8211578Z  2026-02-14 13:15:59.652 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8212314Z  2026-02-14 13:15:59.652 UTC [677] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8212534Z  2026-02-14 13:15:59.653 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8212964Z  2026-02-14 13:15:59.653 UTC [677] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8213176Z  2026-02-14 13:15:59.653 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8213554Z  2026-02-14 13:15:59.653 UTC [677] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8213867Z  2026-02-14 13:15:59.654 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8214253Z  2026-02-14 13:15:59.654 UTC [677] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8214470Z  2026-02-14 13:15:59.654 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8214850Z  2026-02-14 13:15:59.654 UTC [677] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8215060Z  2026-02-14 13:15:59.655 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8215496Z  2026-02-14 13:15:59.655 UTC [677] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8215708Z  2026-02-14 13:15:59.655 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8216072Z  2026-02-14 13:15:59.655 UTC [677] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8216287Z  2026-02-14 13:15:59.656 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8216629Z  2026-02-14 13:15:59.656 UTC [677] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8216842Z  2026-02-14 13:15:59.656 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8217231Z  2026-02-14 13:15:59.656 UTC [677] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8217442Z  2026-02-14 13:15:59.657 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8217917Z  2026-02-14 13:15:59.657 UTC [677] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8218130Z  2026-02-14 13:15:59.657 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8218554Z  2026-02-14 13:15:59.657 UTC [677] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8218767Z  2026-02-14 13:15:59.658 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8219213Z  2026-02-14 13:15:59.658 UTC [677] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8219521Z  2026-02-14 13:15:59.658 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8219984Z  2026-02-14 13:15:59.658 UTC [677] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8220196Z  2026-02-14 13:15:59.658 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8220465Z  2026-02-14 13:15:59.658 UTC [677] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8220580Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8220794Z  2026-02-14 13:15:59.659 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8221045Z  2026-02-14 13:15:59.659 UTC [677] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8221163Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8221380Z  2026-02-14 13:15:59.659 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8221638Z  2026-02-14 13:15:59.659 UTC [677] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8221758Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8221841Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8222058Z  2026-02-14 13:15:59.660 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8222357Z  2026-02-14 13:15:59.660 UTC [677] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8222614Z  2026-02-14 13:15:59.660 UTC [677] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8222959Z  2026-02-14 13:15:59.660 UTC [677] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8223289Z  2026-02-14 13:15:59.662 UTC [677] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8223792Z  2026-02-14 13:15:59.662 UTC [677] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8224099Z  2026-02-14 13:15:59.663 UTC [677] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8224567Z  2026-02-14 13:15:59.663 UTC [677] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8224902Z  2026-02-14 13:15:59.664 UTC [677] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8225416Z  2026-02-14 13:15:59.664 UTC [677] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8225755Z  2026-02-14 13:15:59.664 UTC [677] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8226322Z  2026-02-14 13:15:59.664 UTC [677] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8226646Z  2026-02-14 13:15:59.665 UTC [677] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8227341Z  2026-02-14 13:15:59.665 UTC [677] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8227670Z  2026-02-14 13:15:59.665 UTC [677] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8228420Z  2026-02-14 13:15:59.665 UTC [677] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8228744Z  2026-02-14 13:15:59.666 UTC [677] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8229186Z  2026-02-14 13:15:59.666 UTC [677] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8229498Z  2026-02-14 13:15:59.666 UTC [677] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8229943Z  2026-02-14 13:15:59.666 UTC [677] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8230262Z  2026-02-14 13:15:59.667 UTC [677] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8230919Z  2026-02-14 13:15:59.667 UTC [677] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8231246Z  2026-02-14 13:15:59.667 UTC [677] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8231870Z  2026-02-14 13:15:59.667 UTC [677] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8232122Z  2026-02-14 13:15:59.671 UTC [677] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8232633Z  2026-02-14 13:15:59.671 UTC [677] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8232843Z  2026-02-14 13:15:59.719 UTC [678] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8233018Z  2026-02-14 13:15:59.850 UTC [683] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8233176Z  2026-02-14 13:15:59.850 UTC [683] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8233235Z  	DO $$
2026-02-14T13:16:24.8233295Z  	BEGIN
2026-02-14T13:16:24.8233441Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8233552Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8233772Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8233885Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8233943Z  	    END IF;
2026-02-14T13:16:24.8234002Z  	END $$;
2026-02-14T13:16:24.8234223Z  2026-02-14 13:15:59.859 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8234959Z  2026-02-14 13:15:59.859 UTC [683] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8235290Z  2026-02-14 13:15:59.859 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8235718Z  2026-02-14 13:15:59.859 UTC [683] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8235930Z  2026-02-14 13:15:59.860 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8236317Z  2026-02-14 13:15:59.860 UTC [683] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8236529Z  2026-02-14 13:15:59.860 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8237013Z  2026-02-14 13:15:59.860 UTC [683] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8237228Z  2026-02-14 13:15:59.861 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8237610Z  2026-02-14 13:15:59.861 UTC [683] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8237825Z  2026-02-14 13:15:59.861 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8238254Z  2026-02-14 13:15:59.861 UTC [683] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8238468Z  2026-02-14 13:15:59.862 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8238838Z  2026-02-14 13:15:59.862 UTC [683] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8239055Z  2026-02-14 13:15:59.862 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8239402Z  2026-02-14 13:15:59.862 UTC [683] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8239621Z  2026-02-14 13:15:59.863 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8240018Z  2026-02-14 13:15:59.863 UTC [683] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8240234Z  2026-02-14 13:15:59.863 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8240598Z  2026-02-14 13:15:59.863 UTC [683] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8240811Z  2026-02-14 13:15:59.864 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8241239Z  2026-02-14 13:15:59.864 UTC [683] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8241454Z  2026-02-14 13:15:59.864 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8241899Z  2026-02-14 13:15:59.864 UTC [683] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8242112Z  2026-02-14 13:15:59.865 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8242566Z  2026-02-14 13:15:59.865 UTC [683] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8242781Z  2026-02-14 13:15:59.865 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8243055Z  2026-02-14 13:15:59.865 UTC [683] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8243167Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8243498Z  2026-02-14 13:15:59.866 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8243857Z  2026-02-14 13:15:59.866 UTC [683] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8243980Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8244204Z  2026-02-14 13:15:59.866 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8244467Z  2026-02-14 13:15:59.866 UTC [683] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8244587Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8244779Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8244993Z  2026-02-14 13:15:59.867 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8245300Z  2026-02-14 13:15:59.867 UTC [683] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8245559Z  2026-02-14 13:15:59.867 UTC [683] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8245906Z  2026-02-14 13:15:59.867 UTC [683] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8246237Z  2026-02-14 13:15:59.869 UTC [683] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8246647Z  2026-02-14 13:15:59.869 UTC [683] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8246930Z  2026-02-14 13:15:59.870 UTC [683] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8247396Z  2026-02-14 13:15:59.870 UTC [683] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8247730Z  2026-02-14 13:15:59.871 UTC [683] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8248244Z  2026-02-14 13:15:59.871 UTC [683] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8248581Z  2026-02-14 13:15:59.871 UTC [683] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8249037Z  2026-02-14 13:15:59.871 UTC [683] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8249366Z  2026-02-14 13:15:59.871 UTC [683] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8250074Z  2026-02-14 13:15:59.871 UTC [683] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8250397Z  2026-02-14 13:15:59.872 UTC [683] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8251050Z  2026-02-14 13:15:59.872 UTC [683] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8251369Z  2026-02-14 13:15:59.872 UTC [683] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8251810Z  2026-02-14 13:15:59.872 UTC [683] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8252226Z  2026-02-14 13:15:59.873 UTC [683] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8252666Z  2026-02-14 13:15:59.873 UTC [683] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8252985Z  2026-02-14 13:15:59.873 UTC [683] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8253769Z  2026-02-14 13:15:59.873 UTC [683] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8254210Z  2026-02-14 13:15:59.874 UTC [683] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8254857Z  2026-02-14 13:15:59.874 UTC [683] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8255105Z  2026-02-14 13:15:59.878 UTC [683] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8255611Z  2026-02-14 13:15:59.878 UTC [683] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8255826Z  2026-02-14 13:15:59.929 UTC [684] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8255994Z  2026-02-14 13:16:00.067 UTC [689] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8256150Z  2026-02-14 13:16:00.067 UTC [689] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8256210Z  	DO $$
2026-02-14T13:16:24.8256269Z  	BEGIN
2026-02-14T13:16:24.8256418Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8256533Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8256654Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8256767Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8256828Z  	    END IF;
2026-02-14T13:16:24.8256886Z  	END $$;
2026-02-14T13:16:24.8257107Z  2026-02-14 13:16:00.076 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8257844Z  2026-02-14 13:16:00.076 UTC [689] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8258061Z  2026-02-14 13:16:00.076 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8258483Z  2026-02-14 13:16:00.076 UTC [689] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8258702Z  2026-02-14 13:16:00.077 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8259076Z  2026-02-14 13:16:00.077 UTC [689] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8259294Z  2026-02-14 13:16:00.077 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8259672Z  2026-02-14 13:16:00.077 UTC [689] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8259882Z  2026-02-14 13:16:00.077 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8260268Z  2026-02-14 13:16:00.077 UTC [689] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8260476Z  2026-02-14 13:16:00.078 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8261011Z  2026-02-14 13:16:00.078 UTC [689] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8261235Z  2026-02-14 13:16:00.078 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8261599Z  2026-02-14 13:16:00.078 UTC [689] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8261812Z  2026-02-14 13:16:00.079 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8262160Z  2026-02-14 13:16:00.079 UTC [689] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8262447Z  2026-02-14 13:16:00.079 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8262841Z  2026-02-14 13:16:00.079 UTC [689] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8263054Z  2026-02-14 13:16:00.080 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8263421Z  2026-02-14 13:16:00.080 UTC [689] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8263739Z  2026-02-14 13:16:00.080 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8264168Z  2026-02-14 13:16:00.080 UTC [689] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8264384Z  2026-02-14 13:16:00.081 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8264835Z  2026-02-14 13:16:00.081 UTC [689] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8265052Z  2026-02-14 13:16:00.081 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8265514Z  2026-02-14 13:16:00.081 UTC [689] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8265726Z  2026-02-14 13:16:00.082 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8265997Z  2026-02-14 13:16:00.082 UTC [689] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8266114Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8266332Z  2026-02-14 13:16:00.082 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8266585Z  2026-02-14 13:16:00.082 UTC [689] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8266711Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8266923Z  2026-02-14 13:16:00.083 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8267183Z  2026-02-14 13:16:00.083 UTC [689] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8267305Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8267389Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8267599Z  2026-02-14 13:16:00.083 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8267903Z  2026-02-14 13:16:00.083 UTC [689] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8268166Z  2026-02-14 13:16:00.084 UTC [689] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8268621Z  2026-02-14 13:16:00.084 UTC [689] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8268950Z  2026-02-14 13:16:00.086 UTC [689] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8269355Z  2026-02-14 13:16:00.086 UTC [689] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8269647Z  2026-02-14 13:16:00.087 UTC [689] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8270107Z  2026-02-14 13:16:00.087 UTC [689] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8270532Z  2026-02-14 13:16:00.087 UTC [689] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8271047Z  2026-02-14 13:16:00.087 UTC [689] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8271379Z  2026-02-14 13:16:00.088 UTC [689] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8271868Z  2026-02-14 13:16:00.088 UTC [689] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8272201Z  2026-02-14 13:16:00.088 UTC [689] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8272904Z  2026-02-14 13:16:00.088 UTC [689] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8273240Z  2026-02-14 13:16:00.089 UTC [689] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8273998Z  2026-02-14 13:16:00.089 UTC [689] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8274334Z  2026-02-14 13:16:00.089 UTC [689] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8274790Z  2026-02-14 13:16:00.089 UTC [689] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8275110Z  2026-02-14 13:16:00.090 UTC [689] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8275557Z  2026-02-14 13:16:00.090 UTC [689] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8275897Z  2026-02-14 13:16:00.090 UTC [689] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8276556Z  2026-02-14 13:16:00.090 UTC [689] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8276886Z  2026-02-14 13:16:00.091 UTC [689] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8277510Z  2026-02-14 13:16:00.091 UTC [689] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8277760Z  2026-02-14 13:16:00.095 UTC [689] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8278381Z  2026-02-14 13:16:00.095 UTC [689] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8278588Z  2026-02-14 13:16:00.141 UTC [690] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8278763Z  2026-02-14 13:16:00.279 UTC [695] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8278923Z  2026-02-14 13:16:00.279 UTC [695] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8278981Z  	DO $$
2026-02-14T13:16:24.8279039Z  	BEGIN
2026-02-14T13:16:24.8279192Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8279303Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8279525Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8279641Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8279699Z  	    END IF;
2026-02-14T13:16:24.8279759Z  	END $$;
2026-02-14T13:16:24.8279992Z  2026-02-14 13:16:00.287 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8280729Z  2026-02-14 13:16:00.287 UTC [695] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8280947Z  2026-02-14 13:16:00.288 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8281366Z  2026-02-14 13:16:00.288 UTC [695] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8281590Z  2026-02-14 13:16:00.288 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8281970Z  2026-02-14 13:16:00.288 UTC [695] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8282183Z  2026-02-14 13:16:00.289 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8282567Z  2026-02-14 13:16:00.289 UTC [695] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8282785Z  2026-02-14 13:16:00.289 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8283162Z  2026-02-14 13:16:00.289 UTC [695] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8283374Z  2026-02-14 13:16:00.290 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8283906Z  2026-02-14 13:16:00.290 UTC [695] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8284120Z  2026-02-14 13:16:00.290 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8284495Z  2026-02-14 13:16:00.290 UTC [695] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8284708Z  2026-02-14 13:16:00.291 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8285050Z  2026-02-14 13:16:00.291 UTC [695] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8285269Z  2026-02-14 13:16:00.291 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8285658Z  2026-02-14 13:16:00.291 UTC [695] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8285873Z  2026-02-14 13:16:00.292 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8286362Z  2026-02-14 13:16:00.292 UTC [695] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8286578Z  2026-02-14 13:16:00.292 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8287012Z  2026-02-14 13:16:00.292 UTC [695] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8287230Z  2026-02-14 13:16:00.293 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8287673Z  2026-02-14 13:16:00.293 UTC [695] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8287985Z  2026-02-14 13:16:00.293 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8288441Z  2026-02-14 13:16:00.293 UTC [695] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8288652Z  2026-02-14 13:16:00.294 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8288929Z  2026-02-14 13:16:00.294 UTC [695] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8289043Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8289257Z  2026-02-14 13:16:00.294 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8289514Z  2026-02-14 13:16:00.294 UTC [695] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8289630Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8289846Z  2026-02-14 13:16:00.295 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8290113Z  2026-02-14 13:16:00.295 UTC [695] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8290234Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8290320Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8290536Z  2026-02-14 13:16:00.295 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8290834Z  2026-02-14 13:16:00.295 UTC [695] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8291092Z  2026-02-14 13:16:00.296 UTC [695] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8291444Z  2026-02-14 13:16:00.296 UTC [695] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8291772Z  2026-02-14 13:16:00.298 UTC [695] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8292186Z  2026-02-14 13:16:00.298 UTC [695] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8292471Z  2026-02-14 13:16:00.298 UTC [695] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8292932Z  2026-02-14 13:16:00.298 UTC [695] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8293268Z  2026-02-14 13:16:00.299 UTC [695] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8294059Z  2026-02-14 13:16:00.299 UTC [695] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8294407Z  2026-02-14 13:16:00.299 UTC [695] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8294988Z  2026-02-14 13:16:00.299 UTC [695] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8295319Z  2026-02-14 13:16:00.300 UTC [695] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8296030Z  2026-02-14 13:16:00.300 UTC [695] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8296357Z  2026-02-14 13:16:00.300 UTC [695] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8297102Z  2026-02-14 13:16:00.300 UTC [695] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8297427Z  2026-02-14 13:16:00.301 UTC [695] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8297874Z  2026-02-14 13:16:00.301 UTC [695] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8298189Z  2026-02-14 13:16:00.301 UTC [695] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8298636Z  2026-02-14 13:16:00.301 UTC [695] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8298960Z  2026-02-14 13:16:00.302 UTC [695] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8299613Z  2026-02-14 13:16:00.302 UTC [695] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8299942Z  2026-02-14 13:16:00.302 UTC [695] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8300567Z  2026-02-14 13:16:00.302 UTC [695] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8300819Z  2026-02-14 13:16:00.306 UTC [695] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8301326Z  2026-02-14 13:16:00.306 UTC [695] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8301541Z  2026-02-14 13:16:00.351 UTC [696] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8301713Z  2026-02-14 13:16:00.489 UTC [701] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8301870Z  2026-02-14 13:16:00.489 UTC [701] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8301935Z  	DO $$
2026-02-14T13:16:24.8301993Z  	BEGIN
2026-02-14T13:16:24.8302144Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8302259Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8302379Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8302493Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8302551Z  	    END IF;
2026-02-14T13:16:24.8302616Z  	END $$;
2026-02-14T13:16:24.8302839Z  2026-02-14 13:16:00.498 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8303578Z  2026-02-14 13:16:00.498 UTC [701] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8304005Z  2026-02-14 13:16:00.498 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8304430Z  2026-02-14 13:16:00.498 UTC [701] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8304654Z  2026-02-14 13:16:00.499 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8305033Z  2026-02-14 13:16:00.499 UTC [701] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8305246Z  2026-02-14 13:16:00.499 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8305761Z  2026-02-14 13:16:00.499 UTC [701] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8305976Z  2026-02-14 13:16:00.500 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8306360Z  2026-02-14 13:16:00.500 UTC [701] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8306575Z  2026-02-14 13:16:00.500 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8307004Z  2026-02-14 13:16:00.500 UTC [701] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8307222Z  2026-02-14 13:16:00.501 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8307586Z  2026-02-14 13:16:00.501 UTC [701] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8307797Z  2026-02-14 13:16:00.501 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8308143Z  2026-02-14 13:16:00.501 UTC [701] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8308355Z  2026-02-14 13:16:00.502 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8308743Z  2026-02-14 13:16:00.502 UTC [701] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8308960Z  2026-02-14 13:16:00.502 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8309325Z  2026-02-14 13:16:00.502 UTC [701] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8309539Z  2026-02-14 13:16:00.503 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8309969Z  2026-02-14 13:16:00.503 UTC [701] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8310182Z  2026-02-14 13:16:00.503 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8310629Z  2026-02-14 13:16:00.503 UTC [701] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8310845Z  2026-02-14 13:16:00.504 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8311302Z  2026-02-14 13:16:00.504 UTC [701] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8311524Z  2026-02-14 13:16:00.504 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8311796Z  2026-02-14 13:16:00.504 UTC [701] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8311907Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8312209Z  2026-02-14 13:16:00.505 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8312467Z  2026-02-14 13:16:00.505 UTC [701] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8312583Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8312800Z  2026-02-14 13:16:00.505 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8313063Z  2026-02-14 13:16:00.505 UTC [701] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8313183Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8313343Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8313557Z  2026-02-14 13:16:00.506 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8313957Z  2026-02-14 13:16:00.506 UTC [701] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8314222Z  2026-02-14 13:16:00.506 UTC [701] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8314566Z  2026-02-14 13:16:00.506 UTC [701] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8314894Z  2026-02-14 13:16:00.508 UTC [701] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8315295Z  2026-02-14 13:16:00.508 UTC [701] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8315583Z  2026-02-14 13:16:00.509 UTC [701] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8316058Z  2026-02-14 13:16:00.509 UTC [701] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8316396Z  2026-02-14 13:16:00.510 UTC [701] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8316905Z  2026-02-14 13:16:00.510 UTC [701] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8317246Z  2026-02-14 13:16:00.510 UTC [701] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8317700Z  2026-02-14 13:16:00.510 UTC [701] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8318037Z  2026-02-14 13:16:00.511 UTC [701] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8318751Z  2026-02-14 13:16:00.511 UTC [701] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8319080Z  2026-02-14 13:16:00.511 UTC [701] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8319730Z  2026-02-14 13:16:00.511 UTC [701] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8320048Z  2026-02-14 13:16:00.511 UTC [701] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8320490Z  2026-02-14 13:16:00.511 UTC [701] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8320925Z  2026-02-14 13:16:00.512 UTC [701] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8321365Z  2026-02-14 13:16:00.512 UTC [701] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8321686Z  2026-02-14 13:16:00.513 UTC [701] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8322339Z  2026-02-14 13:16:00.513 UTC [701] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8322763Z  2026-02-14 13:16:00.513 UTC [701] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8323398Z  2026-02-14 13:16:00.513 UTC [701] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8323740Z  2026-02-14 13:16:00.517 UTC [701] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8324253Z  2026-02-14 13:16:00.517 UTC [701] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8324459Z  2026-02-14 13:16:00.562 UTC [702] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8324634Z  2026-02-14 13:16:00.694 UTC [707] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8324808Z  2026-02-14 13:16:00.694 UTC [707] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8324867Z  	DO $$
2026-02-14T13:16:24.8324925Z  	BEGIN
2026-02-14T13:16:24.8325076Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8325190Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8325310Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8325430Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8325490Z  	    END IF;
2026-02-14T13:16:24.8325549Z  	END $$;
2026-02-14T13:16:24.8325777Z  2026-02-14 13:16:00.703 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8326513Z  2026-02-14 13:16:00.703 UTC [707] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8326734Z  2026-02-14 13:16:00.704 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8327166Z  2026-02-14 13:16:00.704 UTC [707] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8327387Z  2026-02-14 13:16:00.704 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8327767Z  2026-02-14 13:16:00.704 UTC [707] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8327983Z  2026-02-14 13:16:00.705 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8328364Z  2026-02-14 13:16:00.705 UTC [707] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8328579Z  2026-02-14 13:16:00.705 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8328968Z  2026-02-14 13:16:00.705 UTC [707] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8329285Z  2026-02-14 13:16:00.705 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8329722Z  2026-02-14 13:16:00.705 UTC [707] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8329933Z  2026-02-14 13:16:00.706 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8330296Z  2026-02-14 13:16:00.706 UTC [707] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8330513Z  2026-02-14 13:16:00.706 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8330853Z  2026-02-14 13:16:00.706 UTC [707] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8331168Z  2026-02-14 13:16:00.707 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8331566Z  2026-02-14 13:16:00.707 UTC [707] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8331781Z  2026-02-14 13:16:00.707 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8332144Z  2026-02-14 13:16:00.707 UTC [707] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8332363Z  2026-02-14 13:16:00.708 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8332793Z  2026-02-14 13:16:00.708 UTC [707] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8333010Z  2026-02-14 13:16:00.708 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8333450Z  2026-02-14 13:16:00.708 UTC [707] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8333760Z  2026-02-14 13:16:00.709 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8334225Z  2026-02-14 13:16:00.709 UTC [707] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8334438Z  2026-02-14 13:16:00.709 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8334709Z  2026-02-14 13:16:00.709 UTC [707] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8334827Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8335048Z  2026-02-14 13:16:00.710 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8335299Z  2026-02-14 13:16:00.710 UTC [707] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8335419Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8335631Z  2026-02-14 13:16:00.710 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8335888Z  2026-02-14 13:16:00.710 UTC [707] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8336014Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8336097Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8336310Z  2026-02-14 13:16:00.711 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8336612Z  2026-02-14 13:16:00.711 UTC [707] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8336875Z  2026-02-14 13:16:00.711 UTC [707] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8337330Z  2026-02-14 13:16:00.711 UTC [707] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8337659Z  2026-02-14 13:16:00.713 UTC [707] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8338061Z  2026-02-14 13:16:00.713 UTC [707] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8338346Z  2026-02-14 13:16:00.714 UTC [707] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8338810Z  2026-02-14 13:16:00.714 UTC [707] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8339241Z  2026-02-14 13:16:00.715 UTC [707] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8339756Z  2026-02-14 13:16:00.715 UTC [707] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8340096Z  2026-02-14 13:16:00.715 UTC [707] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8340561Z  2026-02-14 13:16:00.715 UTC [707] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8340889Z  2026-02-14 13:16:00.716 UTC [707] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8341593Z  2026-02-14 13:16:00.716 UTC [707] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8341932Z  2026-02-14 13:16:00.716 UTC [707] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8342586Z  2026-02-14 13:16:00.716 UTC [707] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8342912Z  2026-02-14 13:16:00.717 UTC [707] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8343358Z  2026-02-14 13:16:00.717 UTC [707] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8343766Z  2026-02-14 13:16:00.717 UTC [707] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8344214Z  2026-02-14 13:16:00.717 UTC [707] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8344536Z  2026-02-14 13:16:00.718 UTC [707] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8345190Z  2026-02-14 13:16:00.718 UTC [707] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8345522Z  2026-02-14 13:16:00.718 UTC [707] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8346156Z  2026-02-14 13:16:00.718 UTC [707] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8346411Z  2026-02-14 13:16:00.723 UTC [707] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8347019Z  2026-02-14 13:16:00.723 UTC [707] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8347227Z  2026-02-14 13:16:00.768 UTC [708] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8347406Z  2026-02-14 13:16:00.900 UTC [713] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8347561Z  2026-02-14 13:16:00.900 UTC [713] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8347619Z  	DO $$
2026-02-14T13:16:24.8347683Z  	BEGIN
2026-02-14T13:16:24.8347832Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8347946Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8348169Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8348283Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8348342Z  	    END IF;
2026-02-14T13:16:24.8348406Z  	END $$;
2026-02-14T13:16:24.8348634Z  2026-02-14 13:16:00.909 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8349369Z  2026-02-14 13:16:00.909 UTC [713] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8349591Z  2026-02-14 13:16:00.909 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8350009Z  2026-02-14 13:16:00.909 UTC [713] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8350225Z  2026-02-14 13:16:00.909 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8350605Z  2026-02-14 13:16:00.909 UTC [713] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8350823Z  2026-02-14 13:16:00.910 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8351210Z  2026-02-14 13:16:00.910 UTC [713] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8351431Z  2026-02-14 13:16:00.910 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8351812Z  2026-02-14 13:16:00.910 UTC [713] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8352029Z  2026-02-14 13:16:00.911 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8352460Z  2026-02-14 13:16:00.911 UTC [713] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8352672Z  2026-02-14 13:16:00.911 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8353041Z  2026-02-14 13:16:00.911 UTC [713] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8353258Z  2026-02-14 13:16:00.912 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8353694Z  2026-02-14 13:16:00.912 UTC [713] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8353916Z  2026-02-14 13:16:00.912 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8354304Z  2026-02-14 13:16:00.912 UTC [713] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8354523Z  2026-02-14 13:16:00.913 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8355000Z  2026-02-14 13:16:00.913 UTC [713] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8355217Z  2026-02-14 13:16:00.913 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8355651Z  2026-02-14 13:16:00.913 UTC [713] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8355865Z  2026-02-14 13:16:00.914 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8356316Z  2026-02-14 13:16:00.914 UTC [713] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8356634Z  2026-02-14 13:16:00.914 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8357090Z  2026-02-14 13:16:00.914 UTC [713] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8357308Z  2026-02-14 13:16:00.915 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8357584Z  2026-02-14 13:16:00.915 UTC [713] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8357696Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8357910Z  2026-02-14 13:16:00.915 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8358173Z  2026-02-14 13:16:00.915 UTC [713] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8358286Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8358513Z  2026-02-14 13:16:00.916 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8358767Z  2026-02-14 13:16:00.916 UTC [713] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8358888Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8358977Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8359190Z  2026-02-14 13:16:00.916 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8359484Z  2026-02-14 13:16:00.916 UTC [713] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8359751Z  2026-02-14 13:16:00.917 UTC [713] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8360098Z  2026-02-14 13:16:00.917 UTC [713] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8360427Z  2026-02-14 13:16:00.919 UTC [713] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8360838Z  2026-02-14 13:16:00.919 UTC [713] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8361124Z  2026-02-14 13:16:00.920 UTC [713] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8361580Z  2026-02-14 13:16:00.920 UTC [713] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8361923Z  2026-02-14 13:16:00.920 UTC [713] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8362437Z  2026-02-14 13:16:00.920 UTC [713] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8362780Z  2026-02-14 13:16:00.921 UTC [713] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8363318Z  2026-02-14 13:16:00.921 UTC [713] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8363744Z  2026-02-14 13:16:00.921 UTC [713] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8364454Z  2026-02-14 13:16:00.921 UTC [713] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8364786Z  2026-02-14 13:16:00.922 UTC [713] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8365546Z  2026-02-14 13:16:00.922 UTC [713] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8365870Z  2026-02-14 13:16:00.922 UTC [713] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8366325Z  2026-02-14 13:16:00.922 UTC [713] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8366647Z  2026-02-14 13:16:00.923 UTC [713] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8367084Z  2026-02-14 13:16:00.923 UTC [713] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8367402Z  2026-02-14 13:16:00.923 UTC [713] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8368061Z  2026-02-14 13:16:00.923 UTC [713] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8368388Z  2026-02-14 13:16:00.924 UTC [713] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8369015Z  2026-02-14 13:16:00.924 UTC [713] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8369259Z  2026-02-14 13:16:00.927 UTC [713] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8369761Z  2026-02-14 13:16:00.927 UTC [713] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8369969Z  2026-02-14 13:16:00.971 UTC [714] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8370138Z  2026-02-14 13:16:01.108 UTC [719] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8370295Z  2026-02-14 13:16:01.108 UTC [719] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8370355Z  	DO $$
2026-02-14T13:16:24.8370412Z  	BEGIN
2026-02-14T13:16:24.8370560Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8370676Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8370798Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8370914Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8370980Z  	    END IF;
2026-02-14T13:16:24.8371039Z  	END $$;
2026-02-14T13:16:24.8371260Z  2026-02-14 13:16:01.117 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8372153Z  2026-02-14 13:16:01.117 UTC [719] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8372373Z  2026-02-14 13:16:01.117 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8372798Z  2026-02-14 13:16:01.117 UTC [719] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8373018Z  2026-02-14 13:16:01.118 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8373392Z  2026-02-14 13:16:01.118 UTC [719] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8373696Z  2026-02-14 13:16:01.118 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8374240Z  2026-02-14 13:16:01.118 UTC [719] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8374462Z  2026-02-14 13:16:01.119 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8374857Z  2026-02-14 13:16:01.119 UTC [719] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8375073Z  2026-02-14 13:16:01.119 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8375501Z  2026-02-14 13:16:01.119 UTC [719] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8375720Z  2026-02-14 13:16:01.119 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8376090Z  2026-02-14 13:16:01.119 UTC [719] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8376313Z  2026-02-14 13:16:01.120 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8376660Z  2026-02-14 13:16:01.120 UTC [719] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8376873Z  2026-02-14 13:16:01.120 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8377274Z  2026-02-14 13:16:01.120 UTC [719] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8377489Z  2026-02-14 13:16:01.121 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8377852Z  2026-02-14 13:16:01.121 UTC [719] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8378068Z  2026-02-14 13:16:01.121 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8378503Z  2026-02-14 13:16:01.121 UTC [719] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8378714Z  2026-02-14 13:16:01.122 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8379164Z  2026-02-14 13:16:01.122 UTC [719] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8379378Z  2026-02-14 13:16:01.122 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8379834Z  2026-02-14 13:16:01.122 UTC [719] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8380054Z  2026-02-14 13:16:01.123 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8380327Z  2026-02-14 13:16:01.123 UTC [719] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8380547Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8380766Z  2026-02-14 13:16:01.123 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8381019Z  2026-02-14 13:16:01.123 UTC [719] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8381143Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8381355Z  2026-02-14 13:16:01.124 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8381612Z  2026-02-14 13:16:01.124 UTC [719] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8381733Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8381891Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8382108Z  2026-02-14 13:16:01.124 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8382412Z  2026-02-14 13:16:01.124 UTC [719] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8382671Z  2026-02-14 13:16:01.125 UTC [719] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8383011Z  2026-02-14 13:16:01.125 UTC [719] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8383342Z  2026-02-14 13:16:01.127 UTC [719] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8383846Z  2026-02-14 13:16:01.127 UTC [719] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8384147Z  2026-02-14 13:16:01.128 UTC [719] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8384623Z  2026-02-14 13:16:01.128 UTC [719] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8384960Z  2026-02-14 13:16:01.128 UTC [719] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8385475Z  2026-02-14 13:16:01.128 UTC [719] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8385812Z  2026-02-14 13:16:01.129 UTC [719] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8386272Z  2026-02-14 13:16:01.129 UTC [719] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8386607Z  2026-02-14 13:16:01.129 UTC [719] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8387309Z  2026-02-14 13:16:01.129 UTC [719] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8387637Z  2026-02-14 13:16:01.130 UTC [719] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8388292Z  2026-02-14 13:16:01.130 UTC [719] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8388610Z  2026-02-14 13:16:01.130 UTC [719] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8389059Z  2026-02-14 13:16:01.130 UTC [719] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8389479Z  2026-02-14 13:16:01.131 UTC [719] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8389916Z  2026-02-14 13:16:01.131 UTC [719] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8390239Z  2026-02-14 13:16:01.131 UTC [719] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8390878Z  2026-02-14 13:16:01.131 UTC [719] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8391305Z  2026-02-14 13:16:01.132 UTC [719] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8391938Z  2026-02-14 13:16:01.132 UTC [719] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8392181Z  2026-02-14 13:16:01.136 UTC [719] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8392687Z  2026-02-14 13:16:01.136 UTC [719] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8392893Z  2026-02-14 13:16:01.181 UTC [720] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8393063Z  2026-02-14 13:16:01.315 UTC [725] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8393224Z  2026-02-14 13:16:01.315 UTC [725] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8393282Z  	DO $$
2026-02-14T13:16:24.8393339Z  	BEGIN
2026-02-14T13:16:24.8393491Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8393694Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8393818Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8393938Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8393996Z  	    END IF;
2026-02-14T13:16:24.8394055Z  	END $$;
2026-02-14T13:16:24.8394286Z  2026-02-14 13:16:01.324 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8395018Z  2026-02-14 13:16:01.324 UTC [725] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8395237Z  2026-02-14 13:16:01.324 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8395667Z  2026-02-14 13:16:01.324 UTC [725] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8395886Z  2026-02-14 13:16:01.325 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8396269Z  2026-02-14 13:16:01.325 UTC [725] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8396483Z  2026-02-14 13:16:01.325 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8396870Z  2026-02-14 13:16:01.325 UTC [725] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8397089Z  2026-02-14 13:16:01.326 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8397474Z  2026-02-14 13:16:01.326 UTC [725] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8397798Z  2026-02-14 13:16:01.326 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8398240Z  2026-02-14 13:16:01.326 UTC [725] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8398453Z  2026-02-14 13:16:01.327 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8398816Z  2026-02-14 13:16:01.327 UTC [725] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8399031Z  2026-02-14 13:16:01.327 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8399371Z  2026-02-14 13:16:01.327 UTC [725] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8399684Z  2026-02-14 13:16:01.328 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8400070Z  2026-02-14 13:16:01.328 UTC [725] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8400285Z  2026-02-14 13:16:01.328 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8400656Z  2026-02-14 13:16:01.328 UTC [725] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8400871Z  2026-02-14 13:16:01.329 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8401297Z  2026-02-14 13:16:01.329 UTC [725] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8401520Z  2026-02-14 13:16:01.329 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8401967Z  2026-02-14 13:16:01.329 UTC [725] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8402180Z  2026-02-14 13:16:01.330 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8402636Z  2026-02-14 13:16:01.330 UTC [725] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8402850Z  2026-02-14 13:16:01.330 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8403128Z  2026-02-14 13:16:01.330 UTC [725] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8403242Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8403459Z  2026-02-14 13:16:01.331 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8403811Z  2026-02-14 13:16:01.331 UTC [725] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8403932Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8404146Z  2026-02-14 13:16:01.331 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8404405Z  2026-02-14 13:16:01.331 UTC [725] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8404528Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8404612Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8404827Z  2026-02-14 13:16:01.332 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8405126Z  2026-02-14 13:16:01.332 UTC [725] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8405391Z  2026-02-14 13:16:01.332 UTC [725] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8405897Z  2026-02-14 13:16:01.332 UTC [725] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8406247Z  2026-02-14 13:16:01.334 UTC [725] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8406650Z  2026-02-14 13:16:01.334 UTC [725] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8406938Z  2026-02-14 13:16:01.335 UTC [725] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8407400Z  2026-02-14 13:16:01.335 UTC [725] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8407832Z  2026-02-14 13:16:01.336 UTC [725] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8408340Z  2026-02-14 13:16:01.336 UTC [725] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8408677Z  2026-02-14 13:16:01.336 UTC [725] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8409140Z  2026-02-14 13:16:01.336 UTC [725] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8409465Z  2026-02-14 13:16:01.337 UTC [725] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8410171Z  2026-02-14 13:16:01.337 UTC [725] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8410508Z  2026-02-14 13:16:01.337 UTC [725] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8411157Z  2026-02-14 13:16:01.337 UTC [725] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8411479Z  2026-02-14 13:16:01.338 UTC [725] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8411917Z  2026-02-14 13:16:01.338 UTC [725] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8412233Z  2026-02-14 13:16:01.338 UTC [725] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8412685Z  2026-02-14 13:16:01.338 UTC [725] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8413008Z  2026-02-14 13:16:01.339 UTC [725] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8413752Z  2026-02-14 13:16:01.339 UTC [725] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8414082Z  2026-02-14 13:16:01.339 UTC [725] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8414714Z  2026-02-14 13:16:01.339 UTC [725] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8414967Z  2026-02-14 13:16:01.343 UTC [725] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8415577Z  2026-02-14 13:16:01.343 UTC [725] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8415787Z  2026-02-14 13:16:01.386 UTC [726] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8415966Z  2026-02-14 13:16:01.529 UTC [731] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8416119Z  2026-02-14 13:16:01.529 UTC [731] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8416178Z  	DO $$
2026-02-14T13:16:24.8416240Z  	BEGIN
2026-02-14T13:16:24.8416388Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8416500Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8416719Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8416833Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8416894Z  	    END IF;
2026-02-14T13:16:24.8416958Z  	END $$;
2026-02-14T13:16:24.8417181Z  2026-02-14 13:16:01.538 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8417914Z  2026-02-14 13:16:01.538 UTC [731] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8418137Z  2026-02-14 13:16:01.538 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8418561Z  2026-02-14 13:16:01.538 UTC [731] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8418782Z  2026-02-14 13:16:01.539 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8419156Z  2026-02-14 13:16:01.539 UTC [731] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8419375Z  2026-02-14 13:16:01.539 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8419763Z  2026-02-14 13:16:01.539 UTC [731] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8419972Z  2026-02-14 13:16:01.540 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8420356Z  2026-02-14 13:16:01.540 UTC [731] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8420575Z  2026-02-14 13:16:01.540 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8421096Z  2026-02-14 13:16:01.540 UTC [731] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8421502Z  2026-02-14 13:16:01.541 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8422205Z  2026-02-14 13:16:01.541 UTC [731] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8423276Z  2026-02-14 13:16:01.541 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8424101Z  2026-02-14 13:16:01.541 UTC [731] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8424789Z  2026-02-14 13:16:01.541 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8425532Z  2026-02-14 13:16:01.541 UTC [731] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8426265Z  2026-02-14 13:16:01.542 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8427105Z  2026-02-14 13:16:01.542 UTC [731] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8427802Z  2026-02-14 13:16:01.542 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8428753Z  2026-02-14 13:16:01.542 UTC [731] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8429541Z  2026-02-14 13:16:01.543 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8430316Z  2026-02-14 13:16:01.543 UTC [731] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8431231Z  2026-02-14 13:16:01.543 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8432009Z  2026-02-14 13:16:01.543 UTC [731] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8432794Z  2026-02-14 13:16:01.544 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8433399Z  2026-02-14 13:16:01.544 UTC [731] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8434058Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8434505Z  2026-02-14 13:16:01.544 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8435105Z  2026-02-14 13:16:01.544 UTC [731] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8435588Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8436024Z  2026-02-14 13:16:01.545 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8436616Z  2026-02-14 13:16:01.545 UTC [731] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8437107Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8437409Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8437799Z  2026-02-14 13:16:01.545 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8438425Z  2026-02-14 13:16:01.545 UTC [731] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8439096Z  2026-02-14 13:16:01.546 UTC [731] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8439810Z  2026-02-14 13:16:01.546 UTC [731] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8440594Z  2026-02-14 13:16:01.548 UTC [731] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8441443Z  2026-02-14 13:16:01.548 UTC [731] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8442247Z  2026-02-14 13:16:01.549 UTC [731] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8443106Z  2026-02-14 13:16:01.549 UTC [731] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8444101Z  2026-02-14 13:16:01.549 UTC [731] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8445059Z  2026-02-14 13:16:01.549 UTC [731] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8446017Z  2026-02-14 13:16:01.550 UTC [731] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8447052Z  2026-02-14 13:16:01.550 UTC [731] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8447949Z  2026-02-14 13:16:01.550 UTC [731] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8449097Z  2026-02-14 13:16:01.550 UTC [731] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8450251Z  2026-02-14 13:16:01.551 UTC [731] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8451446Z  2026-02-14 13:16:01.551 UTC [731] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8452533Z  2026-02-14 13:16:01.551 UTC [731] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8453399Z  2026-02-14 13:16:01.551 UTC [731] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8454363Z  2026-02-14 13:16:01.552 UTC [731] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8455227Z  2026-02-14 13:16:01.552 UTC [731] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8456095Z  2026-02-14 13:16:01.552 UTC [731] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8457191Z  2026-02-14 13:16:01.552 UTC [731] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8458270Z  2026-02-14 13:16:01.553 UTC [731] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8459336Z  2026-02-14 13:16:01.553 UTC [731] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8460318Z  2026-02-14 13:16:01.557 UTC [731] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8461180Z  2026-02-14 13:16:01.557 UTC [731] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8461997Z  2026-02-14 13:16:01.602 UTC [732] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8462487Z  2026-02-14 13:16:01.742 UTC [737] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8462928Z  2026-02-14 13:16:01.742 UTC [737] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8463253Z  	DO $$
2026-02-14T13:16:24.8463398Z  	BEGIN
2026-02-14T13:16:24.8463722Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8464083Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8464413Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8464749Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8465012Z  	    END IF;
2026-02-14T13:16:24.8465168Z  	END $$;
2026-02-14T13:16:24.8465476Z  2026-02-14 13:16:01.751 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8466693Z  2026-02-14 13:16:01.751 UTC [737] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8467758Z  2026-02-14 13:16:01.752 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8468518Z  2026-02-14 13:16:01.752 UTC [737] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8469256Z  2026-02-14 13:16:01.752 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8469957Z  2026-02-14 13:16:01.752 UTC [737] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8470658Z  2026-02-14 13:16:01.753 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8471471Z  2026-02-14 13:16:01.753 UTC [737] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8472221Z  2026-02-14 13:16:01.753 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8472927Z  2026-02-14 13:16:01.753 UTC [737] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8473722Z  2026-02-14 13:16:01.754 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8474486Z  2026-02-14 13:16:01.754 UTC [737] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8475238Z  2026-02-14 13:16:01.754 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8475920Z  2026-02-14 13:16:01.754 UTC [737] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8476603Z  2026-02-14 13:16:01.755 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8477269Z  2026-02-14 13:16:01.755 UTC [737] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8477931Z  2026-02-14 13:16:01.755 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8478644Z  2026-02-14 13:16:01.755 UTC [737] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8479352Z  2026-02-14 13:16:01.756 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8480035Z  2026-02-14 13:16:01.756 UTC [737] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8480726Z  2026-02-14 13:16:01.756 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8481488Z  2026-02-14 13:16:01.756 UTC [737] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8482237Z  2026-02-14 13:16:01.757 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8483007Z  2026-02-14 13:16:01.757 UTC [737] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8483876Z  2026-02-14 13:16:01.757 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8484652Z  2026-02-14 13:16:01.757 UTC [737] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8485445Z  2026-02-14 13:16:01.758 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8486045Z  2026-02-14 13:16:01.758 UTC [737] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8486650Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8487081Z  2026-02-14 13:16:01.758 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8487662Z  2026-02-14 13:16:01.758 UTC [737] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8488138Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8488565Z  2026-02-14 13:16:01.759 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8489152Z  2026-02-14 13:16:01.759 UTC [737] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8489766Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8490063Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8490458Z  2026-02-14 13:16:01.759 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8491082Z  2026-02-14 13:16:01.759 UTC [737] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8491754Z  2026-02-14 13:16:01.760 UTC [737] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8492467Z  2026-02-14 13:16:01.760 UTC [737] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8493243Z  2026-02-14 13:16:01.762 UTC [737] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8494187Z  2026-02-14 13:16:01.762 UTC [737] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8494993Z  2026-02-14 13:16:01.763 UTC [737] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8495845Z  2026-02-14 13:16:01.763 UTC [737] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8496751Z  2026-02-14 13:16:01.763 UTC [737] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8497706Z  2026-02-14 13:16:01.763 UTC [737] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8498667Z  2026-02-14 13:16:01.764 UTC [737] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8499577Z  2026-02-14 13:16:01.764 UTC [737] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8500476Z  2026-02-14 13:16:01.764 UTC [737] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8501626Z  2026-02-14 13:16:01.764 UTC [737] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8502764Z  2026-02-14 13:16:01.765 UTC [737] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8503946Z  2026-02-14 13:16:01.765 UTC [737] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8505028Z  2026-02-14 13:16:01.765 UTC [737] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8505904Z  2026-02-14 13:16:01.765 UTC [737] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8506894Z  2026-02-14 13:16:01.766 UTC [737] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8507764Z  2026-02-14 13:16:01.766 UTC [737] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8508638Z  2026-02-14 13:16:01.766 UTC [737] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8509719Z  2026-02-14 13:16:01.766 UTC [737] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8510912Z  2026-02-14 13:16:01.767 UTC [737] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8511973Z  2026-02-14 13:16:01.767 UTC [737] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8512944Z  2026-02-14 13:16:01.771 UTC [737] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8513905Z  2026-02-14 13:16:01.771 UTC [737] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8514723Z  2026-02-14 13:16:01.815 UTC [738] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8515203Z  2026-02-14 13:16:01.951 UTC [742] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8515646Z  2026-02-14 13:16:01.951 UTC [742] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8515967Z  	DO $$
2026-02-14T13:16:24.8516111Z  	BEGIN
2026-02-14T13:16:24.8516348Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8516724Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8517046Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8517383Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8517646Z  	    END IF;
2026-02-14T13:16:24.8517803Z  	END $$;
2026-02-14T13:16:24.8518114Z  2026-02-14 13:16:01.960 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8519177Z  2026-02-14 13:16:01.960 UTC [742] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8520245Z  2026-02-14 13:16:01.961 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8520998Z  2026-02-14 13:16:01.961 UTC [742] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8521740Z  2026-02-14 13:16:01.961 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8522440Z  2026-02-14 13:16:01.961 UTC [742] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8523141Z  2026-02-14 13:16:01.962 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8523940Z  2026-02-14 13:16:01.962 UTC [742] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8524646Z  2026-02-14 13:16:01.962 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8525364Z  2026-02-14 13:16:01.962 UTC [742] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8526190Z  2026-02-14 13:16:01.962 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8526952Z  2026-02-14 13:16:01.962 UTC [742] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8527705Z  2026-02-14 13:16:01.963 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8528395Z  2026-02-14 13:16:01.963 UTC [742] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8529087Z  2026-02-14 13:16:01.963 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8529759Z  2026-02-14 13:16:01.963 UTC [742] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8530519Z  2026-02-14 13:16:01.964 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8531239Z  2026-02-14 13:16:01.964 UTC [742] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8531947Z  2026-02-14 13:16:01.964 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8532632Z  2026-02-14 13:16:01.964 UTC [742] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8533322Z  2026-02-14 13:16:01.965 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8534677Z  2026-02-14 13:16:01.965 UTC [742] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8535471Z  2026-02-14 13:16:01.965 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8536253Z  2026-02-14 13:16:01.965 UTC [742] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8537039Z  2026-02-14 13:16:01.966 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8537832Z  2026-02-14 13:16:01.966 UTC [742] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8538604Z  2026-02-14 13:16:01.966 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8539200Z  2026-02-14 13:16:01.966 UTC [742] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8539705Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8540127Z  2026-02-14 13:16:01.967 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8540710Z  2026-02-14 13:16:01.967 UTC [742] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8541190Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8541612Z  2026-02-14 13:16:01.967 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8542199Z  2026-02-14 13:16:01.967 UTC [742] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8542682Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8542983Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8543371Z  2026-02-14 13:16:01.968 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8544112Z  2026-02-14 13:16:01.968 UTC [742] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8544789Z  2026-02-14 13:16:01.968 UTC [742] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8545642Z  2026-02-14 13:16:01.968 UTC [742] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8546420Z  2026-02-14 13:16:01.970 UTC [742] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8547261Z  2026-02-14 13:16:01.970 UTC [742] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8548052Z  2026-02-14 13:16:01.971 UTC [742] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8548896Z  2026-02-14 13:16:01.971 UTC [742] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8549892Z  2026-02-14 13:16:01.972 UTC [742] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8550840Z  2026-02-14 13:16:01.972 UTC [742] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8551793Z  2026-02-14 13:16:01.972 UTC [742] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8552698Z  2026-02-14 13:16:01.972 UTC [742] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8553587Z  2026-02-14 13:16:01.973 UTC [742] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8554838Z  2026-02-14 13:16:01.973 UTC [742] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8555978Z  2026-02-14 13:16:01.973 UTC [742] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8557081Z  2026-02-14 13:16:01.973 UTC [742] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8558160Z  2026-02-14 13:16:01.974 UTC [742] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8559033Z  2026-02-14 13:16:01.974 UTC [742] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8559895Z  2026-02-14 13:16:01.974 UTC [742] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8560762Z  2026-02-14 13:16:01.974 UTC [742] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8561629Z  2026-02-14 13:16:01.975 UTC [742] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8562706Z  2026-02-14 13:16:01.975 UTC [742] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8563878Z  2026-02-14 13:16:01.975 UTC [742] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8564943Z  2026-02-14 13:16:01.975 UTC [742] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8565915Z  2026-02-14 13:16:01.979 UTC [742] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8566882Z  2026-02-14 13:16:01.979 UTC [742] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8567698Z  2026-02-14 13:16:02.088 UTC [743] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8568188Z  2026-02-14 13:16:02.230 UTC [747] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8568619Z  2026-02-14 13:16:02.230 UTC [747] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8568940Z  	DO $$
2026-02-14T13:16:24.8569086Z  	BEGIN
2026-02-14T13:16:24.8569322Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8569683Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8570109Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8570431Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8570698Z  	    END IF;
2026-02-14T13:16:24.8570852Z  	END $$;
2026-02-14T13:16:24.8571168Z  2026-02-14 13:16:02.239 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8572269Z  2026-02-14 13:16:02.239 UTC [747] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8573335Z  2026-02-14 13:16:02.239 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8574181Z  2026-02-14 13:16:02.239 UTC [747] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8574921Z  2026-02-14 13:16:02.240 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8575624Z  2026-02-14 13:16:02.240 UTC [747] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8576323Z  2026-02-14 13:16:02.240 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8577036Z  2026-02-14 13:16:02.240 UTC [747] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8577730Z  2026-02-14 13:16:02.241 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8578437Z  2026-02-14 13:16:02.241 UTC [747] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8579144Z  2026-02-14 13:16:02.241 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8579896Z  2026-02-14 13:16:02.241 UTC [747] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8580647Z  2026-02-14 13:16:02.242 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8581334Z  2026-02-14 13:16:02.242 UTC [747] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8582018Z  2026-02-14 13:16:02.242 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8582687Z  2026-02-14 13:16:02.242 UTC [747] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8583344Z  2026-02-14 13:16:02.243 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8584141Z  2026-02-14 13:16:02.243 UTC [747] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8584849Z  2026-02-14 13:16:02.243 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8585646Z  2026-02-14 13:16:02.243 UTC [747] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8586326Z  2026-02-14 13:16:02.244 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8587081Z  2026-02-14 13:16:02.244 UTC [747] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8587828Z  2026-02-14 13:16:02.244 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8588597Z  2026-02-14 13:16:02.244 UTC [747] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8589459Z  2026-02-14 13:16:02.245 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8590240Z  2026-02-14 13:16:02.245 UTC [747] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8591008Z  2026-02-14 13:16:02.245 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8591609Z  2026-02-14 13:16:02.245 UTC [747] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8592104Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8592520Z  2026-02-14 13:16:02.246 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8593110Z  2026-02-14 13:16:02.246 UTC [747] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8593590Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8594110Z  2026-02-14 13:16:02.246 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8594696Z  2026-02-14 13:16:02.246 UTC [747] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8595189Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8595482Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8595870Z  2026-02-14 13:16:02.247 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8596495Z  2026-02-14 13:16:02.247 UTC [747] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8597160Z  2026-02-14 13:16:02.247 UTC [747] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8597878Z  2026-02-14 13:16:02.247 UTC [747] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8598663Z  2026-02-14 13:16:02.249 UTC [747] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8599506Z  2026-02-14 13:16:02.249 UTC [747] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8600318Z  2026-02-14 13:16:02.250 UTC [747] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8601170Z  2026-02-14 13:16:02.250 UTC [747] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8602062Z  2026-02-14 13:16:02.251 UTC [747] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8603025Z  2026-02-14 13:16:02.251 UTC [747] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8604070Z  2026-02-14 13:16:02.251 UTC [747] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8605087Z  2026-02-14 13:16:02.251 UTC [747] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8605976Z  2026-02-14 13:16:02.252 UTC [747] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8607128Z  2026-02-14 13:16:02.252 UTC [747] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8608271Z  2026-02-14 13:16:02.252 UTC [747] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8609446Z  2026-02-14 13:16:02.252 UTC [747] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8610521Z  2026-02-14 13:16:02.253 UTC [747] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8611382Z  2026-02-14 13:16:02.253 UTC [747] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8612243Z  2026-02-14 13:16:02.253 UTC [747] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8613107Z  2026-02-14 13:16:02.253 UTC [747] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8614071Z  2026-02-14 13:16:02.254 UTC [747] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8615156Z  2026-02-14 13:16:02.254 UTC [747] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8616242Z  2026-02-14 13:16:02.254 UTC [747] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8617308Z  2026-02-14 13:16:02.254 UTC [747] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8618292Z  2026-02-14 13:16:02.258 UTC [747] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8619140Z  2026-02-14 13:16:02.258 UTC [747] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8619949Z  2026-02-14 13:16:02.300 UTC [748] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8620439Z  2026-02-14 13:16:02.437 UTC [752] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8620869Z  2026-02-14 13:16:02.437 UTC [752] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8621189Z  	DO $$
2026-02-14T13:16:24.8621327Z  	BEGIN
2026-02-14T13:16:24.8621560Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8621915Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8622237Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8622563Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8622826Z  	    END IF;
2026-02-14T13:16:24.8622975Z  	END $$;
2026-02-14T13:16:24.8623282Z  2026-02-14 13:16:02.446 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8624588Z  2026-02-14 13:16:02.446 UTC [752] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8625640Z  2026-02-14 13:16:02.447 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8626386Z  2026-02-14 13:16:02.447 UTC [752] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8627127Z  2026-02-14 13:16:02.447 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8627821Z  2026-02-14 13:16:02.447 UTC [752] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8628620Z  2026-02-14 13:16:02.448 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8629335Z  2026-02-14 13:16:02.448 UTC [752] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8630039Z  2026-02-14 13:16:02.448 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8630745Z  2026-02-14 13:16:02.448 UTC [752] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8631453Z  2026-02-14 13:16:02.449 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8636011Z  2026-02-14 13:16:02.449 UTC [752] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8636855Z  2026-02-14 13:16:02.449 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8637596Z  2026-02-14 13:16:02.449 UTC [752] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8638295Z  2026-02-14 13:16:02.450 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8638971Z  2026-02-14 13:16:02.450 UTC [752] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8639639Z  2026-02-14 13:16:02.450 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8640352Z  2026-02-14 13:16:02.450 UTC [752] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8641066Z  2026-02-14 13:16:02.451 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8641761Z  2026-02-14 13:16:02.451 UTC [752] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8642453Z  2026-02-14 13:16:02.451 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8643206Z  2026-02-14 13:16:02.451 UTC [752] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8644079Z  2026-02-14 13:16:02.452 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8644866Z  2026-02-14 13:16:02.452 UTC [752] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8645629Z  2026-02-14 13:16:02.452 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8646403Z  2026-02-14 13:16:02.452 UTC [752] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8647179Z  2026-02-14 13:16:02.453 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8647770Z  2026-02-14 13:16:02.453 UTC [752] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8648423Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8648856Z  2026-02-14 13:16:02.453 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8649436Z  2026-02-14 13:16:02.453 UTC [752] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8649917Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8650337Z  2026-02-14 13:16:02.454 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8650918Z  2026-02-14 13:16:02.454 UTC [752] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8651504Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8651796Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8652177Z  2026-02-14 13:16:02.454 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8652801Z  2026-02-14 13:16:02.454 UTC [752] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8653465Z  2026-02-14 13:16:02.455 UTC [752] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8654273Z  2026-02-14 13:16:02.455 UTC [752] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8655049Z  2026-02-14 13:16:02.457 UTC [752] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8655893Z  2026-02-14 13:16:02.457 UTC [752] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8656690Z  2026-02-14 13:16:02.458 UTC [752] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8657540Z  2026-02-14 13:16:02.458 UTC [752] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8658436Z  2026-02-14 13:16:02.458 UTC [752] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8659379Z  2026-02-14 13:16:02.458 UTC [752] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8660325Z  2026-02-14 13:16:02.459 UTC [752] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8661222Z  2026-02-14 13:16:02.459 UTC [752] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8662114Z  2026-02-14 13:16:02.459 UTC [752] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8663250Z  2026-02-14 13:16:02.459 UTC [752] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8664468Z  2026-02-14 13:16:02.460 UTC [752] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8665537Z  2026-02-14 13:16:02.460 UTC [752] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8666616Z  2026-02-14 13:16:02.460 UTC [752] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8667484Z  2026-02-14 13:16:02.460 UTC [752] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8668448Z  2026-02-14 13:16:02.461 UTC [752] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8669303Z  2026-02-14 13:16:02.461 UTC [752] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8670161Z  2026-02-14 13:16:02.461 UTC [752] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8671229Z  2026-02-14 13:16:02.461 UTC [752] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8672444Z  2026-02-14 13:16:02.462 UTC [752] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8673500Z  2026-02-14 13:16:02.462 UTC [752] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8674568Z  2026-02-14 13:16:02.466 UTC [752] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8675425Z  2026-02-14 13:16:02.466 UTC [752] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8676229Z  2026-02-14 13:16:02.509 UTC [753] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8676710Z  2026-02-14 13:16:02.644 UTC [757] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8677142Z  2026-02-14 13:16:02.644 UTC [757] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8677456Z  	DO $$
2026-02-14T13:16:24.8677599Z  	BEGIN
2026-02-14T13:16:24.8677829Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8678186Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8678505Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8678825Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8679087Z  	    END IF;
2026-02-14T13:16:24.8679236Z  	END $$;
2026-02-14T13:16:24.8679541Z  2026-02-14 13:16:02.652 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8680601Z  2026-02-14 13:16:02.652 UTC [757] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8681652Z  2026-02-14 13:16:02.653 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8682404Z  2026-02-14 13:16:02.653 UTC [757] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8683135Z  2026-02-14 13:16:02.653 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8683913Z  2026-02-14 13:16:02.653 UTC [757] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8684603Z  2026-02-14 13:16:02.654 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8685306Z  2026-02-14 13:16:02.654 UTC [757] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8686004Z  2026-02-14 13:16:02.654 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8686719Z  2026-02-14 13:16:02.654 UTC [757] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8687527Z  2026-02-14 13:16:02.655 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8688272Z  2026-02-14 13:16:02.655 UTC [757] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8689011Z  2026-02-14 13:16:02.655 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8689691Z  2026-02-14 13:16:02.655 UTC [757] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8690373Z  2026-02-14 13:16:02.656 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8691145Z  2026-02-14 13:16:02.656 UTC [757] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8691799Z  2026-02-14 13:16:02.656 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8692497Z  2026-02-14 13:16:02.656 UTC [757] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8693198Z  2026-02-14 13:16:02.657 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8693978Z  2026-02-14 13:16:02.657 UTC [757] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8694657Z  2026-02-14 13:16:02.657 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8695406Z  2026-02-14 13:16:02.657 UTC [757] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8696150Z  2026-02-14 13:16:02.658 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8696911Z  2026-02-14 13:16:02.658 UTC [757] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8697673Z  2026-02-14 13:16:02.658 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8698449Z  2026-02-14 13:16:02.658 UTC [757] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8699214Z  2026-02-14 13:16:02.659 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8699801Z  2026-02-14 13:16:02.659 UTC [757] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8700288Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8700706Z  2026-02-14 13:16:02.659 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8701275Z  2026-02-14 13:16:02.659 UTC [757] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8701750Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8702164Z  2026-02-14 13:16:02.660 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8702738Z  2026-02-14 13:16:02.660 UTC [757] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8703218Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8703507Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8703983Z  2026-02-14 13:16:02.660 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8704599Z  2026-02-14 13:16:02.660 UTC [757] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8705258Z  2026-02-14 13:16:02.661 UTC [757] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8706073Z  2026-02-14 13:16:02.661 UTC [757] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8706863Z  2026-02-14 13:16:02.663 UTC [757] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8707690Z  2026-02-14 13:16:02.663 UTC [757] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8708486Z  2026-02-14 13:16:02.664 UTC [757] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8709338Z  2026-02-14 13:16:02.664 UTC [757] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8710327Z  2026-02-14 13:16:02.664 UTC [757] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8711271Z  2026-02-14 13:16:02.664 UTC [757] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8712223Z  2026-02-14 13:16:02.665 UTC [757] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8713124Z  2026-02-14 13:16:02.665 UTC [757] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8714109Z  2026-02-14 13:16:02.665 UTC [757] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8715236Z  2026-02-14 13:16:02.665 UTC [757] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8716364Z  2026-02-14 13:16:02.666 UTC [757] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8717446Z  2026-02-14 13:16:02.666 UTC [757] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8718513Z  2026-02-14 13:16:02.666 UTC [757] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8719375Z  2026-02-14 13:16:02.666 UTC [757] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8720227Z  2026-02-14 13:16:02.667 UTC [757] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8721074Z  2026-02-14 13:16:02.667 UTC [757] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8721937Z  2026-02-14 13:16:02.667 UTC [757] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8723005Z  2026-02-14 13:16:02.667 UTC [757] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8724161Z  2026-02-14 13:16:02.668 UTC [757] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8725215Z  2026-02-14 13:16:02.668 UTC [757] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8726190Z  2026-02-14 13:16:02.672 UTC [757] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8727149Z  2026-02-14 13:16:02.672 UTC [757] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8727961Z  2026-02-14 13:16:02.726 UTC [758] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8728440Z  2026-02-14 13:16:02.864 UTC [764] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8728862Z  2026-02-14 13:16:02.864 UTC [764] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8729174Z  	DO $$
2026-02-14T13:16:24.8729321Z  	BEGIN
2026-02-14T13:16:24.8729545Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8729897Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8730321Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8730639Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8730899Z  	    END IF;
2026-02-14T13:16:24.8731048Z  	END $$;
2026-02-14T13:16:24.8731354Z  2026-02-14 13:16:02.873 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8732408Z  2026-02-14 13:16:02.873 UTC [764] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8733452Z  2026-02-14 13:16:02.874 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8734290Z  2026-02-14 13:16:02.874 UTC [764] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8735031Z  2026-02-14 13:16:02.874 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8735714Z  2026-02-14 13:16:02.874 UTC [764] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8736411Z  2026-02-14 13:16:02.875 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8737110Z  2026-02-14 13:16:02.875 UTC [764] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8737809Z  2026-02-14 13:16:02.875 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8738502Z  2026-02-14 13:16:02.875 UTC [764] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8739196Z  2026-02-14 13:16:02.876 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8739942Z  2026-02-14 13:16:02.876 UTC [764] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8740683Z  2026-02-14 13:16:02.876 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8741361Z  2026-02-14 13:16:02.876 UTC [764] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8742030Z  2026-02-14 13:16:02.877 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8742679Z  2026-02-14 13:16:02.877 UTC [764] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8743331Z  2026-02-14 13:16:02.877 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8744120Z  2026-02-14 13:16:02.877 UTC [764] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8744818Z  2026-02-14 13:16:02.877 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8745609Z  2026-02-14 13:16:02.877 UTC [764] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8746292Z  2026-02-14 13:16:02.878 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8747041Z  2026-02-14 13:16:02.878 UTC [764] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8747778Z  2026-02-14 13:16:02.878 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8748537Z  2026-02-14 13:16:02.878 UTC [764] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8749391Z  2026-02-14 13:16:02.879 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8750169Z  2026-02-14 13:16:02.879 UTC [764] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8750931Z  2026-02-14 13:16:02.879 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8751517Z  2026-02-14 13:16:02.879 UTC [764] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8752001Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8752416Z  2026-02-14 13:16:02.880 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8752985Z  2026-02-14 13:16:02.880 UTC [764] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8753457Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8754015Z  2026-02-14 13:16:02.880 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8754586Z  2026-02-14 13:16:02.880 UTC [764] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8755069Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8755366Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8755741Z  2026-02-14 13:16:02.881 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8756359Z  2026-02-14 13:16:02.881 UTC [764] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8757017Z  2026-02-14 13:16:02.881 UTC [764] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8757722Z  2026-02-14 13:16:02.881 UTC [764] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8758492Z  2026-02-14 13:16:02.883 UTC [764] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8759321Z  2026-02-14 13:16:02.883 UTC [764] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8760109Z  2026-02-14 13:16:02.884 UTC [764] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8760954Z  2026-02-14 13:16:02.884 UTC [764] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8761845Z  2026-02-14 13:16:02.885 UTC [764] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8762782Z  2026-02-14 13:16:02.885 UTC [764] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8763826Z  2026-02-14 13:16:02.885 UTC [764] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8764838Z  2026-02-14 13:16:02.885 UTC [764] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8765728Z  2026-02-14 13:16:02.886 UTC [764] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8766871Z  2026-02-14 13:16:02.886 UTC [764] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8767990Z  2026-02-14 13:16:02.886 UTC [764] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8769201Z  2026-02-14 13:16:02.886 UTC [764] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8770270Z  2026-02-14 13:16:02.887 UTC [764] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8771129Z  2026-02-14 13:16:02.887 UTC [764] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8772015Z  2026-02-14 13:16:02.887 UTC [764] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8772865Z  2026-02-14 13:16:02.887 UTC [764] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8773832Z  2026-02-14 13:16:02.888 UTC [764] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8774909Z  2026-02-14 13:16:02.888 UTC [764] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8775973Z  2026-02-14 13:16:02.888 UTC [764] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8777041Z  2026-02-14 13:16:02.888 UTC [764] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8778016Z  2026-02-14 13:16:02.893 UTC [764] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8778873Z  2026-02-14 13:16:02.893 UTC [764] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8779678Z  2026-02-14 13:16:02.938 UTC [765] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8780157Z  2026-02-14 13:16:03.073 UTC [770] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8780582Z  2026-02-14 13:16:03.073 UTC [770] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8780887Z  	DO $$
2026-02-14T13:16:24.8781030Z  	BEGIN
2026-02-14T13:16:24.8781253Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8781606Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8781927Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8782243Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8782507Z  	    END IF;
2026-02-14T13:16:24.8782652Z  	END $$;
2026-02-14T13:16:24.8782976Z  2026-02-14 13:16:03.083 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8784247Z  2026-02-14 13:16:03.083 UTC [770] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8785307Z  2026-02-14 13:16:03.083 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8786061Z  2026-02-14 13:16:03.083 UTC [770] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8786277Z  2026-02-14 13:16:03.083 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8786655Z  2026-02-14 13:16:03.083 UTC [770] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8786976Z  2026-02-14 13:16:03.084 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8787367Z  2026-02-14 13:16:03.084 UTC [770] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8787583Z  2026-02-14 13:16:03.084 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8787959Z  2026-02-14 13:16:03.084 UTC [770] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8788174Z  2026-02-14 13:16:03.085 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8788598Z  2026-02-14 13:16:03.085 UTC [770] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8788813Z  2026-02-14 13:16:03.085 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8789179Z  2026-02-14 13:16:03.085 UTC [770] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8789388Z  2026-02-14 13:16:03.086 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8789739Z  2026-02-14 13:16:03.086 UTC [770] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8789951Z  2026-02-14 13:16:03.086 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8790336Z  2026-02-14 13:16:03.086 UTC [770] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8790551Z  2026-02-14 13:16:03.087 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8790918Z  2026-02-14 13:16:03.087 UTC [770] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8791133Z  2026-02-14 13:16:03.087 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8791567Z  2026-02-14 13:16:03.087 UTC [770] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8791783Z  2026-02-14 13:16:03.088 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8792229Z  2026-02-14 13:16:03.088 UTC [770] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8792445Z  2026-02-14 13:16:03.088 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8792897Z  2026-02-14 13:16:03.088 UTC [770] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8793116Z  2026-02-14 13:16:03.089 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8793390Z  2026-02-14 13:16:03.089 UTC [770] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8793592Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8793918Z  2026-02-14 13:16:03.089 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8794172Z  2026-02-14 13:16:03.089 UTC [770] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8794302Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8794523Z  2026-02-14 13:16:03.090 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8794781Z  2026-02-14 13:16:03.090 UTC [770] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8795002Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8795089Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8795301Z  2026-02-14 13:16:03.090 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8795606Z  2026-02-14 13:16:03.090 UTC [770] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8795871Z  2026-02-14 13:16:03.091 UTC [770] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8796223Z  2026-02-14 13:16:03.091 UTC [770] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8796553Z  2026-02-14 13:16:03.093 UTC [770] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8796962Z  2026-02-14 13:16:03.093 UTC [770] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8797256Z  2026-02-14 13:16:03.094 UTC [770] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8797723Z  2026-02-14 13:16:03.094 UTC [770] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8798055Z  2026-02-14 13:16:03.094 UTC [770] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8798567Z  2026-02-14 13:16:03.094 UTC [770] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8798909Z  2026-02-14 13:16:03.095 UTC [770] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8799363Z  2026-02-14 13:16:03.095 UTC [770] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8799691Z  2026-02-14 13:16:03.095 UTC [770] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8800398Z  2026-02-14 13:16:03.095 UTC [770] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8800726Z  2026-02-14 13:16:03.096 UTC [770] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8801378Z  2026-02-14 13:16:03.096 UTC [770] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8801696Z  2026-02-14 13:16:03.096 UTC [770] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8802152Z  2026-02-14 13:16:03.096 UTC [770] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8802587Z  2026-02-14 13:16:03.097 UTC [770] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8803043Z  2026-02-14 13:16:03.097 UTC [770] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8803370Z  2026-02-14 13:16:03.097 UTC [770] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8804115Z  2026-02-14 13:16:03.097 UTC [770] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8804547Z  2026-02-14 13:16:03.098 UTC [770] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8805204Z  2026-02-14 13:16:03.098 UTC [770] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8805455Z  2026-02-14 13:16:03.102 UTC [770] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8805954Z  2026-02-14 13:16:03.102 UTC [770] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8806164Z  2026-02-14 13:16:03.147 UTC [771] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8806336Z  2026-02-14 13:16:03.282 UTC [776] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8806494Z  2026-02-14 13:16:03.282 UTC [776] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8806553Z  	DO $$
2026-02-14T13:16:24.8806611Z  	BEGIN
2026-02-14T13:16:24.8806760Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8806878Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8807005Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8807118Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8807180Z  	    END IF;
2026-02-14T13:16:24.8807237Z  	END $$;
2026-02-14T13:16:24.8807459Z  2026-02-14 13:16:03.291 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8808187Z  2026-02-14 13:16:03.291 UTC [776] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8808407Z  2026-02-14 13:16:03.292 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8808833Z  2026-02-14 13:16:03.292 UTC [776] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8809047Z  2026-02-14 13:16:03.292 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8809416Z  2026-02-14 13:16:03.292 UTC [776] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8809650Z  2026-02-14 13:16:03.292 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8810026Z  2026-02-14 13:16:03.292 UTC [776] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8810232Z  2026-02-14 13:16:03.293 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8810618Z  2026-02-14 13:16:03.293 UTC [776] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8810933Z  2026-02-14 13:16:03.293 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8811361Z  2026-02-14 13:16:03.293 UTC [776] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8811573Z  2026-02-14 13:16:03.294 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8811930Z  2026-02-14 13:16:03.294 UTC [776] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8812142Z  2026-02-14 13:16:03.294 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8812550Z  2026-02-14 13:16:03.294 UTC [776] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8812761Z  2026-02-14 13:16:03.295 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8813148Z  2026-02-14 13:16:03.295 UTC [776] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8813358Z  2026-02-14 13:16:03.295 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8813815Z  2026-02-14 13:16:03.295 UTC [776] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8814031Z  2026-02-14 13:16:03.296 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8814453Z  2026-02-14 13:16:03.296 UTC [776] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8814665Z  2026-02-14 13:16:03.296 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8815109Z  2026-02-14 13:16:03.296 UTC [776] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8815321Z  2026-02-14 13:16:03.297 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8815776Z  2026-02-14 13:16:03.297 UTC [776] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8815987Z  2026-02-14 13:16:03.297 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8816257Z  2026-02-14 13:16:03.297 UTC [776] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8816371Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8816583Z  2026-02-14 13:16:03.298 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8816833Z  2026-02-14 13:16:03.298 UTC [776] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8816962Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8817170Z  2026-02-14 13:16:03.298 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8817426Z  2026-02-14 13:16:03.298 UTC [776] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8817545Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8817629Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8817839Z  2026-02-14 13:16:03.299 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8818138Z  2026-02-14 13:16:03.299 UTC [776] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8818399Z  2026-02-14 13:16:03.299 UTC [776] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8818844Z  2026-02-14 13:16:03.299 UTC [776] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8819174Z  2026-02-14 13:16:03.301 UTC [776] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8819573Z  2026-02-14 13:16:03.301 UTC [776] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8819856Z  2026-02-14 13:16:03.302 UTC [776] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8820317Z  2026-02-14 13:16:03.302 UTC [776] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8820743Z  2026-02-14 13:16:03.303 UTC [776] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8821256Z  2026-02-14 13:16:03.303 UTC [776] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8821593Z  2026-02-14 13:16:03.303 UTC [776] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8822053Z  2026-02-14 13:16:03.303 UTC [776] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8822381Z  2026-02-14 13:16:03.304 UTC [776] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8823078Z  2026-02-14 13:16:03.304 UTC [776] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8823415Z  2026-02-14 13:16:03.304 UTC [776] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8824184Z  2026-02-14 13:16:03.304 UTC [776] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8824502Z  2026-02-14 13:16:03.305 UTC [776] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8824945Z  2026-02-14 13:16:03.305 UTC [776] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8825258Z  2026-02-14 13:16:03.305 UTC [776] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8825700Z  2026-02-14 13:16:03.305 UTC [776] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8826022Z  2026-02-14 13:16:03.306 UTC [776] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8826667Z  2026-02-14 13:16:03.306 UTC [776] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8826997Z  2026-02-14 13:16:03.306 UTC [776] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8827612Z  2026-02-14 13:16:03.306 UTC [776] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8827862Z  2026-02-14 13:16:03.310 UTC [776] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8828488Z  2026-02-14 13:16:03.310 UTC [776] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8828695Z  2026-02-14 13:16:03.386 UTC [777] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8828869Z  2026-02-14 13:16:03.523 UTC [784] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8829024Z  2026-02-14 13:16:03.523 UTC [784] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8829083Z  	DO $$
2026-02-14T13:16:24.8829143Z  	BEGIN
2026-02-14T13:16:24.8829291Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8829497Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8829619Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8829736Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8829796Z  	    END IF;
2026-02-14T13:16:24.8829854Z  	END $$;
2026-02-14T13:16:24.8830080Z  2026-02-14 13:16:03.531 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8830807Z  2026-02-14 13:16:03.531 UTC [784] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8831029Z  2026-02-14 13:16:03.532 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8831450Z  2026-02-14 13:16:03.532 UTC [784] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8831670Z  2026-02-14 13:16:03.532 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8832052Z  2026-02-14 13:16:03.532 UTC [784] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8832270Z  2026-02-14 13:16:03.533 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8832653Z  2026-02-14 13:16:03.533 UTC [784] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8832870Z  2026-02-14 13:16:03.533 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8833247Z  2026-02-14 13:16:03.533 UTC [784] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8833463Z  2026-02-14 13:16:03.534 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8833988Z  2026-02-14 13:16:03.534 UTC [784] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8834204Z  2026-02-14 13:16:03.534 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8834566Z  2026-02-14 13:16:03.534 UTC [784] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8834777Z  2026-02-14 13:16:03.535 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8835117Z  2026-02-14 13:16:03.535 UTC [784] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8835333Z  2026-02-14 13:16:03.535 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8835713Z  2026-02-14 13:16:03.535 UTC [784] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8835925Z  2026-02-14 13:16:03.536 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8836404Z  2026-02-14 13:16:03.536 UTC [784] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8836616Z  2026-02-14 13:16:03.536 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8837044Z  2026-02-14 13:16:03.536 UTC [784] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8837258Z  2026-02-14 13:16:03.537 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8837699Z  2026-02-14 13:16:03.537 UTC [784] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8838012Z  2026-02-14 13:16:03.537 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8838465Z  2026-02-14 13:16:03.537 UTC [784] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8838676Z  2026-02-14 13:16:03.538 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8838950Z  2026-02-14 13:16:03.538 UTC [784] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8839062Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8839269Z  2026-02-14 13:16:03.538 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8839525Z  2026-02-14 13:16:03.538 UTC [784] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8839643Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8839853Z  2026-02-14 13:16:03.539 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8840112Z  2026-02-14 13:16:03.539 UTC [784] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8840230Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8840310Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8840524Z  2026-02-14 13:16:03.539 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8840816Z  2026-02-14 13:16:03.539 UTC [784] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8841075Z  2026-02-14 13:16:03.540 UTC [784] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8841415Z  2026-02-14 13:16:03.540 UTC [784] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8841742Z  2026-02-14 13:16:03.542 UTC [784] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8842147Z  2026-02-14 13:16:03.542 UTC [784] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8842428Z  2026-02-14 13:16:03.543 UTC [784] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8842882Z  2026-02-14 13:16:03.543 UTC [784] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8843212Z  2026-02-14 13:16:03.543 UTC [784] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8843815Z  2026-02-14 13:16:03.543 UTC [784] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8844154Z  2026-02-14 13:16:03.544 UTC [784] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8844719Z  2026-02-14 13:16:03.544 UTC [784] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8845046Z  2026-02-14 13:16:03.544 UTC [784] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8845745Z  2026-02-14 13:16:03.544 UTC [784] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8846070Z  2026-02-14 13:16:03.545 UTC [784] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8846846Z  2026-02-14 13:16:03.545 UTC [784] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8847168Z  2026-02-14 13:16:03.545 UTC [784] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8847610Z  2026-02-14 13:16:03.545 UTC [784] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8847924Z  2026-02-14 13:16:03.546 UTC [784] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8848360Z  2026-02-14 13:16:03.546 UTC [784] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8848678Z  2026-02-14 13:16:03.546 UTC [784] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8849329Z  2026-02-14 13:16:03.546 UTC [784] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8849651Z  2026-02-14 13:16:03.547 UTC [784] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8850268Z  2026-02-14 13:16:03.547 UTC [784] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8850514Z  2026-02-14 13:16:03.551 UTC [784] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8851016Z  2026-02-14 13:16:03.551 UTC [784] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8851226Z  2026-02-14 13:16:03.628 UTC [785] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8851396Z  2026-02-14 13:16:03.764 UTC [792] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8851551Z  2026-02-14 13:16:03.764 UTC [792] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8851611Z  	DO $$
2026-02-14T13:16:24.8851670Z  	BEGIN
2026-02-14T13:16:24.8851815Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8851927Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8852047Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8852157Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8852219Z  	    END IF;
2026-02-14T13:16:24.8852275Z  	END $$;
2026-02-14T13:16:24.8852495Z  2026-02-14 13:16:03.774 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8853300Z  2026-02-14 13:16:03.774 UTC [792] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8853517Z  2026-02-14 13:16:03.774 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8854032Z  2026-02-14 13:16:03.774 UTC [792] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8854251Z  2026-02-14 13:16:03.775 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8854623Z  2026-02-14 13:16:03.775 UTC [792] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8854938Z  2026-02-14 13:16:03.775 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8855324Z  2026-02-14 13:16:03.775 UTC [792] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8855540Z  2026-02-14 13:16:03.776 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8855925Z  2026-02-14 13:16:03.776 UTC [792] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8856136Z  2026-02-14 13:16:03.776 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8856561Z  2026-02-14 13:16:03.776 UTC [792] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8856776Z  2026-02-14 13:16:03.777 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8857139Z  2026-02-14 13:16:03.777 UTC [792] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8857351Z  2026-02-14 13:16:03.777 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8857694Z  2026-02-14 13:16:03.777 UTC [792] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8857904Z  2026-02-14 13:16:03.778 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8858291Z  2026-02-14 13:16:03.778 UTC [792] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8858503Z  2026-02-14 13:16:03.778 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8858861Z  2026-02-14 13:16:03.778 UTC [792] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8859077Z  2026-02-14 13:16:03.778 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8859501Z  2026-02-14 13:16:03.778 UTC [792] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8859722Z  2026-02-14 13:16:03.779 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8860167Z  2026-02-14 13:16:03.779 UTC [792] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8860382Z  2026-02-14 13:16:03.779 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8860831Z  2026-02-14 13:16:03.779 UTC [792] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8861053Z  2026-02-14 13:16:03.780 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8861323Z  2026-02-14 13:16:03.780 UTC [792] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8861541Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8861761Z  2026-02-14 13:16:03.780 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8862015Z  2026-02-14 13:16:03.780 UTC [792] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8862138Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8862353Z  2026-02-14 13:16:03.781 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8862608Z  2026-02-14 13:16:03.781 UTC [792] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8862803Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8862890Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8863103Z  2026-02-14 13:16:03.781 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8863404Z  2026-02-14 13:16:03.781 UTC [792] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8863758Z  2026-02-14 13:16:03.782 UTC [792] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8864105Z  2026-02-14 13:16:03.782 UTC [792] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8864434Z  2026-02-14 13:16:03.784 UTC [792] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8864836Z  2026-02-14 13:16:03.784 UTC [792] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8865119Z  2026-02-14 13:16:03.785 UTC [792] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8865576Z  2026-02-14 13:16:03.785 UTC [792] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8865903Z  2026-02-14 13:16:03.785 UTC [792] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8866402Z  2026-02-14 13:16:03.785 UTC [792] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8866744Z  2026-02-14 13:16:03.786 UTC [792] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8867202Z  2026-02-14 13:16:03.786 UTC [792] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8867532Z  2026-02-14 13:16:03.786 UTC [792] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8868496Z  2026-02-14 13:16:03.786 UTC [792] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8869011Z  2026-02-14 13:16:03.787 UTC [792] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8870070Z  2026-02-14 13:16:03.787 UTC [792] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8870598Z  2026-02-14 13:16:03.787 UTC [792] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8871353Z  2026-02-14 13:16:03.787 UTC [792] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8872172Z  2026-02-14 13:16:03.788 UTC [792] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8873020Z  2026-02-14 13:16:03.788 UTC [792] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8873580Z  2026-02-14 13:16:03.788 UTC [792] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8874937Z  2026-02-14 13:16:03.788 UTC [792] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8875821Z  2026-02-14 13:16:03.788 UTC [792] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8876955Z  2026-02-14 13:16:03.788 UTC [792] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8877406Z  2026-02-14 13:16:03.792 UTC [792] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8878270Z  2026-02-14 13:16:03.792 UTC [792] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8878642Z  2026-02-14 13:16:03.884 UTC [793] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8878952Z  2026-02-14 13:16:04.017 UTC [802] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8879237Z  2026-02-14 13:16:04.017 UTC [802] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8879348Z  	DO $$
2026-02-14T13:16:24.8879455Z  	BEGIN
2026-02-14T13:16:24.8879723Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8879924Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8880138Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8880346Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8880453Z  	    END IF;
2026-02-14T13:16:24.8880560Z  	END $$;
2026-02-14T13:16:24.8880979Z  2026-02-14 13:16:04.026 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8882380Z  2026-02-14 13:16:04.026 UTC [802] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8882826Z  2026-02-14 13:16:04.027 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8883833Z  2026-02-14 13:16:04.027 UTC [802] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8884274Z  2026-02-14 13:16:04.027 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8884986Z  2026-02-14 13:16:04.027 UTC [802] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8885416Z  2026-02-14 13:16:04.028 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8886138Z  2026-02-14 13:16:04.028 UTC [802] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8886519Z  2026-02-14 13:16:04.028 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8887243Z  2026-02-14 13:16:04.028 UTC [802] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8887854Z  2026-02-14 13:16:04.029 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8888655Z  2026-02-14 13:16:04.029 UTC [802] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8889071Z  2026-02-14 13:16:04.029 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8889742Z  2026-02-14 13:16:04.029 UTC [802] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8890144Z  2026-02-14 13:16:04.030 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8890957Z  2026-02-14 13:16:04.030 UTC [802] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8891363Z  2026-02-14 13:16:04.030 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8892112Z  2026-02-14 13:16:04.030 UTC [802] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8892533Z  2026-02-14 13:16:04.031 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8893210Z  2026-02-14 13:16:04.031 UTC [802] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8893813Z  2026-02-14 13:16:04.031 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8894719Z  2026-02-14 13:16:04.031 UTC [802] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8895147Z  2026-02-14 13:16:04.032 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8895974Z  2026-02-14 13:16:04.032 UTC [802] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8896375Z  2026-02-14 13:16:04.032 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8897233Z  2026-02-14 13:16:04.032 UTC [802] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8897665Z  2026-02-14 13:16:04.033 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8898175Z  2026-02-14 13:16:04.033 UTC [802] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8898392Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8898795Z  2026-02-14 13:16:04.033 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8899271Z  2026-02-14 13:16:04.033 UTC [802] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8899488Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8899891Z  2026-02-14 13:16:04.034 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8900437Z  2026-02-14 13:16:04.034 UTC [802] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8900660Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8900806Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8901188Z  2026-02-14 13:16:04.034 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8901736Z  2026-02-14 13:16:04.034 UTC [802] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8902257Z  2026-02-14 13:16:04.035 UTC [802] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8903142Z  2026-02-14 13:16:04.035 UTC [802] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8903994Z  2026-02-14 13:16:04.037 UTC [802] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8904780Z  2026-02-14 13:16:04.037 UTC [802] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8905331Z  2026-02-14 13:16:04.037 UTC [802] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8906216Z  2026-02-14 13:16:04.037 UTC [802] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8907097Z  2026-02-14 13:16:04.038 UTC [802] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8908075Z  2026-02-14 13:16:04.038 UTC [802] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8908728Z  2026-02-14 13:16:04.039 UTC [802] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8909633Z  2026-02-14 13:16:04.039 UTC [802] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8910273Z  2026-02-14 13:16:04.039 UTC [802] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8911635Z  2026-02-14 13:16:04.039 UTC [802] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8912307Z  2026-02-14 13:16:04.040 UTC [802] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8913569Z  2026-02-14 13:16:04.040 UTC [802] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8914501Z  2026-02-14 13:16:04.040 UTC [802] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8915364Z  2026-02-14 13:16:04.040 UTC [802] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8916002Z  2026-02-14 13:16:04.040 UTC [802] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8916867Z  2026-02-14 13:16:04.040 UTC [802] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8917490Z  2026-02-14 13:16:04.041 UTC [802] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8918712Z  2026-02-14 13:16:04.041 UTC [802] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8919358Z  2026-02-14 13:16:04.041 UTC [802] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8920532Z  2026-02-14 13:16:04.041 UTC [802] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8921073Z  2026-02-14 13:16:04.045 UTC [802] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8922229Z  2026-02-14 13:16:04.045 UTC [802] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8922620Z  2026-02-14 13:16:04.092 UTC [803] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8922950Z  2026-02-14 13:16:04.229 UTC [808] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8923237Z  2026-02-14 13:16:04.229 UTC [808] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8923342Z  	DO $$
2026-02-14T13:16:24.8923452Z  	BEGIN
2026-02-14T13:16:24.8923963Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8924374Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8924602Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8924810Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8924911Z  	    END IF;
2026-02-14T13:16:24.8925019Z  	END $$;
2026-02-14T13:16:24.8925467Z  2026-02-14 13:16:04.238 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8926851Z  2026-02-14 13:16:04.238 UTC [808] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8927282Z  2026-02-14 13:16:04.238 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8928052Z  2026-02-14 13:16:04.238 UTC [808] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8928466Z  2026-02-14 13:16:04.239 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8929159Z  2026-02-14 13:16:04.239 UTC [808] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8929572Z  2026-02-14 13:16:04.239 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8930303Z  2026-02-14 13:16:04.239 UTC [808] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8930727Z  2026-02-14 13:16:04.240 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8931446Z  2026-02-14 13:16:04.240 UTC [808] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8931875Z  2026-02-14 13:16:04.240 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8932722Z  2026-02-14 13:16:04.240 UTC [808] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8933152Z  2026-02-14 13:16:04.241 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8934251Z  2026-02-14 13:16:04.241 UTC [808] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8934672Z  2026-02-14 13:16:04.241 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8935315Z  2026-02-14 13:16:04.241 UTC [808] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8935747Z  2026-02-14 13:16:04.242 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8936465Z  2026-02-14 13:16:04.242 UTC [808] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8936898Z  2026-02-14 13:16:04.242 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8937881Z  2026-02-14 13:16:04.242 UTC [808] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8938337Z  2026-02-14 13:16:04.243 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8939161Z  2026-02-14 13:16:04.243 UTC [808] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8939580Z  2026-02-14 13:16:04.243 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8940440Z  2026-02-14 13:16:04.243 UTC [808] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8941130Z  2026-02-14 13:16:04.244 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8942023Z  2026-02-14 13:16:04.244 UTC [808] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8942438Z  2026-02-14 13:16:04.244 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8942946Z  2026-02-14 13:16:04.244 UTC [808] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8943150Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8943562Z  2026-02-14 13:16:04.245 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8944199Z  2026-02-14 13:16:04.245 UTC [808] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8944420Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8944841Z  2026-02-14 13:16:04.245 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8945327Z  2026-02-14 13:16:04.245 UTC [808] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8945559Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8945726Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8946124Z  2026-02-14 13:16:04.246 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8946676Z  2026-02-14 13:16:04.246 UTC [808] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8947191Z  2026-02-14 13:16:04.246 UTC [808] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8947822Z  2026-02-14 13:16:04.246 UTC [808] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8948442Z  2026-02-14 13:16:04.248 UTC [808] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8949249Z  2026-02-14 13:16:04.248 UTC [808] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8949775Z  2026-02-14 13:16:04.249 UTC [808] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8950667Z  2026-02-14 13:16:04.249 UTC [808] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8951286Z  2026-02-14 13:16:04.250 UTC [808] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8952247Z  2026-02-14 13:16:04.250 UTC [808] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8952903Z  2026-02-14 13:16:04.250 UTC [808] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8954329Z  2026-02-14 13:16:04.250 UTC [808] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8954971Z  2026-02-14 13:16:04.251 UTC [808] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8956321Z  2026-02-14 13:16:04.251 UTC [808] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.8956980Z  2026-02-14 13:16:04.251 UTC [808] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8958482Z  2026-02-14 13:16:04.251 UTC [808] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.8959135Z  2026-02-14 13:16:04.252 UTC [808] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8960001Z  2026-02-14 13:16:04.252 UTC [808] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8960632Z  2026-02-14 13:16:04.252 UTC [808] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8961491Z  2026-02-14 13:16:04.252 UTC [808] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.8962100Z  2026-02-14 13:16:04.253 UTC [808] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8963349Z  2026-02-14 13:16:04.253 UTC [808] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.8964219Z  2026-02-14 13:16:04.253 UTC [808] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8965373Z  2026-02-14 13:16:04.253 UTC [808] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.8965824Z  2026-02-14 13:16:04.257 UTC [808] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.8966736Z  2026-02-14 13:16:04.257 UTC [808] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.8967126Z  2026-02-14 13:16:04.304 UTC [809] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.8967449Z  2026-02-14 13:16:04.457 UTC [814] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.8967744Z  2026-02-14 13:16:04.457 UTC [814] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.8967865Z  	DO $$
2026-02-14T13:16:24.8967972Z  	BEGIN
2026-02-14T13:16:24.8968247Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.8968462Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.8968678Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.8968887Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.8969001Z  	    END IF;
2026-02-14T13:16:24.8969107Z  	END $$;
2026-02-14T13:16:24.8969533Z  2026-02-14 13:16:04.466 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8971090Z  2026-02-14 13:16:04.466 UTC [814] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.8971521Z  2026-02-14 13:16:04.466 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8972388Z  2026-02-14 13:16:04.466 UTC [814] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.8972805Z  2026-02-14 13:16:04.467 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8973506Z  2026-02-14 13:16:04.467 UTC [814] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.8974310Z  2026-02-14 13:16:04.467 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8975034Z  2026-02-14 13:16:04.467 UTC [814] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.8975454Z  2026-02-14 13:16:04.468 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8976164Z  2026-02-14 13:16:04.468 UTC [814] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.8976576Z  2026-02-14 13:16:04.468 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8977444Z  2026-02-14 13:16:04.468 UTC [814] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.8977863Z  2026-02-14 13:16:04.469 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8978538Z  2026-02-14 13:16:04.469 UTC [814] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.8978956Z  2026-02-14 13:16:04.469 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8979606Z  2026-02-14 13:16:04.469 UTC [814] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.8980013Z  2026-02-14 13:16:04.470 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8980743Z  2026-02-14 13:16:04.470 UTC [814] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.8981204Z  2026-02-14 13:16:04.470 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8981910Z  2026-02-14 13:16:04.470 UTC [814] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.8982350Z  2026-02-14 13:16:04.471 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8983167Z  2026-02-14 13:16:04.471 UTC [814] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.8983811Z  2026-02-14 13:16:04.471 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8984676Z  2026-02-14 13:16:04.471 UTC [814] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.8985098Z  2026-02-14 13:16:04.472 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8985995Z  2026-02-14 13:16:04.472 UTC [814] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.8986436Z  2026-02-14 13:16:04.472 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8986950Z  2026-02-14 13:16:04.472 UTC [814] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.8987421Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.8987875Z  2026-02-14 13:16:04.473 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8988457Z  2026-02-14 13:16:04.473 UTC [814] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.8988685Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.8989098Z  2026-02-14 13:16:04.473 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8989601Z  2026-02-14 13:16:04.473 UTC [814] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.8990133Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.8990292Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.8990706Z  2026-02-14 13:16:04.474 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.8991247Z  2026-02-14 13:16:04.474 UTC [814] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.8991725Z  2026-02-14 13:16:04.474 UTC [814] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.8992362Z  2026-02-14 13:16:04.474 UTC [814] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.8992979Z  2026-02-14 13:16:04.476 UTC [814] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8993974Z  2026-02-14 13:16:04.476 UTC [814] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.8994529Z  2026-02-14 13:16:04.477 UTC [814] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8995415Z  2026-02-14 13:16:04.477 UTC [814] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.8996060Z  2026-02-14 13:16:04.478 UTC [814] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8997054Z  2026-02-14 13:16:04.478 UTC [814] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.8997725Z  2026-02-14 13:16:04.478 UTC [814] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.8998620Z  2026-02-14 13:16:04.478 UTC [814] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.8999276Z  2026-02-14 13:16:04.479 UTC [814] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9000626Z  2026-02-14 13:16:04.479 UTC [814] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9001274Z  2026-02-14 13:16:04.479 UTC [814] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9002525Z  2026-02-14 13:16:04.479 UTC [814] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9003151Z  2026-02-14 13:16:04.480 UTC [814] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9004227Z  2026-02-14 13:16:04.480 UTC [814] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9005046Z  2026-02-14 13:16:04.480 UTC [814] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9005909Z  2026-02-14 13:16:04.480 UTC [814] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9006509Z  2026-02-14 13:16:04.481 UTC [814] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9007767Z  2026-02-14 13:16:04.481 UTC [814] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9008603Z  2026-02-14 13:16:04.482 UTC [814] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9009810Z  2026-02-14 13:16:04.482 UTC [814] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9010277Z  2026-02-14 13:16:04.487 UTC [814] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9011243Z  2026-02-14 13:16:04.487 UTC [814] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9011641Z  2026-02-14 13:16:04.539 UTC [822] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9011911Z  2026-02-14 13:16:04.551 UTC [827] FATAL:  role "root" does not exist
2026-02-14T13:16:24.9012251Z  2026-02-14 13:16:04.678 UTC [829] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9012547Z  2026-02-14 13:16:04.678 UTC [829] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9012672Z  	DO $$
2026-02-14T13:16:24.9012786Z  	BEGIN
2026-02-14T13:16:24.9013073Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9013287Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9013524Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9013951Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9014071Z  	    END IF;
2026-02-14T13:16:24.9014197Z  	END $$;
2026-02-14T13:16:24.9014616Z  2026-02-14 13:16:04.687 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9016018Z  2026-02-14 13:16:04.687 UTC [829] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9016468Z  2026-02-14 13:16:04.687 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9017308Z  2026-02-14 13:16:04.687 UTC [829] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9017745Z  2026-02-14 13:16:04.688 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9018476Z  2026-02-14 13:16:04.688 UTC [829] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9018904Z  2026-02-14 13:16:04.688 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9019647Z  2026-02-14 13:16:04.688 UTC [829] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9020086Z  2026-02-14 13:16:04.689 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9021060Z  2026-02-14 13:16:04.689 UTC [829] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9021502Z  2026-02-14 13:16:04.689 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9022306Z  2026-02-14 13:16:04.689 UTC [829] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9022742Z  2026-02-14 13:16:04.690 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9023446Z  2026-02-14 13:16:04.690 UTC [829] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9024302Z  2026-02-14 13:16:04.690 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9024959Z  2026-02-14 13:16:04.690 UTC [829] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9025382Z  2026-02-14 13:16:04.691 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9026121Z  2026-02-14 13:16:04.691 UTC [829] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9026545Z  2026-02-14 13:16:04.691 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9027257Z  2026-02-14 13:16:04.691 UTC [829] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9027681Z  2026-02-14 13:16:04.692 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9028503Z  2026-02-14 13:16:04.692 UTC [829] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9028917Z  2026-02-14 13:16:04.692 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9029781Z  2026-02-14 13:16:04.692 UTC [829] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9030184Z  2026-02-14 13:16:04.693 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9031049Z  2026-02-14 13:16:04.693 UTC [829] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9031473Z  2026-02-14 13:16:04.693 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9031979Z  2026-02-14 13:16:04.693 UTC [829] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9032197Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9032616Z  2026-02-14 13:16:04.694 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9033105Z  2026-02-14 13:16:04.694 UTC [829] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9033318Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9033944Z  2026-02-14 13:16:04.694 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9034452Z  2026-02-14 13:16:04.694 UTC [829] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9034682Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9034884Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9035312Z  2026-02-14 13:16:04.695 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9035922Z  2026-02-14 13:16:04.695 UTC [829] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9036678Z  2026-02-14 13:16:04.695 UTC [829] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9037383Z  2026-02-14 13:16:04.695 UTC [829] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9038025Z  2026-02-14 13:16:04.697 UTC [829] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9038813Z  2026-02-14 13:16:04.697 UTC [829] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9039357Z  2026-02-14 13:16:04.698 UTC [829] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9040487Z  2026-02-14 13:16:04.698 UTC [829] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9041149Z  2026-02-14 13:16:04.698 UTC [829] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9042148Z  2026-02-14 13:16:04.698 UTC [829] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9042836Z  2026-02-14 13:16:04.699 UTC [829] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9043956Z  2026-02-14 13:16:04.699 UTC [829] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9044633Z  2026-02-14 13:16:04.699 UTC [829] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9046015Z  2026-02-14 13:16:04.699 UTC [829] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9046657Z  2026-02-14 13:16:04.700 UTC [829] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9047933Z  2026-02-14 13:16:04.700 UTC [829] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9048564Z  2026-02-14 13:16:04.700 UTC [829] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9049437Z  2026-02-14 13:16:04.700 UTC [829] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9050084Z  2026-02-14 13:16:04.701 UTC [829] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9050943Z  2026-02-14 13:16:04.701 UTC [829] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9051567Z  2026-02-14 13:16:04.701 UTC [829] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9052823Z  2026-02-14 13:16:04.701 UTC [829] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9053557Z  2026-02-14 13:16:04.702 UTC [829] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9055154Z  2026-02-14 13:16:04.702 UTC [829] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9055872Z  2026-02-14 13:16:04.706 UTC [829] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9056836Z  2026-02-14 13:16:04.706 UTC [829] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9057248Z  2026-02-14 13:16:05.320 UTC [830] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9057646Z  2026-02-14 13:16:05.320 UTC [831] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9057988Z  2026-02-14 13:16:05.460 UTC [835] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9058290Z  2026-02-14 13:16:05.460 UTC [835] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9058644Z  	DO $$
2026-02-14T13:16:24.9058763Z  	BEGIN
2026-02-14T13:16:24.9059055Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9059258Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9059495Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9059705Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9059815Z  	    END IF;
2026-02-14T13:16:24.9059932Z  	END $$;
2026-02-14T13:16:24.9060356Z  2026-02-14 13:16:05.469 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9061741Z  2026-02-14 13:16:05.469 UTC [835] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9062176Z  2026-02-14 13:16:05.470 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9062995Z  2026-02-14 13:16:05.470 UTC [835] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9063480Z  2026-02-14 13:16:05.470 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9064421Z  2026-02-14 13:16:05.470 UTC [835] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9064859Z  2026-02-14 13:16:05.470 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9065580Z  2026-02-14 13:16:05.470 UTC [835] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9066029Z  2026-02-14 13:16:05.471 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9066914Z  2026-02-14 13:16:05.471 UTC [835] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9067349Z  2026-02-14 13:16:05.472 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9068204Z  2026-02-14 13:16:05.472 UTC [835] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9068626Z  2026-02-14 13:16:05.472 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9069318Z  2026-02-14 13:16:05.472 UTC [835] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9069726Z  2026-02-14 13:16:05.473 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9070372Z  2026-02-14 13:16:05.473 UTC [835] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9070810Z  2026-02-14 13:16:05.473 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9071903Z  2026-02-14 13:16:05.473 UTC [835] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9072370Z  2026-02-14 13:16:05.473 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9073085Z  2026-02-14 13:16:05.473 UTC [835] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9073485Z  2026-02-14 13:16:05.474 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9074685Z  2026-02-14 13:16:05.474 UTC [835] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9075141Z  2026-02-14 13:16:05.474 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9076278Z  2026-02-14 13:16:05.474 UTC [835] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9076773Z  2026-02-14 13:16:05.475 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9077643Z  2026-02-14 13:16:05.475 UTC [835] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9078064Z  2026-02-14 13:16:05.475 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9078603Z  2026-02-14 13:16:05.475 UTC [835] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9078816Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9079215Z  2026-02-14 13:16:05.476 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9079705Z  2026-02-14 13:16:05.476 UTC [835] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9079927Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9080342Z  2026-02-14 13:16:05.476 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9080851Z  2026-02-14 13:16:05.476 UTC [835] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9081073Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9081228Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9081648Z  2026-02-14 13:16:05.477 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9082233Z  2026-02-14 13:16:05.477 UTC [835] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9082751Z  2026-02-14 13:16:05.477 UTC [835] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9083398Z  2026-02-14 13:16:05.477 UTC [835] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9084277Z  2026-02-14 13:16:05.479 UTC [835] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9085054Z  2026-02-14 13:16:05.479 UTC [835] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9085587Z  2026-02-14 13:16:05.480 UTC [835] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9086473Z  2026-02-14 13:16:05.480 UTC [835] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9087137Z  2026-02-14 13:16:05.481 UTC [835] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9088379Z  2026-02-14 13:16:05.481 UTC [835] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9089051Z  2026-02-14 13:16:05.481 UTC [835] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9089925Z  2026-02-14 13:16:05.481 UTC [835] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9090550Z  2026-02-14 13:16:05.482 UTC [835] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9091842Z  2026-02-14 13:16:05.482 UTC [835] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9092730Z  2026-02-14 13:16:05.482 UTC [835] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9094215Z  2026-02-14 13:16:05.482 UTC [835] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9094849Z  2026-02-14 13:16:05.483 UTC [835] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9095700Z  2026-02-14 13:16:05.483 UTC [835] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9096318Z  2026-02-14 13:16:05.483 UTC [835] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9097178Z  2026-02-14 13:16:05.483 UTC [835] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9097811Z  2026-02-14 13:16:05.484 UTC [835] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9099043Z  2026-02-14 13:16:05.484 UTC [835] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9099655Z  2026-02-14 13:16:05.484 UTC [835] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9100847Z  2026-02-14 13:16:05.484 UTC [835] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9101320Z  2026-02-14 13:16:05.489 UTC [835] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9102251Z  2026-02-14 13:16:05.489 UTC [835] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9102620Z  2026-02-14 13:16:05.560 UTC [836] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9102934Z  2026-02-14 13:16:05.707 UTC [839] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9103219Z  2026-02-14 13:16:05.707 UTC [839] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9103332Z  	DO $$
2026-02-14T13:16:24.9103437Z  	BEGIN
2026-02-14T13:16:24.9103983Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9104196Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9104415Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9104633Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9104749Z  	    END IF;
2026-02-14T13:16:24.9104856Z  	END $$;
2026-02-14T13:16:24.9105482Z  2026-02-14 13:16:05.716 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9106864Z  2026-02-14 13:16:05.716 UTC [839] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9107288Z  2026-02-14 13:16:05.717 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9108106Z  2026-02-14 13:16:05.717 UTC [839] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9108518Z  2026-02-14 13:16:05.717 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9109426Z  2026-02-14 13:16:05.717 UTC [839] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9109843Z  2026-02-14 13:16:05.718 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9110590Z  2026-02-14 13:16:05.718 UTC [839] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9111008Z  2026-02-14 13:16:05.718 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9111719Z  2026-02-14 13:16:05.718 UTC [839] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9112132Z  2026-02-14 13:16:05.719 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9113017Z  2026-02-14 13:16:05.719 UTC [839] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9113449Z  2026-02-14 13:16:05.719 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9114434Z  2026-02-14 13:16:05.719 UTC [839] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9114848Z  2026-02-14 13:16:05.720 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9115479Z  2026-02-14 13:16:05.720 UTC [839] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9115886Z  2026-02-14 13:16:05.720 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9116637Z  2026-02-14 13:16:05.720 UTC [839] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9117062Z  2026-02-14 13:16:05.721 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9117732Z  2026-02-14 13:16:05.721 UTC [839] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9118155Z  2026-02-14 13:16:05.721 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9118976Z  2026-02-14 13:16:05.721 UTC [839] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9119377Z  2026-02-14 13:16:05.722 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9120209Z  2026-02-14 13:16:05.722 UTC [839] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9120683Z  2026-02-14 13:16:05.722 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9121553Z  2026-02-14 13:16:05.722 UTC [839] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9122183Z  2026-02-14 13:16:05.723 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9122717Z  2026-02-14 13:16:05.723 UTC [839] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9122983Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9123398Z  2026-02-14 13:16:05.723 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9124122Z  2026-02-14 13:16:05.723 UTC [839] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9124349Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9124774Z  2026-02-14 13:16:05.723 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9125048Z  2026-02-14 13:16:05.723 UTC [839] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9125180Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9125273Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9125495Z  2026-02-14 13:16:05.724 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9125809Z  2026-02-14 13:16:05.724 UTC [839] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9126077Z  2026-02-14 13:16:05.724 UTC [839] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9126421Z  2026-02-14 13:16:05.724 UTC [839] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9126764Z  2026-02-14 13:16:05.726 UTC [839] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9127176Z  2026-02-14 13:16:05.726 UTC [839] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9127464Z  2026-02-14 13:16:05.727 UTC [839] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9127945Z  2026-02-14 13:16:05.727 UTC [839] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9128282Z  2026-02-14 13:16:05.728 UTC [839] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9128793Z  2026-02-14 13:16:05.728 UTC [839] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9129151Z  2026-02-14 13:16:05.728 UTC [839] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9129614Z  2026-02-14 13:16:05.728 UTC [839] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9129946Z  2026-02-14 13:16:05.729 UTC [839] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9130651Z  2026-02-14 13:16:05.729 UTC [839] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9130981Z  2026-02-14 13:16:05.729 UTC [839] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9131633Z  2026-02-14 13:16:05.729 UTC [839] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9132064Z  2026-02-14 13:16:05.730 UTC [839] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9132519Z  2026-02-14 13:16:05.730 UTC [839] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9132834Z  2026-02-14 13:16:05.730 UTC [839] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9133275Z  2026-02-14 13:16:05.730 UTC [839] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9133801Z  2026-02-14 13:16:05.731 UTC [839] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9134627Z  2026-02-14 13:16:05.731 UTC [839] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9134964Z  2026-02-14 13:16:05.731 UTC [839] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9135589Z  2026-02-14 13:16:05.731 UTC [839] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9135855Z  2026-02-14 13:16:05.735 UTC [839] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9136358Z  2026-02-14 13:16:05.735 UTC [839] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9136571Z  2026-02-14 13:16:05.802 UTC [840] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9136751Z  2026-02-14 13:16:05.948 UTC [846] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9136923Z  2026-02-14 13:16:05.948 UTC [846] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9136990Z  	DO $$
2026-02-14T13:16:24.9137051Z  	BEGIN
2026-02-14T13:16:24.9137209Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9137335Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9137462Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9137582Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9137644Z  	    END IF;
2026-02-14T13:16:24.9137705Z  	END $$;
2026-02-14T13:16:24.9137937Z  2026-02-14 13:16:05.956 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9138680Z  2026-02-14 13:16:05.956 UTC [846] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9138904Z  2026-02-14 13:16:05.957 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9139332Z  2026-02-14 13:16:05.957 UTC [846] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9139550Z  2026-02-14 13:16:05.957 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9139934Z  2026-02-14 13:16:05.957 UTC [846] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9140147Z  2026-02-14 13:16:05.958 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9140532Z  2026-02-14 13:16:05.958 UTC [846] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9140753Z  2026-02-14 13:16:05.958 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9141241Z  2026-02-14 13:16:05.958 UTC [846] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9141456Z  2026-02-14 13:16:05.959 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9141889Z  2026-02-14 13:16:05.959 UTC [846] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9142101Z  2026-02-14 13:16:05.959 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9142462Z  2026-02-14 13:16:05.959 UTC [846] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9142754Z  2026-02-14 13:16:05.960 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9143094Z  2026-02-14 13:16:05.960 UTC [846] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9143325Z  2026-02-14 13:16:05.960 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9143923Z  2026-02-14 13:16:05.960 UTC [846] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9144140Z  2026-02-14 13:16:05.961 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9144505Z  2026-02-14 13:16:05.961 UTC [846] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9144725Z  2026-02-14 13:16:05.961 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9145145Z  2026-02-14 13:16:05.961 UTC [846] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9145367Z  2026-02-14 13:16:05.962 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9145812Z  2026-02-14 13:16:05.962 UTC [846] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9146027Z  2026-02-14 13:16:05.962 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9146489Z  2026-02-14 13:16:05.962 UTC [846] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9146700Z  2026-02-14 13:16:05.963 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9146981Z  2026-02-14 13:16:05.963 UTC [846] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9147110Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9147336Z  2026-02-14 13:16:05.963 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9147599Z  2026-02-14 13:16:05.963 UTC [846] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9147717Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9147932Z  2026-02-14 13:16:05.964 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9148200Z  2026-02-14 13:16:05.964 UTC [846] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9148319Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9148409Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9148630Z  2026-02-14 13:16:05.964 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9148936Z  2026-02-14 13:16:05.964 UTC [846] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9149311Z  2026-02-14 13:16:05.965 UTC [846] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9149666Z  2026-02-14 13:16:05.965 UTC [846] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9150000Z  2026-02-14 13:16:05.967 UTC [846] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9150406Z  2026-02-14 13:16:05.967 UTC [846] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9150792Z  2026-02-14 13:16:05.968 UTC [846] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9151254Z  2026-02-14 13:16:05.968 UTC [846] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9151597Z  2026-02-14 13:16:05.968 UTC [846] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9152112Z  2026-02-14 13:16:05.968 UTC [846] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9152450Z  2026-02-14 13:16:05.969 UTC [846] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9152910Z  2026-02-14 13:16:05.969 UTC [846] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9153240Z  2026-02-14 13:16:05.969 UTC [846] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9154170Z  2026-02-14 13:16:05.969 UTC [846] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9154512Z  2026-02-14 13:16:05.970 UTC [846] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9155173Z  2026-02-14 13:16:05.970 UTC [846] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9155518Z  2026-02-14 13:16:05.970 UTC [846] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9155975Z  2026-02-14 13:16:05.970 UTC [846] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9156297Z  2026-02-14 13:16:05.971 UTC [846] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9156743Z  2026-02-14 13:16:05.971 UTC [846] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9157063Z  2026-02-14 13:16:05.971 UTC [846] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9157724Z  2026-02-14 13:16:05.971 UTC [846] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9158055Z  2026-02-14 13:16:05.972 UTC [846] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9158815Z  2026-02-14 13:16:05.972 UTC [846] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9159074Z  2026-02-14 13:16:05.976 UTC [846] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9159581Z  2026-02-14 13:16:05.976 UTC [846] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9159790Z  2026-02-14 13:16:06.243 UTC [847] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9159971Z  2026-02-14 13:16:06.384 UTC [853] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9160128Z  2026-02-14 13:16:06.384 UTC [853] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9160289Z  	DO $$
2026-02-14T13:16:24.9160358Z  	BEGIN
2026-02-14T13:16:24.9160512Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9160628Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9160758Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9160875Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9160934Z  	    END IF;
2026-02-14T13:16:24.9160997Z  	END $$;
2026-02-14T13:16:24.9161222Z  2026-02-14 13:16:06.393 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9161959Z  2026-02-14 13:16:06.393 UTC [853] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9162184Z  2026-02-14 13:16:06.394 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9162614Z  2026-02-14 13:16:06.394 UTC [853] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9162840Z  2026-02-14 13:16:06.394 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9163218Z  2026-02-14 13:16:06.394 UTC [853] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9163432Z  2026-02-14 13:16:06.395 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9164021Z  2026-02-14 13:16:06.395 UTC [853] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9164239Z  2026-02-14 13:16:06.395 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9164623Z  2026-02-14 13:16:06.395 UTC [853] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9164843Z  2026-02-14 13:16:06.395 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9165273Z  2026-02-14 13:16:06.395 UTC [853] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9165484Z  2026-02-14 13:16:06.396 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9165856Z  2026-02-14 13:16:06.396 UTC [853] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9166070Z  2026-02-14 13:16:06.396 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9166412Z  2026-02-14 13:16:06.396 UTC [853] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9166625Z  2026-02-14 13:16:06.397 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9167125Z  2026-02-14 13:16:06.397 UTC [853] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9167360Z  2026-02-14 13:16:06.397 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9167757Z  2026-02-14 13:16:06.397 UTC [853] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9167979Z  2026-02-14 13:16:06.398 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9168418Z  2026-02-14 13:16:06.398 UTC [853] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9168770Z  2026-02-14 13:16:06.398 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9169221Z  2026-02-14 13:16:06.398 UTC [853] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9169445Z  2026-02-14 13:16:06.399 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9169903Z  2026-02-14 13:16:06.399 UTC [853] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9170121Z  2026-02-14 13:16:06.399 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9170395Z  2026-02-14 13:16:06.399 UTC [853] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9170514Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9170731Z  2026-02-14 13:16:06.400 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9171001Z  2026-02-14 13:16:06.400 UTC [853] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9171122Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9171351Z  2026-02-14 13:16:06.400 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9171617Z  2026-02-14 13:16:06.400 UTC [853] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9171739Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9171863Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9172083Z  2026-02-14 13:16:06.401 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9172385Z  2026-02-14 13:16:06.401 UTC [853] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9172654Z  2026-02-14 13:16:06.401 UTC [853] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9172999Z  2026-02-14 13:16:06.401 UTC [853] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9173332Z  2026-02-14 13:16:06.403 UTC [853] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9173963Z  2026-02-14 13:16:06.403 UTC [853] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9174284Z  2026-02-14 13:16:06.404 UTC [853] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9174754Z  2026-02-14 13:16:06.404 UTC [853] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9175098Z  2026-02-14 13:16:06.405 UTC [853] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9175729Z  2026-02-14 13:16:06.405 UTC [853] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9176077Z  2026-02-14 13:16:06.405 UTC [853] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9176533Z  2026-02-14 13:16:06.405 UTC [853] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9176859Z  2026-02-14 13:16:06.406 UTC [853] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9177576Z  2026-02-14 13:16:06.406 UTC [853] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9178003Z  2026-02-14 13:16:06.406 UTC [853] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9178660Z  2026-02-14 13:16:06.406 UTC [853] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9178981Z  2026-02-14 13:16:06.407 UTC [853] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9179425Z  2026-02-14 13:16:06.407 UTC [853] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9179744Z  2026-02-14 13:16:06.407 UTC [853] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9180187Z  2026-02-14 13:16:06.407 UTC [853] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9180515Z  2026-02-14 13:16:06.408 UTC [853] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9181165Z  2026-02-14 13:16:06.408 UTC [853] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9181492Z  2026-02-14 13:16:06.408 UTC [853] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9182121Z  2026-02-14 13:16:06.408 UTC [853] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9182371Z  2026-02-14 13:16:06.412 UTC [853] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9182882Z  2026-02-14 13:16:06.412 UTC [853] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9183096Z  2026-02-14 13:16:06.478 UTC [854] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9183270Z  2026-02-14 13:16:06.633 UTC [860] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9183429Z  2026-02-14 13:16:06.633 UTC [860] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9183491Z  	DO $$
2026-02-14T13:16:24.9183548Z  	BEGIN
2026-02-14T13:16:24.9183886Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9184012Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9184141Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9184259Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9184324Z  	    END IF;
2026-02-14T13:16:24.9184383Z  	END $$;
2026-02-14T13:16:24.9184721Z  2026-02-14 13:16:06.643 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9185466Z  2026-02-14 13:16:06.643 UTC [860] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9185685Z  2026-02-14 13:16:06.643 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9186113Z  2026-02-14 13:16:06.643 UTC [860] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9186329Z  2026-02-14 13:16:06.644 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9186805Z  2026-02-14 13:16:06.644 UTC [860] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9187026Z  2026-02-14 13:16:06.644 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9187413Z  2026-02-14 13:16:06.644 UTC [860] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9187636Z  2026-02-14 13:16:06.645 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9188025Z  2026-02-14 13:16:06.645 UTC [860] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9188241Z  2026-02-14 13:16:06.645 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9188669Z  2026-02-14 13:16:06.645 UTC [860] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9188888Z  2026-02-14 13:16:06.646 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9189255Z  2026-02-14 13:16:06.646 UTC [860] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9189474Z  2026-02-14 13:16:06.646 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9189813Z  2026-02-14 13:16:06.646 UTC [860] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9190026Z  2026-02-14 13:16:06.647 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9190525Z  2026-02-14 13:16:06.647 UTC [860] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9190862Z  2026-02-14 13:16:06.647 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9191283Z  2026-02-14 13:16:06.647 UTC [860] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9191509Z  2026-02-14 13:16:06.648 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9191941Z  2026-02-14 13:16:06.648 UTC [860] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9192153Z  2026-02-14 13:16:06.648 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9192606Z  2026-02-14 13:16:06.648 UTC [860] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9192817Z  2026-02-14 13:16:06.649 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9193290Z  2026-02-14 13:16:06.649 UTC [860] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9193817Z  2026-02-14 13:16:06.649 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9194129Z  2026-02-14 13:16:06.649 UTC [860] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9194263Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9194482Z  2026-02-14 13:16:06.650 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9194744Z  2026-02-14 13:16:06.650 UTC [860] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9194866Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9195214Z  2026-02-14 13:16:06.650 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9195483Z  2026-02-14 13:16:06.650 UTC [860] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9195615Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9195705Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9195928Z  2026-02-14 13:16:06.651 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9196238Z  2026-02-14 13:16:06.651 UTC [860] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9196499Z  2026-02-14 13:16:06.651 UTC [860] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9196846Z  2026-02-14 13:16:06.651 UTC [860] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9197187Z  2026-02-14 13:16:06.653 UTC [860] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9197600Z  2026-02-14 13:16:06.653 UTC [860] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9197898Z  2026-02-14 13:16:06.654 UTC [860] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9198366Z  2026-02-14 13:16:06.654 UTC [860] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9198705Z  2026-02-14 13:16:06.655 UTC [860] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9199215Z  2026-02-14 13:16:06.655 UTC [860] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9199557Z  2026-02-14 13:16:06.655 UTC [860] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9200018Z  2026-02-14 13:16:06.655 UTC [860] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9200351Z  2026-02-14 13:16:06.655 UTC [860] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9201057Z  2026-02-14 13:16:06.655 UTC [860] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9201387Z  2026-02-14 13:16:06.656 UTC [860] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9202038Z  2026-02-14 13:16:06.656 UTC [860] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9202479Z  2026-02-14 13:16:06.656 UTC [860] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9202928Z  2026-02-14 13:16:06.656 UTC [860] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9203245Z  2026-02-14 13:16:06.657 UTC [860] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9203914Z  2026-02-14 13:16:06.657 UTC [860] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9204244Z  2026-02-14 13:16:06.657 UTC [860] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9205014Z  2026-02-14 13:16:06.657 UTC [860] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9205350Z  2026-02-14 13:16:06.658 UTC [860] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9205977Z  2026-02-14 13:16:06.658 UTC [860] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9206225Z  2026-02-14 13:16:06.662 UTC [860] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9206734Z  2026-02-14 13:16:06.662 UTC [860] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9206944Z  2026-02-14 13:16:06.728 UTC [861] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9207122Z  2026-02-14 13:16:06.875 UTC [867] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9207282Z  2026-02-14 13:16:06.875 UTC [867] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9207343Z  	DO $$
2026-02-14T13:16:24.9207408Z  	BEGIN
2026-02-14T13:16:24.9207561Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9207675Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9207801Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9207914Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9207974Z  	    END IF;
2026-02-14T13:16:24.9208031Z  	END $$;
2026-02-14T13:16:24.9208265Z  2026-02-14 13:16:06.884 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9209005Z  2026-02-14 13:16:06.884 UTC [867] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9209232Z  2026-02-14 13:16:06.884 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9209659Z  2026-02-14 13:16:06.884 UTC [867] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9209873Z  2026-02-14 13:16:06.885 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9210259Z  2026-02-14 13:16:06.885 UTC [867] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9210474Z  2026-02-14 13:16:06.885 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9210867Z  2026-02-14 13:16:06.885 UTC [867] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9211089Z  2026-02-14 13:16:06.886 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9211579Z  2026-02-14 13:16:06.886 UTC [867] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9211795Z  2026-02-14 13:16:06.886 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9212236Z  2026-02-14 13:16:06.886 UTC [867] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9212446Z  2026-02-14 13:16:06.887 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9212811Z  2026-02-14 13:16:06.887 UTC [867] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9213101Z  2026-02-14 13:16:06.887 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9213447Z  2026-02-14 13:16:06.887 UTC [867] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9213876Z  2026-02-14 13:16:06.888 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9214300Z  2026-02-14 13:16:06.888 UTC [867] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9214526Z  2026-02-14 13:16:06.888 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9214902Z  2026-02-14 13:16:06.888 UTC [867] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9215122Z  2026-02-14 13:16:06.888 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9215555Z  2026-02-14 13:16:06.888 UTC [867] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9215775Z  2026-02-14 13:16:06.889 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9216217Z  2026-02-14 13:16:06.889 UTC [867] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9216441Z  2026-02-14 13:16:06.889 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9217022Z  2026-02-14 13:16:06.889 UTC [867] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9217363Z  2026-02-14 13:16:06.890 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9217656Z  2026-02-14 13:16:06.890 UTC [867] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9217780Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9217996Z  2026-02-14 13:16:06.890 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9218260Z  2026-02-14 13:16:06.890 UTC [867] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9218377Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9218590Z  2026-02-14 13:16:06.891 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9218857Z  2026-02-14 13:16:06.891 UTC [867] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9218975Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9219067Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9219287Z  2026-02-14 13:16:06.891 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9219837Z  2026-02-14 13:16:06.891 UTC [867] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9220107Z  2026-02-14 13:16:06.892 UTC [867] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9220459Z  2026-02-14 13:16:06.892 UTC [867] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9220789Z  2026-02-14 13:16:06.894 UTC [867] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9221206Z  2026-02-14 13:16:06.894 UTC [867] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9221595Z  2026-02-14 13:16:06.895 UTC [867] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9222059Z  2026-02-14 13:16:06.895 UTC [867] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9222402Z  2026-02-14 13:16:06.895 UTC [867] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9222917Z  2026-02-14 13:16:06.895 UTC [867] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9223259Z  2026-02-14 13:16:06.896 UTC [867] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9223927Z  2026-02-14 13:16:06.896 UTC [867] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9224274Z  2026-02-14 13:16:06.896 UTC [867] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9224993Z  2026-02-14 13:16:06.896 UTC [867] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9225330Z  2026-02-14 13:16:06.897 UTC [867] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9225989Z  2026-02-14 13:16:06.897 UTC [867] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9226319Z  2026-02-14 13:16:06.897 UTC [867] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9226770Z  2026-02-14 13:16:06.897 UTC [867] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9227095Z  2026-02-14 13:16:06.898 UTC [867] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9227537Z  2026-02-14 13:16:06.898 UTC [867] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9227865Z  2026-02-14 13:16:06.898 UTC [867] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9228521Z  2026-02-14 13:16:06.898 UTC [867] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9228853Z  2026-02-14 13:16:06.899 UTC [867] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9229590Z  2026-02-14 13:16:06.899 UTC [867] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9229845Z  2026-02-14 13:16:06.903 UTC [867] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9230352Z  2026-02-14 13:16:06.903 UTC [867] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9230564Z  2026-02-14 13:16:06.969 UTC [868] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9230734Z  2026-02-14 13:16:07.106 UTC [874] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9230890Z  2026-02-14 13:16:07.106 UTC [874] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9231053Z  	DO $$
2026-02-14T13:16:24.9231111Z  	BEGIN
2026-02-14T13:16:24.9231265Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9231381Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9231504Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9231617Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9231683Z  	    END IF;
2026-02-14T13:16:24.9231742Z  	END $$;
2026-02-14T13:16:24.9231967Z  2026-02-14 13:16:07.114 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9232715Z  2026-02-14 13:16:07.114 UTC [874] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9232940Z  2026-02-14 13:16:07.115 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9233363Z  2026-02-14 13:16:07.115 UTC [874] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9233586Z  2026-02-14 13:16:07.115 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9234179Z  2026-02-14 13:16:07.115 UTC [874] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9234404Z  2026-02-14 13:16:07.116 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9234789Z  2026-02-14 13:16:07.116 UTC [874] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9235008Z  2026-02-14 13:16:07.116 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9235406Z  2026-02-14 13:16:07.116 UTC [874] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9235629Z  2026-02-14 13:16:07.117 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9236064Z  2026-02-14 13:16:07.117 UTC [874] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9236290Z  2026-02-14 13:16:07.117 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9236655Z  2026-02-14 13:16:07.117 UTC [874] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9236869Z  2026-02-14 13:16:07.118 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9237217Z  2026-02-14 13:16:07.118 UTC [874] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9237434Z  2026-02-14 13:16:07.118 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9237949Z  2026-02-14 13:16:07.118 UTC [874] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9238173Z  2026-02-14 13:16:07.119 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9238552Z  2026-02-14 13:16:07.119 UTC [874] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9238776Z  2026-02-14 13:16:07.119 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9239209Z  2026-02-14 13:16:07.119 UTC [874] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9239560Z  2026-02-14 13:16:07.120 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9240011Z  2026-02-14 13:16:07.120 UTC [874] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9240228Z  2026-02-14 13:16:07.120 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9240687Z  2026-02-14 13:16:07.120 UTC [874] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9240906Z  2026-02-14 13:16:07.121 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9241180Z  2026-02-14 13:16:07.121 UTC [874] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9241298Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9241521Z  2026-02-14 13:16:07.121 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9241779Z  2026-02-14 13:16:07.121 UTC [874] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9241902Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9242126Z  2026-02-14 13:16:07.121 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9242386Z  2026-02-14 13:16:07.121 UTC [874] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9242506Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9242599Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9242817Z  2026-02-14 13:16:07.122 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9243123Z  2026-02-14 13:16:07.122 UTC [874] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9243385Z  2026-02-14 13:16:07.122 UTC [874] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9243917Z  2026-02-14 13:16:07.122 UTC [874] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9244268Z  2026-02-14 13:16:07.125 UTC [874] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9244676Z  2026-02-14 13:16:07.125 UTC [874] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9244962Z  2026-02-14 13:16:07.125 UTC [874] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9245443Z  2026-02-14 13:16:07.125 UTC [874] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9245800Z  2026-02-14 13:16:07.126 UTC [874] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9246431Z  2026-02-14 13:16:07.126 UTC [874] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9246781Z  2026-02-14 13:16:07.126 UTC [874] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9247238Z  2026-02-14 13:16:07.126 UTC [874] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9247569Z  2026-02-14 13:16:07.127 UTC [874] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9248276Z  2026-02-14 13:16:07.127 UTC [874] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9248707Z  2026-02-14 13:16:07.127 UTC [874] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9249372Z  2026-02-14 13:16:07.127 UTC [874] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9249693Z  2026-02-14 13:16:07.128 UTC [874] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9250145Z  2026-02-14 13:16:07.128 UTC [874] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9250461Z  2026-02-14 13:16:07.128 UTC [874] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9250902Z  2026-02-14 13:16:07.128 UTC [874] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9256218Z  2026-02-14 13:16:07.129 UTC [874] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9256955Z  2026-02-14 13:16:07.129 UTC [874] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9257340Z  2026-02-14 13:16:07.129 UTC [874] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9258003Z  2026-02-14 13:16:07.129 UTC [874] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9258266Z  2026-02-14 13:16:07.133 UTC [874] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9258783Z  2026-02-14 13:16:07.133 UTC [874] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9258995Z  2026-02-14 13:16:07.209 UTC [875] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9259172Z  2026-02-14 13:16:07.345 UTC [882] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9259337Z  2026-02-14 13:16:07.345 UTC [882] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9259399Z  	DO $$
2026-02-14T13:16:24.9259461Z  	BEGIN
2026-02-14T13:16:24.9259618Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9259736Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9259861Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9259978Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9260039Z  	    END IF;
2026-02-14T13:16:24.9260100Z  	END $$;
2026-02-14T13:16:24.9260499Z  2026-02-14 13:16:07.354 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9261250Z  2026-02-14 13:16:07.354 UTC [882] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9261479Z  2026-02-14 13:16:07.354 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9261919Z  2026-02-14 13:16:07.354 UTC [882] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9262138Z  2026-02-14 13:16:07.355 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9262642Z  2026-02-14 13:16:07.355 UTC [882] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9262865Z  2026-02-14 13:16:07.355 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9263262Z  2026-02-14 13:16:07.355 UTC [882] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9263484Z  2026-02-14 13:16:07.356 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9264085Z  2026-02-14 13:16:07.356 UTC [882] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9264301Z  2026-02-14 13:16:07.356 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9264740Z  2026-02-14 13:16:07.356 UTC [882] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9264954Z  2026-02-14 13:16:07.357 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9265321Z  2026-02-14 13:16:07.357 UTC [882] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9265537Z  2026-02-14 13:16:07.357 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9265879Z  2026-02-14 13:16:07.357 UTC [882] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9266091Z  2026-02-14 13:16:07.358 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9266479Z  2026-02-14 13:16:07.358 UTC [882] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9266693Z  2026-02-14 13:16:07.358 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9267063Z  2026-02-14 13:16:07.358 UTC [882] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9267295Z  2026-02-14 13:16:07.359 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9267727Z  2026-02-14 13:16:07.359 UTC [882] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9267947Z  2026-02-14 13:16:07.359 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9268392Z  2026-02-14 13:16:07.359 UTC [882] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9268609Z  2026-02-14 13:16:07.360 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9269067Z  2026-02-14 13:16:07.360 UTC [882] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9269398Z  2026-02-14 13:16:07.360 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9269677Z  2026-02-14 13:16:07.360 UTC [882] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9269798Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9270016Z  2026-02-14 13:16:07.361 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9270275Z  2026-02-14 13:16:07.361 UTC [882] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9270402Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9270713Z  2026-02-14 13:16:07.361 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9270976Z  2026-02-14 13:16:07.361 UTC [882] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9271100Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9271186Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9271404Z  2026-02-14 13:16:07.362 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9271709Z  2026-02-14 13:16:07.362 UTC [882] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9272001Z  2026-02-14 13:16:07.362 UTC [882] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9272348Z  2026-02-14 13:16:07.362 UTC [882] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9272683Z  2026-02-14 13:16:07.364 UTC [882] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9273088Z  2026-02-14 13:16:07.364 UTC [882] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9273395Z  2026-02-14 13:16:07.365 UTC [882] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9274084Z  2026-02-14 13:16:07.365 UTC [882] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9274422Z  2026-02-14 13:16:07.366 UTC [882] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9274935Z  2026-02-14 13:16:07.366 UTC [882] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9275278Z  2026-02-14 13:16:07.366 UTC [882] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9275738Z  2026-02-14 13:16:07.366 UTC [882] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9276083Z  2026-02-14 13:16:07.366 UTC [882] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9276783Z  2026-02-14 13:16:07.366 UTC [882] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9277112Z  2026-02-14 13:16:07.367 UTC [882] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9277773Z  2026-02-14 13:16:07.367 UTC [882] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9278221Z  2026-02-14 13:16:07.367 UTC [882] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9278669Z  2026-02-14 13:16:07.367 UTC [882] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9278991Z  2026-02-14 13:16:07.368 UTC [882] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9279437Z  2026-02-14 13:16:07.368 UTC [882] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9279758Z  2026-02-14 13:16:07.368 UTC [882] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9280509Z  2026-02-14 13:16:07.368 UTC [882] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9280845Z  2026-02-14 13:16:07.369 UTC [882] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9281477Z  2026-02-14 13:16:07.369 UTC [882] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9281725Z  2026-02-14 13:16:07.373 UTC [882] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9282225Z  2026-02-14 13:16:07.373 UTC [882] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9282439Z  2026-02-14 13:16:07.435 UTC [883] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9282621Z  2026-02-14 13:16:07.572 UTC [889] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9282781Z  2026-02-14 13:16:07.572 UTC [889] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9282841Z  	DO $$
2026-02-14T13:16:24.9282908Z  	BEGIN
2026-02-14T13:16:24.9283063Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9283177Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9283303Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9283421Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9283482Z  	    END IF;
2026-02-14T13:16:24.9283544Z  	END $$;
2026-02-14T13:16:24.9284025Z  2026-02-14 13:16:07.581 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9284772Z  2026-02-14 13:16:07.581 UTC [889] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9285004Z  2026-02-14 13:16:07.582 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9285429Z  2026-02-14 13:16:07.582 UTC [889] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9285648Z  2026-02-14 13:16:07.582 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9286035Z  2026-02-14 13:16:07.582 UTC [889] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9286250Z  2026-02-14 13:16:07.583 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9286640Z  2026-02-14 13:16:07.583 UTC [889] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9286980Z  2026-02-14 13:16:07.583 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9287361Z  2026-02-14 13:16:07.583 UTC [889] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9287579Z  2026-02-14 13:16:07.584 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9288016Z  2026-02-14 13:16:07.584 UTC [889] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9288232Z  2026-02-14 13:16:07.584 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9288599Z  2026-02-14 13:16:07.584 UTC [889] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9288911Z  2026-02-14 13:16:07.585 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9289254Z  2026-02-14 13:16:07.585 UTC [889] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9289477Z  2026-02-14 13:16:07.585 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9289868Z  2026-02-14 13:16:07.585 UTC [889] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9290082Z  2026-02-14 13:16:07.586 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9290452Z  2026-02-14 13:16:07.586 UTC [889] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9290667Z  2026-02-14 13:16:07.586 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9291098Z  2026-02-14 13:16:07.586 UTC [889] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9291312Z  2026-02-14 13:16:07.587 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9291756Z  2026-02-14 13:16:07.587 UTC [889] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9291971Z  2026-02-14 13:16:07.587 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9292423Z  2026-02-14 13:16:07.587 UTC [889] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9292635Z  2026-02-14 13:16:07.588 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9292915Z  2026-02-14 13:16:07.588 UTC [889] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9293032Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9293245Z  2026-02-14 13:16:07.588 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9293497Z  2026-02-14 13:16:07.588 UTC [889] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9293755Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9293995Z  2026-02-14 13:16:07.589 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9294258Z  2026-02-14 13:16:07.589 UTC [889] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9294378Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9294474Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9294689Z  2026-02-14 13:16:07.589 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9295101Z  2026-02-14 13:16:07.589 UTC [889] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9295368Z  2026-02-14 13:16:07.590 UTC [889] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9295714Z  2026-02-14 13:16:07.590 UTC [889] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9296040Z  2026-02-14 13:16:07.592 UTC [889] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9296452Z  2026-02-14 13:16:07.592 UTC [889] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9296834Z  2026-02-14 13:16:07.593 UTC [889] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9297303Z  2026-02-14 13:16:07.593 UTC [889] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9297656Z  2026-02-14 13:16:07.593 UTC [889] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9298166Z  2026-02-14 13:16:07.593 UTC [889] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9298513Z  2026-02-14 13:16:07.594 UTC [889] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9298970Z  2026-02-14 13:16:07.594 UTC [889] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9299301Z  2026-02-14 13:16:07.594 UTC [889] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9300010Z  2026-02-14 13:16:07.594 UTC [889] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9300336Z  2026-02-14 13:16:07.595 UTC [889] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9300986Z  2026-02-14 13:16:07.595 UTC [889] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9301308Z  2026-02-14 13:16:07.595 UTC [889] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9301756Z  2026-02-14 13:16:07.595 UTC [889] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9302081Z  2026-02-14 13:16:07.595 UTC [889] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9302518Z  2026-02-14 13:16:07.595 UTC [889] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9302841Z  2026-02-14 13:16:07.596 UTC [889] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9303496Z  2026-02-14 13:16:07.596 UTC [889] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9303939Z  2026-02-14 13:16:07.596 UTC [889] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9304701Z  2026-02-14 13:16:07.596 UTC [889] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9304953Z  2026-02-14 13:16:07.600 UTC [889] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9305465Z  2026-02-14 13:16:07.600 UTC [889] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9305674Z  2026-02-14 13:16:07.654 UTC [890] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9305852Z  2026-02-14 13:16:07.789 UTC [896] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9306005Z  2026-02-14 13:16:07.789 UTC [896] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9306167Z  	DO $$
2026-02-14T13:16:24.9306227Z  	BEGIN
2026-02-14T13:16:24.9306379Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9306492Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9306618Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9306733Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9306796Z  	    END IF;
2026-02-14T13:16:24.9306854Z  	END $$;
2026-02-14T13:16:24.9307080Z  2026-02-14 13:16:07.798 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9307818Z  2026-02-14 13:16:07.798 UTC [896] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9308049Z  2026-02-14 13:16:07.798 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9308472Z  2026-02-14 13:16:07.798 UTC [896] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9308692Z  2026-02-14 13:16:07.799 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9309066Z  2026-02-14 13:16:07.799 UTC [896] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9309286Z  2026-02-14 13:16:07.799 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9309671Z  2026-02-14 13:16:07.799 UTC [896] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9309885Z  2026-02-14 13:16:07.800 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9310274Z  2026-02-14 13:16:07.800 UTC [896] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9310485Z  2026-02-14 13:16:07.800 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9310917Z  2026-02-14 13:16:07.800 UTC [896] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9311131Z  2026-02-14 13:16:07.801 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9311496Z  2026-02-14 13:16:07.801 UTC [896] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9311710Z  2026-02-14 13:16:07.801 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9312053Z  2026-02-14 13:16:07.801 UTC [896] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9312269Z  2026-02-14 13:16:07.802 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9312779Z  2026-02-14 13:16:07.802 UTC [896] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9312993Z  2026-02-14 13:16:07.802 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9313356Z  2026-02-14 13:16:07.802 UTC [896] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9313574Z  2026-02-14 13:16:07.803 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9314152Z  2026-02-14 13:16:07.803 UTC [896] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9314486Z  2026-02-14 13:16:07.803 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9314951Z  2026-02-14 13:16:07.803 UTC [896] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9315171Z  2026-02-14 13:16:07.804 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9315634Z  2026-02-14 13:16:07.804 UTC [896] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9315850Z  2026-02-14 13:16:07.804 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9316121Z  2026-02-14 13:16:07.804 UTC [896] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9316244Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9316467Z  2026-02-14 13:16:07.805 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9316722Z  2026-02-14 13:16:07.805 UTC [896] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9316844Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9317058Z  2026-02-14 13:16:07.805 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9317319Z  2026-02-14 13:16:07.805 UTC [896] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9317445Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9317531Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9317746Z  2026-02-14 13:16:07.805 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9318049Z  2026-02-14 13:16:07.805 UTC [896] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9318309Z  2026-02-14 13:16:07.806 UTC [896] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9318660Z  2026-02-14 13:16:07.806 UTC [896] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9319008Z  2026-02-14 13:16:07.808 UTC [896] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9319420Z  2026-02-14 13:16:07.808 UTC [896] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9319704Z  2026-02-14 13:16:07.809 UTC [896] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9320172Z  2026-02-14 13:16:07.809 UTC [896] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9320509Z  2026-02-14 13:16:07.809 UTC [896] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9321128Z  2026-02-14 13:16:07.809 UTC [896] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9321470Z  2026-02-14 13:16:07.810 UTC [896] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9321951Z  2026-02-14 13:16:07.810 UTC [896] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9322283Z  2026-02-14 13:16:07.810 UTC [896] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9322986Z  2026-02-14 13:16:07.810 UTC [896] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9323391Z  2026-02-14 13:16:07.811 UTC [896] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9324152Z  2026-02-14 13:16:07.811 UTC [896] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9324476Z  2026-02-14 13:16:07.811 UTC [896] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9324921Z  2026-02-14 13:16:07.811 UTC [896] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9325235Z  2026-02-14 13:16:07.812 UTC [896] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9325674Z  2026-02-14 13:16:07.812 UTC [896] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9325998Z  2026-02-14 13:16:07.812 UTC [896] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9326644Z  2026-02-14 13:16:07.812 UTC [896] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9326977Z  2026-02-14 13:16:07.813 UTC [896] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9327608Z  2026-02-14 13:16:07.813 UTC [896] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9327858Z  2026-02-14 13:16:07.817 UTC [896] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9328369Z  2026-02-14 13:16:07.817 UTC [896] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9328574Z  2026-02-14 13:16:07.879 UTC [897] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9328749Z  2026-02-14 13:16:08.012 UTC [903] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9328909Z  2026-02-14 13:16:08.012 UTC [903] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9328969Z  	DO $$
2026-02-14T13:16:24.9329026Z  	BEGIN
2026-02-14T13:16:24.9329178Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9329290Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9329413Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9329528Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9329587Z  	    END IF;
2026-02-14T13:16:24.9329645Z  	END $$;
2026-02-14T13:16:24.9329980Z  2026-02-14 13:16:08.021 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9330723Z  2026-02-14 13:16:08.021 UTC [903] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9330941Z  2026-02-14 13:16:08.021 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9331365Z  2026-02-14 13:16:08.021 UTC [903] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9331583Z  2026-02-14 13:16:08.022 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9332065Z  2026-02-14 13:16:08.022 UTC [903] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9332283Z  2026-02-14 13:16:08.022 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9332665Z  2026-02-14 13:16:08.022 UTC [903] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9332888Z  2026-02-14 13:16:08.023 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9333268Z  2026-02-14 13:16:08.023 UTC [903] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9333480Z  2026-02-14 13:16:08.023 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9334042Z  2026-02-14 13:16:08.023 UTC [903] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9334259Z  2026-02-14 13:16:08.024 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9334629Z  2026-02-14 13:16:08.024 UTC [903] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9334848Z  2026-02-14 13:16:08.024 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9335187Z  2026-02-14 13:16:08.024 UTC [903] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9335402Z  2026-02-14 13:16:08.025 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9335788Z  2026-02-14 13:16:08.025 UTC [903] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9336002Z  2026-02-14 13:16:08.025 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9336378Z  2026-02-14 13:16:08.025 UTC [903] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9336590Z  2026-02-14 13:16:08.026 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9337015Z  2026-02-14 13:16:08.026 UTC [903] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9337232Z  2026-02-14 13:16:08.026 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9337674Z  2026-02-14 13:16:08.026 UTC [903] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9337894Z  2026-02-14 13:16:08.027 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9338343Z  2026-02-14 13:16:08.027 UTC [903] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9338663Z  2026-02-14 13:16:08.027 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9338942Z  2026-02-14 13:16:08.027 UTC [903] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9339059Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9339272Z  2026-02-14 13:16:08.028 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9339527Z  2026-02-14 13:16:08.028 UTC [903] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9339641Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9339958Z  2026-02-14 13:16:08.028 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9340222Z  2026-02-14 13:16:08.028 UTC [903] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9340344Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9340430Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9340647Z  2026-02-14 13:16:08.029 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9340944Z  2026-02-14 13:16:08.029 UTC [903] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9341202Z  2026-02-14 13:16:08.029 UTC [903] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9341544Z  2026-02-14 13:16:08.029 UTC [903] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9341872Z  2026-02-14 13:16:08.031 UTC [903] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9342279Z  2026-02-14 13:16:08.031 UTC [903] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9342564Z  2026-02-14 13:16:08.032 UTC [903] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9343029Z  2026-02-14 13:16:08.032 UTC [903] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9343362Z  2026-02-14 13:16:08.032 UTC [903] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9343974Z  2026-02-14 13:16:08.032 UTC [903] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9344317Z  2026-02-14 13:16:08.033 UTC [903] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9344784Z  2026-02-14 13:16:08.033 UTC [903] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9345112Z  2026-02-14 13:16:08.033 UTC [903] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9345823Z  2026-02-14 13:16:08.033 UTC [903] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9346149Z  2026-02-14 13:16:08.034 UTC [903] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9346800Z  2026-02-14 13:16:08.034 UTC [903] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9347231Z  2026-02-14 13:16:08.034 UTC [903] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9347675Z  2026-02-14 13:16:08.034 UTC [903] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9347985Z  2026-02-14 13:16:08.035 UTC [903] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9348425Z  2026-02-14 13:16:08.035 UTC [903] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9348940Z  2026-02-14 13:16:08.035 UTC [903] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9350180Z  2026-02-14 13:16:08.035 UTC [903] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9350785Z  2026-02-14 13:16:08.036 UTC [903] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9351832Z  2026-02-14 13:16:08.036 UTC [903] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9352239Z  2026-02-14 13:16:08.040 UTC [903] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9353067Z  2026-02-14 13:16:08.040 UTC [903] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9353428Z  2026-02-14 13:16:08.090 UTC [904] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9353917Z  2026-02-14 13:16:08.225 UTC [908] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9354199Z  2026-02-14 13:16:08.225 UTC [908] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9354309Z  	DO $$
2026-02-14T13:16:24.9354409Z  	BEGIN
2026-02-14T13:16:24.9354658Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9354847Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9355039Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9355224Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9355330Z  	    END IF;
2026-02-14T13:16:24.9355430Z  	END $$;
2026-02-14T13:16:24.9355813Z  2026-02-14 13:16:08.234 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9357135Z  2026-02-14 13:16:08.234 UTC [908] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9357543Z  2026-02-14 13:16:08.235 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9358297Z  2026-02-14 13:16:08.235 UTC [908] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9358739Z  2026-02-14 13:16:08.235 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9359401Z  2026-02-14 13:16:08.235 UTC [908] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9359816Z  2026-02-14 13:16:08.236 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9360449Z  2026-02-14 13:16:08.236 UTC [908] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9361004Z  2026-02-14 13:16:08.236 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9361673Z  2026-02-14 13:16:08.236 UTC [908] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9362042Z  2026-02-14 13:16:08.237 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9362821Z  2026-02-14 13:16:08.237 UTC [908] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9363215Z  2026-02-14 13:16:08.237 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9364268Z  2026-02-14 13:16:08.237 UTC [908] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9364671Z  2026-02-14 13:16:08.238 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9365172Z  2026-02-14 13:16:08.238 UTC [908] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9365403Z  2026-02-14 13:16:08.238 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9365816Z  2026-02-14 13:16:08.238 UTC [908] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9366036Z  2026-02-14 13:16:08.239 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9366409Z  2026-02-14 13:16:08.239 UTC [908] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9366632Z  2026-02-14 13:16:08.239 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9367067Z  2026-02-14 13:16:08.239 UTC [908] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9367285Z  2026-02-14 13:16:08.240 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9367743Z  2026-02-14 13:16:08.240 UTC [908] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9367958Z  2026-02-14 13:16:08.240 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9368423Z  2026-02-14 13:16:08.240 UTC [908] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9368642Z  2026-02-14 13:16:08.241 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9368924Z  2026-02-14 13:16:08.241 UTC [908] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9369049Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9369267Z  2026-02-14 13:16:08.241 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9369527Z  2026-02-14 13:16:08.241 UTC [908] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9369656Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9369874Z  2026-02-14 13:16:08.242 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9370138Z  2026-02-14 13:16:08.242 UTC [908] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9370265Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9370354Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9370568Z  2026-02-14 13:16:08.242 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9371004Z  2026-02-14 13:16:08.242 UTC [908] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9371270Z  2026-02-14 13:16:08.242 UTC [908] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9371614Z  2026-02-14 13:16:08.242 UTC [908] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9371989Z  2026-02-14 13:16:08.245 UTC [908] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9372400Z  2026-02-14 13:16:08.245 UTC [908] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9372812Z  2026-02-14 13:16:08.245 UTC [908] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9373286Z  2026-02-14 13:16:08.245 UTC [908] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9373776Z  2026-02-14 13:16:08.246 UTC [908] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9374322Z  2026-02-14 13:16:08.246 UTC [908] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9374665Z  2026-02-14 13:16:08.246 UTC [908] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9375130Z  2026-02-14 13:16:08.246 UTC [908] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9375466Z  2026-02-14 13:16:08.247 UTC [908] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9376178Z  2026-02-14 13:16:08.247 UTC [908] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9376524Z  2026-02-14 13:16:08.247 UTC [908] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9377186Z  2026-02-14 13:16:08.247 UTC [908] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9377506Z  2026-02-14 13:16:08.248 UTC [908] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9377958Z  2026-02-14 13:16:08.248 UTC [908] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9378278Z  2026-02-14 13:16:08.249 UTC [908] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9378718Z  2026-02-14 13:16:08.249 UTC [908] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9379045Z  2026-02-14 13:16:08.249 UTC [908] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9379697Z  2026-02-14 13:16:08.249 UTC [908] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9380035Z  2026-02-14 13:16:08.249 UTC [908] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9380779Z  2026-02-14 13:16:08.249 UTC [908] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9381032Z  2026-02-14 13:16:08.253 UTC [908] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9381545Z  2026-02-14 13:16:08.253 UTC [908] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9381759Z  2026-02-14 13:16:08.301 UTC [909] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9381932Z  2026-02-14 13:16:08.438 UTC [913] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9382196Z  2026-02-14 13:16:08.438 UTC [913] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9382260Z  	DO $$
2026-02-14T13:16:24.9382320Z  	BEGIN
2026-02-14T13:16:24.9382481Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9382597Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9382721Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9382844Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9382906Z  	    END IF;
2026-02-14T13:16:24.9382965Z  	END $$;
2026-02-14T13:16:24.9383200Z  2026-02-14 13:16:08.447 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9384052Z  2026-02-14 13:16:08.447 UTC [913] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9384280Z  2026-02-14 13:16:08.447 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9384714Z  2026-02-14 13:16:08.447 UTC [913] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9384934Z  2026-02-14 13:16:08.448 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9385314Z  2026-02-14 13:16:08.448 UTC [913] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9385528Z  2026-02-14 13:16:08.448 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9385914Z  2026-02-14 13:16:08.448 UTC [913] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9386130Z  2026-02-14 13:16:08.449 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9386518Z  2026-02-14 13:16:08.449 UTC [913] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9386732Z  2026-02-14 13:16:08.449 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9387161Z  2026-02-14 13:16:08.449 UTC [913] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9387374Z  2026-02-14 13:16:08.450 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9387748Z  2026-02-14 13:16:08.450 UTC [913] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9387960Z  2026-02-14 13:16:08.450 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9388304Z  2026-02-14 13:16:08.450 UTC [913] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9388524Z  2026-02-14 13:16:08.451 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9389060Z  2026-02-14 13:16:08.451 UTC [913] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9389277Z  2026-02-14 13:16:08.451 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9389646Z  2026-02-14 13:16:08.451 UTC [913] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9389862Z  2026-02-14 13:16:08.452 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9390291Z  2026-02-14 13:16:08.452 UTC [913] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9390639Z  2026-02-14 13:16:08.452 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9391088Z  2026-02-14 13:16:08.452 UTC [913] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9391312Z  2026-02-14 13:16:08.453 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9391768Z  2026-02-14 13:16:08.453 UTC [913] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9391976Z  2026-02-14 13:16:08.453 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9392262Z  2026-02-14 13:16:08.453 UTC [913] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9392380Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9392597Z  2026-02-14 13:16:08.453 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9392855Z  2026-02-14 13:16:08.453 UTC [913] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9392972Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9393186Z  2026-02-14 13:16:08.454 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9393451Z  2026-02-14 13:16:08.454 UTC [913] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9393572Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9393808Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9394037Z  2026-02-14 13:16:08.454 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9394345Z  2026-02-14 13:16:08.454 UTC [913] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9394611Z  2026-02-14 13:16:08.455 UTC [913] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9394961Z  2026-02-14 13:16:08.455 UTC [913] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9395292Z  2026-02-14 13:16:08.457 UTC [913] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9395704Z  2026-02-14 13:16:08.457 UTC [913] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9395986Z  2026-02-14 13:16:08.458 UTC [913] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9396450Z  2026-02-14 13:16:08.458 UTC [913] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9396794Z  2026-02-14 13:16:08.458 UTC [913] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9397419Z  2026-02-14 13:16:08.458 UTC [913] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9397762Z  2026-02-14 13:16:08.459 UTC [913] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9398236Z  2026-02-14 13:16:08.459 UTC [913] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9398565Z  2026-02-14 13:16:08.459 UTC [913] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9399279Z  2026-02-14 13:16:08.459 UTC [913] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9399704Z  2026-02-14 13:16:08.460 UTC [913] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9400359Z  2026-02-14 13:16:08.460 UTC [913] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9400684Z  2026-02-14 13:16:08.460 UTC [913] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9401127Z  2026-02-14 13:16:08.460 UTC [913] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9401439Z  2026-02-14 13:16:08.461 UTC [913] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9401887Z  2026-02-14 13:16:08.461 UTC [913] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9402213Z  2026-02-14 13:16:08.461 UTC [913] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9402895Z  2026-02-14 13:16:08.461 UTC [913] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9403222Z  2026-02-14 13:16:08.462 UTC [913] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9403956Z  2026-02-14 13:16:08.462 UTC [913] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9404212Z  2026-02-14 13:16:08.466 UTC [913] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9404740Z  2026-02-14 13:16:08.466 UTC [913] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9404958Z  2026-02-14 13:16:08.513 UTC [914] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9405133Z  2026-02-14 13:16:08.650 UTC [918] ERROR:  syntax error at or near "it" at character 8
2026-02-14T13:16:24.9405291Z  2026-02-14 13:16:08.650 UTC [918] STATEMENT:  create it separately if needed
2026-02-14T13:16:24.9405359Z  	DO $$
2026-02-14T13:16:24.9405419Z  	BEGIN
2026-02-14T13:16:24.9405573Z  	    IF EXISTS (SELECT FROM pg_user WHERE usename = 'app_user') THEN
2026-02-14T13:16:24.9405688Z  	        GRANT ALL PRIVILEGES ON SCHEMA raw TO app_user;
2026-02-14T13:16:24.9405820Z  	        GRANT ALL PRIVILEGES ON SCHEMA staging TO app_user;
2026-02-14T13:16:24.9405935Z  	        GRANT ALL PRIVILEGES ON SCHEMA marts TO app_user;
2026-02-14T13:16:24.9405998Z  	    END IF;
2026-02-14T13:16:24.9406063Z  	END $$;
2026-02-14T13:16:24.9406400Z  2026-02-14 13:16:08.660 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9407143Z  2026-02-14 13:16:08.660 UTC [918] STATEMENT:  COMMENT ON TABLE marts.dim_ranking_cleanup_audit IS 'Audit trail for deleted orphaned rankings from dim_ranking. Stores rankings that were deleted because they referenced non-existent jobs in fact_jobs.';
2026-02-14T13:16:24.9407364Z  2026-02-14 13:16:08.660 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9407792Z  2026-02-14 13:16:08.660 UTC [918] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.audit_id IS 'Primary key, auto-incrementing audit record ID';
2026-02-14T13:16:24.9408118Z  2026-02-14 13:16:08.661 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9408492Z  2026-02-14 13:16:08.661 UTC [918] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.jsearch_job_id IS 'Job ID from deleted ranking';
2026-02-14T13:16:24.9408708Z  2026-02-14 13:16:08.661 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9409101Z  2026-02-14 13:16:08.661 UTC [918] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.campaign_id IS 'Campaign ID from deleted ranking';
2026-02-14T13:16:24.9409316Z  2026-02-14 13:16:08.662 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9409697Z  2026-02-14 13:16:08.662 UTC [918] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_score IS 'Ranking score from deleted ranking';
2026-02-14T13:16:24.9409915Z  2026-02-14 13:16:08.662 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9410353Z  2026-02-14 13:16:08.662 UTC [918] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.rank_explain IS 'Ranking explanation JSON from deleted ranking';
2026-02-14T13:16:24.9410568Z  2026-02-14 13:16:08.663 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9410936Z  2026-02-14 13:16:08.663 UTC [918] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_at IS 'Original ranked_at timestamp';
2026-02-14T13:16:24.9411152Z  2026-02-14 13:16:08.663 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9411497Z  2026-02-14 13:16:08.663 UTC [918] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.ranked_date IS 'Original ranked_date';
2026-02-14T13:16:24.9411710Z  2026-02-14 13:16:08.664 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9412098Z  2026-02-14 13:16:08.664 UTC [918] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_load_timestamp IS 'Original dwh_load_timestamp';
2026-02-14T13:16:24.9412318Z  2026-02-14 13:16:08.664 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9412686Z  2026-02-14 13:16:08.664 UTC [918] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.dwh_source_system IS 'Original source system';
2026-02-14T13:16:24.9412900Z  2026-02-14 13:16:08.664 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9413330Z  2026-02-14 13:16:08.664 UTC [918] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_timestamp IS 'Timestamp when this ranking was deleted';
2026-02-14T13:16:24.9413544Z  2026-02-14 13:16:08.665 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9414135Z  2026-02-14 13:16:08.665 UTC [918] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_reason IS 'Reason for deletion (default: orphaned_ranking)';
2026-02-14T13:16:24.9414356Z  2026-02-14 13:16:08.665 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9414818Z  2026-02-14 13:16:08.665 UTC [918] STATEMENT:  COMMENT ON COLUMN marts.dim_ranking_cleanup_audit.cleanup_batch_id IS 'Optional batch ID for grouping cleanup operations';
2026-02-14T13:16:24.9415143Z  2026-02-14 13:16:08.666 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9415419Z  2026-02-14 13:16:08.666 UTC [918] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_campaign_id
2026-02-14T13:16:24.9415537Z  	    ON marts.dim_ranking_cleanup_audit(campaign_id);
2026-02-14T13:16:24.9415757Z  2026-02-14 13:16:08.666 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9416011Z  2026-02-14 13:16:08.666 UTC [918] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_job_id
2026-02-14T13:16:24.9416131Z  	    ON marts.dim_ranking_cleanup_audit(jsearch_job_id);
2026-02-14T13:16:24.9416452Z  2026-02-14 13:16:08.667 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9416713Z  2026-02-14 13:16:08.667 UTC [918] STATEMENT:  CREATE INDEX IF NOT EXISTS idx_dim_ranking_cleanup_audit_batch_id
2026-02-14T13:16:24.9416841Z  	    ON marts.dim_ranking_cleanup_audit(cleanup_batch_id)
2026-02-14T13:16:24.9416930Z  	    WHERE cleanup_batch_id IS NOT NULL;
2026-02-14T13:16:24.9417142Z  2026-02-14 13:16:08.667 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit" does not exist
2026-02-14T13:16:24.9417438Z  2026-02-14 13:16:08.667 UTC [918] STATEMENT:  GRANT ALL PRIVILEGES ON TABLE marts.dim_ranking_cleanup_audit TO postgres;
2026-02-14T13:16:24.9417701Z  2026-02-14 13:16:08.668 UTC [918] ERROR:  relation "marts.dim_ranking_cleanup_audit_audit_id_seq" does not exist
2026-02-14T13:16:24.9418058Z  2026-02-14 13:16:08.668 UTC [918] STATEMENT:  GRANT USAGE, SELECT ON SEQUENCE marts.dim_ranking_cleanup_audit_audit_id_seq TO postgres;
2026-02-14T13:16:24.9418390Z  2026-02-14 13:16:08.670 UTC [918] ERROR:  column "chatgpt_enrichment_key" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9418793Z  2026-02-14 13:16:08.670 UTC [918] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_enrichment_key IS 'Primary key (auto-increment)';
2026-02-14T13:16:24.9419077Z  2026-02-14 13:16:08.671 UTC [918] ERROR:  column "job_summary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9419540Z  2026-02-14 13:16:08.671 UTC [918] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.job_summary IS '2 sentence summary of the job posting, generated by ChatGPT';
2026-02-14T13:16:24.9419875Z  2026-02-14 13:16:08.671 UTC [918] ERROR:  column "chatgpt_extracted_skills" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9420385Z  2026-02-14 13:16:08.671 UTC [918] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_skills IS 'Skills extracted by ChatGPT (JSONB array of skill strings)';
2026-02-14T13:16:24.9420729Z  2026-02-14 13:16:08.672 UTC [918] ERROR:  column "chatgpt_extracted_location" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9421183Z  2026-02-14 13:16:08.672 UTC [918] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_extracted_location IS 'Normalized location extracted by ChatGPT';
2026-02-14T13:16:24.9421514Z  2026-02-14 13:16:08.672 UTC [918] ERROR:  column "chatgpt_seniority_level" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9422217Z  2026-02-14 13:16:08.672 UTC [918] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_seniority_level IS 'Seniority level extracted by ChatGPT (must match rule-based enum: intern, junior, mid, senior, executive - lowercase)';
2026-02-14T13:16:24.9422544Z  2026-02-14 13:16:08.673 UTC [918] ERROR:  column "chatgpt_remote_work_type" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9423204Z  2026-02-14 13:16:08.673 UTC [918] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_remote_work_type IS 'Remote work type extracted by ChatGPT (must match rule-based enum: hybrid, remote, onsite - lowercase)';
2026-02-14T13:16:24.9423702Z  2026-02-14 13:16:08.673 UTC [918] ERROR:  column "chatgpt_job_min_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9424151Z  2026-02-14 13:16:08.673 UTC [918] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_min_salary IS 'Minimum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9424473Z  2026-02-14 13:16:08.674 UTC [918] ERROR:  column "chatgpt_job_max_salary" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9424907Z  2026-02-14 13:16:08.674 UTC [918] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_job_max_salary IS 'Maximum salary value extracted by ChatGPT';
2026-02-14T13:16:24.9425232Z  2026-02-14 13:16:08.674 UTC [918] ERROR:  column "chatgpt_salary_period" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9425985Z  2026-02-14 13:16:08.674 UTC [918] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_period IS 'Salary period extracted by ChatGPT (must match rule-based enum: year, month, week, day, hour - lowercase)';
2026-02-14T13:16:24.9426315Z  2026-02-14 13:16:08.675 UTC [918] ERROR:  column "chatgpt_salary_currency" of relation "staging.chatgpt_enrichments" does not exist
2026-02-14T13:16:24.9426948Z  2026-02-14 13:16:08.675 UTC [918] STATEMENT:  COMMENT ON COLUMN staging.chatgpt_enrichments.chatgpt_salary_currency IS 'Currency code extracted by ChatGPT (must match rule-based enum: USD, CAD, EUR, GBP - uppercase)';
2026-02-14T13:16:24.9427198Z  2026-02-14 13:16:08.679 UTC [918] ERROR:  column "user_id" of relation "marts.etl_run_metrics" does not exist
2026-02-14T13:16:24.9427705Z  2026-02-14 13:16:08.679 UTC [918] STATEMENT:  COMMENT ON COLUMN marts.etl_run_metrics.user_id IS 'User ID of the campaign owner (denormalized from job_campaigns for query performance)';
2026-02-14T13:16:24.9427913Z  2026-02-14 13:16:08.723 UTC [919] FATAL:  terminating connection due to administrator command
2026-02-14T13:16:24.9428049Z  2026-02-14 13:16:14.625 UTC [929] FATAL:  role "root" does not exist
2026-02-14T13:16:24.9433501Z Stop and remove container: 0e96d73957f242b0b227fecdfc280946_postgres15_17495f
2026-02-14T13:16:24.9437816Z ##[command]/usr/bin/docker rm --force 7a72240d52cf4f4693234325cd50ff7a005bbb3a3fb3a9c75f3839c97f6f4d15
2026-02-14T13:16:25.1016982Z 7a72240d52cf4f4693234325cd50ff7a005bbb3a3fb3a9c75f3839c97f6f4d15
2026-02-14T13:16:25.1045582Z Remove container network: github_network_dcbb7c02e27844fe82eb244bef7b63f4
2026-02-14T13:16:25.1049507Z ##[command]/usr/bin/docker network rm github_network_dcbb7c02e27844fe82eb244bef7b63f4
2026-02-14T13:16:25.1896477Z github_network_dcbb7c02e27844fe82eb244bef7b63f4
2026-02-14T13:16:25.1958138Z Cleaning up orphan processes
