<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Campaign - Job Search Campaign Management</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="sidebar-container"></div>
    
    <main class="main-content">
        <div class="page-header">
            <h1>Create New Campaign</h1>
        </div>
        
        <div class="card">
            <form method="POST" action="#">
                <div class="form-group">
                    <label for="campaign_name">Campaign Name *</label>
                    <input type="text" id="campaign_name" name="campaign_name" required placeholder="e.g., Data Engineer - Remote">
                </div>
                
                <div class="form-group">
                    <label for="query">Search Query *</label>
                    <input type="text" id="query" name="query" placeholder="e.g., BI Developer, Data Engineer" required>
                </div>
                
                <div class="form-group">
                    <label for="location">Location</label>
                    <input type="text" id="location" name="location" placeholder="e.g., Toronto, Vancouver">
                </div>
                
                <div class="form-group">
                    <label for="country">Country Code *</label>
                    <select id="country" name="country" required>
                        <option value="">Select a country...</option>
                        <option value="us">United States (US)</option>
                        <option value="ca">Canada (CA)</option>
                        <option value="uk">United Kingdom (UK)</option>
                        <option value="au">Australia (AU)</option>
                        <option value="de">Germany (DE)</option>
                        <option value="fr">France (FR)</option>
                        <option value="nl">Netherlands (NL)</option>
                        <option value="se">Sweden (SE)</option>
                        <option value="no">Norway (NO)</option>
                        <option value="dk">Denmark (DK)</option>
                        <option value="fi">Finland (FI)</option>
                        <option value="ie">Ireland (IE)</option>
                        <option value="ch">Switzerland (CH)</option>
                        <option value="at">Austria (AT)</option>
                        <option value="be">Belgium (BE)</option>
                        <option value="es">Spain (ES)</option>
                        <option value="it">Italy (IT)</option>
                        <option value="pl">Poland (PL)</option>
                        <option value="pt">Portugal (PT)</option>
                        <option value="cz">Czech Republic (CZ)</option>
                        <option value="gr">Greece (GR)</option>
                        <option value="ro">Romania (RO)</option>
                        <option value="hu">Hungary (HU)</option>
                        <option value="bg">Bulgaria (BG)</option>
                        <option value="sk">Slovakia (SK)</option>
                        <option value="si">Slovenia (SI)</option>
                        <option value="ee">Estonia (EE)</option>
                        <option value="lv">Latvia (LV)</option>
                        <option value="lt">Lithuania (LT)</option>
                        <option value="nz">New Zealand (NZ)</option>
                        <option value="sg">Singapore (SG)</option>
                        <option value="hk">Hong Kong (HK)</option>
                        <option value="jp">Japan (JP)</option>
                        <option value="kr">South Korea (KR)</option>
                        <option value="cn">China (CN)</option>
                        <option value="in">India (IN)</option>
                        <option value="br">Brazil (BR)</option>
                        <option value="mx">Mexico (MX)</option>
                        <option value="ar">Argentina (AR)</option>
                        <option value="za">South Africa (ZA)</option>
                        <option value="il">Israel (IL)</option>
                        <option value="ae">United Arab Emirates (AE)</option>
                        <option value="sa">Saudi Arabia (SA)</option>
                    </select>
                    <small>Two-letter ISO country code</small>
                </div>
                
                <div class="form-group">
                    <label for="date_window">Date Window</label>
                    <select id="date_window" name="date_window">
                        <option value="anytime">Anytime</option>
                        <option value="today">Today</option>
                        <option value="3days">Last 3 Days</option>
                        <option value="week" selected>Last Week</option>
                        <option value="month">Last Month</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="max_job_age">Max Job Age (Optional)</label>
                    <select id="max_job_age" name="max_job_age">
                        <option value="">No limit</option>
                        <option value="1month">1 Month</option>
                        <option value="2months">2 Months</option>
                        <option value="3months" selected>3 Months</option>
                        <option value="6months">6 Months</option>
                        <option value="1year">1 Year</option>
                    </select>
                    <small>Jobs older than this will not be processed or displayed. Default: 3 months</small>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" placeholder="your.email@example.com">
                    <small>Required for email notifications</small>
                </div>
                
                <div class="form-group">
                    <label for="skills">Skills</label>
                    <input type="text" id="skills" name="skills" placeholder="e.g., Python, DBT, Looker, SQL">
                </div>
                
                <div class="grid-3">
                    <div class="form-group">
                        <label for="min_salary">Min Salary</label>
                        <input type="number" id="min_salary" name="min_salary" placeholder="e.g., 80000" step="1000">
                    </div>
                    
                    <div class="form-group">
                        <label for="max_salary">Max Salary</label>
                        <input type="number" id="max_salary" name="max_salary" placeholder="e.g., 120000" step="1000">
                    </div>
                    
                    <div class="form-group">
                        <label for="currency">Currency</label>
                        <select id="currency" name="currency">
                            <option value="">USD (Default)</option>
                            <option value="USD">USD</option>
                            <option value="CAD">CAD</option>
                            <option value="EUR">EUR</option>
                            <option value="GBP">GBP</option>
                            <option value="AUD">AUD</option>
                        </select>
                        <small>Currency for salary preferences</small>
                    </div>
                </div>
                
                <div class="form-group checkbox-group">
                    <label>Remote Preference</label>
                    <label><input type="checkbox" name="remote_preference" value="remote"> Remote Only</label>
                    <label><input type="checkbox" name="remote_preference" value="hybrid"> Hybrid</label>
                    <label><input type="checkbox" name="remote_preference" value="onsite"> On-site Only</label>
                </div>
                
                <div class="form-group checkbox-group">
                    <label>Seniority</label>
                    <label><input type="checkbox" name="seniority" value="entry"> Entry Level</label>
                    <label><input type="checkbox" name="seniority" value="mid"> Mid Level</label>
                    <label><input type="checkbox" name="seniority" value="senior"> Senior</label>
                    <label><input type="checkbox" name="seniority" value="lead"> Lead</label>
                </div>
                
                <div class="form-group checkbox-group">
                    <label>Company Size Preference</label>
                    <label><input type="checkbox" name="company_size_preference" value="1-50"> 1-50 employees</label>
                    <label><input type="checkbox" name="company_size_preference" value="51-200"> 51-200 employees</label>
                    <label><input type="checkbox" name="company_size_preference" value="201-500"> 201-500 employees</label>
                    <label><input type="checkbox" name="company_size_preference" value="501-1000"> 501-1000 employees</label>
                    <label><input type="checkbox" name="company_size_preference" value="1001-5000"> 1001-5000 employees</label>
                    <label><input type="checkbox" name="company_size_preference" value="5001-10000"> 5001-10000 employees</label>
                    <label><input type="checkbox" name="company_size_preference" value="10000+"> 10000+ employees</label>
                </div>
                
                <div class="form-group checkbox-group">
                    <label>Employment Type Preference</label>
                    <label><input type="checkbox" name="employment_type_preference" value="FULLTIME"> Full-time</label>
                    <label><input type="checkbox" name="employment_type_preference" value="PARTTIME"> Part-time</label>
                    <label><input type="checkbox" name="employment_type_preference" value="CONTRACTOR"> Contractor</label>
                    <label><input type="checkbox" name="employment_type_preference" value="TEMPORARY"> Temporary</label>
                    <label><input type="checkbox" name="employment_type_preference" value="INTERN"> Intern</label>
                </div>
                
                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" name="is_active" checked>
                        Active (campaign will be used for job extraction)
                    </label>
                </div>
                
                <!-- Admin Only Section -->
                <div id="ranking-weights-section" class="hidden">
                    <div class="section-header">
                        <h3>Ranking Weights (Optional) - Admin Only</h3>
                        <span class="info-icon" id="rankingInfoIcon" title="Learn more about ranking weights">
                            <i class="fas fa-info"></i>
                        </span>
                    </div>
                    <p class="section-description">
                        Customize how jobs are ranked for this campaign. Weights are percentages and should sum to 100%. 
                        If not set, default weights from configuration will be used.
                    </p>
                    <div class="grid-2">
                        <div class="form-group">
                            <label for="ranking_weight_location_match">Location Match (%)</label>
                            <input type="number" id="ranking_weight_location_match" name="ranking_weight_location_match" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="ranking_weight_salary_match">Salary Match (%)</label>
                            <input type="number" id="ranking_weight_salary_match" name="ranking_weight_salary_match" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="ranking_weight_company_size_match">Company Size Match (%)</label>
                            <input type="number" id="ranking_weight_company_size_match" name="ranking_weight_company_size_match" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="ranking_weight_skills_match">Skills Match (%)</label>
                            <input type="number" id="ranking_weight_skills_match" name="ranking_weight_skills_match" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="ranking_weight_keyword_match">Keyword Match (%)</label>
                            <input type="number" id="ranking_weight_keyword_match" name="ranking_weight_keyword_match" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="ranking_weight_employment_type_match">Employment Type Match (%)</label>
                            <input type="number" id="ranking_weight_employment_type_match" name="ranking_weight_employment_type_match" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="ranking_weight_seniority_match">Seniority Match (%)</label>
                            <input type="number" id="ranking_weight_seniority_match" name="ranking_weight_seniority_match" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="ranking_weight_remote_type_match">Remote Type Match (%)</label>
                            <input type="number" id="ranking_weight_remote_type_match" name="ranking_weight_remote_type_match" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="ranking_weight_recency">Recency (%)</label>
                            <input type="number" id="ranking_weight_recency" name="ranking_weight_recency" min="0" max="100" step="0.1">
                        </div>
                    </div>
                    <div class="weight-total">
                        <strong>Total: <span id="weight-sum">0</span>%</strong>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary"><i class="fas fa-plus"></i> Create Campaign</button>
                    <a href="campaigns.html" class="btn btn-secondary"><i class="fas fa-times"></i> Cancel</a>
                </div>
            </form>
        </div>
    </main>
    
    <!-- Ranking Explanation Modal -->
    <div class="modal-overlay" id="rankingModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Ranking Weights Explanation</h3>
                <button class="modal-close" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-content">
                <p>
                    Ranking weights determine how jobs are scored and ranked for your campaign. Each weight is a percentage that indicates the importance of that factor in the overall job ranking score.
                </p>
                
                <h4>How It Works</h4>
                <p>
                    The system calculates a match score for each job based on how well it matches your campaign criteria. Each factor contributes to the final score based on its assigned weight. All weights should sum to 100% for optimal results.
                </p>
                
                <h4>Ranking Factors</h4>
                <ul>
                    <li><strong>Location Match:</strong> How well the job location matches your specified location preferences.</li>
                    <li><strong>Salary Match:</strong> How closely the job salary aligns with your salary range requirements.</li>
                    <li><strong>Company Size Match:</strong> How well the company size matches your preferences (startup, mid-size, large enterprise).</li>
                    <li><strong>Skills Match:</strong> How many of the required skills match your specified skill set.</li>
                    <li><strong>Keyword Match:</strong> How well the job description matches your search keywords and query.</li>
                    <li><strong>Employment Type Match:</strong> Match with your preferred employment type (full-time, part-time, contract, etc.).</li>
                    <li><strong>Seniority Match:</strong> Alignment with your seniority level preferences (junior, mid-level, senior, etc.).</li>
                    <li><strong>Remote Type Match:</strong> How well the remote work options match your preferences (remote, hybrid, on-site).</li>
                    <li><strong>Recency:</strong> How recently the job was posted (newer postings may get a slight boost).</li>
                </ul>
                
                <h4>Best Practices</h4>
                <ul>
                    <li>All weights must sum to exactly 100% for the ranking to work correctly.</li>
                    <li>Give higher weights to factors that are most important to you.</li>
                    <li>If you're not sure, leave fields empty to use default weights.</li>
                    <li>You can adjust weights at any time to fine-tune job rankings.</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script src="js/common.js"></script>
    <script src="js/sidebar.js"></script>
    <script src="js/loadSidebar.js"></script>
    <script src="js/mobileMenu.js"></script>
    <script src="js/addCampaign.js"></script>
</body>
</html>